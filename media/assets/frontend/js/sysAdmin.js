webpackJsonp([1],{1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.dirPath="/",t.gettext=window.gettext,t.siteRoot=window.app.config.siteRoot,t.loginUrl=window.app.config.loginUrl,t.avatarInfo=window.app.config.avatarInfo,t.logoPath=window.app.config.logoPath,t.mediaUrl=window.app.config.mediaUrl,t.siteTitle=window.app.config.siteTitle,t.siteName=window.app.config.siteName,t.logoWidth=window.app.config.logoWidth,t.logoHeight=window.app.config.logoHeight,t.isPro="True"===window.app.config.isPro,t.isDocs="True"===window.app.config.isDocs,t.lang=window.app.config.lang,t.fileServerRoot=window.app.config.fileServerRoot,t.seafileVersion=window.app.config.seafileVersion,t.serviceURL=window.app.config.serviceURL,t.appAvatarURL=window.app.config.avatarURL,t.faviconPath=window.app.config.faviconPath,t.loginBGPath=window.app.config.loginBGPath,t.trashReposExpireDays=window.app.pageOptions.trashReposExpireDays,t.dtableWebServer=window.app.pageOptions.dtableWebServer,t.seafileCollabServer=window.app.pageOptions.seafileCollabServer,t.name=window.app.pageOptions.name,t.contactEmail=window.app.pageOptions.contactEmail,t.username=window.app.pageOptions.username,t.canAddRepo=window.app.pageOptions.canAddRepo,t.canAddGroup=window.app.pageOptions.canAddGroup,t.canGenerateShareLink=window.app.pageOptions.canGenerateShareLink,t.canGenerateUploadLink=window.app.pageOptions.canGenerateUploadLink,t.canSendShareLinkEmail=window.app.pageOptions.canSendShareLinkEmail,t.canViewOrg="True"===window.app.pageOptions.canViewOrg,t.fileAuditEnabled=window.app.pageOptions.fileAuditEnabled,t.enableFileComment=!!window.app.pageOptions.enableFileComment,t.folderPermEnabled=window.app.pageOptions.folderPermEnabled,t.enableResetEncryptedRepoPassword="True"===window.app.pageOptions.enableResetEncryptedRepoPassword,t.isEmailConfigured="True"===window.app.pageOptions.isEmailConfigured,t.enableUploadFolder="True"===window.app.pageOptions.enableUploadFolder,t.enableResumableFileUpload="True"===window.app.pageOptions.enableResumableFileUpload,t.resumableUploadFileBlockSize=window.app.pageOptions.resumableUploadFileBlockSize,t.storages=window.app.pageOptions.storages,t.enableRepoSnapshotLabel=window.app.pageOptions.enableRepoSnapshotLabel,t.shareLinkPasswordMinLength=window.app.pageOptions.shareLinkPasswordMinLength,t.shareLinkExpireDaysMin=window.app.pageOptions.shareLinkExpireDaysMin,t.shareLinkExpireDaysMax=window.app.pageOptions.shareLinkExpireDaysMax,t.sideNavFooterCustomHtml=window.app.pageOptions.sideNavFooterCustomHtml,t.shareLinkExpireDaysDefault=window.app.pageOptions.shareLinkExpireDaysDefault,t.uploadLinkExpireDaysMin=window.app.pageOptions.uploadLinkExpireDaysMin,t.uploadLinkExpireDaysMax=window.app.pageOptions.uploadLinkExpireDaysMax,t.uploadLinkExpireDaysDefault=window.app.pageOptions.uploadLinkExpireDaysDefault,t.maxFileName=window.app.pageOptions.maxFileName,t.canPublishRepo=window.app.pageOptions.canPublishRepo,t.enableEncryptedLibrary=window.app.pageOptions.enableEncryptedLibrary,t.enableRepoHistorySetting=window.app.pageOptions.enableRepoHistorySetting,t.isSystemStaff=window.app.pageOptions.isSystemStaff,t.thumbnailSizeForOriginal=window.app.pageOptions.thumbnailSizeForOriginal,t.repoPasswordMinLength=window.app.pageOptions.repoPasswordMinLength,t.canAddPublicRepo=window.app.pageOptions.canAddPublicRepo,t.canInvitePeople=window.app.pageOptions.canInvitePeople,t.canLockUnlockFile=window.app.pageOptions.canLockUnlockFile,t.customNavItems=window.app.pageOptions.customNavItems,t.enableShowContactEmailWhenSearchUser=window.app.pageOptions.enableShowContactEmailWhenSearchUser,t.maxUploadFileSize=window.app.pageOptions.maxUploadFileSize,t.maxNumberOfFilesForFileupload=window.app.pageOptions.maxNumberOfFilesForFileupload,t.curNoteMsg=window.app.pageOptions.curNoteMsg,t.curNoteID=window.app.pageOptions.curNoteID,t.enableTC=window.app.pageOptions.enableTC,t.workspaceID=window.app.pageOptions.workspaceID,t.showLogoutIcon=window.app.pageOptions.showLogoutIcon,t.additionalShareDialogNote=window.app.pageOptions.additionalShareDialogNote,t.additionalAppBottomLinks=window.app.pageOptions.additionalAppBottomLinks,t.additionalAboutDialogLinks=window.app.pageOptions.additionalAboutDialogLinks,t.slug=window.wiki?window.wiki.config.slug:"",t.repoID=window.wiki?window.wiki.config.repoId:"",t.initialPath=window.wiki?window.wiki.config.initial_path:"",t.permission=window.wiki?"True"===window.wiki.config.permission:"",t.isDir=window.wiki?window.wiki.config.isDir:"",t.serviceUrl=window.wiki?window.wiki.config.serviceUrl:"",t.isPublicWiki=window.wiki?"True"===window.wiki.config.isPublicWiki:"",t.sharedToken=window.wiki?window.wiki.config.sharedToken:"",t.sharedType=window.wiki?window.wiki.config.sharedType:"",t.hasIndex=window.wiki?window.wiki.config.hasIndex:"",t.PER_PAGE=25,t.historyRepoID=window.fileHistory?window.fileHistory.pageOptions.repoID:"",t.repoName=window.fileHistory?window.fileHistory.pageOptions.repoName:"",t.filePath=window.fileHistory?window.fileHistory.pageOptions.filePath:"",t.fileName=window.fileHistory?window.fileHistory.pageOptions.fileName:"",t.useNewAPI=window.fileHistory?window.fileHistory.pageOptions.use_new_api:"",t.canDownload=window.fileHistory?window.fileHistory.pageOptions.can_download_file:"",t.canCompare=window.fileHistory?window.fileHistory.pageOptions.can_compare:"",t.draftFilePath=window.draft?window.draft.config.draftFilePath:"",t.draftOriginFilePath=window.draft?window.draft.config.draftOriginFilePath:"",t.draftFileName=window.draft?window.draft.config.draftFileName:"",t.draftID=window.draft?window.draft.config.draftID:"",t.draftRepoID=window.draft?window.draft.config.draftRepoID:"",t.author=window.draft?window.draft.config.author:"",t.authorAvatar=window.draft?window.draft.config.authorAvatar:"",t.originFileExists=window.draft?window.draft.config.originFileExists:"",t.draftFileExists=window.draft?window.draft.config.draftFileExists:"",t.draftStatus=window.draft?window.draft.config.draftStatus:"",t.draftPublishVersion=window.draft?window.draft.config.draftPublishVersion:"",t.originFileVersion=window.draft?window.draft.config.originFileVersion:"",t.filePermission=window.draft?window.draft.config.perm:"",t.orgID=window.org?window.org.pageOptions.orgID:"",t.invitationLink=window.org?window.org.pageOptions.invitationLink:"",t.orgMemberQuotaEnabled=window.org?window.org.pageOptions.orgMemberQuotaEnabled:"",t.constanceEnabled=window.sysadmin?window.sysadmin.pageOptions.constance_enabled:"",t.multiTenancy=window.sysadmin?window.sysadmin.pageOptions.multi_tenancy:"",t.multiInstitution=window.sysadmin?window.sysadmin.pageOptions.multi_institution:"",t.sysadminExtraEnabled=window.sysadmin?window.sysadmin.pageOptions.sysadmin_extra_enabled:"",t.enableGuestInvitation=window.sysadmin?window.sysadmin.pageOptions.enable_guest_invitation:"",t.enableTermsAndConditions=window.sysadmin?window.sysadmin.pageOptions.enable_terms_and_conditions:"",t.isDefaultAdmin=window.sysadmin?window.sysadmin.pageOptions.is_default_admin:"",t.enableFileScan=window.sysadmin?window.sysadmin.pageOptions.enable_file_scan:"",t.canViewSystemInfo=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_system_info:"",t.canViewStatistic=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_statistic:"",t.canConfigSystem=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_config_system:"",t.canManageLibrary=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_library:"",t.canManageUser=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_user:"",t.canManageGroup=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_group:"",t.canViewUserLog=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_user_log:"",t.canViewAdminLog=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_admin_log:"",t.otherPermission=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.other_permission:"",t.enableWorkWeixin=window.sysadmin?window.sysadmin.pageOptions.enable_work_weixin:"",t.enableDingtalk=window.sysadmin?window.sysadmin.pageOptions.enable_dingtalk:"",t.enableSysAdminViewRepo=window.sysadmin?window.sysadmin.pageOptions.enableSysAdminViewRepo:"",t.haveLDAP=window.sysadmin?window.sysadmin.pageOptions.haveLDAP:"",t.enableShareLinkReportAbuse=window.sysadmin?window.sysadmin.pageOptions.enable_share_link_report_abuse:""},1e3:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(16),d=n(7),f=a(d),p=n(3),m=n(1),h=n(33),g=a(h),v=n(8),b=a(v),y=n(63),E=a(y),w=n(4),_=n(730),S=a(_),x=n(107),P=a(x),C=n(67),O=a(C),D=n(5),M=a(D),k=window.sysadmin.pageOptions.availableRoles,T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPreviousPage=function(){n.props.getListByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getListByPage(n.props.currentPage+1)},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items;if(n)return u.default.createElement(b.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var o=u.default.createElement(g.default,null,u.default.createElement("h2",null,(0,m.gettext)("No organizations"))),i=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"20%"},(0,m.gettext)("Name")),u.default.createElement("th",{width:"20%"},(0,m.gettext)("Creator")),u.default.createElement("th",{width:"20%"},(0,m.gettext)("Role")),u.default.createElement("th",{width:"15%"},(0,m.gettext)("Space Used")),u.default.createElement("th",{width:"20%"},(0,m.gettext)("Created At")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(L,{key:n,item:t,updateRole:e.props.updateRole,deleteOrg:e.props.deleteOrg})}))),this.props.currentPage&&u.default.createElement(E.default,{currentPage:this.props.currentPage,hasNextPage:this.props.hasNextPage,curPerPage:this.props.curPerPage,resetPerPage:this.props.resetPerPage,gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage}));return r.length?i:o}}]),t}(s.Component),L=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.setState({isOpIconShown:!0})},n.handleMouseLeave=function(){n.setState({isOpIconShown:!1})},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen},function(){n.state.isDeleteDialogOpen&&w.seafileAPI.sysAdminGetOrg(n.props.item.org_id).then(function(e){var t='<span class="op-target">'+p.Utils.HTMLescape(e.data.org_name)+"</span>",a='<span class="op-target">'+p.Utils.HTMLescape(e.data.users_count)+"</span>",r='<span class="op-target">'+p.Utils.HTMLescape(e.data.repos_count)+"</span>",o=(0,m.gettext)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",t)+"<br/>"+(0,m.gettext)("{userCount} user(s) and {repoCount} libraries of this organization will also be deleted.").replace("{userCount}",a).replace("{repoCount}",r);n.setState({deleteDialogMsg:o})}).catch(function(e){var t=p.Utils.getErrorMsg(e);M.default.danger(t)})})},n.updateRole=function(e){n.props.updateRole(n.props.item.org_id,e)},n.deleteOrg=function(){M.default.notify((0,m.gettext)("It may take some time, please wait.")),n.props.deleteOrg(n.props.item.org_id)},n.state={isOpIconShown:!1,isDeleteDialogOpen:!1,deleteDialogMsg:""},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.state,n=t.isOpIconShown,a=t.isDeleteDialogOpen,r=t.deleteDialogMsg;return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,u.default.createElement(c.Link,{to:m.siteRoot+"sys/organizations/"+e.org_id+"/info/"},e.org_name)),u.default.createElement("td",null,u.default.createElement(O.default,{email:e.creator_email,name:e.creator_name})),u.default.createElement("td",null,u.default.createElement(S.default,{isTextMode:!0,isEditIconShow:n,currentRole:e.role,roleOptions:k,onRoleChanged:this.updateRole})),u.default.createElement("td",null,p.Utils.bytesToSize(e.quota_usage)+" / "+(e.quota>0?p.Utils.bytesToSize(e.quota):"--")),u.default.createElement("td",null,(0,f.default)(e.ctime).format("YYYY-MM-DD HH:mm:ss")),u.default.createElement("td",null,u.default.createElement("a",{href:"#",className:"action-icon sf2-icon-delete "+(n?"":"invisible"),title:(0,m.gettext)("Delete"),onClick:this.toggleDeleteDialog}))),a&&u.default.createElement(P.default,{title:(0,m.gettext)("Delete Organization"),message:r,executeOperation:this.deleteOrg,confirmBtnText:(0,m.gettext)("Delete"),toggleDialog:this.toggleDeleteDialog}))}}]),t}(s.Component);t.default=T},1001:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(86),p=a(f),m=n(6),h=n(1),g={index:d.default.number,department:d.default.object.isRequired,isChildrenShow:d.default.bool.isRequired,onChangeDepartment:d.default.func.isRequired,checkedDepartmentId:d.default.number.isRequired,importDepartmentDialogToggle:d.default.func.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleChildren=function(e){e.preventDefault(),e.stopPropagation(),n.setState({isChildrenShow:!n.state.isChildrenShow})},n.dropdownToggle=function(e){e.stopPropagation(),n.setState({dropdownOpen:!n.state.dropdownOpen})},n.onMouseEnter=function(){n.setState({active:!0})},n.onMouseLeave=function(){n.state.dropdownOpen||n.setState({active:!1})},n.importDepartmentDialogToggle=function(e){n.setState({active:!1}),n.props.importDepartmentDialogToggle(e)},n.renderTreeNodes=function(e){if(e.length>0)return e.map(function(e){return u.default.createElement(t,{key:e.id,department:e,isChildrenShow:n.state.isChildrenShow,onChangeDepartment:n.props.onChangeDepartment,checkedDepartmentId:n.props.checkedDepartmentId,importDepartmentDialogToggle:n.importDepartmentDialogToggle})})},n.changeDept=function(e){var t=n.props,a=t.department,r=t.checkedDepartmentId;n.props.onChangeDepartment(e),r!==a.id||n.state.isChildrenShow||n.setState({isChildrenShow:!0})},n.state={isChildrenShow:!1,dropdownOpen:!1,active:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){0===this.props.index&&(this.setState({isChildrenShow:!0}),this.props.onChangeDepartment(this.props.department.id))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isChildrenShow,a=t.department,r=t.checkedDepartmentId,o=(0,p.default)({"folder-toggle-icon fa fa-caret-down":a.children&&this.state.isChildrenShow,"folder-toggle-icon fa fa-caret-right":a.children&&!this.state.isChildrenShow}),i=(0,p.default)({"tree-node-inner":!0,"tree-node-inner-hover":this.state.active,"tree-node-hight-light":r===a.id});return u.default.createElement(s.Fragment,null,n&&u.default.createElement("div",{className:i,onClick:function(){return e.changeDept(a.id)},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("span",{className:"tree-node-icon",onClick:function(t){return e.toggleChildren(t)}},u.default.createElement("i",{className:o})),u.default.createElement("span",{className:"tree-node-text"},a.name),h.isPro&&u.default.createElement(m.Dropdown,{isOpen:this.state.dropdownOpen,toggle:function(t){return e.dropdownToggle(t)},direction:"down",style:this.state.active?{}:{opacity:0}},u.default.createElement(m.DropdownToggle,{tag:"i",className:"fa fa-ellipsis-v cursor-pointer attr-action-icon",title:(0,h.gettext)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.dropdownOpen}),u.default.createElement(m.DropdownMenu,{className:"drop-list",right:!0},u.default.createElement(m.DropdownItem,{onClick:this.importDepartmentDialogToggle.bind(this,a),id:a.id},"\u5bfc\u5165\u90e8\u95e8")))),this.state.isChildrenShow&&u.default.createElement("div",{className:"department-children"},a.children&&this.renderTreeNodes(a.children)))}}]),t}(s.Component);v.propTypes=g,t.default=v},1002:function(e,t){},1003:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(86),p=a(f),m=n(6),h=n(1),g={index:d.default.number,department:d.default.object.isRequired,isChildrenShow:d.default.bool.isRequired,onChangeDepartment:d.default.func.isRequired,checkedDepartmentId:d.default.number.isRequired,importDepartmentDialogToggle:d.default.func.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleChildren=function(e){e.preventDefault(),e.stopPropagation(),n.setState({isChildrenShow:!n.state.isChildrenShow})},n.dropdownToggle=function(e){e.stopPropagation(),n.setState({dropdownOpen:!n.state.dropdownOpen})},n.onMouseEnter=function(){n.setState({active:!0})},n.onMouseLeave=function(){n.state.dropdownOpen||n.setState({active:!1})},n.importDepartmentDialogToggle=function(e){n.setState({active:!1}),n.props.importDepartmentDialogToggle(e)},n.renderTreeNodes=function(e){if(e.length>0)return e.map(function(e){return u.default.createElement(t,{key:e.id,department:e,isChildrenShow:n.state.isChildrenShow,onChangeDepartment:n.props.onChangeDepartment,checkedDepartmentId:n.props.checkedDepartmentId,importDepartmentDialogToggle:n.importDepartmentDialogToggle})})},n.changeDept=function(e){var t=n.props,a=t.department,r=t.checkedDepartmentId;n.props.onChangeDepartment(e),r!==a.id||n.state.isChildrenShow||n.setState({isChildrenShow:!0})},n.state={isChildrenShow:!1,dropdownOpen:!1,active:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){0===this.props.index&&(this.setState({isChildrenShow:!0}),this.props.onChangeDepartment(this.props.department.id))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isChildrenShow,a=t.department,r=t.checkedDepartmentId,o=(0,p.default)({"folder-toggle-icon fa fa-caret-down":a.children&&this.state.isChildrenShow,"folder-toggle-icon fa fa-caret-right":a.children&&!this.state.isChildrenShow}),i=(0,p.default)({"tree-node-inner":!0,"tree-node-inner-hover":this.state.active,"tree-node-hight-light":r===a.id});return u.default.createElement(s.Fragment,null,n&&u.default.createElement("div",{className:i,onClick:function(){return e.changeDept(a.id)},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("span",{className:"tree-node-icon",onClick:function(t){return e.toggleChildren(t)}},u.default.createElement("i",{className:o})),u.default.createElement("span",{className:"tree-node-text"},a.name),h.isPro&&u.default.createElement(m.Dropdown,{isOpen:this.state.dropdownOpen,toggle:function(t){return e.dropdownToggle(t)},direction:"down",style:this.state.active?{}:{opacity:0}},u.default.createElement(m.DropdownToggle,{tag:"i",className:"fa fa-ellipsis-v cursor-pointer attr-action-icon",title:(0,h.gettext)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.dropdownOpen}),u.default.createElement(m.DropdownMenu,{className:"drop-list",right:!0},u.default.createElement(m.DropdownItem,{onClick:this.importDepartmentDialogToggle.bind(this,a),id:a.id},"\u5bfc\u5165\u90e8\u95e8")))),this.state.isChildrenShow&&u.default.createElement("div",{className:"department-children"},a.children&&this.renderTreeNodes(a.children)))}}]),t}(s.Component);v.propTypes=g,t.default=v},1004:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(354),h=a(m),g=n(2242),v=a(g);n(2243);var b={isUpdate:d.default.bool,oldTermObj:d.default.object,addTerm:d.default.func,updateTerm:d.default.func,toggle:d.default.func.isRequired},y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleNameChange=function(e){n.setState({name:e.target.value.trim()})},n.handleVersionNumberChange=function(e){n.setState({versionNumber:e.target.value.trim()})},n.handleTextChange=function(e){n.setState({text:e.target.value.trim()})},n.setActive=function(){n.setState({isActive:!0})},n.setInActive=function(){n.setState({isActive:!1})},n.addTerm=function(){var e=n.state,t=e.name,a=e.versionNumber,r=e.text,o=e.isActive;return""===t?void n.setState({errMsg:(0,p.gettext)("Name is required.")}):""===a?void n.setState({errMsg:(0,p.gettext)("Version Number is required.")}):isNaN(a)?void n.setState({errMsg:(0,p.gettext)("Version Number must be a number.")}):""===r?void n.setState({errMsg:(0,p.gettext)("Text is required.")}):void(n.props.isUpdate?n.props.updateTerm(t,a,r,o):n.props.addTerm(t,a,r,o))},n.onContentClick=function(){n.setState({isConditionsEditorDialogShow:!n.state.isConditionsEditorDialogShow})},n.onCloseEditorDialog=function(){n.setState({isConditionsEditorDialogShow:!1})},n.onUpdateContent=function(e){n.setState({text:e})},n.state={name:"",versionNumber:"",text:"",isActive:!0,errorMsg:"",isConditionsEditorDialogShow:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.oldTermObj;e&&this.setState({name:e.name,versionNumber:e.version_number,text:e.text,isActive:!(""===e.activate_time)})}},{key:"render",value:function(){var e=this.props.isUpdate?(0,p.gettext)("Update Terms and Conditions"):(0,p.gettext)("Add Terms and Conditions");return u.default.createElement(s.Fragment,null,u.default.createElement(f.Modal,{isOpen:!0,toggle:this.props.toggle},u.default.createElement(f.ModalHeader,{toggle:this.props.toggle},e),u.default.createElement(f.ModalBody,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,{for:"name"},(0,p.gettext)("Name")),u.default.createElement(f.Input,{id:"name",value:this.state.name,onChange:this.handleNameChange})),u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,null,(0,p.gettext)("Version Number")),u.default.createElement(f.Input,{value:this.state.versionNumber,onChange:this.handleVersionNumberChange})),u.default.createElement(f.FormGroup,{className:"form-content"},u.default.createElement(f.Label,null,(0,p.gettext)("Text")),u.default.createElement(h.default,{content:this.state.text,onContentClick:this.onContentClick})),u.default.createElement(f.FormGroup,{tag:"fieldset"},u.default.createElement(f.Label,null,(0,p.gettext)("Activated")),u.default.createElement(f.FormGroup,{check:!0},u.default.createElement(f.Label,{check:!0},u.default.createElement(f.Input,{type:"radio",checked:this.state.isActive,onChange:this.setActive})," ",(0,p.gettext)("On"))),u.default.createElement(f.FormGroup,{check:!0},u.default.createElement(f.Label,{check:!0},u.default.createElement(f.Input,{type:"radio",checked:!this.state.isActive,onChange:this.setInActive})," ",(0,p.gettext)("Off")))),this.state.errMsg&&u.default.createElement(f.Alert,{color:"danger"},this.state.errMsg)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"primary",onClick:this.addTerm},(0,p.gettext)("Submit")))),this.state.isConditionsEditorDialogShow&&u.default.createElement(v.default,{content:this.state.text,onCommit:this.onUpdateContent,onCloseEditorDialog:this.onCloseEditorDialog}))}}]),t}(u.default.Component);y.propTypes=b,t.default=y},1005:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(1),m={currentItem:d.default.string.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navItems=[{name:"all",urlPart:"all",text:(0,p.gettext)("All")},{name:"unhandled",urlPart:"unhandled",text:(0,p.gettext)("Unhandled")}],n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.currentItem;return u.default.createElement("div",{className:"cur-view-path tab-nav-container"},u.default.createElement("ul",{className:"nav"},this.navItems.map(function(t,n){return u.default.createElement("li",{className:"nav-item",key:n},u.default.createElement(f.Link,{to:p.siteRoot+"sys/virus-files/"+t.urlPart+"/",className:"nav-link"+(e==t.name?" active":"")},t.text))})))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},1006:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(1),m={currentItem:d.default.string.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navItems=[{name:"adminOperationLogs",urlPart:"admin-logs/operation",text:(0,p.gettext)("Admin Operation Logs")},{name:"adminLoginLogs",urlPart:"admin-logs/login",text:(0,p.gettext)("Admin Login Logs")}],n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.currentItem;return u.default.createElement("div",{className:"cur-view-path tab-nav-container"},u.default.createElement("ul",{className:"nav"},this.navItems.map(function(t,n){return u.default.createElement("li",{className:"nav-item",key:n},u.default.createElement(f.Link,{to:p.siteRoot+"sys/"+t.urlPart+"/",className:"nav-link"+(e==t.name?" active":"")},t.text))})))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},107:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m={title:d.default.string.isRequired,message:d.default.string.isRequired,confirmBtnText:d.default.string,executeOperation:d.default.func.isRequired,toggleDialog:d.default.func.isRequired},h=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.toggle=function(){a.props.toggleDialog()},a.executeOperation=function(){a.toggle(),a.props.executeOperation()},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.message,a=e.confirmBtnText;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},t),u.default.createElement(f.ModalBody,null,u.default.createElement("p",{dangerouslySetInnerHTML:{__html:n}})),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.executeOperation},a||(0,p.gettext)("Confirm"))))}}]),t}(s.Component);h.propTypes=m,t.default=h},109:function(e,t){},121:function(e,t){},122:function(e,t,n){"use strict";function a(){var e=window.app.config?window.app.config.lang:"zh-CH",t=void 0;switch(e){case"zh-CH":t=r;break;case"zh-tw":t=o;break;case"en":t=i;break;case"fr":t=l;break;case"de":t=s;break;case"es":case"es-ar":case"es-mx":t=u;break;case"pl":t=c;break;case"cs":t=d;break;default:t=r}return t}Object.defineProperty(t,"__esModule",{value:!0});var r=n(232),o=n(233),i=n(234),l=n(235),s=n(236),u=n(237),c=n(238),d=n(239);t.translateCalendar=a},123:function(e,t){},124:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(1),p={onCloseSidePanel:d.default.func,showCloseSidePanelIcon:d.default.bool},m=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.closeSide=function(){a.props.onCloseSidePanel()},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"top-logo"},u.default.createElement("a",{href:f.siteRoot,id:"logo"},u.default.createElement("img",{src:f.mediaUrl+f.logoPath,height:f.logoHeight,width:f.logoWidth,title:f.siteTitle,alt:"logo"})),this.props.showCloseSidePanelIcon&&u.default.createElement("a",{className:"sf2-icon-x1 sf-popover-close side-panel-close action-icon d-md-none",onClick:this.closeSide,title:"Close","aria-label":"Close"}))}}]),t}(u.default.Component);m.propTypes=p,t.default=m},125:function(e,t){},13:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=a(c),f=n(2),p=a(f),m={children:p.default.object.isRequired},h=document.getElementById("modal-wrapper"),g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.el=document.createElement("div"),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){h.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){h.removeChild(this.el)}},{key:"render",value:function(){return d.default.createPortal(this.props.children,this.el)}}]),t}(u.default.Component);g.propTypes=m,t.default=g},132:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(3),h={onFreezedItem:d.default.func.isRequired,onUnfreezedItem:d.default.func.isRequired,onMenuItemClick:d.default.func.isRequired,operations:d.default.array.isRequired,translateOperations:d.default.func.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMenuItemClick=function(e){var t=m.Utils.getEventData(e,"op");n.props.onMenuItemClick(t)},n.onDropdownToggleClick=function(e){n.toggleOperationMenu(e)},n.toggleOperationMenu=function(e){n.setState({isItemMenuShow:!n.state.isItemMenuShow},function(){n.state.isItemMenuShow?n.props.onFreezedItem():n.props.onUnfreezedItem()})},n.state={isItemMenuShow:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.operations,a=t.translateOperations;return u.default.createElement(f.Dropdown,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu},u.default.createElement(f.DropdownToggle,{tag:"i",className:"d-flex w-5 h-5 align-items-center justify-content-center sf-dropdown-toggle fa fa-ellipsis-v",title:(0,p.gettext)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow}),u.default.createElement(f.DropdownMenu,{className:"my-1 mr-2"},n.map(function(t,n){return u.default.createElement(f.DropdownItem,{key:n,"data-op":t,onClick:e.onMenuItemClick},a(t))})))}}]),t}(u.default.Component);g.propTypes=h,t.default=g},138:function(e,t){},15:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r={NEW_FOLDER:{key:"New Folder",value:(0,a.gettext)("New Folder")},NEW_FILE:{key:"New File",value:(0,a.gettext)("New File")},SHARE:{key:"Share",value:(0,a.gettext)("Share")},DOWNLOAD:{key:"Download",value:(0,a.gettext)("Download")},DELETE:{key:"Delete",value:(0,a.gettext)("Delete")},RENAME:{key:"Rename",value:(0,a.gettext)("Rename")},MOVE:{key:"Move",value:(0,a.gettext)("Move")},COPY:{key:"Copy",value:(0,a.gettext)("Copy")},PERMISSION:{key:"Permission",value:(0,a.gettext)("Permission")},DETAILS:{key:"Details",value:(0,a.gettext)("Details")},OPEN_VIA_CLIENT:{key:"Open via Client",value:(0,a.gettext)("Open via Client")},LOCK:{key:"Lock",value:(0,a.gettext)("Lock")},UNLOCK:{key:"Unlock",value:(0,a.gettext)("Unlock")},COMMENT:{key:"Comment",value:(0,a.gettext)("Comment")},HISTORY:{key:"History",value:(0,a.gettext)("History")},ACCESS_LOG:{key:"Access Log",value:(0,a.gettext)("Access Log")},TAGS:{key:"Tags",value:(0,a.gettext)("Tags")},RELATED_FILES:{key:"Related Files",value:(0,a.gettext)("Related Files")}};t.default=r},151:function(e,t){},152:function(e,t){},153:function(e,t){},178:function(e,t,n){"use strict";function a(e){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function l(e,t){return!t||"object"!==a(t)&&"function"!==typeof t?d(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f.apply(this,arguments)}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){m(e,t,n[t])})}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(null==e)return{};var n,a,r=g(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function g(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.Collapse=t.collapseDuration=t.Fade=void 0;var v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};a.get||a.set?Object.defineProperty(t,n,a):t[n]=e[n]}return t.default=e,t}(n(0)),b=n(260),y=function(e){var t=e.component,n=e.duration,a=void 0===n?1:n,r=e.in,o=(e.onExited,h(e,["component","duration","in","onExited"])),i={entering:{opacity:0},entered:{opacity:1,transition:"opacity ".concat(a,"ms")},exiting:{opacity:0},exited:{opacity:0}};return v.default.createElement(b.Transition,{mountOnEnter:!0,unmountOnExit:!0,in:r,timeout:a},function(e){var n={style:p({},i[e])};return v.default.createElement(t,f({innerProps:n},o))})};t.Fade=y;var E=260;t.collapseDuration=E;var w=function(e){function t(){var e,n;r(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=l(this,(e=s(t)).call.apply(e,[this].concat(o))),m(d(d(n)),"duration",E),m(d(d(n)),"rafID",void 0),m(d(d(n)),"state",{width:"auto"}),m(d(d(n)),"transition",{exiting:{width:0,transition:"width ".concat(n.duration,"ms ease-out")},exited:{width:0}}),m(d(d(n)),"getWidth",function(e){e&&isNaN(n.state.width)&&(n.rafID=window.requestAnimationFrame(function(){var t=e.getBoundingClientRect(),a=t.width;n.setState({width:a})}))}),m(d(d(n)),"getStyle",function(e){return{overflow:"hidden",whiteSpace:"nowrap",width:e}}),m(d(d(n)),"getTransition",function(e){return n.transition[e]}),n}return u(t,e),i(t,[{key:"componentWillUnmount",value:function(){this.rafID&&window.cancelAnimationFrame(this.rafID)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.in,r=this.state.width;return v.default.createElement(b.Transition,{enter:!1,mountOnEnter:!0,unmountOnExit:!0,in:a,timeout:this.duration},function(t){var a=p({},e.getStyle(r),e.getTransition(t));return v.default.createElement("div",{ref:e.getWidth,style:a},n)})}}]),t}(v.Component);t.Collapse=w},192:function(e,t){},193:function(e,t,n){"use strict";var a=n(585),r=new a.a;t.a=r},20:function(e,t,n){"use strict";n(49),n(50),"undefined"===typeof Promise&&(n(51).enable(),window.Promise=n(52)),n(46),Object.assign=n(34)},202:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(35),r=function(e){if(e)return a.Range.isCollapsed(e)}},204:function(e,t){},21:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.strChineseFirstPY="YDYQSXMWZSSXJBYMGCCZQPSSQBYCDSCDQLDYLYBSSJGYZZJJFKCCLZDHWDWZJLJPFYYNWJJTMYHZWZHFLZPPQHGSCYYYNJQYXXGJHHSDSJNKKTMOMLCRXYPSNQSECCQZGGLLYJLMYZZSECYKYYHQWJSSGGYXYZYJWWKDJHYCHMYXJTLXJYQBYXZLDWRDJRWYSRLDZJPCBZJJBRCFTLECZSTZFXXZHTRQHYBDLYCZSSYMMRFMYQZPWWJJYFCRWFDFZQPYDDWYXKYJAWJFFXYPSFTZYHHYZYSWCJYXSCLCXXWZZXNBGNNXBXLZSZSBSGPYSYZDHMDZBQBZCWDZZYYTZHBTSYYBZGNTNXQYWQSKBPHHLXGYBFMJEBJHHGQTJCYSXSTKZHLYCKGLYSMZXYALMELDCCXGZYRJXSDLTYZCQKCNNJWHJTZZCQLJSTSTBNXBTYXCEQXGKWJYFLZQLYHYXSPSFXLMPBYSXXXYDJCZYLLLSJXFHJXPJBTFFYABYXBHZZBJYZLWLCZGGBTSSMDTJZXPTHYQTGLJSCQFZKJZJQNLZWLSLHDZBWJNCJZYZSQQYCQYRZCJJWYBRTWPYFTWEXCSKDZCTBZHYZZYYJXZCFFZZMJYXXSDZZOTTBZLQWFCKSZSXFYRLNYJMBDTHJXSQQCCSBXYYTSYFBXDZTGBCNSLCYZZPSAZYZZSCJCSHZQYDXLBPJLLMQXTYDZXSQJTZPXLCGLQTZWJBHCTSYJSFXYEJJTLBGXSXJMYJQQPFZASYJNTYDJXKJCDJSZCBARTDCLYJQMWNQNCLLLKBYBZZSYHQQLTWLCCXTXLLZNTYLNEWYZYXCZXXGRKRMTCNDNJTSYYSSDQDGHSDBJGHRWRQLYBGLXHLGTGXBQJDZPYJSJYJCTMRNYMGRZJCZGJMZMGXMPRYXKJNYMSGMZJYMKMFXMLDTGFBHCJHKYLPFMDXLQJJSMTQGZSJLQDLDGJYCALCMZCSDJLLNXDJFFFFJCZFMZFFPFKHKGDPSXKTACJDHHZDDCRRCFQYJKQCCWJDXHWJLYLLZGCFCQDSMLZPBJJPLSBCJGGDCKKDEZSQCCKJGCGKDJTJDLZYCXKLQSCGJCLTFPCQCZGWPJDQYZJJBYJHSJDZWGFSJGZKQCCZLLPSPKJGQJHZZLJPLGJGJJTHJJYJZCZMLZLYQBGJWMLJKXZDZNJQSYZMLJLLJKYWXMKJLHSKJGBMCLYYMKXJQLBMLLKMDXXKWYXYSLMLPSJQQJQXYXFJTJDXMXXLLCXQBSYJBGWYMBGGBCYXPJYGPEPFGDJGBHBNSQJYZJKJKHXQFGQZKFHYGKHDKLLSDJQXPQYKYBNQSXQNSZSWHBSXWHXWBZZXDMNSJBSBKBBZKLYLXGWXDRWYQZMYWSJQLCJXXJXKJEQXSCYETLZHLYYYSDZPAQYZCMTLSHTZCFYZYXYLJSDCJQAGYSLCQLYYYSHMRQQKLDXZSCSSSYDYCJYSFSJBFRSSZQSBXXPXJYSDRCKGJLGDKZJZBDKTCSYQPYHSTCLDJDHMXMCGXYZHJDDTMHLTXZXYLYMOHYJCLTYFBQQXPFBDFHHTKSQHZYYWCNXXCRWHOWGYJLEGWDQCWGFJYCSNTMYTOLBYGWQWESJPWNMLRYDZSZTXYQPZGCWXHNGPYXSHMYQJXZTDPPBFYHZHTJYFDZWKGKZBLDNTSXHQEEGZZYLZMMZYJZGXZXKHKSTXNXXWYLYAPSTHXDWHZYMPXAGKYDXBHNHXKDPJNMYHYLPMGOCSLNZHKXXLPZZLBMLSFBHHGYGYYGGBHSCYAQTYWLXTZQCEZYDQDQMMHTKLLSZHLSJZWFYHQSWSCWLQAZYNYTLSXTHAZNKZZSZZLAXXZWWCTGQQTDDYZTCCHYQZFLXPSLZYGPZSZNGLNDQTBDLXGTCTAJDKYWNSYZLJHHZZCWNYYZYWMHYCHHYXHJKZWSXHZYXLYSKQYSPSLYZWMYPPKBYGLKZHTYXAXQSYSHXASMCHKDSCRSWJPWXSGZJLWWSCHSJHSQNHCSEGNDAQTBAALZZMSSTDQJCJKTSCJAXPLGGXHHGXXZCXPDMMHLDGTYBYSJMXHMRCPXXJZCKZXSHMLQXXTTHXWZFKHCCZDYTCJYXQHLXDHYPJQXYLSYYDZOZJNYXQEZYSQYAYXWYPDGXDDXSPPYZNDLTWRHXYDXZZJHTCXMCZLHPYYYYMHZLLHNXMYLLLMDCPPXHMXDKYCYRDLTXJCHHZZXZLCCLYLNZSHZJZZLNNRLWHYQSNJHXYNTTTKYJPYCHHYEGKCTTWLGQRLGGTGTYGYHPYHYLQYQGCWYQKPYYYTTTTLHYHLLTYTTSPLKYZXGZWGPYDSSZZDQXSKCQNMJJZZBXYQMJRTFFBTKHZKBXLJJKDXJTLBWFZPPTKQTZTGPDGNTPJYFALQMKGXBDCLZFHZCLLLLADPMXDJHLCCLGYHDZFGYDDGCYYFGYDXKSSEBDHYKDKDKHNAXXYBPBYYHXZQGAFFQYJXDMLJCSQZLLPCHBSXGJYNDYBYQSPZWJLZKSDDTACTBXZDYZYPJZQSJNKKTKNJDJGYYPGTLFYQKASDNTCYHBLWDZHBBYDWJRYGKZYHEYYFJMSDTYFZJJHGCXPLXHLDWXXJKYTCYKSSSMTWCTTQZLPBSZDZWZXGZAGYKTYWXLHLSPBCLLOQMMZSSLCMBJCSZZKYDCZJGQQDSMCYTZQQLWZQZXSSFPTTFQMDDZDSHDTDWFHTDYZJYQJQKYPBDJYYXTLJHDRQXXXHAYDHRJLKLYTWHLLRLLRCXYLBWSRSZZSYMKZZHHKYHXKSMDSYDYCJPBZBSQLFCXXXNXKXWYWSDZYQOGGQMMYHCDZTTFJYYBGSTTTYBYKJDHKYXBELHTYPJQNFXFDYKZHQKZBYJTZBXHFDXKDASWTAWAJLDYJSFHBLDNNTNQJTJNCHXFJSRFWHZFMDRYJYJWZPDJKZYJYMPCYZNYNXFBYTFYFWYGDBNZZZDNYTXZEMMQBSQEHXFZMBMFLZZSRXYMJGSXWZJSPRYDJSJGXHJJGLJJYNZZJXHGXKYMLPYYYCXYTWQZSWHWLYRJLPXSLSXMFSWWKLCTNXNYNPSJSZHDZEPTXMYYWXYYSYWLXJQZQXZDCLEEELMCPJPCLWBXSQHFWWTFFJTNQJHJQDXHWLBYZNFJLALKYYJLDXHHYCSTYYWNRJYXYWTRMDRQHWQCMFJDYZMHMYYXJWMYZQZXTLMRSPWWCHAQBXYGZYPXYYRRCLMPYMGKSJSZYSRMYJSNXTPLNBAPPYPYLXYYZKYNLDZYJZCZNNLMZHHARQMPGWQTZMXXMLLHGDZXYHXKYXYCJMFFYYHJFSBSSQLXXNDYCANNMTCJCYPRRNYTYQNYYMBMSXNDLYLYSLJRLXYSXQMLLYZLZJJJKYZZCSFBZXXMSTBJGNXYZHLXNMCWSCYZYFZLXBRNNNYLBNRTGZQYSATSWRYHYJZMZDHZGZDWYBSSCSKXSYHYTXXGCQGXZZSHYXJSCRHMKKBXCZJYJYMKQHZJFNBHMQHYSNJNZYBKNQMCLGQHWLZNZSWXKHLJHYYBQLBFCDSXDLDSPFZPSKJYZWZXZDDXJSMMEGJSCSSMGCLXXKYYYLNYPWWWGYDKZJGGGZGGSYCKNJWNJPCXBJJTQTJWDSSPJXZXNZXUMELPXFSXTLLXCLJXJJLJZXCTPSWXLYDHLYQRWHSYCSQYYBYAYWJJJQFWQCQQCJQGXALDBZZYJGKGXPLTZYFXJLTPADKYQHPMATLCPDCKBMTXYBHKLENXDLEEGQDYMSAWHZMLJTWYGXLYQZLJEEYYBQQFFNLYXRDSCTGJGXYYNKLLYQKCCTLHJLQMKKZGCYYGLLLJDZGYDHZWXPYSJBZKDZGYZZHYWYFQYTYZSZYEZZLYMHJJHTSMQWYZLKYYWZCSRKQYTLTDXWCTYJKLWSQZWBDCQYNCJSRSZJLKCDCDTLZZZACQQZZDDXYPLXZBQJYLZLLLQDDZQJYJYJZYXNYYYNYJXKXDAZWYRDLJYYYRJLXLLDYXJCYWYWNQCCLDDNYYYNYCKCZHXXCCLGZQJGKWPPCQQJYSBZZXYJSQPXJPZBSBDSFNSFPZXHDWZTDWPPTFLZZBZDMYYPQJRSDZSQZSQXBDGCPZSWDWCSQZGMDHZXMWWFYBPDGPHTMJTHZSMMBGZMBZJCFZWFZBBZMQCFMBDMCJXLGPNJBBXGYHYYJGPTZGZMQBQTCGYXJXLWZKYDPDYMGCFTPFXYZTZXDZXTGKMTYBBCLBJASKYTSSQYYMSZXFJEWLXLLSZBQJJJAKLYLXLYCCTSXMCWFKKKBSXLLLLJYXTYLTJYYTDPJHNHNNKBYQNFQYYZBYYESSESSGDYHFHWTCJBSDZZTFDMXHCNJZYMQWSRYJDZJQPDQBBSTJGGFBKJBXTGQHNGWJXJGDLLTHZHHYYYYYYSXWTYYYCCBDBPYPZYCCZYJPZYWCBDLFWZCWJDXXHYHLHWZZXJTCZLCDPXUJCZZZLYXJJTXPHFXWPYWXZPTDZZBDZCYHJHMLXBQXSBYLRDTGJRRCTTTHYTCZWMXFYTWWZCWJWXJYWCSKYBZSCCTZQNHXNWXXKHKFHTSWOCCJYBCMPZZYKBNNZPBZHHZDLSYDDYTYFJPXYNGFXBYQXCBHXCPSXTYZDMKYSNXSXLHKMZXLYHDHKWHXXSSKQYHHCJYXGLHZXCSNHEKDTGZXQYPKDHEXTYKCNYMYYYPKQYYYKXZLTHJQTBYQHXBMYHSQCKWWYLLHCYYLNNEQXQWMCFBDCCMLJGGXDQKTLXKGNQCDGZJWYJJLYHHQTTTNWCHMXCXWHWSZJYDJCCDBQCDGDNYXZTHCQRXCBHZTQCBXWGQWYYBXHMBYMYQTYEXMQKYAQYRGYZSLFYKKQHYSSQYSHJGJCNXKZYCXSBXYXHYYLSTYCXQTHYSMGSCPMMGCCCCCMTZTASMGQZJHKLOSQYLSWTMXSYQKDZLJQQYPLSYCZTCQQPBBQJZCLPKHQZYYXXDTDDTSJCXFFLLCHQXMJLWCJCXTSPYCXNDTJSHJWXDQQJSKXYAMYLSJHMLALYKXCYYDMNMDQMXMCZNNCYBZKKYFLMCHCMLHXRCJJHSYLNMTJZGZGYWJXSRXCWJGJQHQZDQJDCJJZKJKGDZQGJJYJYLXZXXCDQHHHEYTMHLFSBDJSYYSHFYSTCZQLPBDRFRZTZYKYWHSZYQKWDQZRKMSYNBCRXQBJYFAZPZZEDZCJYWBCJWHYJBQSZYWRYSZPTDKZPFPBNZTKLQYHBBZPNPPTYZZYBQNYDCPJMMCYCQMCYFZZDCMNLFPBPLNGQJTBTTNJZPZBBZNJKLJQYLNBZQHKSJZNGGQSZZKYXSHPZSNBCGZKDDZQANZHJKDRTLZLSWJLJZLYWTJNDJZJHXYAYNCBGTZCSSQMNJPJYTYSWXZFKWJQTKHTZPLBHSNJZSYZBWZZZZLSYLSBJHDWWQPSLMMFBJDWAQYZTCJTBNNWZXQXCDSLQGDSDPDZHJTQQPSWLYYJZLGYXYZLCTCBJTKTYCZJTQKBSJLGMGZDMCSGPYNJZYQYYKNXRPWSZXMTNCSZZYXYBYHYZAXYWQCJTLLCKJJTJHGDXDXYQYZZBYWDLWQCGLZGJGQRQZCZSSBCRPCSKYDZNXJSQGXSSJMYDNSTZTPBDLTKZWXQWQTZEXNQCZGWEZKSSBYBRTSSSLCCGBPSZQSZLCCGLLLZXHZQTHCZMQGYZQZNMCOCSZJMMZSQPJYGQLJYJPPLDXRGZYXCCSXHSHGTZNLZWZKJCXTCFCJXLBMQBCZZWPQDNHXLJCTHYZLGYLNLSZZPCXDSCQQHJQKSXZPBAJYEMSMJTZDXLCJYRYYNWJBNGZZTMJXLTBSLYRZPYLSSCNXPHLLHYLLQQZQLXYMRSYCXZLMMCZLTZSDWTJJLLNZGGQXPFSKYGYGHBFZPDKMWGHCXMSGDXJMCJZDYCABXJDLNBCDQYGSKYDQTXDJJYXMSZQAZDZFSLQXYJSJZYLBTXXWXQQZBJZUFBBLYLWDSLJHXJYZJWTDJCZFQZQZZDZSXZZQLZCDZFJHYSPYMPQZMLPPLFFXJJNZZYLSJEYQZFPFZKSYWJJJHRDJZZXTXXGLGHYDXCSKYSWMMZCWYBAZBJKSHFHJCXMHFQHYXXYZFTSJYZFXYXPZLCHMZMBXHZZSXYFYMNCWDABAZLXKTCSHHXKXJJZJSTHYGXSXYYHHHJWXKZXSSBZZWHHHCWTZZZPJXSNXQQJGZYZYWLLCWXZFXXYXYHXMKYYSWSQMNLNAYCYSPMJKHWCQHYLAJJMZXHMMCNZHBHXCLXTJPLTXYJHDYYLTTXFSZHYXXSJBJYAYRSMXYPLCKDUYHLXRLNLLSTYZYYQYGYHHSCCSMZCTZQXKYQFPYYRPFFLKQUNTSZLLZMWWTCQQYZWTLLMLMPWMBZSSTZRBPDDTLQJJBXZCSRZQQYGWCSXFWZLXCCRSZDZMCYGGDZQSGTJSWLJMYMMZYHFBJDGYXCCPSHXNZCSBSJYJGJMPPWAFFYFNXHYZXZYLREMZGZCYZSSZDLLJCSQFNXZKPTXZGXJJGFMYYYSNBTYLBNLHPFZDCYFBMGQRRSSSZXYSGTZRNYDZZCDGPJAFJFZKNZBLCZSZPSGCYCJSZLMLRSZBZZLDLSLLYSXSQZQLYXZLSKKBRXBRBZCYCXZZZEEYFGKLZLYYHGZSGZLFJHGTGWKRAAJYZKZQTSSHJJXDCYZUYJLZYRZDQQHGJZXSSZBYKJPBFRTJXLLFQWJHYLQTYMBLPZDXTZYGBDHZZRBGXHWNJTJXLKSCFSMWLSDQYSJTXKZSCFWJLBXFTZLLJZLLQBLSQMQQCGCZFPBPHZCZJLPYYGGDTGWDCFCZQYYYQYSSCLXZSKLZZZGFFCQNWGLHQYZJJCZLQZZYJPJZZBPDCCMHJGXDQDGDLZQMFGPSYTSDYFWWDJZJYSXYYCZCYHZWPBYKXRYLYBHKJKSFXTZJMMCKHLLTNYYMSYXYZPYJQYCSYCWMTJJKQYRHLLQXPSGTLYYCLJSCPXJYZFNMLRGJJTYZBXYZMSJYJHHFZQMSYXRSZCWTLRTQZSSTKXGQKGSPTGCZNJSJCQCXHMXGGZTQYDJKZDLBZSXJLHYQGGGTHQSZPYHJHHGYYGKGGCWJZZYLCZLXQSFTGZSLLLMLJSKCTBLLZZSZMMNYTPZSXQHJCJYQXYZXZQZCPSHKZZYSXCDFGMWQRLLQXRFZTLYSTCTMJCXJJXHJNXTNRZTZFQYHQGLLGCXSZSJDJLJCYDSJTLNYXHSZXCGJZYQPYLFHDJSBPCCZHJJJQZJQDYBSSLLCMYTTMQTBHJQNNYGKYRQYQMZGCJKPDCGMYZHQLLSLLCLMHOLZGDYYFZSLJCQZLYLZQJESHNYLLJXGJXLYSYYYXNBZLJSSZCQQCJYLLZLTJYLLZLLBNYLGQCHXYYXOXCXQKYJXXXYKLXSXXYQXCYKQXQCSGYXXYQXYGYTQOHXHXPYXXXULCYEYCHZZCBWQBBWJQZSCSZSSLZYLKDESJZWMYMCYTSDSXXSCJPQQSQYLYYZYCMDJDZYWCBTJSYDJKCYDDJLBDJJSODZYSYXQQYXDHHGQQYQHDYXWGMMMAJDYBBBPPBCMUUPLJZSMTXERXJMHQNUTPJDCBSSMSSSTKJTSSMMTRCPLZSZMLQDSDMJMQPNQDXCFYNBFSDQXYXHYAYKQYDDLQYYYSSZBYDSLNTFQTZQPZMCHDHCZCWFDXTMYQSPHQYYXSRGJCWTJTZZQMGWJJTJHTQJBBHWZPXXHYQFXXQYWYYHYSCDYDHHQMNMTMWCPBSZPPZZGLMZFOLLCFWHMMSJZTTDHZZYFFYTZZGZYSKYJXQYJZQBHMBZZLYGHGFMSHPZFZSNCLPBQSNJXZSLXXFPMTYJYGBXLLDLXPZJYZJYHHZCYWHJYLSJEXFSZZYWXKZJLUYDTMLYMQJPWXYHXSKTQJEZRPXXZHHMHWQPWQLYJJQJJZSZCPHJLCHHNXJLQWZJHBMZYXBDHHYPZLHLHLGFWLCHYYTLHJXCJMSCPXSTKPNHQXSRTYXXTESYJCTLSSLSTDLLLWWYHDHRJZSFGXTSYCZYNYHTDHWJSLHTZDQDJZXXQHGYLTZPHCSQFCLNJTCLZPFSTPDYNYLGMJLLYCQHYSSHCHYLHQYQTMZYPBYWRFQYKQSYSLZDQJMPXYYSSRHZJNYWTQDFZBWWTWWRXCWHGYHXMKMYYYQMSMZHNGCEPMLQQMTCWCTMMPXJPJJHFXYYZSXZHTYBMSTSYJTTQQQYYLHYNPYQZLCYZHZWSMYLKFJXLWGXYPJYTYSYXYMZCKTTWLKSMZSYLMPWLZWXWQZSSAQSYXYRHSSNTSRAPXCPWCMGDXHXZDZYFJHGZTTSBJHGYZSZYSMYCLLLXBTYXHBBZJKSSDMALXHYCFYGMQYPJYCQXJLLLJGSLZGQLYCJCCZOTYXMTMTTLLWTGPXYMZMKLPSZZZXHKQYSXCTYJZYHXSHYXZKXLZWPSQPYHJWPJPWXQQYLXSDHMRSLZZYZWTTCYXYSZZSHBSCCSTPLWSSCJCHNLCGCHSSPHYLHFHHXJSXYLLNYLSZDHZXYLSXLWZYKCLDYAXZCMDDYSPJTQJZLNWQPSSSWCTSTSZLBLNXSMNYYMJQBQHRZWTYYDCHQLXKPZWBGQYBKFCMZWPZLLYYLSZYDWHXPSBCMLJBSCGBHXLQHYRLJXYSWXWXZSLDFHLSLYNJLZYFLYJYCDRJLFSYZFSLLCQYQFGJYHYXZLYLMSTDJCYHBZLLNWLXXYGYYHSMGDHXXHHLZZJZXCZZZCYQZFNGWPYLCPKPYYPMCLQKDGXZGGWQBDXZZKZFBXXLZXJTPJPTTBYTSZZDWSLCHZHSLTYXHQLHYXXXYYZYSWTXZKHLXZXZPYHGCHKCFSYHUTJRLXFJXPTZTWHPLYXFCRHXSHXKYXXYHZQDXQWULHYHMJTBFLKHTXCWHJFWJCFPQRYQXCYYYQYGRPYWSGSUNGWCHKZDXYFLXXHJJBYZWTSXXNCYJJYMSWZJQRMHXZWFQSYLZJZGBHYNSLBGTTCSYBYXXWXYHXYYXNSQYXMQYWRGYQLXBBZLJSYLPSYTJZYHYZAWLRORJMKSCZJXXXYXCHDYXRYXXJDTSQFXLYLTSFFYXLMTYJMJUYYYXLTZCSXQZQHZXLYYXZHDNBRXXXJCTYHLBRLMBRLLAXKYLLLJLYXXLYCRYLCJTGJCMTLZLLCYZZPZPCYAWHJJFYBDYYZSMPCKZDQYQPBPCJPDCYZMDPBCYYDYCNNPLMTMLRMFMMGWYZBSJGYGSMZQQQZTXMKQWGXLLPJGZBQCDJJJFPKJKCXBLJMSWMDTQJXLDLPPBXCWRCQFBFQJCZAHZGMYKPHYYHZYKNDKZMBPJYXPXYHLFPNYYGXJDBKXNXHJMZJXSTRSTLDXSKZYSYBZXJLXYSLBZYSLHXJPFXPQNBYLLJQKYGZMCYZZYMCCSLCLHZFWFWYXZMWSXTYNXJHPYYMCYSPMHYSMYDYSHQYZCHMJJMZCAAGCFJBBHPLYZYLXXSDJGXDHKXXTXXNBHRMLYJSLTXMRHNLXQJXYZLLYSWQGDLBJHDCGJYQYCMHWFMJYBMBYJYJWYMDPWHXQLDYGPDFXXBCGJSPCKRSSYZJMSLBZZJFLJJJLGXZGYXYXLSZQYXBEXYXHGCXBPLDYHWETTWWCJMBTXCHXYQXLLXFLYXLLJLSSFWDPZSMYJCLMWYTCZPCHQEKCQBWLCQYDPLQPPQZQFJQDJHYMMCXTXDRMJWRHXCJZYLQXDYYNHYYHRSLSRSYWWZJYMTLTLLGTQCJZYABTCKZCJYCCQLJZQXALMZYHYWLWDXZXQDLLQSHGPJFJLJHJABCQZDJGTKHSSTCYJLPSWZLXZXRWGLDLZRLZXTGSLLLLZLYXXWGDZYGBDPHZPBRLWSXQBPFDWOFMWHLYPCBJCCLDMBZPBZZLCYQXLDOMZBLZWPDWYYGDSTTHCSQSCCRSSSYSLFYBFNTYJSZDFNDPDHDZZMBBLSLCMYFFGTJJQWFTMTPJWFNLBZCMMJTGBDZLQLPYFHYYMJYLSDCHDZJWJCCTLJCLDTLJJCPDDSQDSSZYBNDBJLGGJZXSXNLYCYBJXQYCBYLZCFZPPGKCXZDZFZTJJFJSJXZBNZYJQTTYJYHTYCZHYMDJXTTMPXSPLZCDWSLSHXYPZGTFMLCJTYCBPMGDKWYCYZCDSZZYHFLYCTYGWHKJYYLSJCXGYWJCBLLCSNDDBTZBSCLYZCZZSSQDLLMQYYHFSLQLLXFTYHABXGWNYWYYPLLSDLDLLBJCYXJZMLHLJDXYYQYTDLLLBUGBFDFBBQJZZMDPJHGCLGMJJPGAEHHBWCQXAXHHHZCHXYPHJAXHLPHJPGPZJQCQZGJJZZUZDMQYYBZZPHYHYBWHAZYJHYKFGDPFQSDLZMLJXKXGALXZDAGLMDGXMWZQYXXDXXPFDMMSSYMPFMDMMKXKSYZYSHDZKXSYSMMZZZMSYDNZZCZXFPLSTMZDNMXCKJMZTYYMZMZZMSXHHDCZJEMXXKLJSTLWLSQLYJZLLZJSSDPPMHNLZJCZYHMXXHGZCJMDHXTKGRMXFWMCGMWKDTKSXQMMMFZZYDKMSCLCMPCGMHSPXQPZDSSLCXKYXTWLWJYAHZJGZQMCSNXYYMMPMLKJXMHLMLQMXCTKZMJQYSZJSYSZHSYJZJCDAJZYBSDQJZGWZQQXFKDMSDJLFWEHKZQKJPEYPZYSZCDWYJFFMZZYLTTDZZEFMZLBNPPLPLPEPSZALLTYLKCKQZKGENQLWAGYXYDPXLHSXQQWQCQXQCLHYXXMLYCCWLYMQYSKGCHLCJNSZKPYZKCQZQLJPDMDZHLASXLBYDWQLWDNBQCRYDDZTJYBKBWSZDXDTNPJDTCTQDFXQQMGNXECLTTBKPWSLCTYQLPWYZZKLPYGZCQQPLLKCCYLPQMZCZQCLJSLQZDJXLDDHPZQDLJJXZQDXYZQKZLJCYQDYJPPYPQYKJYRMPCBYMCXKLLZLLFQPYLLLMBSGLCYSSLRSYSQTMXYXZQZFDZUYSYZTFFMZZSMZQHZSSCCMLYXWTPZGXZJGZGSJSGKDDHTQGGZLLBJDZLCBCHYXYZHZFYWXYZYMSDBZZYJGTSMTFXQYXQSTDGSLNXDLRYZZLRYYLXQHTXSRTZNGZXBNQQZFMYKMZJBZYMKBPNLYZPBLMCNQYZZZSJZHJCTZKHYZZJRDYZHNPXGLFZTLKGJTCTSSYLLGZRZBBQZZKLPKLCZYSSUYXBJFPNJZZXCDWXZYJXZZDJJKGGRSRJKMSMZJLSJYWQSKYHQJSXPJZZZLSNSHRNYPZTWCHKLPSRZLZXYJQXQKYSJYCZTLQZYBBYBWZPQDWWYZCYTJCJXCKCWDKKZXSGKDZXWWYYJQYYTCYTDLLXWKCZKKLCCLZCQQDZLQLCSFQCHQHSFSMQZZLNBJJZBSJHTSZDYSJQJPDLZCDCWJKJZZLPYCGMZWDJJBSJQZSYZYHHXJPBJYDSSXDZNCGLQMBTSFSBPDZDLZNFGFJGFSMPXJQLMBLGQCYYXBQKDJJQYRFKZTJDHCZKLBSDZCFJTPLLJGXHYXZCSSZZXSTJYGKGCKGYOQXJPLZPBPGTGYJZGHZQZZLBJLSQFZGKQQJZGYCZBZQTLDXRJXBSXXPZXHYZYCLWDXJJHXMFDZPFZHQHQMQGKSLYHTYCGFRZGNQXCLPDLBZCSCZQLLJBLHBZCYPZZPPDYMZZSGYHCKCPZJGSLJLNSCDSLDLXBMSTLDDFJMKDJDHZLZXLSZQPQPGJLLYBDSZGQLBZLSLKYYHZTTNTJYQTZZPSZQZTLLJTYYLLQLLQYZQLBDZLSLYYZYMDFSZSNHLXZNCZQZPBWSKRFBSYZMTHBLGJPMCZZLSTLXSHTCSYZLZBLFEQHLXFLCJLYLJQCBZLZJHHSSTBRMHXZHJZCLXFNBGXGTQJCZTMSFZKJMSSNXLJKBHSJXNTNLZDNTLMSJXGZJYJCZXYJYJWRWWQNZTNFJSZPZSHZJFYRDJSFSZJZBJFZQZZHZLXFYSBZQLZSGYFTZDCSZXZJBQMSZKJRHYJZCKMJKHCHGTXKXQGLXPXFXTRTYLXJXHDTSJXHJZJXZWZLCQSBTXWXGXTXXHXFTSDKFJHZYJFJXRZSDLLLTQSQQZQWZXSYQTWGWBZCGZLLYZBCLMQQTZHZXZXLJFRMYZFLXYSQXXJKXRMQDZDMMYYBSQBHGZMWFWXGMXLZPYYTGZYCCDXYZXYWGSYJYZNBHPZJSQSYXSXRTFYZGRHZTXSZZTHCBFCLSYXZLZQMZLMPLMXZJXSFLBYZMYQHXJSXRXSQZZZSSLYFRCZJRCRXHHZXQYDYHXSJJHZCXZBTYNSYSXJBQLPXZQPYMLXZKYXLXCJLCYSXXZZLXDLLLJJYHZXGYJWKJRWYHCPSGNRZLFZWFZZNSXGXFLZSXZZZBFCSYJDBRJKRDHHGXJLJJTGXJXXSTJTJXLYXQFCSGSWMSBCTLQZZWLZZKXJMLTMJYHSDDBXGZHDLBMYJFRZFSGCLYJBPMLYSMSXLSZJQQHJZFXGFQFQBPXZGYYQXGZTCQWYLTLGWSGWHRLFSFGZJMGMGBGTJFSYZZGZYZAFLSSPMLPFLCWBJZCLJJMZLPJJLYMQDMYYYFBGYGYZMLYZDXQYXRQQQHSYYYQXYLJTYXFSFSLLGNQCYHYCWFHCCCFXPYLYPLLZYXXXXXKQHHXSHJZCFZSCZJXCPZWHHHHHAPYLQALPQAFYHXDYLUKMZQGGGDDESRNNZLTZGCHYPPYSQJJHCLLJTOLNJPZLJLHYMHEYDYDSQYCDDHGZUNDZCLZYZLLZNTNYZGSLHSLPJJBDGWXPCDUTJCKLKCLWKLLCASSTKZZDNQNTTLYYZSSYSSZZRYLJQKCQDHHCRXRZYDGRGCWCGZQFFFPPJFZYNAKRGYWYQPQXXFKJTSZZXSWZDDFBBXTBGTZKZNPZZPZXZPJSZBMQHKCYXYLDKLJNYPKYGHGDZJXXEAHPNZKZTZCMXCXMMJXNKSZQNMNLWBWWXJKYHCPSTMCSQTZJYXTPCTPDTNNPGLLLZSJLSPBLPLQHDTNJNLYYRSZFFJFQWDPHZDWMRZCCLODAXNSSNYZRESTYJWJYJDBCFXNMWTTBYLWSTSZGYBLJPXGLBOCLHPCBJLTMXZLJYLZXCLTPNCLCKXTPZJSWCYXSFYSZDKNTLBYJCYJLLSTGQCBXRYZXBXKLYLHZLQZLNZCXWJZLJZJNCJHXMNZZGJZZXTZJXYCYYCXXJYYXJJXSSSJSTSSTTPPGQTCSXWZDCSYFPTFBFHFBBLZJCLZZDBXGCXLQPXKFZFLSYLTUWBMQJHSZBMDDBCYSCCLDXYCDDQLYJJWMQLLCSGLJJSYFPYYCCYLTJANTJJPWYCMMGQYYSXDXQMZHSZXPFTWWZQSWQRFKJLZJQQYFBRXJHHFWJJZYQAZMYFRHCYYBYQWLPEXCCZSTYRLTTDMQLYKMBBGMYYJPRKZNPBSXYXBHYZDJDNGHPMFSGMWFZMFQMMBCMZZCJJLCNUXYQLMLRYGQZCYXZLWJGCJCGGMCJNFYZZJHYCPRRCMTZQZXHFQGTJXCCJEAQCRJYHPLQLSZDJRBCQHQDYRHYLYXJSYMHZYDWLDFRYHBPYDTSSCNWBXGLPZMLZZTQSSCPJMXXYCSJYTYCGHYCJWYRXXLFEMWJNMKLLSWTXHYYYNCMMCWJDQDJZGLLJWJRKHPZGGFLCCSCZMCBLTBHBQJXQDSPDJZZGKGLFQYWBZYZJLTSTDHQHCTCBCHFLQMPWDSHYYTQWCNZZJTLBYMBPDYYYXSQKXWYYFLXXNCWCXYPMAELYKKJMZZZBRXYYQJFLJPFHHHYTZZXSGQQMHSPGDZQWBWPJHZJDYSCQWZKTXXSQLZYYMYSDZGRXCKKUJLWPYSYSCSYZLRMLQSYLJXBCXTLWDQZPCYCYKPPPNSXFYZJJRCEMHSZMSXLXGLRWGCSTLRSXBZGBZGZTCPLUJLSLYLYMTXMTZPALZXPXJTJWTCYYZLBLXBZLQMYLXPGHDSLSSDMXMBDZZSXWHAMLCZCPJMCNHJYSNSYGCHSKQMZZQDLLKABLWJXSFMOCDXJRRLYQZKJMYBYQLYHETFJZFRFKSRYXFJTWDSXXSYSQJYSLYXWJHSNLXYYXHBHAWHHJZXWMYLJCSSLKYDZTXBZSYFDXGXZJKHSXXYBSSXDPYNZWRPTQZCZENYGCXQFJYKJBZMLJCMQQXUOXSLYXXLYLLJDZBTYMHPFSTTQQWLHOKYBLZZALZXQLHZWRRQHLSTMYPYXJJXMQSJFNBXYXYJXXYQYLTHYLQYFMLKLJTMLLHSZWKZHLJMLHLJKLJSTLQXYLMBHHLNLZXQJHXCFXXLHYHJJGBYZZKBXSCQDJQDSUJZYYHZHHMGSXCSYMXFEBCQWWRBPYYJQTYZCYQYQQZYHMWFFHGZFRJFCDPXNTQYZPDYKHJLFRZXPPXZDBBGZQSTLGDGYLCQMLCHHMFYWLZYXKJLYPQHSYWMQQGQZMLZJNSQXJQSYJYCBEHSXFSZPXZWFLLBCYYJDYTDTHWZSFJMQQYJLMQXXLLDTTKHHYBFPWTYYSQQWNQWLGWDEBZWCMYGCULKJXTMXMYJSXHYBRWFYMWFRXYQMXYSZTZZTFYKMLDHQDXWYYNLCRYJBLPSXCXYWLSPRRJWXHQYPHTYDNXHHMMYWYTZCSQMTSSCCDALWZTCPQPYJLLQZYJSWXMZZMMYLMXCLMXCZMXMZSQTZPPQQBLPGXQZHFLJJHYTJSRXWZXSCCDLXTYJDCQJXSLQYCLZXLZZXMXQRJMHRHZJBHMFLJLMLCLQNLDXZLLLPYPSYJYSXCQQDCMQJZZXHNPNXZMEKMXHYKYQLXSXTXJYYHWDCWDZHQYYBGYBCYSCFGPSJNZDYZZJZXRZRQJJYMCANYRJTLDPPYZBSTJKXXZYPFDWFGZZRPYMTNGXZQBYXNBUFNQKRJQZMJEGRZGYCLKXZDSKKNSXKCLJSPJYYZLQQJYBZSSQLLLKJXTBKTYLCCDDBLSPPFYLGYDTZJYQGGKQTTFZXBDKTYYHYBBFYTYYBCLPDYTGDHRYRNJSPTCSNYJQHKLLLZSLYDXXWBCJQSPXBPJZJCJDZFFXXBRMLAZHCSNDLBJDSZBLPRZTSWSBXBCLLXXLZDJZSJPYLYXXYFTFFFBHJJXGBYXJPMMMPSSJZJMTLYZJXSWXTYLEDQPJMYGQZJGDJLQJWJQLLSJGJGYGMSCLJJXDTYGJQJQJCJZCJGDZZSXQGSJGGCXHQXSNQLZZBXHSGZXCXYLJXYXYYDFQQJHJFXDHCTXJYRXYSQTJXYEFYYSSYYJXNCYZXFXMSYSZXYYSCHSHXZZZGZZZGFJDLTYLNPZGYJYZYYQZPBXQBDZTZCZYXXYHHSQXSHDHGQHJHGYWSZTMZMLHYXGEBTYLZKQWYTJZRCLEKYSTDBCYKQQSAYXCJXWWGSBHJYZYDHCSJKQCXSWXFLTYNYZPZCCZJQTZWJQDZZZQZLJJXLSBHPYXXPSXSHHEZTXFPTLQYZZXHYTXNCFZYYHXGNXMYWXTZSJPTHHGYMXMXQZXTSBCZYJYXXTYYZYPCQLMMSZMJZZLLZXGXZAAJZYXJMZXWDXZSXZDZXLEYJJZQBHZWZZZQTZPSXZTDSXJJJZNYAZPHXYYSRNQDTHZHYYKYJHDZXZLSWCLYBZYECWCYCRYLCXNHZYDZYDYJDFRJJHTRSQTXYXJRJHOJYNXELXSFSFJZGHPZSXZSZDZCQZBYYKLSGSJHCZSHDGQGXYZGXCHXZJWYQWGYHKSSEQZZNDZFKWYSSTCLZSTSYMCDHJXXYWEYXCZAYDMPXMDSXYBSQMJMZJMTZQLPJYQZCGQHXJHHLXXHLHDLDJQCLDWBSXFZZYYSCHTYTYYBHECXHYKGJPXHHYZJFXHWHBDZFYZBCAPNPGNYDMSXHMMMMAMYNBYJTMPXYYMCTHJBZYFCGTYHWPHFTWZZEZSBZEGPFMTSKFTYCMHFLLHGPZJXZJGZJYXZSBBQSCZZLZCCSTPGXMJSFTCCZJZDJXCYBZLFCJSYZFGSZLYBCWZZBYZDZYPSWYJZXZBDSYUXLZZBZFYGCZXBZHZFTPBGZGEJBSTGKDMFHYZZJHZLLZZGJQZLSFDJSSCBZGPDLFZFZSZYZYZSYGCXSNXXCHCZXTZZLJFZGQSQYXZJQDCCZTQCDXZJYQJQCHXZTDLGSCXZSYQJQTZWLQDQZTQCHQQJZYEZZZPBWKDJFCJPZTYPQYQTTYNLMBDKTJZPQZQZZFPZSBNJLGYJDXJDZZKZGQKXDLPZJTCJDQBXDJQJSTCKNXBXZMSLYJCQMTJQWWCJQNJNLLLHJCWQTBZQYDZCZPZZDZYDDCYZZZCCJTTJFZDPRRTZTJDCQTQZDTJNPLZBCLLCTZSXKJZQZPZLBZRBTJDCXFCZDBCCJJLTQQPLDCGZDBBZJCQDCJWYNLLZYZCCDWLLXWZLXRXNTQQCZXKQLSGDFQTDDGLRLAJJTKUYMKQLLTZYTDYYCZGJWYXDXFRSKSTQTENQMRKQZHHQKDLDAZFKYPBGGPZREBZZYKZZSPEGJXGYKQZZZSLYSYYYZWFQZYLZZLZHWCHKYPQGNPGBLPLRRJYXCCSYYHSFZFYBZYYTGZXYLXCZWXXZJZBLFFLGSKHYJZEYJHLPLLLLCZGXDRZELRHGKLZZYHZLYQSZZJZQLJZFLNBHGWLCZCFJYSPYXZLZLXGCCPZBLLCYBBBBUBBCBPCRNNZCZYRBFSRLDCGQYYQXYGMQZWTZYTYJXYFWTEHZZJYWLCCNTZYJJZDEDPZDZTSYQJHDYMBJNYJZLXTSSTPHNDJXXBYXQTZQDDTJTDYYTGWSCSZQFLSHLGLBCZPHDLYZJYCKWTYTYLBNYTSDSYCCTYSZYYEBHEXHQDTWNYGYCLXTSZYSTQMYGZAZCCSZZDSLZCLZRQXYYELJSBYMXSXZTEMBBLLYYLLYTDQYSHYMRQWKFKBFXNXSBYCHXBWJYHTQBPBSBWDZYLKGZSKYHXQZJXHXJXGNLJKZLYYCDXLFYFGHLJGJYBXQLYBXQPQGZTZPLNCYPXDJYQYDYMRBESJYYHKXXSTMXRCZZYWXYQYBMCLLYZHQYZWQXDBXBZWZMSLPDMYSKFMZKLZCYQYCZLQXFZZYDQZPZYGYJYZMZXDZFYFYTTQTZHGSPCZMLCCYTZXJCYTJMKSLPZHYSNZLLYTPZCTZZCKTXDHXXTQCYFKSMQCCYYAZHTJPCYLZLYJBJXTPNYLJYYNRXSYLMMNXJSMYBCSYSYLZYLXJJQYLDZLPQBFZZBLFNDXQKCZFYWHGQMRDSXYCYTXNQQJZYYPFZXDYZFPRXEJDGYQBXRCNFYYQPGHYJDYZXGRHTKYLNWDZNTSMPKLBTHBPYSZBZTJZSZZJTYYXZPHSSZZBZCZPTQFZMYFLYPYBBJQXZMXXDJMTSYSKKBJZXHJCKLPSMKYJZCXTMLJYXRZZQSLXXQPYZXMKYXXXJCLJPRMYYGADYSKQLSNDHYZKQXZYZTCGHZTLMLWZYBWSYCTBHJHJFCWZTXWYTKZLXQSHLYJZJXTMPLPYCGLTBZZTLZJCYJGDTCLKLPLLQPJMZPAPXYZLKKTKDZCZZBNZDYDYQZJYJGMCTXLTGXSZLMLHBGLKFWNWZHDXUHLFMKYSLGXDTWWFRJEJZTZHYDXYKSHWFZCQSHKTMQQHTZHYMJDJSKHXZJZBZZXYMPAGQMSTPXLSKLZYNWRTSQLSZBPSPSGZWYHTLKSSSWHZZLYYTNXJGMJSZSUFWNLSOZTXGXLSAMMLBWLDSZYLAKQCQCTMYCFJBSLXCLZZCLXXKSBZQCLHJPSQPLSXXCKSLNHPSFQQYTXYJZLQLDXZQJZDYYDJNZPTUZDSKJFSLJHYLZSQZLBTXYDGTQFDBYAZXDZHZJNHHQBYKNXJJQCZMLLJZKSPLDYCLBBLXKLELXJLBQYCXJXGCNLCQPLZLZYJTZLJGYZDZPLTQCSXFDMNYCXGBTJDCZNBGBQYQJWGKFHTNPYQZQGBKPBBYZMTJDYTBLSQMPSXTBNPDXKLEMYYCJYNZCTLDYKZZXDDXHQSHDGMZSJYCCTAYRZLPYLTLKXSLZCGGEXCLFXLKJRTLQJAQZNCMBYDKKCXGLCZJZXJHPTDJJMZQYKQSECQZDSHHADMLZFMMZBGNTJNNLGBYJBRBTMLBYJDZXLCJLPLDLPCQDHLXZLYCBLCXZZJADJLNZMMSSSMYBHBSQKBHRSXXJMXSDZNZPXLGBRHWGGFCXGMSKLLTSJYYCQLTSKYWYYHYWXBXQYWPYWYKQLSQPTNTKHQCWDQKTWPXXHCPTHTWUMSSYHBWCRWXHJMKMZNGWTMLKFGHKJYLSYYCXWHYECLQHKQHTTQKHFZLDXQWYZYYDESBPKYRZPJFYYZJCEQDZZDLATZBBFJLLCXDLMJSSXEGYGSJQXCWBXSSZPDYZCXDNYXPPZYDLYJCZPLTXLSXYZYRXCYYYDYLWWNZSAHJSYQYHGYWWAXTJZDAXYSRLTDPSSYYFNEJDXYZHLXLLLZQZSJNYQYQQXYJGHZGZCYJCHZLYCDSHWSHJZYJXCLLNXZJJYYXNFXMWFPYLCYLLABWDDHWDXJMCXZTZPMLQZHSFHZYNZTLLDYWLSLXHYMMYLMBWWKYXYADTXYLLDJPYBPWUXJMWMLLSAFDLLYFLBHHHBQQLTZJCQJLDJTFFKMMMBYTHYGDCQRDDWRQJXNBYSNWZDBYYTBJHPYBYTTJXAAHGQDQTMYSTQXKBTZPKJLZRBEQQSSMJJBDJOTGTBXPGBKTLHQXJJJCTHXQDWJLWRFWQGWSHCKRYSWGFTGYGBXSDWDWRFHWYTJJXXXJYZYSLPYYYPAYXHYDQKXSHXYXGSKQHYWFDDDPPLCJLQQEEWXKSYYKDYPLTJTHKJLTCYYHHJTTPLTZZCDLTHQKZXQYSTEEYWYYZYXXYYSTTJKLLPZMCYHQGXYHSRMBXPLLNQYDQHXSXXWGDQBSHYLLPJJJTHYJKYPPTHYYKTYEZYENMDSHLCRPQFDGFXZPSFTLJXXJBSWYYSKSFLXLPPLBBBLBSFXFYZBSJSSYLPBBFFFFSSCJDSTZSXZRYYSYFFSYZYZBJTBCTSBSDHRTJJBYTCXYJEYLXCBNEBJDSYXYKGSJZBXBYTFZWGENYHHTHZHHXFWGCSTBGXKLSXYWMTMBYXJSTZSCDYQRCYTWXZFHMYMCXLZNSDJTTTXRYCFYJSBSDYERXJLJXBBDEYNJGHXGCKGSCYMBLXJMSZNSKGXFBNBPTHFJAAFXYXFPXMYPQDTZCXZZPXRSYWZDLYBBKTYQPQJPZYPZJZNJPZJLZZFYSBTTSLMPTZRTDXQSJEHBZYLZDHLJSQMLHTXTJECXSLZZSPKTLZKQQYFSYGYWPCPQFHQHYTQXZKRSGTTSQCZLPTXCDYYZXSQZSLXLZMYCPCQBZYXHBSXLZDLTCDXTYLZJYYZPZYZLTXJSJXHLPMYTXCQRBLZSSFJZZTNJYTXMYJHLHPPLCYXQJQQKZZSCPZKSWALQSBLCCZJSXGWWWYGYKTJBBZTDKHXHKGTGPBKQYSLPXPJCKBMLLXDZSTBKLGGQKQLSBKKTFXRMDKBFTPZFRTBBRFERQGXYJPZSSTLBZTPSZQZSJDHLJQLZBPMSMMSXLQQNHKNBLRDDNXXDHDDJCYYGYLXGZLXSYGMQQGKHBPMXYXLYTQWLWGCPBMQXCYZYDRJBHTDJYHQSHTMJSBYPLWHLZFFNYPMHXXHPLTBQPFBJWQDBYGPNZTPFZJGSDDTQSHZEAWZZYLLTYYBWJKXXGHLFKXDJTMSZSQYNZGGSWQSPHTLSSKMCLZXYSZQZXNCJDQGZDLFNYKLJCJLLZLMZZNHYDSSHTHZZLZZBBHQZWWYCRZHLYQQJBEYFXXXWHSRXWQHWPSLMSSKZTTYGYQQWRSLALHMJTQJSMXQBJJZJXZYZKXBYQXBJXSHZTSFJLXMXZXFGHKZSZGGYLCLSARJYHSLLLMZXELGLXYDJYTLFBHBPNLYZFBBHPTGJKWETZHKJJXZXXGLLJLSTGSHJJYQLQZFKCGNNDJSSZFDBCTWWSEQFHQJBSAQTGYPQLBXBMMYWXGSLZHGLZGQYFLZBYFZJFRYSFMBYZHQGFWZSYFYJJPHZBYYZFFWODGRLMFTWLBZGYCQXCDJYGZYYYYTYTYDWEGAZYHXJLZYYHLRMGRXXZCLHNELJJTJTPWJYBJJBXJJTJTEEKHWSLJPLPSFYZPQQBDLQJJTYYQLYZKDKSQJYYQZLDQTGJQYZJSUCMRYQTHTEJMFCTYHYPKMHYZWJDQFHYYXWSHCTXRLJHQXHCCYYYJLTKTTYTMXGTCJTZAYYOCZLYLBSZYWJYTSJYHBYSHFJLYGJXXTMZYYLTXXYPZLXYJZYZYYPNHMYMDYYLBLHLSYYQQLLNJJYMSOYQBZGDLYXYLCQYXTSZEGXHZGLHWBLJHEYXTWQMAKBPQCGYSHHEGQCMWYYWLJYJHYYZLLJJYLHZYHMGSLJLJXCJJYCLYCJPCPZJZJMMYLCQLNQLJQJSXYJMLSZLJQLYCMMHCFMMFPQQMFYLQMCFFQMMMMHMZNFHHJGTTHHKHSLNCHHYQDXTMMQDCYZYXYQMYQYLTDCYYYZAZZCYMZYDLZFFFMMYCQZWZZMABTBYZTDMNZZGGDFTYPCGQYTTSSFFWFDTZQSSYSTWXJHXYTSXXYLBYQHWWKXHZXWZNNZZJZJJQJCCCHYYXBZXZCYZTLLCQXYNJYCYYCYNZZQYYYEWYCZDCJYCCHYJLBTZYYCQWMPWPYMLGKDLDLGKQQBGYCHJXY"},2112:function(e,t,n){n(20),e.exports=n(2113)},2113:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=a(c),f=n(16),p=n(1),m=n(2114),h=a(m),g=n(2115),v=a(g),b=n(2116),y=a(b),E=n(2118),w=a(E),_=n(2144),S=a(_),x=n(2145),P=a(x),C=n(2148),O=a(C),D=n(2149),M=a(D),k=n(2150),T=a(k),L=n(2152),N=a(L),I=n(2153),Y=a(I),R=n(2154),A=a(R),j=n(729),Z=a(j),F=n(2159),B=a(F),X=n(2160),H=a(X),J=n(2161),U=a(J),Q=n(2162),G=a(Q),W=n(2163),z=a(W),K=n(2165),q=a(K),V=n(2166),$=a(V),ee=n(2167),te=a(ee),ne=n(2168),ae=a(ne),re=n(2169),oe=a(re),ie=n(2175),le=a(ie),se=n(2176),ue=a(se),ce=n(2177),de=a(ce),fe=n(2178),pe=a(fe),me=n(2182),he=a(me),ge=n(2185),ve=a(ge),be=n(2186),ye=a(be),Ee=n(2187),we=a(Ee),_e=n(2190),Se=a(_e),xe=n(2191),Pe=a(xe),Ce=n(2192),Oe=a(Ce),De=n(2199),Me=a(De),ke=n(2200),Te=a(ke),Le=n(2201),Ne=a(Le),Ie=n(2203),Ye=a(Ie),Re=n(2204),Ae=a(Re),je=n(2207),Ze=a(je),Fe=n(2208),Be=a(Fe),Xe=n(2209),He=a(Xe),Je=n(2210),Ue=a(Je),Qe=n(2212),Ge=a(Qe),We=n(2213),ze=a(We),Ke=n(2215),qe=a(Ke),Ve=n(2216),$e=a(Ve),et=n(2217),tt=a(et),nt=n(2218),at=a(nt),rt=n(2219),ot=a(rt),it=n(2220),lt=a(it),st=n(2226),ut=a(st),ct=n(2228),dt=a(ct),ft=n(2229),pt=a(ft),mt=n(2234),ht=a(mt),gt=n(2240),vt=a(gt),bt=n(2241),yt=a(bt),Et=n(2248),wt=a(Et),_t=n(2249),St=a(_t),xt=n(2250),Pt=a(xt),Ct=n(2251),Ot=a(Ct);n(151),n(152),n(153),n(125),n(66);var Dt=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getCurrentTabForPageList=function(e){for(var t=void 0,n=void 0,a=p.siteRoot+"sys/",r=0,o=e.length;r<o;r++){t=e[r].urlPartList,n=e[r].tab;for(var i=0,l=t.length;i<l;i++)if(-1!=location.href.indexOf(""+a+t[i]))return n}},n.onCloseSidePanel=function(){n.setState({isSidePanelClosed:!n.state.isSidePanelClosed})},n.tabItemClick=function(e){n.setState({currentTab:e})},n.state={isSidePanelClosed:!1,currentTab:"file-scan"},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=window.location.href.split("/"),t=e[e.length-2],n=[{tab:"devices",urlPartList:["desktop-devices","mobile-devices","device-errors"]},{tab:"libraries",urlPartList:["all-libraries","search-libraries","system-library","trash-libraries","libraries/"]},{tab:"statistic",urlPartList:["statistics/file","statistics/storage","statistics/user","statistics/traffic","statistics/reports"]},{tab:"users",urlPartList:["users/","search-users/"]},{tab:"groups",urlPartList:["groups/","search-groups/"]},{tab:"organizations",urlPartList:["organizations/","search-organizations/"]},{tab:"links",urlPartList:["share-links/","upload-links/"]},{tab:"institutions",urlPartList:["institutions/"]},{tab:"termsandconditions",urlPartList:["terms-and-conditions/"]},{tab:"departments",urlPartList:["departments/"]},{tab:"logs",urlPartList:["logs/"]},{tab:"virus-files",urlPartList:["virus-files/"]},{tab:"adminLogs",urlPartList:["admin-logs/"]}],a=this.getCurrentTabForPageList(n);t=a||t,this.setState({currentTab:t})}},{key:"render",value:function(){var e=this.state,t=e.currentTab,n=e.isSidePanelClosed;return u.default.createElement("div",{id:"main"},u.default.createElement(h.default,{isSidePanelClosed:n,onCloseSidePanel:this.onCloseSidePanel,currentTab:t,tabItemClick:this.tabItemClick}),u.default.createElement(v.default,null,u.default.createElement(f.Router,{className:"reach-router"},u.default.createElement(y.default,{path:p.siteRoot+"sys/info"}),u.default.createElement(w.default,{path:p.siteRoot+"sys/statistics/file"}),u.default.createElement(S.default,{path:p.siteRoot+"sys/statistics/storage"}),u.default.createElement(O.default,{path:p.siteRoot+"sys/statistics/user"}),u.default.createElement(P.default,{path:p.siteRoot+"sys/statistics/traffic"}),u.default.createElement(M.default,{path:p.siteRoot+"sys/statistics/reports"}),u.default.createElement(T.default,{path:p.siteRoot+"sys/desktop-devices"}),u.default.createElement(N.default,{path:p.siteRoot+"sys/mobile-devices"}),u.default.createElement(Y.default,{path:p.siteRoot+"sys/device-errors"}),u.default.createElement(oe.default,{path:p.siteRoot+"sys/all-libraries"}),u.default.createElement(le.default,{path:p.siteRoot+"sys/system-library"}),u.default.createElement(ue.default,{path:p.siteRoot+"sys/trash-libraries"}),u.default.createElement(de.default,{path:p.siteRoot+"sys/search-libraries"}),u.default.createElement(pe.default,{path:p.siteRoot+"sys/libraries/:repoID/*"}),u.default.createElement(lt.default,{path:p.siteRoot+"sys/web-settings"}),u.default.createElement(ut.default,{path:p.siteRoot+"sys/notifications"}),u.default.createElement(he.default,{path:p.siteRoot+"sys/groups"}),u.default.createElement(ve.default,{path:p.siteRoot+"sys/search-groups"}),u.default.createElement(ye.default,{path:p.siteRoot+"sys/groups/:groupID/libraries"}),u.default.createElement(we.default,{path:p.siteRoot+"sys/groups/:groupID/members"}),u.default.createElement(Se.default,{path:p.siteRoot+"sys/departments"},u.default.createElement(Pe.default,{path:"/"}),u.default.createElement(Oe.default,{path:"/:groupID"})),u.default.createElement(Me.default,{path:p.siteRoot+"sys/share-links"}),u.default.createElement(Te.default,{path:p.siteRoot+"sys/upload-links"}),u.default.createElement(Ne.default,{path:p.siteRoot+"sys/organizations"}),u.default.createElement(Ye.default,{path:p.siteRoot+"sys/search-organizations"}),u.default.createElement(Ae.default,{path:p.siteRoot+"sys/organizations/:orgID/info"}),u.default.createElement(Ze.default,{path:p.siteRoot+"sys/organizations/:orgID/users"}),u.default.createElement(Be.default,{path:p.siteRoot+"sys/organizations/:orgID/groups"}),u.default.createElement(He.default,{path:p.siteRoot+"sys/organizations/:orgID/libraries"}),u.default.createElement(Ue.default,{path:p.siteRoot+"sys/institutions"}),u.default.createElement(Ge.default,{path:p.siteRoot+"sys/institutions/:institutionID/info"}),u.default.createElement(ze.default,{path:p.siteRoot+"sys/institutions/:institutionID/members"}),u.default.createElement(qe.default,{path:p.siteRoot+"sys/institutions/:institutionID/admins"}),u.default.createElement($e.default,{path:p.siteRoot+"sys/logs/login"}),u.default.createElement(tt.default,{path:p.siteRoot+"sys/logs/file-access"}),u.default.createElement(at.default,{path:p.siteRoot+"sys/logs/file-update"}),u.default.createElement(ot.default,{path:p.siteRoot+"sys/logs/share-permission"}),u.default.createElement(Pt.default,{path:p.siteRoot+"sys/admin-logs/operation"}),u.default.createElement(Ot.default,{path:p.siteRoot+"sys/admin-logs/login"}),u.default.createElement(Z.default,{path:p.siteRoot+"sys/users"}),u.default.createElement(B.default,{path:p.siteRoot+"sys/users/admins"}),u.default.createElement(H.default,{path:p.siteRoot+"sys/users/ldap-imported"}),u.default.createElement(U.default,{path:p.siteRoot+"sys/users/ldap"}),u.default.createElement(G.default,{path:p.siteRoot+"sys/search-users"}),u.default.createElement(z.default,{path:p.siteRoot+"sys/users/:email"}),u.default.createElement(q.default,{path:p.siteRoot+"sys/users/:email/owned-libraries"}),u.default.createElement($.default,{path:p.siteRoot+"sys/users/:email/shared-libraries"}),u.default.createElement(te.default,{path:p.siteRoot+"sys/users/:email/shared-links"}),u.default.createElement(ae.default,{path:p.siteRoot+"sys/users/:email/groups"}),u.default.createElement(vt.default,{path:p.siteRoot+"sys/invitations"}),u.default.createElement(yt.default,{path:p.siteRoot+"sys/terms-and-conditions/"}),u.default.createElement(wt.default,{path:p.siteRoot+"sys/virus-files/all"}),u.default.createElement(St.default,{path:p.siteRoot+"sys/virus-files/unhandled"}),u.default.createElement(dt.default,{path:p.siteRoot+"sys/file-scan-records",currentTab:t,tabItemClick:this.tabItemClick}),u.default.createElement(pt.default,{path:p.siteRoot+"sys/work-weixin",currentTab:t,tabItemClick:this.tabItemClick}),u.default.createElement(ht.default,{path:p.siteRoot+"sys/dingtalk",currentTab:t,tabItemClick:this.tabItemClick}),u.default.createElement(A.default,{path:p.siteRoot+"sys/abuse-reports"}))))}}]),t}(u.default.Component);d.default.render(u.default.createElement(Dt,null),document.getElementById("wrapper"))},2114:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(124),m=a(p),h=n(1),g={isSidePanelClosed:d.default.bool.isRequired,onCloseSidePanel:d.default.func.isRequired,currentTab:d.default.string.isRequired,tabItemClick:d.default.func.isRequired},v=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getActiveClass=function(e){return a.props.currentTab==e?"active":""},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this;return u.default.createElement("div",{className:"side-panel "+(this.props.isSidePanelClosed?"":"left-zero")},u.default.createElement("div",{className:"side-panel-north"},u.default.createElement(m.default,{onCloseSidePanel:this.props.onCloseSidePanel})),u.default.createElement("div",{className:"side-panel-center"},u.default.createElement("div",{className:"side-nav"},u.default.createElement("div",{className:"side-nav-con"},u.default.createElement("h3",{className:"sf-heading"},(0,h.gettext)("System Admin")),u.default.createElement("ul",{className:"nav nav-pills flex-column nav-container"},h.canViewSystemInfo&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("info"),to:h.siteRoot+"sys/info/",onClick:function(){return e.props.tabItemClick("info")}},u.default.createElement("span",{className:"sf2-icon-info","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Info")))),h.isPro&&h.canViewStatistic&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("statistic"),to:h.siteRoot+"sys/statistics/file/",onClick:function(){return e.props.tabItemClick("statistic")}},u.default.createElement("span",{className:"sf2-icon-histogram","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Statistic")))),h.otherPermission&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("devices"),to:h.siteRoot+"sys/desktop-devices/",onClick:function(){return e.props.tabItemClick("devices")}},u.default.createElement("span",{className:"sf2-icon-monitor","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Devices")))),h.constanceEnabled&&h.canConfigSystem&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("web-settings"),to:h.siteRoot+"sys/web-settings/",onClick:function(){return e.props.tabItemClick("web-settings")}},u.default.createElement("span",{className:"sf2-icon-cog2","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Settings")))),h.canManageLibrary&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("libraries"),to:h.siteRoot+"sys/all-libraries/",onClick:function(){return e.props.tabItemClick("libraries")}},u.default.createElement("span",{className:"sf2-icon-library","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Libraries")))),h.canManageUser&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("users"),to:h.siteRoot+"sys/users/",onClick:function(){return e.props.tabItemClick("users")}},u.default.createElement("span",{className:"sf2-icon-user","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Users")))),h.canManageGroup&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("groups"),to:h.siteRoot+"sys/groups/",onClick:function(){return e.props.tabItemClick("groups")}},u.default.createElement("span",{className:"sf2-icon-group","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Groups")))),h.isPro&&h.canManageGroup&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("departments"),to:h.siteRoot+"sys/departments/",onClick:function(){return e.props.tabItemClick("departments")}},u.default.createElement("span",{className:"sf2-icon-organization","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Departments")))),h.multiTenancy&&h.otherPermission&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("organizations"),to:h.siteRoot+"sys/organizations/",onClick:function(){return e.props.tabItemClick("organizations")}},u.default.createElement("span",{className:"sf2-icon-organization","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Organizations")))),h.multiInstitution&&h.otherPermission&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("institutions"),to:h.siteRoot+"sys/institutions/",onClick:function(){return e.props.tabItemClick("institutions")}},u.default.createElement("span",{className:"sf2-icon-organization","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Institutions")))),h.otherPermission&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("notifications"),to:h.siteRoot+"sys/notifications/",onClick:function(){return e.props.tabItemClick("notifications")}},u.default.createElement("span",{className:"sf2-icon-msgs","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Notifications")))),h.otherPermission&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("links"),to:h.siteRoot+"sys/share-links/",onClick:function(){return e.props.tabItemClick("links")}},u.default.createElement("span",{className:"sf2-icon-link","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Links")))),h.sysadminExtraEnabled&&h.canViewUserLog&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("logs"),to:h.siteRoot+"sys/logs/login",onClick:function(){return e.props.tabItemClick("logs")}},u.default.createElement("span",{className:"sf2-icon-clock","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Logs")))),h.isPro&&h.otherPermission&&h.enableFileScan&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("file-scan-records"),to:h.siteRoot+"sys/file-scan-records/",onClick:function(){return e.props.tabItemClick("file-scan-records")}},u.default.createElement("span",{className:"sf2-icon-security","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("File Scan")))),h.isPro&&h.otherPermission&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("virus-files"),to:h.siteRoot+"sys/virus-files/all/",onClick:function(){return e.props.tabItemClick("virus-files")}},u.default.createElement("span",{className:"sf2-icon-security","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Virus Scan")))),h.isPro&&h.enableGuestInvitation&&h.otherPermission&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("invitations"),to:h.siteRoot+"sys/invitations/",onClick:function(){return e.props.tabItemClick("invitations")}},u.default.createElement("span",{className:"sf2-icon-invite","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Invitations")))),h.otherPermission&&h.enableTermsAndConditions&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("termsandconditions"),to:h.siteRoot+"sys/terms-and-conditions/",onClick:function(){return e.props.tabItemClick("termsandconditions")}},u.default.createElement("span",{className:"sf2-icon-wiki","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Terms and Conditions")))),h.isPro&&h.canViewAdminLog&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("adminLogs"),to:h.siteRoot+"sys/admin-logs/operation",onClick:function(){return e.props.tabItemClick("adminLogs")}},u.default.createElement("span",{className:"sf2-icon-admin-log","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Admin Logs")))),h.otherPermission&&h.enableWorkWeixin&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("work-weixin"),to:h.siteRoot+"sys/work-weixin/",onClick:function(){return e.props.tabItemClick("work-weixin")}},u.default.createElement("span",{className:"sf3-font-enterprise-wechat sf3-font","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},"\u4f01\u4e1a\u5fae\u4fe1\u96c6\u6210"))),h.otherPermission&&h.enableDingtalk&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("dingtalk"),to:h.siteRoot+"sys/dingtalk/",onClick:function(){return e.props.tabItemClick("dingtalk")}},u.default.createElement("span",{className:"sf3-font-dingtalk sf3-font","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},"\u9489\u9489\u96c6\u6210"))),h.otherPermission&&h.enableShareLinkReportAbuse&&u.default.createElement("li",{className:"nav-item"},u.default.createElement(f.Link,{className:"nav-link ellipsis "+this.getActiveClass("abuse-reports"),to:h.siteRoot+"sys/abuse-reports/",onClick:function(){return e.props.tabItemClick("abuse-reports")}},u.default.createElement("span",{className:"sf2-icon-monitor","aria-hidden":"true"}),u.default.createElement("span",{className:"nav-text"},(0,h.gettext)("Abuse Reports")))))))))}}]),t}(u.default.Component);v.propTypes=g,t.default=v},2115:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f={children:d.default.object.isRequired},p=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"main-panel o-hidden"},this.props.children)}}]),t}(s.Component);p.propTypes=f,t.default=p},2116:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(4),f=n(1),p=n(5),m=a(p),h=n(3),g=n(8),v=a(g),b=n(31),y=a(b);n(2117);var E=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.uploadLicenseFile=function(e){if(n.fileInput.current.files.length){var t=n.fileInput.current.files[0];d.seafileAPI.sysAdminUploadLicense(t).then(function(e){var t=n.state.sysInfo;Object.assign(t,e.data,{with_license:!0}),n.setState({sysInfo:t})}).catch(function(e){var t=h.Utils.getErrorMsg(e);m.default.danger(t)})}},n.openFileInput=function(){n.fileInput.current.click()},n.renderLicenseDescString=function(e,t,n){return"life-time"==e?"zh-cn"==window.app.config.lang?"\u6c38\u4e45\u6388\u6743\u7ed9 "+t+"\uff0c\u6280\u672f\u652f\u6301\u670d\u52a1\u81f3 "+n+" \u5230\u671f":(0,f.gettext)("licensed to {placeholder_license_to}, upgrade service expired in {placeholder_license_expiration}").replace("{placeholder_license_to}",t).replace("{placeholder_license_expiration}",n):(0,f.gettext)("licensed to {placeholder_license_to}, expires on {placeholder_license_expiration}").replace("{placeholder_license_to}",t).replace("{placeholder_license_expiration}",n)},n.fileInput=u.default.createRef(),n.state={loading:!0,errorMsg:"",sysInfo:{}},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;d.seafileAPI.sysAdminGetSysInfo().then(function(t){e.setState({loading:!1,sysInfo:t.data})}).catch(function(t){e.setState({loading:!1,errorMsg:h.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){var e=this.state.sysInfo,t=e.license_mode,n=e.license_to,a=e.license_expiration,r=e.org_count,o=e.repos_count,i=e.total_files_count,l=e.total_storage,d=e.total_devices_count,p=e.current_connected_devices_count,m=e.license_maxusers,g=e.multi_tenancy_enabled,b=e.active_users_count,E=e.users_count,w=e.groups_count,_=e.with_license,S=this.state,x=S.loading,P=S.errorMsg;return u.default.createElement(s.Fragment,null,u.default.createElement(y.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container system-admin-info"},u.default.createElement("h2",{className:"heading"},(0,f.gettext)("Info")),u.default.createElement("div",{className:"content"},x&&u.default.createElement(v.default,null),P&&u.default.createElement("p",{className:"error text-center mt-4"},P),!x&&!P&&u.default.createElement("dl",{className:"flex-1 m-0"},u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("System Info")),f.isPro?u.default.createElement("dd",{className:"info-item-content"},(0,f.gettext)("Professional Edition"),_&&" "+this.renderLicenseDescString(t,n,a),u.default.createElement("br",null),f.isDefaultAdmin&&u.default.createElement(s.Fragment,null,u.default.createElement(c.Button,{type:"button",className:"mt-2",onClick:this.openFileInput},(0,f.gettext)("Upload license")),u.default.createElement("input",{className:"d-none",type:"file",onChange:this.uploadLicenseFile,ref:this.fileInput}))):u.default.createElement("dd",{className:"info-item-content"},(0,f.gettext)("Community Edition"),u.default.createElement("a",{className:"ml-1",href:"https://download.seafile.com/published/seafile-manual/deploy_pro/migrate_from_seafile_community_server.md",target:"_blank"},(0,f.gettext)("Upgrade to Pro Edition"))),u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("Libraries")," / ",(0,f.gettext)("Files")),u.default.createElement("dd",{className:"info-item-content"},o," / ",i),u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("Storage Used")),u.default.createElement("dd",{className:"info-item-content"},h.Utils.bytesToSize(l)),u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("Total Devices")," / ",(0,f.gettext)("Current Connected Devices")),u.default.createElement("dd",{className:"info-item-content"},d," / ",p),f.isPro?u.default.createElement(s.Fragment,null,u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("Activated Users")," / ",(0,f.gettext)("Total Users")," / ",(0,f.gettext)("Limits")),u.default.createElement("dd",{className:"info-item-content"},b," / ",E," / ",_?m:"--")):u.default.createElement(s.Fragment,null,u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("Activated Users")," / ",(0,f.gettext)("Total Users")),u.default.createElement("dd",{className:"info-item-content"},b," / ",E)),u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("Groups")),u.default.createElement("dd",{className:"info-item-content"},w),g&&u.default.createElement(s.Fragment,null,u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("Organizations")),u.default.createElement("dd",{className:"info-item-content"},r)))))))}}]),t}(s.Component);t.default=E},2117:function(e,t){},2118:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(7),d=a(c),f=n(31),p=a(f),m=n(473),h=a(m),g=n(525),v=a(g),b=n(4),y=n(526),E=a(y),w=n(8),_=a(w),S=n(1),x=n(3),P=n(5),C=a(P);n(2143);var O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getActiviesFiles=function(e,t,a){var r=n.state.filesData;b.seafileAPI.sysAdminStatisticFiles(e,t,a).then(function(e){var t=[],a=[],o=[],i=[],l=[],s=e.data;if(Array.isArray(s)){s.forEach(function(e){t.push((0,d.default)(e.datetime).format("YYYY-MM-DD")),a.push(e.added),o.push(e.deleted),l.push(e.modified),i.push(e.visited)});var u={label:(0,S.gettext)("Added"),data:a,borderColor:"#57cd6b",backgroundColor:"#57cd6b"},c={label:(0,S.gettext)("Visited"),data:i,borderColor:"#fd913a",backgroundColor:"#fd913a"},f={label:(0,S.gettext)("Modified"),data:l,borderColor:"#72c3fc",backgroundColor:"#72c3fc"},p={label:(0,S.gettext)("Deleted"),data:o,borderColor:"#f75356",backgroundColor:"#f75356"};r=[c,u,f,p]}n.setState({filesData:r,labels:t,isLoading:!1})}).catch(function(e){var t=x.Utils.getErrorMsg(e);C.default.danger(t)})},n.state={filesData:[],labels:[],isLoading:!0},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state,t=e.labels,n=e.filesData,a=e.isLoading;return u.default.createElement(s.Fragment,null,u.default.createElement(p.default,null),u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(h.default,{currentItem:"fileStatistic"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(v.default,{getActiviesFiles:this.getActiviesFiles}),a&&u.default.createElement(_.default,null),!a&&t.length>0&&u.default.createElement(E.default,{labels:t,filesData:n,suggestedMaxNumbers:10,isLegendStatus:!0,chartTitle:(0,S.gettext)("File Operations")}))))}}]),t}(u.default.Component);t.default=O},2119:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(7),p=a(f),m=n(229),h=a(m),g=n(231),v=a(g),b=n(122);n(123);var y={disabledDate:d.default.func.isRequired,value:d.default.object,onChange:d.default.func.isRequired},E=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.defaultCalendarValue=null,n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=window.app.config.lang;this.defaultCalendarValue=(0,p.default)().locale(e).clone()}},{key:"render",value:function(){var e=this.props,t=u.default.createElement(h.default,{defaultValue:this.defaultCalendarValue,disabledDate:e.disabledDate,format:"YYYY-MM-DD",locale:(0,b.translateCalendar)()});return u.default.createElement(v.default,{calendar:t,value:e.value,onChange:e.onChange},function(e){var t=e.value;return u.default.createElement("span",null,u.default.createElement("input",{placeholder:"yyyy-mm-dd",tabIndex:"-1",readOnly:!0,value:t&&t.format("YYYY-MM-DD")||"",className:"form-control system-statistic-input"}))})}}]),t}(u.default.Component);E.propsTypes=y,t.default=E},2120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"Doughnut",function(){return E}),n.d(t,"Pie",function(){return w}),n.d(t,"Line",function(){return _}),n.d(t,"Bar",function(){return S}),n.d(t,"HorizontalBar",function(){return x}),n.d(t,"Radar",function(){return P}),n.d(t,"Polar",function(){return C}),n.d(t,"Bubble",function(){return O}),n.d(t,"Scatter",function(){return D}),n.d(t,"defaults",function(){return M});var l=n(0),s=n.n(l),u=n(2),c=n.n(u),d=n(2121),f=n.n(d),p=n(902),m=n.n(p),h=n(2122),g=n.n(h);n.d(t,"Chart",function(){return f.a});var v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},b="undefined"!==typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:"/media/seafile-editor"})&&"production",y=function(e){function t(){r(this,t);var n=o(this,e.call(this));return n.handleOnClick=function(e){var t=n.chartInstance,a=n.props,r=a.getDatasetAtEvent,o=a.getElementAtEvent,i=a.getElementsAtEvent,l=a.onElementsClick;r&&r(t.getDatasetAtEvent(e),e),o&&o(t.getElementAtEvent(e),e),i&&i(t.getElementsAtEvent(e),e),l&&l(t.getElementsAtEvent(e),e)},n.ref=function(e){n.element=e},n.chartInstance=void 0,n}return i(t,e),t.prototype.componentDidMount=function(){this.renderChart()},t.prototype.componentDidUpdate=function(){if(this.props.redraw)return this.destroyChart(),void this.renderChart();this.updateChart()},t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=(t.redraw,t.type),a=t.options,r=t.plugins,o=t.legend,i=t.height,l=t.width;if(!0===e.redraw)return!0;if(i!==e.height||l!==e.width)return!0;if(n!==e.type)return!0;if(!m()(o,e.legend))return!0;if(!m()(a,e.options))return!0;var s=this.transformDataProp(e);return!m()(this.shadowDataProp,s)||!m()(r,e.plugins)},t.prototype.componentWillUnmount=function(){this.destroyChart()},t.prototype.transformDataProp=function(e){var t=e.data;if("function"==typeof t){return t(this.element)}return t},t.prototype.memoizeDataProps=function(){if(this.props.data){var e=this.transformDataProp(this.props);return this.shadowDataProp=v({},e,{datasets:e.datasets&&e.datasets.map(function(e){return v({},e)})}),this.saveCurrentDatasets(),e}},t.prototype.checkDatasets=function(e){var n="production"!==b&&"prod"!==b,a=this.props.datasetKeyProvider!==t.getLabelAsKey,r=e.length>1;if(n&&r&&!a){var o=!1;e.forEach(function(e){e.label||(o=!0)}),o&&console.error('[react-chartjs-2] Warning: Each dataset needs a unique key. By default, the "label" property on each dataset is used. Alternatively, you may provide a "datasetKeyProvider" as a prop that returns a unique key.')}},t.prototype.getCurrentDatasets=function(){return this.chartInstance&&this.chartInstance.config.data&&this.chartInstance.config.data.datasets||[]},t.prototype.saveCurrentDatasets=function(){var e=this;this.datasets=this.datasets||{},this.getCurrentDatasets().forEach(function(t){e.datasets[e.props.datasetKeyProvider(t)]=t})},t.prototype.updateChart=function(){var e=this,t=this.props.options,n=this.memoizeDataProps(this.props);if(this.chartInstance){t&&(this.chartInstance.options=f.a.helpers.configMerge(this.chartInstance.options,t));var r=this.getCurrentDatasets(),o=n.datasets||[];this.checkDatasets(r);var i=g()(r,this.props.datasetKeyProvider);this.chartInstance.config.data.datasets=o.map(function(t){var n=i[e.props.datasetKeyProvider(t)];if(n&&n.type===t.type&&t.data){n.data.splice(t.data.length),t.data.forEach(function(e,a){n.data[a]=t.data[a]});var r=(t.data,a(t,["data"]));return v({},n,r)}return t});var l=(n.datasets,a(n,["datasets"]));this.chartInstance.config.data=v({},this.chartInstance.config.data,l),this.chartInstance.update()}},t.prototype.renderChart=function(){var e=this.props,n=e.options,a=e.legend,r=e.type,o=e.plugins,i=this.element,l=this.memoizeDataProps();"undefined"===typeof a||m()(t.defaultProps.legend,a)||(n.legend=a),this.chartInstance=new f.a(i,{type:r,data:l,options:n,plugins:o})},t.prototype.destroyChart=function(){this.saveCurrentDatasets();var e=Object.values(this.datasets);this.chartInstance.config.data.datasets=e,this.chartInstance.destroy()},t.prototype.render=function(){var e=this.props,t=e.height,n=e.width,a=e.id;return s.a.createElement("canvas",{ref:this.ref,height:t,width:n,id:a,onClick:this.handleOnClick})},t}(s.a.Component);y.getLabelAsKey=function(e){return e.label},y.propTypes={data:c.a.oneOfType([c.a.object,c.a.func]).isRequired,getDatasetAtEvent:c.a.func,getElementAtEvent:c.a.func,getElementsAtEvent:c.a.func,height:c.a.number,legend:c.a.object,onElementsClick:c.a.func,options:c.a.object,plugins:c.a.arrayOf(c.a.object),redraw:c.a.bool,type:function(e,t,n){if(!f.a.controllers[e[t]])return new Error("Invalid chart type `"+e[t]+"` supplied to `"+n+"`.")},width:c.a.number,datasetKeyProvider:c.a.func},y.defaultProps={legend:{display:!0,position:"bottom"},type:"doughnut",height:150,width:300,redraw:!1,options:{},datasetKeyProvider:y.getLabelAsKey},t.default=y;var E=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){var e=this;return s.a.createElement(y,v({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"doughnut"}))},t}(s.a.Component),w=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){var e=this;return s.a.createElement(y,v({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"pie"}))},t}(s.a.Component),_=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){var e=this;return s.a.createElement(y,v({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"line"}))},t}(s.a.Component),S=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){var e=this;return s.a.createElement(y,v({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"bar"}))},t}(s.a.Component),x=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){var e=this;return s.a.createElement(y,v({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"horizontalBar"}))},t}(s.a.Component),P=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){var e=this;return s.a.createElement(y,v({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"radar"}))},t}(s.a.Component),C=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){var e=this;return s.a.createElement(y,v({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"polarArea"}))},t}(s.a.Component),O=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){var e=this;return s.a.createElement(y,v({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"bubble"}))},t}(s.a.Component),D=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){var e=this;return s.a.createElement(y,v({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"scatter"}))},t}(s.a.Component),M=f.a.defaults}.call(t,n(119))},2121:function(e,t,n){!function(t,a){e.exports=a(function(){try{return n(7)}catch(e){}}())}(0,function(e){"use strict";function t(e){var t,n,a,r=e[0]/255,o=e[1]/255,i=e[2]/255,l=Math.min(r,o,i),s=Math.max(r,o,i),u=s-l;return s==l?t=0:r==s?t=(o-i)/u:o==s?t=2+(i-r)/u:i==s&&(t=4+(r-o)/u),t=Math.min(60*t,360),t<0&&(t+=360),a=(l+s)/2,n=s==l?0:a<=.5?u/(s+l):u/(2-s-l),[t,100*n,100*a]}function n(e){var t,n,a,r=e[0],o=e[1],i=e[2],l=Math.min(r,o,i),s=Math.max(r,o,i),u=s-l;return n=0==s?0:u/s*1e3/10,s==l?t=0:r==s?t=(o-i)/u:o==s?t=2+(i-r)/u:i==s&&(t=4+(r-o)/u),t=Math.min(60*t,360),t<0&&(t+=360),a=s/255*1e3/10,[t,n,a]}function a(e){var n=e[0],a=e[1],r=e[2],o=t(e)[0],i=1/255*Math.min(n,Math.min(a,r)),r=1-1/255*Math.max(n,Math.max(a,r));return[o,100*i,100*r]}function o(e){var t,n,a,r,o=e[0]/255,i=e[1]/255,l=e[2]/255;return r=Math.min(1-o,1-i,1-l),t=(1-o-r)/(1-r)||0,n=(1-i-r)/(1-r)||0,a=(1-l-r)/(1-r)||0,[100*t,100*n,100*a,100*r]}function i(e){return Ln[JSON.stringify(e)]}function l(e){var t=e[0]/255,n=e[1]/255,a=e[2]/255;return t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,[100*(.4124*t+.3576*n+.1805*a),100*(.2126*t+.7152*n+.0722*a),100*(.0193*t+.1192*n+.9505*a)]}function s(e){var t,n,a,r=l(e),o=r[0],i=r[1],s=r[2];return o/=95.047,i/=100,s/=108.883,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,t=116*i-16,n=500*(o-i),a=200*(i-s),[t,n,a]}function u(e){return R(s(e))}function c(e){var t,n,a,r,o,i=e[0]/360,l=e[1]/100,s=e[2]/100;if(0==l)return o=255*s,[o,o,o];n=s<.5?s*(1+l):s+l-s*l,t=2*s-n,r=[0,0,0];for(var u=0;u<3;u++)a=i+1/3*-(u-1),a<0&&a++,a>1&&a--,o=6*a<1?t+6*(n-t)*a:2*a<1?n:3*a<2?t+(n-t)*(2/3-a)*6:t,r[u]=255*o;return r}function d(e){var t,n,a=e[0],r=e[1]/100,o=e[2]/100;return 0===o?[0,0,0]:(o*=2,r*=o<=1?o:2-o,n=(o+r)/2,t=2*r/(o+r),[a,100*t,100*n])}function f(e){return a(c(e))}function p(e){return o(c(e))}function m(e){return i(c(e))}function h(e){var t=e[0]/60,n=e[1]/100,a=e[2]/100,r=Math.floor(t)%6,o=t-Math.floor(t),i=255*a*(1-n),l=255*a*(1-n*o),s=255*a*(1-n*(1-o)),a=255*a;switch(r){case 0:return[a,s,i];case 1:return[l,a,i];case 2:return[i,a,s];case 3:return[i,l,a];case 4:return[s,i,a];case 5:return[a,i,l]}}function v(e){var t,n,a=e[0],r=e[1]/100,o=e[2]/100;return n=(2-r)*o,t=r*o,t/=n<=1?n:2-n,t=t||0,n/=2,[a,100*t,100*n]}function y(e){return a(h(e))}function E(e){return o(h(e))}function w(e){return i(h(e))}function _(e){var t,n,a,o,i=e[0]/360,l=e[1]/100,s=e[2]/100,u=l+s;switch(u>1&&(l/=u,s/=u),t=Math.floor(6*i),n=1-s,a=6*i-t,0!=(1&t)&&(a=1-a),o=l+a*(n-l),t){default:case 6:case 0:r=n,g=o,b=l;break;case 1:r=o,g=n,b=l;break;case 2:r=l,g=n,b=o;break;case 3:r=l,g=o,b=n;break;case 4:r=o,g=l,b=n;break;case 5:r=n,g=l,b=o}return[255*r,255*g,255*b]}function S(e){return t(_(e))}function x(e){return n(_(e))}function P(e){return o(_(e))}function C(e){return i(_(e))}function O(e){var t,n,a,r=e[0]/100,o=e[1]/100,i=e[2]/100,l=e[3]/100;return t=1-Math.min(1,r*(1-l)+l),n=1-Math.min(1,o*(1-l)+l),a=1-Math.min(1,i*(1-l)+l),[255*t,255*n,255*a]}function D(e){return t(O(e))}function M(e){return n(O(e))}function k(e){return a(O(e))}function T(e){return i(O(e))}function L(e){var t,n,a,r=e[0]/100,o=e[1]/100,i=e[2]/100;return t=3.2406*r+-1.5372*o+-.4986*i,n=-.9689*r+1.8758*o+.0415*i,a=.0557*r+-.204*o+1.057*i,t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*=12.92,t=Math.min(Math.max(0,t),1),n=Math.min(Math.max(0,n),1),a=Math.min(Math.max(0,a),1),[255*t,255*n,255*a]}function N(e){var t,n,a,r=e[0],o=e[1],i=e[2];return r/=95.047,o/=100,i/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,t=116*o-16,n=500*(r-o),a=200*(o-i),[t,n,a]}function I(e){return R(N(e))}function Y(e){var t,n,a,r,o=e[0],i=e[1],l=e[2];return o<=8?(n=100*o/903.3,r=n/100*7.787+16/116):(n=100*Math.pow((o+16)/116,3),r=Math.pow(n/100,1/3)),t=t/95.047<=.008856?t=95.047*(i/500+r-16/116)/7.787:95.047*Math.pow(i/500+r,3),a=a/108.883<=.008859?a=108.883*(r-l/200-16/116)/7.787:108.883*Math.pow(r-l/200,3),[t,n,a]}function R(e){var t,n,a,r=e[0],o=e[1],i=e[2];return t=Math.atan2(i,o),n=360*t/2/Math.PI,n<0&&(n+=360),a=Math.sqrt(o*o+i*i),[r,a,n]}function A(e){return L(Y(e))}function j(e){var t,n,a,r=e[0],o=e[1],i=e[2];return a=i/360*2*Math.PI,t=o*Math.cos(a),n=o*Math.sin(a),[r,t,n]}function Z(e){return Y(j(e))}function F(e){return A(j(e))}function B(e){return Tn[e]}function X(e){return t(B(e))}function H(e){return n(B(e))}function J(e){return a(B(e))}function U(e){return o(B(e))}function Q(e){return s(B(e))}function G(e){return l(B(e))}function W(e){if(e){var t=/^#([a-fA-F0-9]{3,4})$/i,n=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,a=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,r=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,o=/(\w+)/,i=[0,0,0],l=1,s=e.match(t),u="";if(s){s=s[1],u=s[3];for(var c=0;c<i.length;c++)i[c]=parseInt(s[c]+s[c],16);u&&(l=Math.round(parseInt(u+u,16)/255*100)/100)}else if(s=e.match(n)){u=s[2],s=s[1];for(var c=0;c<i.length;c++)i[c]=parseInt(s.slice(2*c,2*c+2),16);u&&(l=Math.round(parseInt(u,16)/255*100)/100)}else if(s=e.match(a)){for(var c=0;c<i.length;c++)i[c]=parseInt(s[c+1]);l=parseFloat(s[4])}else if(s=e.match(r)){for(var c=0;c<i.length;c++)i[c]=Math.round(2.55*parseFloat(s[c+1]));l=parseFloat(s[4])}else if(s=e.match(o)){if("transparent"==s[1])return[0,0,0,0];if(!(i=Bn[s[1]]))return}for(var c=0;c<i.length;c++)i[c]=ue(i[c],0,255);return l=l||0==l?ue(l,0,1):1,i[3]=l,i}}function z(e){if(e){var t=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,n=e.match(t);if(n){var a=parseFloat(n[4]);return[ue(parseInt(n[1]),0,360),ue(parseFloat(n[2]),0,100),ue(parseFloat(n[3]),0,100),ue(isNaN(a)?1:a,0,1)]}}}function K(e){if(e){var t=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,n=e.match(t);if(n){var a=parseFloat(n[4]);return[ue(parseInt(n[1]),0,360),ue(parseFloat(n[2]),0,100),ue(parseFloat(n[3]),0,100),ue(isNaN(a)?1:a,0,1)]}}}function q(e){var t=W(e);return t&&t.slice(0,3)}function V(e){var t=z(e);return t&&t.slice(0,3)}function $(e){var t=W(e);return t?t[3]:(t=z(e))?t[3]:(t=K(e))?t[3]:void 0}function ee(e,t){var t=void 0!==t&&3===e.length?t:e[3];return"#"+ce(e[0])+ce(e[1])+ce(e[2])+(t>=0&&t<1?ce(Math.round(255*t)):"")}function te(e,t){return t<1||e[3]&&e[3]<1?ne(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"}function ne(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function ae(e,t){return t<1||e[3]&&e[3]<1?re(e,t):"rgb("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%)"}function re(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function oe(e,t){return t<1||e[3]&&e[3]<1?ie(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"}function ie(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function le(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"}function se(e){return Hn[e.slice(0,3)]}function ue(e,t,n){return Math.min(Math.max(t,e),n)}function ce(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}function de(e){return!e||Wn.isNullOrUndef(e.size)||Wn.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function fe(e,t,n,a){var r,o,i,l,s,u,c,d,f,p=Object.keys(n);for(r=0,o=p.length;r<o;++r)if(i=p[r],u=n[i],t.hasOwnProperty(i)||(t[i]=u),(l=t[i])!==u&&"_"!==i[0]){if(e.hasOwnProperty(i)||(e[i]=l),s=e[i],(c=typeof u)===typeof s)if("string"===c){if(d=Qn(s),d.valid&&(f=Qn(u),f.valid)){t[i]=f.mix(d,a).rgbString();continue}}else if(va.isFinite(s)&&va.isFinite(u)){t[i]=s+(u-s)*a;continue}t[i]=u}}function pe(e,t){if(e._chartjs)return void e._chartjs.listeners.push(t);Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Ma.forEach(function(t){var n="onData"+t.charAt(0).toUpperCase()+t.slice(1),a=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),r=a.apply(this,t);return va.each(e._chartjs.listeners,function(e){"function"===typeof e[n]&&e[n].apply(e,t)}),r}})})}function me(e,t){var n=e._chartjs;if(n){var a=n.listeners,r=a.indexOf(t);-1!==r&&a.splice(r,1),a.length>0||(Ma.forEach(function(t){delete e[t]}),delete e._chartjs)}}function he(e,t){var n=t.startAngle,a=t.endAngle,r=t.pixelMargin,o=r/t.outerRadius,i=t.x,l=t.y;e.beginPath(),e.arc(i,l,t.outerRadius,n-o,a+o),t.innerRadius>r?(o=r/t.innerRadius,e.arc(i,l,t.innerRadius-r,a+o,n-o,!0)):e.arc(i,l,r,a+Math.PI/2,n-Math.PI/2),e.closePath(),e.clip()}function ge(e,t,n,a){var r,o=n.endAngle;for(a&&(n.endAngle=n.startAngle+La,he(e,n),n.endAngle=o,n.endAngle===n.startAngle&&n.fullCircles&&(n.endAngle+=La,n.fullCircles--)),e.beginPath(),e.arc(n.x,n.y,n.innerRadius,n.startAngle+La,n.startAngle,!0),r=0;r<n.fullCircles;++r)e.stroke();for(e.beginPath(),e.arc(n.x,n.y,t.outerRadius,n.startAngle,n.startAngle+La),r=0;r<n.fullCircles;++r)e.stroke()}function ve(e,t,n){var a="inner"===t.borderAlign;a?(e.lineWidth=2*t.borderWidth,e.lineJoin="round"):(e.lineWidth=t.borderWidth,e.lineJoin="bevel"),n.fullCircles&&ge(e,t,n,a),a&&he(e,n),e.beginPath(),e.arc(n.x,n.y,t.outerRadius,n.startAngle,n.endAngle),e.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,!0),e.closePath(),e.stroke()}function be(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}function ye(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius}function Ee(e){return e&&void 0!==e.width}function we(e){var t,n,a,r,o;return Ee(e)?(o=e.width/2,t=e.x-o,n=e.x+o,a=Math.min(e.y,e.base),r=Math.max(e.y,e.base)):(o=e.height/2,t=Math.min(e.x,e.base),n=Math.max(e.x,e.base),a=e.y-o,r=e.y+o),{left:t,top:a,right:n,bottom:r}}function _e(e,t,n){return e===t?n:e===n?t:e}function Se(e){var t=e.borderSkipped,n={};return t?(e.horizontal?e.base>e.x&&(t=_e(t,"left","right")):e.base<e.y&&(t=_e(t,"bottom","top")),n[t]=!0,n):n}function xe(e,t,n){var a,r,o,i,l=e.borderWidth,s=Se(e);return va.isObject(l)?(a=+l.top||0,r=+l.right||0,o=+l.bottom||0,i=+l.left||0):a=r=o=i=+l||0,{t:s.top||a<0?0:a>n?n:a,r:s.right||r<0?0:r>t?t:r,b:s.bottom||o<0?0:o>n?n:o,l:s.left||i<0?0:i>t?t:i}}function Pe(e){var t=we(e),n=t.right-t.left,a=t.bottom-t.top,r=xe(e,n/2,a/2);return{outer:{x:t.left,y:t.top,w:n,h:a},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:a-r.t-r.b}}}function Ce(e,t,n){var a=null===t,r=null===n,o=!(!e||a&&r)&&we(e);return o&&(a||t>=o.left&&t<=o.right)&&(r||n>=o.top&&n<=o.bottom)}function Oe(e,t){var n,a,r,o,i=e._length;for(r=1,o=t.length;r<o;++r)i=Math.min(i,Math.abs(t[r]-t[r-1]));for(r=0,o=e.getTicks().length;r<o;++r)a=e.getPixelForTick(r),i=r>0?Math.min(i,Math.abs(a-n)):i,n=a;return i}function De(e,t,n){var a,r,o=n.barThickness,i=t.stackCount,l=t.pixels[e],s=va.isNullOrUndef(o)?Oe(t.scale,t.pixels):-1;return va.isNullOrUndef(o)?(a=s*n.categoryPercentage,r=n.barPercentage):(a=o*i,r=1),{chunk:a/i,ratio:r,start:l-a/2}}function Me(e,t,n){var a,r,o=t.pixels,i=o[e],l=e>0?o[e-1]:null,s=e<o.length-1?o[e+1]:null,u=n.categoryPercentage;return null===l&&(l=i-(null===s?t.end-t.start:s-i)),null===s&&(s=i+i-l),a=i-(i-Math.min(l,s))/2*u,r=Math.abs(s-l)/2*u,{chunk:r/t.stackCount,ratio:n.barPercentage,start:a}}function ke(e,t){return e.native?{x:e.x,y:e.y}:va.getRelativePosition(e,t)}function Te(e,t){var n,a,r,o,i,l,s=e._getSortedVisibleDatasetMetas();for(a=0,o=s.length;a<o;++a)for(n=s[a].data,r=0,i=n.length;r<i;++r)l=n[r],l._view.skip||t(l)}function Le(e,t){var n=[];return Te(e,function(e){e.inRange(t.x,t.y)&&n.push(e)}),n}function Ne(e,t,n,a){var r=Number.POSITIVE_INFINITY,o=[];return Te(e,function(e){if(!n||e.inRange(t.x,t.y)){var i=e.getCenterPoint(),l=a(t,i);l<r?(o=[e],r=l):l===r&&o.push(e)}}),o}function Ie(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,a){var r=t?Math.abs(e.x-a.x):0,o=n?Math.abs(e.y-a.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Ye(e,t,n){var a=ke(t,e);n.axis=n.axis||"x";var r=Ie(n.axis),o=n.intersect?Le(e,a):Ne(e,a,!1,r),i=[];return o.length?(e._getSortedVisibleDatasetMetas().forEach(function(e){var t=e.data[o[0]._index];t&&!t._view.skip&&i.push(t)}),i):[]}function Re(e,t){return va.where(e,function(e){return e.pos===t})}function Ae(e,t){return e.sort(function(e,n){var a=t?n:e,r=t?e:n;return a.weight===r.weight?a.index-r.index:a.weight-r.weight})}function je(e){var t,n,a,r=[];for(t=0,n=(e||[]).length;t<n;++t)a=e[t],r.push({index:t,box:a,pos:a.position,horizontal:a.isHorizontal(),weight:a.weight});return r}function Ze(e,t){var n,a,r;for(n=0,a=e.length;n<a;++n)r=e[n],r.width=r.horizontal?r.box.fullWidth&&t.availableWidth:t.vBoxMaxWidth,r.height=r.horizontal&&t.hBoxMaxHeight}function Fe(e){var t=je(e),n=Ae(Re(t,"left"),!0),a=Ae(Re(t,"right")),r=Ae(Re(t,"top"),!0),o=Ae(Re(t,"bottom"));return{leftAndTop:n.concat(r),rightAndBottom:a.concat(o),chartArea:Re(t,"chartArea"),vertical:n.concat(a),horizontal:r.concat(o)}}function Be(e,t,n,a){return Math.max(e[n],t[n])+Math.max(e[a],t[a])}function Xe(e,t,n){var a,r,o=n.box,i=e.maxPadding;if(n.size&&(e[n.pos]-=n.size),n.size=n.horizontal?o.height:o.width,e[n.pos]+=n.size,o.getPadding){var l=o.getPadding();i.top=Math.max(i.top,l.top),i.left=Math.max(i.left,l.left),i.bottom=Math.max(i.bottom,l.bottom),i.right=Math.max(i.right,l.right)}if(a=t.outerWidth-Be(i,e,"left","right"),r=t.outerHeight-Be(i,e,"top","bottom"),a!==e.w||r!==e.h)return e.w=a,e.h=r,n.horizontal?a!==e.w:r!==e.h}function He(e){function t(t){var a=Math.max(n[t]-e[t],0);return e[t]+=a,a}var n=e.maxPadding;e.y+=t("top"),e.x+=t("left"),t("right"),t("bottom")}function Je(e,t){function n(e){var n={left:0,top:0,right:0,bottom:0};return e.forEach(function(e){n[e]=Math.max(t[e],a[e])}),n}var a=t.maxPadding;return n(e?["left","right"]:["top","bottom"])}function Ue(e,t,n){var a,r,o,i,l,s,u=[];for(a=0,r=e.length;a<r;++a)o=e[a],i=o.box,i.update(o.width||t.w,o.height||t.h,Je(o.horizontal,t)),Xe(t,n,o)&&(s=!0,u.length&&(l=!0)),i.fullWidth||u.push(o);return l?Ue(u,t,n)||s:s}function Qe(e,t,n){var a,r,o,i,l=n.padding,s=t.x,u=t.y;for(a=0,r=e.length;a<r;++a)o=e[a],i=o.box,o.horizontal?(i.left=i.fullWidth?l.left:t.left,i.right=i.fullWidth?n.outerWidth-l.right:t.left+t.w,i.top=u,i.bottom=u+i.height,i.width=i.right-i.left,u=i.bottom):(i.left=s,i.right=s+i.width,i.top=t.top,i.bottom=t.top+t.h,i.height=i.bottom-i.top,s=i.right);t.x=s,t.y=u}function Ge(e,t){var n=va.getStyle(e,t),a=n&&n.match(/^(\d+)(\.\d+)?px$/);return a?Number(a[1]):void 0}function We(e,t){var n=e.style,a=e.getAttribute("height"),r=e.getAttribute("width");if(e[_r]={initial:{height:a,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===r||""===r){var o=Ge(e,"width");void 0!==o&&(e.width=o)}if(null===a||""===a)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var i=Ge(e,"height");void 0!==o&&(e.height=i)}return e}function ze(e,t,n){e.addEventListener(t,n,Mr)}function Ke(e,t,n){e.removeEventListener(t,n,Mr)}function qe(e,t,n,a,r){return{type:e,chart:t,native:r||null,x:void 0!==n?n:null,y:void 0!==a?a:null}}function Ve(e,t){var n=Or[e.type]||e.type,a=va.getRelativePosition(e,t);return qe(n,t,a.x,a.y,e)}function $e(e,t){var n=!1,a=[];return function(){a=Array.prototype.slice.call(arguments),t=t||this,n||(n=!0,va.requestAnimFrame.call(window,function(){n=!1,e.apply(t,a)}))}}function et(e){var t=document.createElement("div");return t.className=e||"",t}function tt(e){var t=et(Sr),n=et(Sr+"-expand"),a=et(Sr+"-shrink");n.appendChild(et()),a.appendChild(et()),t.appendChild(n),t.appendChild(a),t._reset=function(){n.scrollLeft=1e6,n.scrollTop=1e6,a.scrollLeft=1e6,a.scrollTop=1e6};var r=function(){t._reset(),e()};return ze(n,"scroll",r.bind(n,"expand")),ze(a,"scroll",r.bind(a,"shrink")),t}function nt(e,t){var n=e[_r]||(e[_r]={}),a=n.renderProxy=function(e){e.animationName===Pr&&t()};va.each(Cr,function(t){ze(e,t,a)}),n.reflow=!!e.offsetParent,e.classList.add(xr)}function at(e){var t=e[_r]||{},n=t.renderProxy;n&&(va.each(Cr,function(t){Ke(e,t,n)}),delete t.renderProxy),e.classList.remove(xr)}function rt(e,t,n){var a=e[_r]||(e[_r]={}),r=a.resizer=tt($e(function(){if(a.resizer){var r=n.options.maintainAspectRatio&&e.parentNode,o=r?r.clientWidth:0;t(qe("resize",n)),r&&r.clientWidth<o&&n.canvas&&t(qe("resize",n))}}));nt(e,function(){if(a.resizer){var t=e.parentNode;t&&t!==r.parentNode&&t.insertBefore(r,t.firstChild),r._reset()}})}function ot(e){var t=e[_r]||{},n=t.resizer;delete t.resizer,at(e),n&&n.parentNode&&n.parentNode.removeChild(n)}function it(e,t){var n=e[_r]||(e[_r]={});if(!n.containsStyles){n.containsStyles=!0,t="/* Chart.js */\n"+t;var a=document.createElement("style");a.setAttribute("type","text/css"),a.appendChild(document.createTextNode(t)),e.appendChild(a)}}function lt(e,t){return t&&(va.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function st(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function ut(e){var t=e._xScale,n=e._yScale||e._scale,a=e._index,r=e._datasetIndex,o=e._chart.getDatasetMeta(r).controller,i=o._getIndexScale(),l=o._getValueScale();return{xLabel:t?t.getLabelForIndex(a,r):"",yLabel:n?n.getLabelForIndex(a,r):"",label:i?""+i.getLabelForIndex(a,r):"",value:l?""+l.getLabelForIndex(a,r):"",index:a,datasetIndex:r,x:e._model.x,y:e._model.y}}function ct(e){var t=ia.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,rtl:e.rtl,textDirection:e.textDirection,bodyFontColor:e.bodyFontColor,_bodyFontFamily:Yr(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:Yr(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:Yr(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:Yr(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:Yr(e.titleFontStyle,t.defaultFontStyle),titleFontSize:Yr(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:Yr(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:Yr(e.footerFontStyle,t.defaultFontStyle),footerFontSize:Yr(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function dt(e,t){var n=e._chart.ctx,a=2*t.yPadding,r=0,o=t.body,i=o.reduce(function(e,t){return e+t.before.length+t.lines.length+t.after.length},0);i+=t.beforeBody.length+t.afterBody.length;var l=t.title.length,s=t.footer.length,u=t.titleFontSize,c=t.bodyFontSize,d=t.footerFontSize;a+=l*u,a+=l?(l-1)*t.titleSpacing:0,a+=l?t.titleMarginBottom:0,a+=i*c,a+=i?(i-1)*t.bodySpacing:0,a+=s?t.footerMarginTop:0,a+=s*d,a+=s?(s-1)*t.footerSpacing:0;var f=0,p=function(e){r=Math.max(r,n.measureText(e).width+f)};return n.font=va.fontString(u,t._titleFontStyle,t._titleFontFamily),va.each(t.title,p),n.font=va.fontString(c,t._bodyFontStyle,t._bodyFontFamily),va.each(t.beforeBody.concat(t.afterBody),p),f=t.displayColors?c+2:0,va.each(o,function(e){va.each(e.before,p),va.each(e.lines,p),va.each(e.after,p)}),f=0,n.font=va.fontString(d,t._footerFontStyle,t._footerFontFamily),va.each(t.footer,p),r+=2*t.xPadding,{width:r,height:a}}function ft(e,t){var n=e._model,a=e._chart,r=e._chart.chartArea,o="center",i="center";n.y<t.height?i="top":n.y>a.height-t.height&&(i="bottom");var l,s,u,c,d,f=(r.left+r.right)/2,p=(r.top+r.bottom)/2;"center"===i?(l=function(e){return e<=f},s=function(e){return e>f}):(l=function(e){return e<=t.width/2},s=function(e){return e>=a.width-t.width/2}),u=function(e){return e+t.width+n.caretSize+n.caretPadding>a.width},c=function(e){return e-t.width-n.caretSize-n.caretPadding<0},d=function(e){return e<=p?"top":"bottom"},l(n.x)?(o="left",u(n.x)&&(o="center",i=d(n.y))):s(n.x)&&(o="right",c(n.x)&&(o="center",i=d(n.y)));var m=e._options;return{xAlign:m.xAlign?m.xAlign:o,yAlign:m.yAlign?m.yAlign:i}}function pt(e,t,n,a){var r=e.x,o=e.y,i=e.caretSize,l=e.caretPadding,s=e.cornerRadius,u=n.xAlign,c=n.yAlign,d=i+l,f=s+l;return"right"===u?r-=t.width:"center"===u&&(r-=t.width/2,r+t.width>a.width&&(r=a.width-t.width),r<0&&(r=0)),"top"===c?o+=d:o-="bottom"===c?t.height+d:t.height/2,"center"===c?"left"===u?r+=d:"right"===u&&(r-=d):"left"===u?r-=f:"right"===u&&(r+=f),{x:r,y:o}}function mt(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function ht(e){return lt([],st(e))}function gt(){return va.merge({},[].slice.call(arguments),{merger:function(e,t,n,a){if("xAxes"===e||"yAxes"===e){var r,o,i,l=n[e].length;for(t[e]||(t[e]=[]),r=0;r<l;++r)i=n[e][r],o=Br(i.type,"xAxes"===e?"category":"linear"),r>=t[e].length&&t[e].push({}),!t[e][r].type||i.type&&i.type!==t[e][r].type?va.merge(t[e][r],[Ir.getScaleDefaults(o),i]):va.merge(t[e][r],i)}else va._merger(e,t,n,a)}})}function vt(){return va.merge({},[].slice.call(arguments),{merger:function(e,t,n,a){var r=t[e]||{},o=n[e];"scales"===e?t[e]=gt(r,o):"scale"===e?t[e]=va.merge(r,[Ir.getScaleDefaults(o.type),o]):va._merger(e,t,n,a)}})}function bt(e){e=e||{};var t=e.data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=vt(ia.global,ia[e.type],e.options||{}),e}function yt(e){var t=e.options;va.each(e.scales,function(t){br.removeBox(e,t)}),t=vt(ia.global,ia[e.config.type],t),e.options=e.config.options=t,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=t.tooltips,e.tooltip.initialize()}function Et(e,t,n){var a,r=function(e){return e.id===a};do{a=t+n++}while(va.findIndex(e,r)>=0);return a}function wt(e){return"top"===e||"bottom"===e}function _t(e,t){return function(n,a){return n[e]===a[e]?n[t]-a[t]:n[e]-a[e]}}function St(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function xt(e){this.options=e||{}}function Pt(e,t){for(var n=[],a=e.length/t,r=0,o=e.length;r<o;r+=a)n.push(e[Math.floor(r)]);return n}function Ct(e,t,n){var a,r=e.getTicks().length,o=Math.min(t,r-1),i=e.getPixelForTick(o),l=e._startPixel,s=e._endPixel;if(!(n&&(a=1===r?Math.max(i-l,s-i):0===t?(e.getPixelForTick(1)-i)/2:(i-e.getPixelForTick(o-1))/2,(i+=o<t?a:-a)<l-1e-6||i>s+1e-6)))return i}function Ot(e,t){va.each(e,function(e){var n,a=e.gc,r=a.length/2;if(r>t){for(n=0;n<r;++n)delete e.data[a[n]];a.splice(0,r)}})}function Dt(e,t,n,a){function r(e){return{width:y[e]||0,height:E[e]||0,offset:w[e]||0}}var o,i,l,s,u,c,d,f,p,m,h,g,v,b=n.length,y=[],E=[],w=[];for(o=0;o<b;++o){if(s=n[o].label,u=n[o].major?t.major:t.minor,e.font=c=u.string,d=a[c]=a[c]||{data:{},gc:[]},f=u.lineHeight,p=m=0,Wr(s)||Gr(s)){if(Gr(s))for(i=0,l=s.length;i<l;++i)h=s[i],Wr(h)||Gr(h)||(p=va.measureText(e,d.data,d.gc,p,h),m+=f)}else p=va.measureText(e,d.data,d.gc,p,s),m=f;y.push(p),E.push(m),w.push(f/2)}return Ot(a,b),g=y.indexOf(Math.max.apply(null,y)),v=E.indexOf(Math.max.apply(null,E)),{first:r(0),last:r(b-1),widest:r(g),highest:r(v)}}function Mt(e){return e.drawTicks?e.tickMarkLength:0}function kt(e){var t,n;return e.display?(t=va.options._parseFont(e),n=va.options.toPadding(e.padding),t.lineHeight+n.height):0}function Tt(e,t){return va.extend(va.options._parseFont({fontFamily:zr(t.fontFamily,e.fontFamily),fontSize:zr(t.fontSize,e.fontSize),fontStyle:zr(t.fontStyle,e.fontStyle),lineHeight:zr(t.lineHeight,e.lineHeight)}),{color:va.options.resolve([t.fontColor,e.fontColor,ia.global.defaultFontColor])})}function Lt(e){var t=Tt(e,e.minor);return{minor:t,major:e.major.enabled?Tt(e,e.major):t}}function Nt(e){var t,n,a,r=[];for(n=0,a=e.length;n<a;++n)t=e[n],"undefined"!==typeof t._index&&r.push(t);return r}function It(e){var t,n,a=e.length;if(a<2)return!1;for(n=e[0],t=1;t<a;++t)if(e[t]-e[t-1]!==n)return!1;return n}function Yt(e,t,n,a){var r,o,i,l,s=It(e),u=(t.length-1)/a;if(!s)return Math.max(u,1);for(r=va.math._factorize(s),i=0,l=r.length-1;i<l;i++)if((o=r[i])>u)return o;return Math.max(u,1)}function Rt(e){var t,n,a=[];for(t=0,n=e.length;t<n;t++)e[t].major&&a.push(t);return a}function At(e,t,n){var a,r,o=0,i=t[0];for(n=Math.ceil(n),a=0;a<e.length;a++)r=e[a],a===i?(r._index=a,o++,i=t[o*n]):delete r.label}function jt(e,t,n,a){var r,o,i,l,s=zr(n,0),u=Math.min(zr(a,e.length),e.length),c=0;for(t=Math.ceil(t),a&&(r=a-n,t=r/Math.floor(r/t)),l=s;l<0;)c++,l=Math.round(s+c*t);for(o=Math.max(s,0);o<u;o++)i=e[o],o===l?(i._index=o,c++,l=Math.round(s+c*t)):delete i.label}function Zt(e,t){var n,a,r,o,i=[],l=e.stepSize,s=l||1,u=e.maxTicks-1,c=e.min,d=e.max,f=e.precision,p=t.min,m=t.max,h=va.niceNum((m-p)/u/s)*s;if(h<1e-14&&ro(c)&&ro(d))return[p,m];o=Math.ceil(m/h)-Math.floor(p/h),o>u&&(h=va.niceNum(o*h/u/s)*s),l||ro(f)?n=Math.pow(10,va._decimalPlaces(h)):(n=Math.pow(10,f),h=Math.ceil(h*n)/n),a=Math.floor(p/h)*h,r=Math.ceil(m/h)*h,l&&(!ro(c)&&va.almostWhole(c/h,h/1e3)&&(a=c),!ro(d)&&va.almostWhole(d/h,h/1e3)&&(r=d)),o=(r-a)/h,o=va.almostEquals(o,Math.round(o),h/1e3)?Math.round(o):Math.ceil(o),a=Math.round(a*n)/n,r=Math.round(r*n)/n,i.push(ro(c)?a:c);for(var g=1;g<o;++g)i.push(Math.round((a+g*h)*n)/n);return i.push(ro(d)?r:d),i}function Ft(e,t,n){var a=[n.type,void 0===t&&void 0===n.stack?n.index:"",n.stack].join(".");return void 0===e[a]&&(e[a]={pos:[],neg:[]}),e[a]}function Bt(e,t,n,a){var r,o,i=e.options,l=i.stacked,s=Ft(t,l,n),u=s.pos,c=s.neg,d=a.length;for(r=0;r<d;++r)o=e._parseValue(a[r]),isNaN(o.min)||isNaN(o.max)||n.data[r].hidden||(u[r]=u[r]||0,c[r]=c[r]||0,i.relativePoints?u[r]=100:o.min<0||o.max<0?c[r]+=o.min:u[r]+=o.max)}function Xt(e,t,n){var a,r,o=n.length;for(a=0;a<o;++a)r=e._parseValue(n[a]),isNaN(r.min)||isNaN(r.max)||t.data[a].hidden||(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}function Ht(e,t){var n,a,r=[],o=uo(e.min,Math.pow(10,Math.floor(co(t.min)))),i=Math.floor(co(t.max)),l=Math.ceil(t.max/Math.pow(10,i));0===o?(n=Math.floor(co(t.minNotZero)),a=Math.floor(t.minNotZero/Math.pow(10,n)),r.push(o),o=a*Math.pow(10,n)):(n=Math.floor(co(o)),a=Math.floor(o/Math.pow(10,n)));var s=n<0?Math.pow(10,Math.abs(n)):1;do{r.push(o),++a,10===a&&(a=1,++n,s=n>=0?1:s),o=Math.round(a*Math.pow(10,n)*s)/s}while(n<i||n===i&&a<l);var u=uo(e.max,o);return r.push(u),r}function Jt(e,t){return va.isFinite(e)&&e>=0?e:t}function Ut(e){var t=e.ticks;return t.display&&e.display?ho(t.fontSize,ia.global.defaultFontSize)+2*t.backdropPaddingY:0}function Qt(e,t,n){return va.isArray(n)?{w:va.longestText(e,e.font,n),h:n.length*t}:{w:e.measureText(n).width,h:t}}function Gt(e,t,n,a,r){return e===a||e===r?{start:t-n/2,end:t+n/2}:e<a||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function Wt(e){var t,n,a,r=va.options._parseFont(e.options.pointLabels),o={l:0,r:e.width,t:0,b:e.height-e.paddingTop},i={};e.ctx.font=r.string,e._pointLabelSizes=[];var l=e.chart.data.labels.length;for(t=0;t<l;t++){a=e.getPointPosition(t,e.drawingArea+5),n=Qt(e.ctx,r.lineHeight,e.pointLabels[t]),e._pointLabelSizes[t]=n;var s=e.getIndexAngle(t),u=va.toDegrees(s)%360,c=Gt(u,a.x,n.w,0,180),d=Gt(u,a.y,n.h,90,270);c.start<o.l&&(o.l=c.start,i.l=s),c.end>o.r&&(o.r=c.end,i.r=s),d.start<o.t&&(o.t=d.start,i.t=s),d.end>o.b&&(o.b=d.end,i.b=s)}e.setReductions(e.drawingArea,o,i)}function zt(e){return 0===e||180===e?"center":e<180?"left":"right"}function Kt(e,t,n,a){var r,o,i=n.y+a/2;if(va.isArray(t))for(r=0,o=t.length;r<o;++r)e.fillText(t[r],n.x,i),i+=a;else e.fillText(t,n.x,i)}function qt(e,t,n){90===e||270===e?n.y-=t.h/2:(e>270||e<90)&&(n.y-=t.h)}function Vt(e){var t=e.ctx,n=e.options,a=n.pointLabels,r=Ut(n),o=e.getDistanceFromCenterForValue(n.ticks.reverse?e.min:e.max),i=va.options._parseFont(a);t.save(),t.font=i.string,t.textBaseline="middle";for(var l=e.chart.data.labels.length-1;l>=0;l--){var s=0===l?r/2:0,u=e.getPointPosition(l,o+s+5),c=go(a.fontColor,l,ia.global.defaultFontColor);t.fillStyle=c;var d=e.getIndexAngle(l),f=va.toDegrees(d);t.textAlign=zt(f),qt(f,e._pointLabelSizes[l],u),Kt(t,e.pointLabels[l],u,i.lineHeight)}t.restore()}function $t(e,t,n,a){var r,o=e.ctx,i=t.circular,l=e.chart.data.labels.length,s=go(t.color,a-1),u=go(t.lineWidth,a-1);if((i||l)&&s&&u){if(o.save(),o.strokeStyle=s,o.lineWidth=u,o.setLineDash&&(o.setLineDash(t.borderDash||[]),o.lineDashOffset=t.borderDashOffset||0),o.beginPath(),i)o.arc(e.xCenter,e.yCenter,n,0,2*Math.PI);else{r=e.getPointPosition(0,n),o.moveTo(r.x,r.y);for(var c=1;c<l;c++)r=e.getPointPosition(c,n),o.lineTo(r.x,r.y)}o.closePath(),o.stroke(),o.restore()}}function en(e){return va.isNumber(e)?e:0}function tn(e,t){return e-t}function nn(e){var t,n,a,r={},o=[];for(t=0,n=e.length;t<n;++t)a=e[t],r[a]||(r[a]=!0,o.push(a));return o}function an(e){return va.valueOrDefault(e.time.min,e.ticks.min)}function rn(e){return va.valueOrDefault(e.time.max,e.ticks.max)}function on(e,t,n,a){if("linear"===a||!e.length)return[{time:t,pos:0},{time:n,pos:1}];var r,o,i,l,s,u=[],c=[t];for(r=0,o=e.length;r<o;++r)(l=e[r])>t&&l<n&&c.push(l);for(c.push(n),r=0,o=c.length;r<o;++r)s=c[r+1],i=c[r-1],l=c[r],void 0!==i&&void 0!==s&&Math.round((s+i)/2)===l||u.push({time:l,pos:r/(o-1)});return u}function ln(e,t,n){for(var a,r,o,i=0,l=e.length-1;i>=0&&i<=l;){if(a=i+l>>1,r=e[a-1]||null,o=e[a],!r)return{lo:null,hi:o};if(o[t]<n)i=a+1;else{if(!(r[t]>n))return{lo:r,hi:o};l=a-1}}return{lo:o,hi:null}}function sn(e,t,n,a){var r=ln(e,t,n),o=r.lo?r.hi?r.lo:e[e.length-2]:e[0],i=r.lo?r.hi?r.hi:e[e.length-1]:e[1],l=i[t]-o[t],s=l?(n-o[t])/l:0,u=(i[a]-o[a])*s;return o[a]+u}function un(e,t){var n=e._adapter,a=e.options.time,r=a.parser,o=r||a.format,i=t;return"function"===typeof r&&(i=r(i)),va.isFinite(i)||(i="string"===typeof o?n.parse(i,o):n.parse(i)),null!==i?+i:(r||"function"!==typeof o||(i=o(t),va.isFinite(i)||(i=n.parse(i))),i)}function cn(e,t){if(va.isNullOrUndef(t))return null;var n=e.options.time,a=un(e,e.getRightValue(t));return null===a?a:(n.round&&(a=+e._adapter.startOf(a,n.round)),a)}function dn(e,t,n,a){var r,o,i,l=Oo.length;for(r=Oo.indexOf(e);r<l-1;++r)if(o=Co[Oo[r]],i=o.steps?o.steps:Po,o.common&&Math.ceil((n-t)/(i*o.size))<=a)return Oo[r];return Oo[l-1]}function fn(e,t,n,a,r){var o,i;for(o=Oo.length-1;o>=Oo.indexOf(n);o--)if(i=Oo[o],Co[i].common&&e._adapter.diff(r,a,i)>=t-1)return i;return Oo[n?Oo.indexOf(n):0]}function pn(e){for(var t=Oo.indexOf(e)+1,n=Oo.length;t<n;++t)if(Co[Oo[t]].common)return Oo[t]}function mn(e,t,n,a){var r,o=e._adapter,i=e.options,l=i.time,s=l.unit||dn(l.minUnit,t,n,a),u=_o([l.stepSize,l.unitStepSize,1]),c="week"===s&&l.isoWeekday,d=t,f=[];if(c&&(d=+o.startOf(d,"isoWeek",c)),d=+o.startOf(d,c?"day":s),o.diff(n,t,s)>1e5*u)throw t+" and "+n+" are too far apart with stepSize of "+u+" "+s;for(r=d;r<n;r=+o.add(r,u,s))f.push(r);return r!==n&&"ticks"!==i.bounds||f.push(r),f}function hn(e,t,n,a,r){var o,i,l=0,s=0;return r.offset&&t.length&&(o=sn(e,"time",t[0],"pos"),l=1===t.length?1-o:(sn(e,"time",t[1],"pos")-o)/2,i=sn(e,"time",t[t.length-1],"pos"),s=1===t.length?i:(i-sn(e,"time",t[t.length-2],"pos"))/2),{start:l,end:s,factor:1/(l+1+s)}}function gn(e,t,n,a){var r,o,i=e._adapter,l=+i.startOf(t[0].value,a),s=t[t.length-1].value;for(r=l;r<=s;r=+i.add(r,1,a))(o=n[r])>=0&&(t[o].major=!0);return t}function vn(e,t,n){var a,r,o=[],i={},l=t.length;for(a=0;a<l;++a)r=t[a],i[r]=a,o.push({value:r,major:!1});return 0!==l&&n?gn(e,o,i,n):o}function bn(e,t,n){var a,r=e._model||{},o=r.fill;if(void 0===o&&(o=!!r.backgroundColor),!1===o||null===o)return!1;if(!0===o)return"origin";if(a=parseFloat(o,10),isFinite(a)&&Math.floor(a)===a)return"-"!==o[0]&&"+"!==o[0]||(a=t+a),!(a===t||a<0||a>=n)&&a;switch(o){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return o;default:return!1}}function yn(e){var t,n=e.el._model||{},a=e.el._scale||{},r=e.fill,o=null;if(isFinite(r))return null;if("start"===r?o=void 0===n.scaleBottom?a.bottom:n.scaleBottom:"end"===r?o=void 0===n.scaleTop?a.top:n.scaleTop:void 0!==n.scaleZero?o=n.scaleZero:a.getBasePixel&&(o=a.getBasePixel()),void 0!==o&&null!==o){if(void 0!==o.x&&void 0!==o.y)return o;if(va.isFinite(o))return t=a.isHorizontal(),{x:t?o:null,y:t?null:o}}return null}function En(e){var t,n,a,r,o,i=e.el._scale,l=i.options,s=i.chart.data.labels.length,u=e.fill,c=[];if(!s)return null;for(t=l.ticks.reverse?i.max:i.min,n=l.ticks.reverse?i.min:i.max,a=i.getPointPositionForValue(0,t),r=0;r<s;++r)o="start"===u||"end"===u?i.getPointPositionForValue(r,"start"===u?t:n):i.getBasePosition(r),l.gridLines.circular&&(o.cx=a.x,o.cy=a.y,o.angle=i.getIndexAngle(r)-Math.PI/2),c.push(o);return c}function wn(e){return(e.el._scale||{}).getPointPositionForValue?En(e):yn(e)}function _n(e,t,n){var a,r=e[t],o=r.fill,i=[t];if(!n)return o;for(;!1!==o&&-1===i.indexOf(o);){if(!isFinite(o))return o;if(!(a=e[o]))return!1;if(a.visible)return o;i.push(o),o=a.fill}return!1}function Sn(e){var t=e.fill,n="dataset";return!1===t?null:(isFinite(t)||(n="boundary"),No[n](e))}function xn(e){return e&&!e.skip}function Pn(e,t,n,a,r){var o,i,l,s;if(a&&r){for(e.moveTo(t[0].x,t[0].y),o=1;o<a;++o)va.canvas.lineTo(e,t[o-1],t[o]);if(void 0===n[0].angle)for(e.lineTo(n[r-1].x,n[r-1].y),o=r-1;o>0;--o)va.canvas.lineTo(e,n[o],n[o-1],!0);else for(i=n[0].cx,l=n[0].cy,s=Math.sqrt(Math.pow(n[0].x-i,2)+Math.pow(n[0].y-l,2)),o=r-1;o>0;--o)e.arc(i,l,s,n[o].angle,n[o-1].angle,!0)}}function Cn(e,t,n,a,r,o){var i,l,s,u,c,d,f,p,m=t.length,h=a.spanGaps,g=[],v=[],b=0,y=0;for(e.beginPath(),i=0,l=m;i<l;++i)s=i%m,u=t[s]._view,c=n(u,s,a),d=xn(u),f=xn(c),o&&void 0===p&&d&&(p=i+1,l=m+p),d&&f?(b=g.push(u),y=v.push(c)):b&&y&&(h?(d&&g.push(u),f&&v.push(c)):(Pn(e,g,v,b,y),b=y=0,g=[],v=[]));Pn(e,g,v,b,y),e.closePath(),e.fillStyle=r,e.fill()}function On(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}function Dn(e,t){var n=new jo({ctx:e.ctx,options:t,chart:e});br.configure(e,n,t),br.addBox(e,n),e.legend=n}function Mn(e,t){var n=new Bo({ctx:e.ctx,options:t,chart:e});br.configure(e,n,t),br.addBox(e,n),e.titleBlock=n}e=e&&e.hasOwnProperty("default")?e.default:e;var kn={rgb2hsl:t,rgb2hsv:n,rgb2hwb:a,rgb2cmyk:o,rgb2keyword:i,rgb2xyz:l,rgb2lab:s,rgb2lch:u,hsl2rgb:c,hsl2hsv:d,hsl2hwb:f,hsl2cmyk:p,hsl2keyword:m,hsv2rgb:h,hsv2hsl:v,hsv2hwb:y,hsv2cmyk:E,hsv2keyword:w,hwb2rgb:_,hwb2hsl:S,hwb2hsv:x,hwb2cmyk:P,hwb2keyword:C,cmyk2rgb:O,cmyk2hsl:D,cmyk2hsv:M,cmyk2hwb:k,cmyk2keyword:T,keyword2rgb:B,keyword2hsl:X,keyword2hsv:H,keyword2hwb:J,keyword2cmyk:U,keyword2lab:Q,keyword2xyz:G,xyz2rgb:L,xyz2lab:N,xyz2lch:I,lab2xyz:Y,lab2rgb:A,lab2lch:R,lch2lab:j,lch2xyz:Z,lch2rgb:F},Tn={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ln={};for(var Nn in Tn)Ln[JSON.stringify(Tn[Nn])]=Nn;var In=function(){return new Zn};for(var Yn in kn){In[Yn+"Raw"]=function(e){return function(t){return"number"==typeof t&&(t=Array.prototype.slice.call(arguments)),kn[e](t)}}(Yn);var Rn=/(\w+)2(\w+)/.exec(Yn),An=Rn[1],jn=Rn[2];In[An]=In[An]||{},In[An][jn]=In[Yn]=function(e){return function(t){"number"==typeof t&&(t=Array.prototype.slice.call(arguments));var n=kn[e](t);if("string"==typeof n||void 0===n)return n;for(var a=0;a<n.length;a++)n[a]=Math.round(n[a]);return n}}(Yn)}var Zn=function(){this.convs={}};Zn.prototype.routeSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n))},Zn.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},Zn.prototype.getValues=function(e){var t=this.convs[e];if(!t){var n=this.space,a=this.convs[n];t=In[n][e](a),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(e){Zn.prototype[e]=function(t){return this.routeSpace(e,arguments)}});var Fn=In,Bn={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Xn={getRgba:W,getHsla:z,getRgb:q,getHsl:V,getHwb:K,getAlpha:$,hexString:ee,rgbString:te,rgbaString:ne,percentString:ae,percentaString:re,hslString:oe,hslaString:ie,hwbString:le,keyword:se},Hn={};for(var Jn in Bn)Hn[Bn[Jn]]=Jn;var Un=function(e){if(e instanceof Un)return e;if(!(this instanceof Un))return new Un(e);this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var t;"string"===typeof e?(t=Xn.getRgba(e),t?this.setValues("rgb",t):(t=Xn.getHsla(e))?this.setValues("hsl",t):(t=Xn.getHwb(e))&&this.setValues("hwb",t)):"object"===typeof e&&(t=e,void 0!==t.r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):void 0===t.c&&void 0===t.cyan||this.setValues("cmyk",t))};Un.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e%=360,e=e<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return Xn.hexString(this.values.rgb)},rgbString:function(){return Xn.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return Xn.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return Xn.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return Xn.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return Xn.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return Xn.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return Xn.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],n=0;n<e.length;n++){var a=e[n]/255;t[n]=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,n=(t[0]+e)%360;return t[0]=n<0?360+n:n,this.setValues("hsl",t),this},mix:function(e,t){var n=this,a=e,r=void 0===t?.5:t,o=2*r-1,i=n.alpha()-a.alpha(),l=((o*i===-1?o:(o+i)/(1+o*i))+1)/2,s=1-l;return this.rgb(l*n.red()+s*a.red(),l*n.green()+s*a.green(),l*n.blue()+s*a.blue()).alpha(n.alpha()*r+a.alpha()*(1-r))},toJSON:function(){return this.rgb()},clone:function(){var e,t,n=new Un,a=this.values,r=n.values;for(var o in a)a.hasOwnProperty(o)&&(e=a[o],t={}.toString.call(e),"[object Array]"===t?r[o]=e.slice(0):"[object Number]"===t?r[o]=e:console.error("unexpected color value:",e));return n}},Un.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Un.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Un.prototype.getValues=function(e){for(var t=this.values,n={},a=0;a<e.length;a++)n[e.charAt(a)]=t[e][a];return 1!==t.alpha&&(n.a=t.alpha),n},Un.prototype.setValues=function(e,t){var n,a=this.values,r=this.spaces,o=this.maxes,i=1;if(this.valid=!0,"alpha"===e)i=t;else if(t.length)a[e]=t.slice(0,e.length),i=t[e.length];else if(void 0!==t[e.charAt(0)]){for(n=0;n<e.length;n++)a[e][n]=t[e.charAt(n)];i=t.a}else if(void 0!==t[r[e][0]]){var l=r[e];for(n=0;n<e.length;n++)a[e][n]=t[l[n]];i=t.alpha}if(a.alpha=Math.max(0,Math.min(1,void 0===i?a.alpha:i)),"alpha"===e)return!1;var s;for(n=0;n<e.length;n++)s=Math.max(0,Math.min(o[e][n],a[e][n])),a[e][n]=Math.round(s);for(var u in r)u!==e&&(a[u]=Fn[e][u](a[e]));return!0},Un.prototype.setSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"===typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n),this)},Un.prototype.setChannel=function(e,t,n){var a=this.values[e];return void 0===n?a[t]:n===a[t]?this:(a[t]=n,this.setValues(e,a),this)},"undefined"!==typeof window&&(window.Color=Un);var Qn=Un,Gn={noop:function(){},uid:function(){var e=0;return function(){return e++}}(),isNullOrUndef:function(e){return null===e||"undefined"===typeof e},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){return("number"===typeof e||e instanceof Number)&&isFinite(e)},valueOrDefault:function(e,t){return"undefined"===typeof e?t:e},valueAtIndexOrDefault:function(e,t,n){return Gn.valueOrDefault(Gn.isArray(e)?e[t]:e,n)},callback:function(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)},each:function(e,t,n,a){var r,o,i;if(Gn.isArray(e))if(o=e.length,a)for(r=o-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<o;r++)t.call(n,e[r],r);else if(Gn.isObject(e))for(i=Object.keys(e),o=i.length,r=0;r<o;r++)t.call(n,e[i[r]],i[r])},arrayEquals:function(e,t){var n,a,r,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,a=e.length;n<a;++n)if(r=e[n],o=t[n],r instanceof Array&&o instanceof Array){if(!Gn.arrayEquals(r,o))return!1}else if(r!==o)return!1;return!0},clone:function(e){if(Gn.isArray(e))return e.map(Gn.clone);if(Gn.isObject(e)){for(var t={},n=Object.keys(e),a=n.length,r=0;r<a;++r)t[n[r]]=Gn.clone(e[n[r]]);return t}return e},_merger:function(e,t,n,a){var r=t[e],o=n[e];Gn.isObject(r)&&Gn.isObject(o)?Gn.merge(r,o,a):t[e]=Gn.clone(o)},_mergerIf:function(e,t,n){var a=t[e],r=n[e];Gn.isObject(a)&&Gn.isObject(r)?Gn.mergeIf(a,r):t.hasOwnProperty(e)||(t[e]=Gn.clone(r))},merge:function(e,t,n){var a,r,o,i,l,s=Gn.isArray(t)?t:[t],u=s.length;if(!Gn.isObject(e))return e;for(n=n||{},a=n.merger||Gn._merger,r=0;r<u;++r)if(t=s[r],Gn.isObject(t))for(o=Object.keys(t),l=0,i=o.length;l<i;++l)a(o[l],e,t,n);return e},mergeIf:function(e,t){return Gn.merge(e,t,{merger:Gn._mergerIf})},extend:Object.assign||function(e){return Gn.merge(e,[].slice.call(arguments,1),{merger:function(e,t,n){t[e]=n[e]}})},inherits:function(e){var t=this,n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},a=function(){this.constructor=n};return a.prototype=t.prototype,n.prototype=new a,n.extend=Gn.inherits,e&&Gn.extend(n.prototype,e),n.__super__=t.prototype,n},_deprecated:function(e,t,n,a){void 0!==t&&console.warn(e+': "'+n+'" is deprecated. Please use "'+a+'" instead')}},Wn=Gn;Gn.callCallback=Gn.callback,Gn.indexOf=function(e,t,n){return Array.prototype.indexOf.call(e,t,n)},Gn.getValueOrDefault=Gn.valueOrDefault,Gn.getValueAtIndexOrDefault=Gn.valueAtIndexOrDefault;var zn={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:1===e?1:(n||(n=.3),a<1?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),-a*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n))},easeOutElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:1===e?1:(n||(n=.3),a<1?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),a*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:2===(e/=.5)?1:(n||(n=.45),a<1?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),e<1?a*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*-.5:a*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-zn.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*zn.easeInBounce(2*e):.5*zn.easeOutBounce(2*e-1)+.5}},Kn={effects:zn};Wn.easingEffects=zn;var qn=Math.PI,Vn=qn/180,$n=2*qn,ea=qn/2,ta=qn/4,na=2*qn/3,aa={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,n,a,r,o){if(o){var i=Math.min(o,r/2,a/2),l=t+i,s=n+i,u=t+a-i,c=n+r-i;e.moveTo(t,s),l<u&&s<c?(e.arc(l,s,i,-qn,-ea),e.arc(u,s,i,-ea,0),e.arc(u,c,i,0,ea),e.arc(l,c,i,ea,qn)):l<u?(e.moveTo(l,n),e.arc(u,s,i,-ea,ea),e.arc(l,s,i,ea,qn+ea)):s<c?(e.arc(l,s,i,-qn,0),e.arc(l,c,i,0,qn)):e.arc(l,s,i,-qn,qn),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,a,r)},drawPoint:function(e,t,n,a,r,o){var i,l,s,u,c,d=(o||0)*Vn;if(t&&"object"===typeof t&&("[object HTMLImageElement]"===(i=t.toString())||"[object HTMLCanvasElement]"===i))return e.save(),e.translate(a,r),e.rotate(d),e.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),void e.restore();if(!(isNaN(n)||n<=0)){switch(e.beginPath(),t){default:e.arc(a,r,n,0,$n),e.closePath();break;case"triangle":e.moveTo(a+Math.sin(d)*n,r-Math.cos(d)*n),d+=na,e.lineTo(a+Math.sin(d)*n,r-Math.cos(d)*n),d+=na,e.lineTo(a+Math.sin(d)*n,r-Math.cos(d)*n),e.closePath();break;case"rectRounded":c=.516*n,u=n-c,l=Math.cos(d+ta)*u,s=Math.sin(d+ta)*u,e.arc(a-l,r-s,c,d-qn,d-ea),e.arc(a+s,r-l,c,d-ea,d),e.arc(a+l,r+s,c,d,d+ea),e.arc(a-s,r+l,c,d+ea,d+qn),e.closePath();break;case"rect":if(!o){u=Math.SQRT1_2*n,e.rect(a-u,r-u,2*u,2*u);break}d+=ta;case"rectRot":l=Math.cos(d)*n,s=Math.sin(d)*n,e.moveTo(a-l,r-s),e.lineTo(a+s,r-l),e.lineTo(a+l,r+s),e.lineTo(a-s,r+l),e.closePath();break;case"crossRot":d+=ta;case"cross":l=Math.cos(d)*n,s=Math.sin(d)*n,e.moveTo(a-l,r-s),e.lineTo(a+l,r+s),e.moveTo(a+s,r-l),e.lineTo(a-s,r+l);break;case"star":l=Math.cos(d)*n,s=Math.sin(d)*n,e.moveTo(a-l,r-s),e.lineTo(a+l,r+s),e.moveTo(a+s,r-l),e.lineTo(a-s,r+l),d+=ta,l=Math.cos(d)*n,s=Math.sin(d)*n,e.moveTo(a-l,r-s),e.lineTo(a+l,r+s),e.moveTo(a+s,r-l),e.lineTo(a-s,r+l);break;case"line":l=Math.cos(d)*n,s=Math.sin(d)*n,e.moveTo(a-l,r-s),e.lineTo(a+l,r+s);break;case"dash":e.moveTo(a,r),e.lineTo(a+Math.cos(d)*n,r+Math.sin(d)*n)}e.fill(),e.stroke()}},_isPointInArea:function(e,t){return e.x>t.left-1e-6&&e.x<t.right+1e-6&&e.y>t.top-1e-6&&e.y<t.bottom+1e-6},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,n,a){var r=n.steppedLine;if(r){if("middle"===r){var o=(t.x+n.x)/2;e.lineTo(o,a?n.y:t.y),e.lineTo(o,a?t.y:n.y)}else"after"===r&&!a||"after"!==r&&a?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);return void e.lineTo(n.x,n.y)}if(!n.tension)return void e.lineTo(n.x,n.y);e.bezierCurveTo(a?t.controlPointPreviousX:t.controlPointNextX,a?t.controlPointPreviousY:t.controlPointNextY,a?n.controlPointNextX:n.controlPointPreviousX,a?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y)}},ra=aa;Wn.clear=aa.clear,Wn.drawRoundedRectangle=function(e){e.beginPath(),aa.roundedRect.apply(aa,arguments)};var oa={_set:function(e,t){return Wn.merge(this[e]||(this[e]={}),t)}};oa._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var ia=oa,la=Wn.valueOrDefault,sa={toLineHeight:function(e,t){var n=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,n,a,r;return Wn.isObject(e)?(t=+e.top||0,n=+e.right||0,a=+e.bottom||0,r=+e.left||0):t=n=a=r=+e||0,{top:t,right:n,bottom:a,left:r,height:t+a,width:r+n}},_parseFont:function(e){var t=ia.global,n=la(e.fontSize,t.defaultFontSize),a={family:la(e.fontFamily,t.defaultFontFamily),lineHeight:Wn.options.toLineHeight(la(e.lineHeight,t.defaultLineHeight),n),size:n,style:la(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return a.string=de(a),a},resolve:function(e,t,n,a){var r,o,i,l=!0;for(r=0,o=e.length;r<o;++r)if(void 0!==(i=e[r])&&(void 0!==t&&"function"===typeof i&&(i=i(t),l=!1),void 0!==n&&Wn.isArray(i)&&(i=i[n],l=!1),void 0!==i))return a&&!l&&(a.cacheable=!1),i}},ua={_factorize:function(e){var t,n=[],a=Math.sqrt(e);for(t=1;t<a;t++)e%t===0&&(n.push(t),n.push(e/t));return a===(0|a)&&n.push(a),n.sort(function(e,t){return e-t}).pop(),n},log10:Math.log10||function(e){var t=Math.log(e)*Math.LOG10E,n=Math.round(t);return e===Math.pow(10,n)?n:t}},ca=ua;Wn.log10=ua.log10;var da=function(e,t){return{x:function(n){return e+e+t-n},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}},fa=function(){return{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}},pa=function(e,t,n){return e?da(t,n):fa()},ma=function(e,t){var n,a;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,a=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=a)},ha=function(e){var t=e.prevTextDirection;void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))},ga={getRtlAdapter:pa,overrideTextDirection:ma,restoreTextDirection:ha},va=Wn,ba=Kn,ya=ra,Ea=sa,wa=ca,_a=ga;va.easing=ba,va.canvas=ya,va.options=Ea,va.math=wa,va.rtl=_a;var Sa=function(e){va.extend(this,e),this.initialize.apply(this,arguments)};va.extend(Sa.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=va.extend({},e._model)),e._start={},e},transition:function(e){var t=this,n=t._model,a=t._start,r=t._view;return n&&1!==e?(r||(r=t._view={}),a||(a=t._start={}),fe(a,r,n,e),t):(t._view=va.extend({},n),t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return va.isNumber(this._model.x)&&va.isNumber(this._model.y)}}),Sa.extend=va.inherits;var xa=Sa,Pa=xa.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),Ca=Pa;Object.defineProperty(Pa.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(Pa.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),ia._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:va.noop,onComplete:va.noop}});var Oa={animations:[],request:null,addAnimation:function(e,t,n,a){var r,o,i=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=n,a||(e.animating=!0),r=0,o=i.length;r<o;++r)if(i[r].chart===e)return void(i[r]=t);i.push(t),1===i.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=va.findIndex(this.animations,function(t){return t.chart===e});-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=va.requestAnimFrame.call(window,function(){e.request=null,e.startDigest()}))},startDigest:function(){var e=this;e.advance(),e.animations.length>0&&e.requestAnimationFrame()},advance:function(){for(var e,t,n,a,r=this.animations,o=0;o<r.length;)e=r[o],t=e.chart,n=e.numSteps,a=Math.floor((Date.now()-e.startTime)/e.duration*n)+1,e.currentStep=Math.min(a,n),va.callback(e.render,[t,e],t),va.callback(e.onAnimationProgress,[e],t),e.currentStep>=n?(va.callback(e.onAnimationComplete,[e],t),t.animating=!1,r.splice(o,1)):++o}},Da=va.options.resolve,Ma=["push","pop","shift","splice","unshift"],ka=function(e,t){this.initialize(e,t)};va.extend(ka.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(e,t){var n=this;n.chart=e,n.index=t,n.linkScales(),n.addElements(),n._type=n.getMeta().type},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),n=e.chart,a=n.scales,r=e.getDataset(),o=n.options.scales;null!==t.xAxisID&&t.xAxisID in a&&!r.xAxisID||(t.xAxisID=r.xAxisID||o.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in a&&!r.yAxisID||(t.yAxisID=r.yAxisID||o.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&me(this._data,this)},createMetaDataset:function(){var e=this,t=e.datasetElementType;return t&&new t({_chart:e.chart,_datasetIndex:e.index})},createMetaData:function(e){var t=this,n=t.dataElementType;return n&&new n({_chart:t.chart,_datasetIndex:t.index,_index:e})},addElements:function(){var e,t,n=this,a=n.getMeta(),r=n.getDataset().data||[],o=a.data;for(e=0,t=r.length;e<t;++e)o[e]=o[e]||n.createMetaData(e);a.dataset=a.dataset||n.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e=this,t=e.getDataset(),n=t.data||(t.data=[]);e._data!==n&&(e._data&&me(e._data,e),n&&Object.isExtensible(n)&&pe(n,e),e._data=n),e.resyncElements()},_configure:function(){var e=this;e._config=va.merge({},[e.chart.options.datasets[e._type],e.getDataset()],{merger:function(e,t,n){"_meta"!==e&&"data"!==e&&va._merger(e,t,n)}})},_update:function(e){var t=this;t._configure(),t._cachedDataOpts=null,t.update(e)},update:va.noop,transition:function(e){for(var t=this.getMeta(),n=t.data||[],a=n.length,r=0;r<a;++r)n[r].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],n=t.length,a=0;for(e.dataset&&e.dataset.draw();a<n;++a)t[a].draw()},getStyle:function(e){var t,n=this,a=n.getMeta(),r=a.dataset;return n._configure(),r&&void 0===e?t=n._resolveDatasetElementOptions(r||{}):(e=e||0,t=n._resolveDataElementOptions(a.data[e]||{},e)),!1!==t.fill&&null!==t.fill||(t.backgroundColor="rgba(0,0,0,0)"),t},_resolveDatasetElementOptions:function(e,t){var n,a,r,o,i=this,l=i.chart,s=i._config,u=e.custom||{},c=l.options.elements[i.datasetElementType.prototype._type]||{},d=i._datasetElementOptions,f={},p={chart:l,dataset:i.getDataset(),datasetIndex:i.index,hover:t};for(n=0,a=d.length;n<a;++n)r=d[n],o=t?"hover"+r.charAt(0).toUpperCase()+r.slice(1):r,f[r]=Da([u[o],s[o],c[o]],p);return f},_resolveDataElementOptions:function(e,t){var n=this,a=e&&e.custom,r=n._cachedDataOpts;if(r&&!a)return r;var o,i,l,s,u=n.chart,c=n._config,d=u.options.elements[n.dataElementType.prototype._type]||{},f=n._dataElementOptions,p={},m={chart:u,dataIndex:t,dataset:n.getDataset(),datasetIndex:n.index},h={cacheable:!a};if(a=a||{},va.isArray(f))for(i=0,l=f.length;i<l;++i)s=f[i],p[s]=Da([a[s],c[s],d[s]],m,t,h);else for(o=Object.keys(f),i=0,l=o.length;i<l;++i)s=o[i],p[s]=Da([a[s],c[f[s]],c[s],d[s]],m,t,h);return h.cacheable&&(n._cachedDataOpts=Object.freeze(p)),p},removeHoverStyle:function(e){va.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,a=e.custom||{},r=e._model,o=va.getHoverColor;e.$previousStyle={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:r.borderWidth},r.backgroundColor=Da([a.hoverBackgroundColor,t.hoverBackgroundColor,o(r.backgroundColor)],void 0,n),r.borderColor=Da([a.hoverBorderColor,t.hoverBorderColor,o(r.borderColor)],void 0,n),r.borderWidth=Da([a.hoverBorderWidth,t.hoverBorderWidth,r.borderWidth],void 0,n)},_removeDatasetHoverStyle:function(){var e=this.getMeta().dataset;e&&this.removeHoverStyle(e)},_setDatasetHoverStyle:function(){var e,t,n,a,r,o,i=this.getMeta().dataset,l={};if(i){for(o=i._model,r=this._resolveDatasetElementOptions(i,!0),a=Object.keys(r),e=0,t=a.length;e<t;++e)n=a[e],l[n]=o[n],o[n]=r[n];i.$previousStyle=l}},resyncElements:function(){var e=this,t=e.getMeta(),n=e.getDataset().data,a=t.data.length,r=n.length;r<a?t.data.splice(r,a-r):r>a&&e.insertElements(a,r-a)},insertElements:function(e,t){for(var n=0;n<t;++n)this.addElementAndReset(e+n)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),ka.extend=va.inherits;var Ta=ka,La=2*Math.PI;ia._set("global",{elements:{arc:{backgroundColor:ia.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var Na=xa.extend({_type:"arc",inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var n=this._view;if(n){for(var a=va.getAngleFromPoint(n,{x:e,y:t}),r=a.angle,o=a.distance,i=n.startAngle,l=n.endAngle;l<i;)l+=La;for(;r>l;)r-=La;for(;r<i;)r+=La;var s=r>=i&&r<=l,u=o>=n.innerRadius&&o<=n.outerRadius;return s&&u}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,n=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,n=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},draw:function(){var e,t=this._chart.ctx,n=this._view,a="inner"===n.borderAlign?.33:0,r={x:n.x,y:n.y,innerRadius:n.innerRadius,outerRadius:Math.max(n.outerRadius-a,0),pixelMargin:a,startAngle:n.startAngle,endAngle:n.endAngle,fullCircles:Math.floor(n.circumference/La)};if(t.save(),t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,r.fullCircles){for(r.endAngle=r.startAngle+La,t.beginPath(),t.arc(r.x,r.y,r.outerRadius,r.startAngle,r.endAngle),t.arc(r.x,r.y,r.innerRadius,r.endAngle,r.startAngle,!0),t.closePath(),e=0;e<r.fullCircles;++e)t.fill();r.endAngle=r.startAngle+n.circumference%La}t.beginPath(),t.arc(r.x,r.y,r.outerRadius,r.startAngle,r.endAngle),t.arc(r.x,r.y,r.innerRadius,r.endAngle,r.startAngle,!0),t.closePath(),t.fill(),n.borderWidth&&ve(t,n,r),t.restore()}}),Ia=va.valueOrDefault,Ya=ia.global.defaultColor;ia._set("global",{elements:{line:{tension:.4,backgroundColor:Ya,borderWidth:3,borderColor:Ya,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Ra=xa.extend({_type:"line",draw:function(){var e,t,n,a=this,r=a._view,o=a._chart.ctx,i=r.spanGaps,l=a._children.slice(),s=ia.global,u=s.elements.line,c=-1,d=a._loop;if(l.length){if(a._loop){for(e=0;e<l.length;++e)if(t=va.previousItem(l,e),!l[e]._view.skip&&t._view.skip){l=l.slice(e).concat(l.slice(0,e)),d=i;break}d&&l.push(l[0])}for(o.save(),o.lineCap=r.borderCapStyle||u.borderCapStyle,o.setLineDash&&o.setLineDash(r.borderDash||u.borderDash),o.lineDashOffset=Ia(r.borderDashOffset,u.borderDashOffset),o.lineJoin=r.borderJoinStyle||u.borderJoinStyle,o.lineWidth=Ia(r.borderWidth,u.borderWidth),o.strokeStyle=r.borderColor||s.defaultColor,o.beginPath(),n=l[0]._view,n.skip||(o.moveTo(n.x,n.y),c=0),e=1;e<l.length;++e)n=l[e]._view,t=-1===c?va.previousItem(l,e):l[c],n.skip||(c!==e-1&&!i||-1===c?o.moveTo(n.x,n.y):va.canvas.lineTo(o,t._view,n),c=e);d&&o.closePath(),o.stroke(),o.restore()}}}),Aa=va.valueOrDefault,ja=ia.global.defaultColor;ia._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:ja,borderColor:ja,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Za=xa.extend({_type:"point",inRange:function(e,t){var n=this._view;return!!n&&Math.pow(e-n.x,2)+Math.pow(t-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:be,inXRange:be,inYRange:ye,getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,n=this._chart.ctx,a=t.pointStyle,r=t.rotation,o=t.radius,i=t.x,l=t.y,s=ia.global,u=s.defaultColor;t.skip||(void 0===e||va.canvas._isPointInArea(t,e))&&(n.strokeStyle=t.borderColor||u,n.lineWidth=Aa(t.borderWidth,s.elements.point.borderWidth),n.fillStyle=t.backgroundColor||u,va.canvas.drawPoint(n,a,o,i,l,r))}}),Fa=ia.global.defaultColor;ia._set("global",{elements:{rectangle:{backgroundColor:Fa,borderColor:Fa,borderSkipped:"bottom",borderWidth:0}}});var Ba=xa.extend({_type:"rectangle",draw:function(){var e=this._chart.ctx,t=this._view,n=Pe(t),a=n.outer,r=n.inner;e.fillStyle=t.backgroundColor,e.fillRect(a.x,a.y,a.w,a.h),a.w===r.w&&a.h===r.h||(e.save(),e.beginPath(),e.rect(a.x,a.y,a.w,a.h),e.clip(),e.fillStyle=t.borderColor,e.rect(r.x,r.y,r.w,r.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return Ce(this._view,e,t)},inLabelRange:function(e,t){var n=this._view;return Ee(n)?Ce(n,e,null):Ce(n,null,t)},inXRange:function(e){return Ce(this._view,e,null)},inYRange:function(e){return Ce(this._view,null,e)},getCenterPoint:function(){var e,t,n=this._view;return Ee(n)?(e=n.x,t=(n.y+n.base)/2):(e=(n.x+n.base)/2,t=n.y),{x:e,y:t}},getArea:function(){var e=this._view;return Ee(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}}),Xa={},Ha=Na,Ja=Ra,Ua=Za,Qa=Ba;Xa.Arc=Ha,Xa.Line=Ja,Xa.Point=Ua,Xa.Rectangle=Qa;var Ga=va._deprecated,Wa=va.valueOrDefault;ia._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),ia._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var za=Ta.extend({dataElementType:Xa.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var e,t,n=this;Ta.prototype.initialize.apply(n,arguments),e=n.getMeta(),e.stack=n.getDataset().stack,e.bar=!0,t=n._getIndexScale().options,Ga("bar chart",t.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),Ga("bar chart",t.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),Ga("bar chart",t.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),Ga("bar chart",n._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),Ga("bar chart",t.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(e){var t,n,a=this,r=a.getMeta().data;for(a._ruler=a.getRuler(),t=0,n=r.length;t<n;++t)a.updateElement(r[t],t,e)},updateElement:function(e,t,n){var a=this,r=a.getMeta(),o=a.getDataset(),i=a._resolveDataElementOptions(e,t);e._xScale=a.getScaleForId(r.xAxisID),e._yScale=a.getScaleForId(r.yAxisID),e._datasetIndex=a.index,e._index=t,e._model={backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderSkipped:i.borderSkipped,borderWidth:i.borderWidth,datasetLabel:o.label,label:a.chart.data.labels[t]},va.isArray(o.data[t])&&(e._model.borderSkipped=null),a._updateElementGeometry(e,t,n,i),e.pivot()},_updateElementGeometry:function(e,t,n,a){var r=this,o=e._model,i=r._getValueScale(),l=i.getBasePixel(),s=i.isHorizontal(),u=r._ruler||r.getRuler(),c=r.calculateBarValuePixels(r.index,t,a),d=r.calculateBarIndexPixels(r.index,t,u,a);o.horizontal=s,o.base=n?l:c.base,o.x=s?n?l:c.head:d.center,o.y=s?d.center:n?l:c.head,o.height=s?d.size:void 0,o.width=s?void 0:d.size},_getStacks:function(e){var t,n,a=this,r=a._getIndexScale(),o=r._getMatchingVisibleMetas(a._type),i=r.options.stacked,l=o.length,s=[];for(t=0;t<l&&(n=o[t],(!1===i||-1===s.indexOf(n.stack)||void 0===i&&void 0===n.stack)&&s.push(n.stack),n.index!==e);++t);return s},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var n=this._getStacks(e),a=void 0!==t?n.indexOf(t):-1;return-1===a?n.length-1:a},getRuler:function(){var e,t,n=this,a=n._getIndexScale(),r=[];for(e=0,t=n.getMeta().data.length;e<t;++e)r.push(a.getPixelForValue(null,e,n.index));return{pixels:r,start:a._startPixel,end:a._endPixel,stackCount:n.getStackCount(),scale:a}},calculateBarValuePixels:function(e,t,n){var a,r,o,i,l,s,u,c=this,d=c.chart,f=c._getValueScale(),p=f.isHorizontal(),m=d.data.datasets,h=f._getMatchingVisibleMetas(c._type),g=f._parseValue(m[e].data[t]),v=n.minBarLength,b=f.options.stacked,y=c.getMeta().stack,E=void 0===g.start?0:g.max>=0&&g.min>=0?g.min:g.max,w=void 0===g.start?g.end:g.max>=0&&g.min>=0?g.max-g.min:g.min-g.max,_=h.length;if(b||void 0===b&&void 0!==y)for(a=0;a<_&&(r=h[a],r.index!==e);++a)r.stack===y&&(u=f._parseValue(m[r.index].data[t]),o=void 0===u.start?u.end:u.min>=0&&u.max>=0?u.max:u.min,(g.min<0&&o<0||g.max>=0&&o>0)&&(E+=o));return i=f.getPixelForValue(E),l=f.getPixelForValue(E+w),s=l-i,void 0!==v&&Math.abs(s)<v&&(s=v,l=w>=0&&!p||w<0&&p?i-v:i+v),{size:s,base:i,head:l,center:l+s/2}},calculateBarIndexPixels:function(e,t,n,a){var r=this,o="flex"===a.barThickness?Me(t,n,a):De(t,n,a),i=r.getStackIndex(e,r.getMeta().stack),l=o.start+o.chunk*i+o.chunk/2,s=Math.min(Wa(a.maxBarThickness,1/0),o.chunk*o.ratio);return{base:l-s/2,head:l+s/2,center:l,size:s}},draw:function(){var e=this,t=e.chart,n=e._getValueScale(),a=e.getMeta().data,r=e.getDataset(),o=a.length,i=0;for(va.canvas.clipArea(t.ctx,t.chartArea);i<o;++i){var l=n._parseValue(r.data[i]);isNaN(l.min)||isNaN(l.max)||a[i].draw()}va.canvas.unclipArea(t.ctx)},_resolveDataElementOptions:function(){var e=this,t=va.extend({},Ta.prototype._resolveDataElementOptions.apply(e,arguments)),n=e._getIndexScale().options,a=e._getValueScale().options;return t.barPercentage=Wa(n.barPercentage,t.barPercentage),t.barThickness=Wa(n.barThickness,t.barThickness),t.categoryPercentage=Wa(n.categoryPercentage,t.categoryPercentage),t.maxBarThickness=Wa(n.maxBarThickness,t.maxBarThickness),t.minBarLength=Wa(a.minBarLength,t.minBarLength),t}}),Ka=va.valueOrDefault,qa=va.options.resolve;ia._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.datasets[e.datasetIndex].label||"",a=t.datasets[e.datasetIndex].data[e.index];return n+": ("+e.xLabel+", "+e.yLabel+", "+a.r+")"}}}});var Va=Ta.extend({dataElementType:Xa.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(e){var t=this,n=t.getMeta(),a=n.data;va.each(a,function(n,a){t.updateElement(n,a,e)})},updateElement:function(e,t,n){var a=this,r=a.getMeta(),o=e.custom||{},i=a.getScaleForId(r.xAxisID),l=a.getScaleForId(r.yAxisID),s=a._resolveDataElementOptions(e,t),u=a.getDataset().data[t],c=a.index,d=n?i.getPixelForDecimal(.5):i.getPixelForValue("object"===typeof u?u:NaN,t,c),f=n?l.getBasePixel():l.getPixelForValue(u,t,c);e._xScale=i,e._yScale=l,e._options=s,e._datasetIndex=c,e._index=t,e._model={backgroundColor:s.backgroundColor,borderColor:s.borderColor,borderWidth:s.borderWidth,hitRadius:s.hitRadius,pointStyle:s.pointStyle,rotation:s.rotation,radius:n?0:s.radius,skip:o.skip||isNaN(d)||isNaN(f),x:d,y:f},e.pivot()},setHoverStyle:function(e){var t=e._model,n=e._options,a=va.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ka(n.hoverBackgroundColor,a(n.backgroundColor)),t.borderColor=Ka(n.hoverBorderColor,a(n.borderColor)),t.borderWidth=Ka(n.hoverBorderWidth,n.borderWidth),t.radius=n.radius+n.hoverRadius},_resolveDataElementOptions:function(e,t){var n=this,a=n.chart,r=n.getDataset(),o=e.custom||{},i=r.data[t]||{},l=Ta.prototype._resolveDataElementOptions.apply(n,arguments),s={chart:a,dataIndex:t,dataset:r,datasetIndex:n.index};return n._cachedDataOpts===l&&(l=va.extend({},l)),l.radius=qa([o.radius,i.r,n._config.radius,a.options.elements.point.radius],s,t),l}}),$a=va.valueOrDefault,er=Math.PI,tr=2*er,nr=er/2;ia._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t,n,a,r,o=document.createElement("ul"),i=e.data,l=i.datasets,s=i.labels;if(o.setAttribute("class",e.id+"-legend"),l.length)for(t=0,n=l[0].data.length;t<n;++t)a=o.appendChild(document.createElement("li")),r=a.appendChild(document.createElement("span")),r.style.backgroundColor=l[0].backgroundColor[t],s[t]&&a.appendChild(document.createTextNode(s[t]));return o.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,a){var r=e.getDatasetMeta(0),o=r.controller.getStyle(a);return{text:n,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,hidden:isNaN(t.datasets[0].data[a])||r.data[a].hidden,index:a}}):[]}},onClick:function(e,t){var n,a,r,o=t.index,i=this.chart;for(n=0,a=(i.data.datasets||[]).length;n<a;++n)r=i.getDatasetMeta(n),r.data[o]&&(r.data[o].hidden=!r.data[o].hidden);i.update()}},cutoutPercentage:50,rotation:-nr,circumference:tr,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.labels[e.index],a=": "+t.datasets[e.datasetIndex].data[e.index];return va.isArray(n)?(n=n.slice(),n[0]+=a):n+=a,n}}}});var ar=Ta.extend({dataElementType:Xa.Arc,linkScales:va.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&++t;return t},update:function(e){var t,n,a,r,o=this,i=o.chart,l=i.chartArea,s=i.options,u=1,c=1,d=0,f=0,p=o.getMeta(),m=p.data,h=s.cutoutPercentage/100||0,g=s.circumference,v=o._getRingWeight(o.index);if(g<tr){var b=s.rotation%tr;b+=b>=er?-tr:b<-er?tr:0;var y=b+g,E=Math.cos(b),w=Math.sin(b),_=Math.cos(y),S=Math.sin(y),x=b<=0&&y>=0||y>=tr,P=b<=nr&&y>=nr||y>=tr+nr,C=b===-er||y>=er,O=b<=-nr&&y>=-nr||y>=er+nr,D=C?-1:Math.min(E,E*h,_,_*h),M=O?-1:Math.min(w,w*h,S,S*h),k=x?1:Math.max(E,E*h,_,_*h),T=P?1:Math.max(w,w*h,S,S*h);u=(k-D)/2,c=(T-M)/2,d=-(k+D)/2,f=-(T+M)/2}for(a=0,r=m.length;a<r;++a)m[a]._options=o._resolveDataElementOptions(m[a],a);for(i.borderWidth=o.getMaxBorderWidth(),t=(l.right-l.left-i.borderWidth)/u,n=(l.bottom-l.top-i.borderWidth)/c,i.outerRadius=Math.max(Math.min(t,n)/2,0),i.innerRadius=Math.max(i.outerRadius*h,0),i.radiusLength=(i.outerRadius-i.innerRadius)/(o._getVisibleDatasetWeightTotal()||1),i.offsetX=d*i.outerRadius,i.offsetY=f*i.outerRadius,p.total=o.calculateTotal(),o.outerRadius=i.outerRadius-i.radiusLength*o._getRingWeightOffset(o.index),o.innerRadius=Math.max(o.outerRadius-i.radiusLength*v,0),a=0,r=m.length;a<r;++a)o.updateElement(m[a],a,e)},updateElement:function(e,t,n){var a=this,r=a.chart,o=r.chartArea,i=r.options,l=i.animation,s=(o.left+o.right)/2,u=(o.top+o.bottom)/2,c=i.rotation,d=i.rotation,f=a.getDataset(),p=n&&l.animateRotate?0:e.hidden?0:a.calculateCircumference(f.data[t])*(i.circumference/tr),m=n&&l.animateScale?0:a.innerRadius,h=n&&l.animateScale?0:a.outerRadius,g=e._options||{};va.extend(e,{_datasetIndex:a.index,_index:t,_model:{backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,borderAlign:g.borderAlign,x:s+r.offsetX,y:u+r.offsetY,startAngle:c,endAngle:d,circumference:p,outerRadius:h,innerRadius:m,label:va.valueAtIndexOrDefault(f.label,t,r.data.labels[t])}});var v=e._model;n&&l.animateRotate||(v.startAngle=0===t?i.rotation:a.getMeta().data[t-1]._model.endAngle,v.endAngle=v.startAngle+v.circumference),e.pivot()},calculateTotal:function(){var e,t=this.getDataset(),n=this.getMeta(),a=0;return va.each(n.data,function(n,r){e=t.data[r],isNaN(e)||n.hidden||(a+=Math.abs(e))}),a},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?tr*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var t,n,a,r,o,i,l,s,u=this,c=0,d=u.chart;if(!e)for(t=0,n=d.data.datasets.length;t<n;++t)if(d.isDatasetVisible(t)){a=d.getDatasetMeta(t),e=a.data,t!==u.index&&(o=a.controller);break}if(!e)return 0;for(t=0,n=e.length;t<n;++t)r=e[t],o?(o._configure(),i=o._resolveDataElementOptions(r,t)):i=r._options,"inner"!==i.borderAlign&&(l=i.borderWidth,s=i.hoverBorderWidth,c=l>c?l:c,c=s>c?s:c);return c},setHoverStyle:function(e){var t=e._model,n=e._options,a=va.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=$a(n.hoverBackgroundColor,a(n.backgroundColor)),t.borderColor=$a(n.hoverBorderColor,a(n.borderColor)),t.borderWidth=$a(n.hoverBorderWidth,n.borderWidth)},_getRingWeightOffset:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t},_getRingWeight:function(e){return Math.max($a(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});ia._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),ia._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var rr=za.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),or=va.valueOrDefault,ir=va.options.resolve,lr=va.canvas._isPointInArea;ia._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var sr=Ta.extend({datasetElementType:Xa.Line,dataElementType:Xa.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(e){var t,n,a=this,r=a.getMeta(),o=r.dataset,i=r.data||[],l=a.chart.options,s=a._config,u=a._showLine=or(s.showLine,l.showLines);for(a._xScale=a.getScaleForId(r.xAxisID),a._yScale=a.getScaleForId(r.yAxisID),u&&(void 0!==s.tension&&void 0===s.lineTension&&(s.lineTension=s.tension),o._scale=a._yScale,o._datasetIndex=a.index,o._children=i,o._model=a._resolveDatasetElementOptions(o),o.pivot()),t=0,n=i.length;t<n;++t)a.updateElement(i[t],t,e);for(u&&0!==o._model.tension&&a.updateBezierControlPoints(),t=0,n=i.length;t<n;++t)i[t].pivot()},updateElement:function(e,t,n){var a,r,o=this,i=o.getMeta(),l=e.custom||{},s=o.getDataset(),u=o.index,c=s.data[t],d=o._xScale,f=o._yScale,p=i.dataset._model,m=o._resolveDataElementOptions(e,t);a=d.getPixelForValue("object"===typeof c?c:NaN,t,u),r=n?f.getBasePixel():o.calculatePointY(c,t,u),e._xScale=d,e._yScale=f,e._options=m,e._datasetIndex=u,e._index=t,e._model={x:a,y:r,skip:l.skip||isNaN(a)||isNaN(r),radius:m.radius,pointStyle:m.pointStyle,rotation:m.rotation,backgroundColor:m.backgroundColor,borderColor:m.borderColor,borderWidth:m.borderWidth,tension:or(l.tension,p?p.tension:0),steppedLine:!!p&&p.steppedLine,hitRadius:m.hitRadius}},_resolveDatasetElementOptions:function(e){var t=this,n=t._config,a=e.custom||{},r=t.chart.options,o=r.elements.line,i=Ta.prototype._resolveDatasetElementOptions.apply(t,arguments);return i.spanGaps=or(n.spanGaps,r.spanGaps),i.tension=or(n.lineTension,o.tension),i.steppedLine=ir([a.steppedLine,n.steppedLine,o.stepped]),i},calculatePointY:function(e,t,n){var a,r,o,i,l=this,s=l.chart,u=l._yScale,c=0,d=0,f=+u.getRightValue(e),p=s._getSortedVisibleDatasetMetas(),m=p.length;if(u.options.stacked){for(a=0;a<m&&(o=p[a],o.index!==n);++a)r=s.data.datasets[o.index],"line"===o.type&&o.yAxisID===u.id&&(i=+u.getRightValue(r.data[t]),i<0?d+=i||0:c+=i||0);return f<0?u.getPixelForValue(d+f):u.getPixelForValue(c+f)}return u.getPixelForValue(e)},updateBezierControlPoints:function(){function e(e,t,n){return Math.max(Math.min(e,n),t)}var t,n,a,r,o=this,i=o.chart,l=o.getMeta(),s=l.dataset._model,u=i.chartArea,c=l.data||[];if(s.spanGaps&&(c=c.filter(function(e){return!e._model.skip})),"monotone"===s.cubicInterpolationMode)va.splineCurveMonotone(c);else for(t=0,n=c.length;t<n;++t)a=c[t]._model,r=va.splineCurve(va.previousItem(c,t)._model,a,va.nextItem(c,t)._model,s.tension),a.controlPointPreviousX=r.previous.x,a.controlPointPreviousY=r.previous.y,a.controlPointNextX=r.next.x,a.controlPointNextY=r.next.y;if(i.options.elements.line.capBezierPoints)for(t=0,n=c.length;t<n;++t)a=c[t]._model,lr(a,u)&&(t>0&&lr(c[t-1]._model,u)&&(a.controlPointPreviousX=e(a.controlPointPreviousX,u.left,u.right),a.controlPointPreviousY=e(a.controlPointPreviousY,u.top,u.bottom)),t<c.length-1&&lr(c[t+1]._model,u)&&(a.controlPointNextX=e(a.controlPointNextX,u.left,u.right),a.controlPointNextY=e(a.controlPointNextY,u.top,u.bottom)))},draw:function(){var e,t=this,n=t.chart,a=t.getMeta(),r=a.data||[],o=n.chartArea,i=0,l=r.length;for(t._showLine&&(e=(a.dataset._model.borderWidth||0)/2,va.canvas.clipArea(n.ctx,{left:o.left-e,right:o.right+e,top:o.top-e,bottom:o.bottom+e}),a.dataset.draw(),va.canvas.unclipArea(n.ctx));i<l;++i)r[i].draw(o)},setHoverStyle:function(e){var t=e._model,n=e._options,a=va.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=or(n.hoverBackgroundColor,a(n.backgroundColor)),t.borderColor=or(n.hoverBorderColor,a(n.borderColor)),t.borderWidth=or(n.hoverBorderWidth,n.borderWidth),t.radius=or(n.hoverRadius,n.radius)}}),ur=va.options.resolve;ia._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t,n,a,r,o=document.createElement("ul"),i=e.data,l=i.datasets,s=i.labels;if(o.setAttribute("class",e.id+"-legend"),l.length)for(t=0,n=l[0].data.length;t<n;++t)a=o.appendChild(document.createElement("li")),r=a.appendChild(document.createElement("span")),r.style.backgroundColor=l[0].backgroundColor[t],s[t]&&a.appendChild(document.createTextNode(s[t]));return o.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,a){var r=e.getDatasetMeta(0),o=r.controller.getStyle(a);return{text:n,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,hidden:isNaN(t.datasets[0].data[a])||r.data[a].hidden,index:a}}):[]}},onClick:function(e,t){var n,a,r,o=t.index,i=this.chart;for(n=0,a=(i.data.datasets||[]).length;n<a;++n)r=i.getDatasetMeta(n),r.data[o].hidden=!r.data[o].hidden;i.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var cr=Ta.extend({dataElementType:Xa.Arc,linkScales:va.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,n,a,r=this,o=r.getDataset(),i=r.getMeta(),l=r.chart.options.startAngle||0,s=r._starts=[],u=r._angles=[],c=i.data;for(r._updateRadius(),i.count=r.countVisibleElements(),t=0,n=o.data.length;t<n;t++)s[t]=l,a=r._computeAngle(t),u[t]=a,l+=a;for(t=0,n=c.length;t<n;++t)c[t]._options=r._resolveDataElementOptions(c[t],t),r.updateElement(c[t],t,e)},_updateRadius:function(){var e=this,t=e.chart,n=t.chartArea,a=t.options,r=Math.min(n.right-n.left,n.bottom-n.top);t.outerRadius=Math.max(r/2,0),t.innerRadius=Math.max(a.cutoutPercentage?t.outerRadius/100*a.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,n){var a=this,r=a.chart,o=a.getDataset(),i=r.options,l=i.animation,s=r.scale,u=r.data.labels,c=s.xCenter,d=s.yCenter,f=i.startAngle,p=e.hidden?0:s.getDistanceFromCenterForValue(o.data[t]),m=a._starts[t],h=m+(e.hidden?0:a._angles[t]),g=l.animateScale?0:s.getDistanceFromCenterForValue(o.data[t]),v=e._options||{};va.extend(e,{_datasetIndex:a.index,_index:t,_scale:s,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:c,y:d,innerRadius:0,outerRadius:n?g:p,startAngle:n&&l.animateRotate?f:m,endAngle:n&&l.animateRotate?f:h,label:va.valueAtIndexOrDefault(u,t,u[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),n=0;return va.each(t.data,function(t,a){isNaN(e.data[a])||t.hidden||n++}),n},setHoverStyle:function(e){var t=e._model,n=e._options,a=va.getHoverColor,r=va.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=r(n.hoverBackgroundColor,a(n.backgroundColor)),t.borderColor=r(n.hoverBorderColor,a(n.borderColor)),t.borderWidth=r(n.hoverBorderWidth,n.borderWidth)},_computeAngle:function(e){var t=this,n=this.getMeta().count,a=t.getDataset(),r=t.getMeta();if(isNaN(a.data[e])||r.data[e].hidden)return 0;var o={chart:t.chart,dataIndex:e,dataset:a,datasetIndex:t.index};return ur([t.chart.options.elements.arc.angle,2*Math.PI/n],o,e)}});ia._set("pie",va.clone(ia.doughnut)),ia._set("pie",{cutoutPercentage:0});var dr=ar,fr=va.valueOrDefault;ia._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{tension:0}}});var pr=Ta.extend({datasetElementType:Xa.Line,dataElementType:Xa.Point,linkScales:va.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,n,a=this,r=a.getMeta(),o=r.dataset,i=r.data||[],l=a.chart.scale,s=a._config;for(void 0!==s.tension&&void 0===s.lineTension&&(s.lineTension=s.tension),o._scale=l,o._datasetIndex=a.index,o._children=i,o._loop=!0,o._model=a._resolveDatasetElementOptions(o),o.pivot(),t=0,n=i.length;t<n;++t)a.updateElement(i[t],t,e);for(a.updateBezierControlPoints(),t=0,n=i.length;t<n;++t)i[t].pivot()},updateElement:function(e,t,n){var a=this,r=e.custom||{},o=a.getDataset(),i=a.chart.scale,l=i.getPointPositionForValue(t,o.data[t]),s=a._resolveDataElementOptions(e,t),u=a.getMeta().dataset._model,c=n?i.xCenter:l.x,d=n?i.yCenter:l.y;e._scale=i,e._options=s,e._datasetIndex=a.index,e._index=t,e._model={x:c,y:d,skip:r.skip||isNaN(c)||isNaN(d),radius:s.radius,pointStyle:s.pointStyle,rotation:s.rotation,backgroundColor:s.backgroundColor,borderColor:s.borderColor,borderWidth:s.borderWidth,tension:fr(r.tension,u?u.tension:0),hitRadius:s.hitRadius}},_resolveDatasetElementOptions:function(){var e=this,t=e._config,n=e.chart.options,a=Ta.prototype._resolveDatasetElementOptions.apply(e,arguments);return a.spanGaps=fr(t.spanGaps,n.spanGaps),a.tension=fr(t.lineTension,n.elements.line.tension),a},updateBezierControlPoints:function(){function e(e,t,n){return Math.max(Math.min(e,n),t)}var t,n,a,r,o=this,i=o.getMeta(),l=o.chart.chartArea,s=i.data||[];for(i.dataset._model.spanGaps&&(s=s.filter(function(e){return!e._model.skip})),t=0,n=s.length;t<n;++t)a=s[t]._model,r=va.splineCurve(va.previousItem(s,t,!0)._model,a,va.nextItem(s,t,!0)._model,a.tension),a.controlPointPreviousX=e(r.previous.x,l.left,l.right),a.controlPointPreviousY=e(r.previous.y,l.top,l.bottom),a.controlPointNextX=e(r.next.x,l.left,l.right),a.controlPointNextY=e(r.next.y,l.top,l.bottom)},setHoverStyle:function(e){var t=e._model,n=e._options,a=va.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=fr(n.hoverBackgroundColor,a(n.backgroundColor)),t.borderColor=fr(n.hoverBorderColor,a(n.borderColor)),t.borderWidth=fr(n.hoverBorderWidth,n.borderWidth),t.radius=fr(n.hoverRadius,n.radius)}});ia._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}}),ia._set("global",{datasets:{scatter:{showLine:!1}}});var mr=sr,hr={bar:za,bubble:Va,doughnut:ar,horizontalBar:rr,line:sr,polarArea:cr,pie:dr,radar:pr,scatter:mr},gr={modes:{single:function(e,t){var n=ke(t,e),a=[];return Te(e,function(e){if(e.inRange(n.x,n.y))return a.push(e),a}),a.slice(0,1)},label:Ye,index:Ye,dataset:function(e,t,n){var a=ke(t,e);n.axis=n.axis||"xy";var r=Ie(n.axis),o=n.intersect?Le(e,a):Ne(e,a,!1,r);return o.length>0&&(o=e.getDatasetMeta(o[0]._datasetIndex).data),o},"x-axis":function(e,t){return Ye(e,t,{intersect:!1})},point:function(e,t){return Le(e,ke(t,e))},nearest:function(e,t,n){var a=ke(t,e);n.axis=n.axis||"xy";var r=Ie(n.axis);return Ne(e,a,n.intersect,r)},x:function(e,t,n){var a=ke(t,e),r=[],o=!1;return Te(e,function(e){e.inXRange(a.x)&&r.push(e),e.inRange(a.x,a.y)&&(o=!0)}),n.intersect&&!o&&(r=[]),r},y:function(e,t,n){var a=ke(t,e),r=[],o=!1;return Te(e,function(e){e.inYRange(a.y)&&r.push(e),e.inRange(a.x,a.y)&&(o=!0)}),n.intersect&&!o&&(r=[]),r}}},vr=va.extend;ia._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var br={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(){t.draw.apply(t,arguments)}}]},e.boxes.push(t)},removeBox:function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure:function(e,t,n){for(var a,r=["fullWidth","position","weight"],o=r.length,i=0;i<o;++i)a=r[i],n.hasOwnProperty(a)&&(t[a]=n[a])},update:function(e,t,n){if(e){var a=e.options.layout||{},r=va.options.toPadding(a.padding),o=t-r.width,i=n-r.height,l=Fe(e.boxes),s=l.vertical,u=l.horizontal,c=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:o,vBoxMaxWidth:o/2/s.length,hBoxMaxHeight:i/2}),d=vr({maxPadding:vr({},r),w:o,h:i,x:r.left,y:r.top},r);Ze(s.concat(u),c),Ue(s,d,c),Ue(u,d,c)&&Ue(s,d,c),He(d),Qe(l.leftAndTop,d,c),d.x+=d.w,d.y+=d.h,Qe(l.rightAndBottom,d,c),e.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h},va.each(l.chartArea,function(t){var n=t.box;vr(n,e.chartArea),n.update(d.w,d.h)})}}},yr={acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}},Er=Object.freeze({default:"/*\n * DOM element rendering detection\n * https://davidwalsh.name/detect-node-insertion\n */\n@keyframes chartjs-render-animation {\n\tfrom { opacity: 0.99; }\n\tto { opacity: 1; }\n}\n\n.chartjs-render-monitor {\n\tanimation: chartjs-render-animation 0.001s;\n}\n\n/*\n * DOM element resizing detection\n * https://github.com/marcj/css-element-queries\n */\n.chartjs-size-monitor,\n.chartjs-size-monitor-expand,\n.chartjs-size-monitor-shrink {\n\tposition: absolute;\n\tdirection: ltr;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tz-index: -1;\n}\n\n.chartjs-size-monitor-expand > div {\n\tposition: absolute;\n\twidth: 1000000px;\n\theight: 1000000px;\n\tleft: 0;\n\ttop: 0;\n}\n\n.chartjs-size-monitor-shrink > div {\n\tposition: absolute;\n\twidth: 200%;\n\theight: 200%;\n\tleft: 0;\n\ttop: 0;\n}\n"}),wr=function(e){return e&&e.default||e}(Er),_r="$chartjs",Sr="chartjs-size-monitor",xr="chartjs-render-monitor",Pr="chartjs-render-animation",Cr=["animationstart","webkitAnimationStart"],Or={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Dr=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(e){}return e}(),Mr=!!Dr&&{passive:!0},kr={disableCSSInjection:!1,_enabled:"undefined"!==typeof window&&"undefined"!==typeof document,_ensureLoaded:function(e){if(!this.disableCSSInjection){var t=e.getRootNode();it(t.host?t:document.head,wr)}},acquireContext:function(e,t){"string"===typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(this._ensureLoaded(e),We(e,t),n):null},releaseContext:function(e){var t=e.canvas;if(t[_r]){var n=t[_r].initial;["height","width"].forEach(function(e){var a=n[e];va.isNullOrUndef(a)?t.removeAttribute(e):t.setAttribute(e,a)}),va.each(n.style||{},function(e,n){t.style[n]=e}),t.width=t.width,delete t[_r]}},addEventListener:function(e,t,n){var a=e.canvas;if("resize"===t)return void rt(a,n,e);var r=n[_r]||(n[_r]={});ze(a,t,(r.proxies||(r.proxies={}))[e.id+"_"+t]=function(t){n(Ve(t,e))})},removeEventListener:function(e,t,n){var a=e.canvas;if("resize"===t)return void ot(a);var r=n[_r]||{},o=r.proxies||{},i=o[e.id+"_"+t];i&&Ke(a,t,i)}};va.addEvent=ze,va.removeEvent=Ke;var Tr=kr._enabled?kr:yr,Lr=va.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Tr);ia._set("global",{plugins:{}});var Nr={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach(function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,n){var a,r,o,i,l,s=this.descriptors(e),u=s.length;for(a=0;a<u;++a)if(r=s[a],o=r.plugin,"function"===typeof(l=o[t])&&(i=[e].concat(n||[]),i.push(r.options),!1===l.apply(o,i)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var n=[],a=[],r=e&&e.config||{},o=r.options&&r.options.plugins||{};return this._plugins.concat(r.plugins||[]).forEach(function(e){if(-1===n.indexOf(e)){var t=e.id,r=o[t];!1!==r&&(!0===r&&(r=va.clone(ia.global.plugins[t])),n.push(e),a.push({plugin:e,options:r||{}}))}}),t.descriptors=a,t.id=this._cacheId,a},_invalidate:function(e){delete e.$plugins}},Ir={constructors:{},defaults:{},registerScaleType:function(e,t,n){this.constructors[e]=t,this.defaults[e]=va.clone(n)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?va.merge({},[ia.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){var n=this;n.defaults.hasOwnProperty(e)&&(n.defaults[e]=va.extend(n.defaults[e],t))},addScalesToLayout:function(e){va.each(e.scales,function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,br.addBox(e,t)})}},Yr=va.valueOrDefault,Rr=va.rtl.getRtlAdapter;ia._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:va.noop,title:function(e,t){var n="",a=t.labels,r=a?a.length:0;if(e.length>0){var o=e[0];o.label?n=o.label:o.xLabel?n=o.xLabel:r>0&&o.index<r&&(n=a[o.index])}return n},afterTitle:va.noop,beforeBody:va.noop,beforeLabel:va.noop,label:function(e,t){var n=t.datasets[e.datasetIndex].label||"";return n&&(n+=": "),va.isNullOrUndef(e.value)?n+=e.yLabel:n+=e.value,n},labelColor:function(e,t){var n=t.getDatasetMeta(e.datasetIndex),a=n.data[e.index],r=a._view;return{borderColor:r.borderColor,backgroundColor:r.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:va.noop,afterBody:va.noop,beforeFooter:va.noop,footer:va.noop,afterFooter:va.noop}}});var Ar={average:function(e){if(!e.length)return!1;var t,n,a=0,r=0,o=0;for(t=0,n=e.length;t<n;++t){var i=e[t];if(i&&i.hasValue()){var l=i.tooltipPosition();a+=l.x,r+=l.y,++o}}return{x:a/o,y:r/o}},nearest:function(e,t){var n,a,r,o=t.x,i=t.y,l=Number.POSITIVE_INFINITY;for(n=0,a=e.length;n<a;++n){var s=e[n];if(s&&s.hasValue()){var u=s.getCenterPoint(),c=va.distanceBetweenPoints(t,u);c<l&&(l=c,r=s)}}if(r){var d=r.tooltipPosition();o=d.x,i=d.y}return{x:o,y:i}}},jr=xa.extend({initialize:function(){this._model=ct(this._options),this._lastActive=[]},getTitle:function(){var e=this,t=e._options,n=t.callbacks,a=n.beforeTitle.apply(e,arguments),r=n.title.apply(e,arguments),o=n.afterTitle.apply(e,arguments),i=[];return i=lt(i,st(a)),i=lt(i,st(r)),i=lt(i,st(o))},getBeforeBody:function(){return ht(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var n=this,a=n._options.callbacks,r=[];return va.each(e,function(e){var o={before:[],lines:[],after:[]};lt(o.before,st(a.beforeLabel.call(n,e,t))),lt(o.lines,a.label.call(n,e,t)),lt(o.after,st(a.afterLabel.call(n,e,t))),r.push(o)}),r},getAfterBody:function(){return ht(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this,t=e._options.callbacks,n=t.beforeFooter.apply(e,arguments),a=t.footer.apply(e,arguments),r=t.afterFooter.apply(e,arguments),o=[];return o=lt(o,st(n)),o=lt(o,st(a)),o=lt(o,st(r))},update:function(e){var t,n,a=this,r=a._options,o=a._model,i=a._model=ct(r),l=a._active,s=a._data,u={xAlign:o.xAlign,yAlign:o.yAlign},c={x:o.x,y:o.y},d={width:o.width,height:o.height},f={x:o.caretX,y:o.caretY};if(l.length){i.opacity=1;var p=[],m=[];f=Ar[r.position].call(a,l,a._eventPosition);var h=[];for(t=0,n=l.length;t<n;++t)h.push(ut(l[t]));r.filter&&(h=h.filter(function(e){return r.filter(e,s)})),r.itemSort&&(h=h.sort(function(e,t){return r.itemSort(e,t,s)})),va.each(h,function(e){p.push(r.callbacks.labelColor.call(a,e,a._chart)),m.push(r.callbacks.labelTextColor.call(a,e,a._chart))}),i.title=a.getTitle(h,s),i.beforeBody=a.getBeforeBody(h,s),i.body=a.getBody(h,s),i.afterBody=a.getAfterBody(h,s),i.footer=a.getFooter(h,s),i.x=f.x,i.y=f.y,i.caretPadding=r.caretPadding,i.labelColors=p,i.labelTextColors=m,i.dataPoints=h,d=dt(this,i),u=ft(this,d),c=pt(i,d,u,a._chart)}else i.opacity=0;return i.xAlign=u.xAlign,i.yAlign=u.yAlign,i.x=c.x,i.y=c.y,i.width=d.width,i.height=d.height,i.caretX=f.x,i.caretY=f.y,a._model=i,e&&r.custom&&r.custom.call(a,i),a},drawCaret:function(e,t){var n=this._chart.ctx,a=this._view,r=this.getCaretPosition(e,t,a);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)},getCaretPosition:function(e,t,n){var a,r,o,i,l,s,u=n.caretSize,c=n.cornerRadius,d=n.xAlign,f=n.yAlign,p=e.x,m=e.y,h=t.width,g=t.height;if("center"===f)l=m+g/2,"left"===d?(a=p,r=a-u,o=a,i=l+u,s=l-u):(a=p+h,r=a+u,o=a,i=l-u,s=l+u);else if("left"===d?(r=p+c+u,a=r-u,o=r+u):"right"===d?(r=p+h-c-u,a=r-u,o=r+u):(r=n.caretX,a=r-u,o=r+u),"top"===f)i=m,l=i-u,s=i;else{i=m+g,l=i+u,s=i;var v=o;o=a,a=v}return{x1:a,x2:r,x3:o,y1:i,y2:l,y3:s}},drawTitle:function(e,t,n){var a,r,o,i=t.title,l=i.length;if(l){var s=Rr(t.rtl,t.x,t.width);for(e.x=mt(t,t._titleAlign),n.textAlign=s.textAlign(t._titleAlign),n.textBaseline="middle",a=t.titleFontSize,r=t.titleSpacing,n.fillStyle=t.titleFontColor,n.font=va.fontString(a,t._titleFontStyle,t._titleFontFamily),o=0;o<l;++o)n.fillText(i[o],s.x(e.x),e.y+a/2),e.y+=a+r,o+1===l&&(e.y+=t.titleMarginBottom-r)}},drawBody:function(e,t,n){var a,r,o,i,l,s,u,c,d=t.bodyFontSize,f=t.bodySpacing,p=t._bodyAlign,m=t.body,h=t.displayColors,g=0,v=h?mt(t,"left"):0,b=Rr(t.rtl,t.x,t.width),y=function(t){n.fillText(t,b.x(e.x+g),e.y+d/2),e.y+=d+f},E=b.textAlign(p);for(n.textAlign=p,n.textBaseline="middle",n.font=va.fontString(d,t._bodyFontStyle,t._bodyFontFamily),e.x=mt(t,E),n.fillStyle=t.bodyFontColor,va.each(t.beforeBody,y),g=h&&"right"!==E?"center"===p?d/2+1:d+2:0,l=0,u=m.length;l<u;++l){for(a=m[l],r=t.labelTextColors[l],o=t.labelColors[l],n.fillStyle=r,va.each(a.before,y),i=a.lines,s=0,c=i.length;s<c;++s){if(h){var w=b.x(v);n.fillStyle=t.legendColorBackground,n.fillRect(b.leftForLtr(w,d),e.y,d,d),n.lineWidth=1,n.strokeStyle=o.borderColor,n.strokeRect(b.leftForLtr(w,d),e.y,d,d),n.fillStyle=o.backgroundColor,n.fillRect(b.leftForLtr(b.xPlus(w,1),d-2),e.y+1,d-2,d-2),n.fillStyle=r}y(i[s])}va.each(a.after,y)}g=0,va.each(t.afterBody,y),e.y-=f},drawFooter:function(e,t,n){var a,r,o=t.footer,i=o.length;if(i){var l=Rr(t.rtl,t.x,t.width);for(e.x=mt(t,t._footerAlign),e.y+=t.footerMarginTop,n.textAlign=l.textAlign(t._footerAlign),n.textBaseline="middle",a=t.footerFontSize,n.fillStyle=t.footerFontColor,n.font=va.fontString(a,t._footerFontStyle,t._footerFontFamily),r=0;r<i;++r)n.fillText(o[r],l.x(e.x),e.y+a/2),e.y+=a+t.footerSpacing}},drawBackground:function(e,t,n,a){n.fillStyle=t.backgroundColor,n.strokeStyle=t.borderColor,n.lineWidth=t.borderWidth;var r=t.xAlign,o=t.yAlign,i=e.x,l=e.y,s=a.width,u=a.height,c=t.cornerRadius;n.beginPath(),n.moveTo(i+c,l),"top"===o&&this.drawCaret(e,a),n.lineTo(i+s-c,l),n.quadraticCurveTo(i+s,l,i+s,l+c),"center"===o&&"right"===r&&this.drawCaret(e,a),n.lineTo(i+s,l+u-c),n.quadraticCurveTo(i+s,l+u,i+s-c,l+u),"bottom"===o&&this.drawCaret(e,a),n.lineTo(i+c,l+u),n.quadraticCurveTo(i,l+u,i,l+u-c),"center"===o&&"left"===r&&this.drawCaret(e,a),n.lineTo(i,l+c),n.quadraticCurveTo(i,l,i+c,l),n.closePath(),n.fill(),t.borderWidth>0&&n.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var n={width:t.width,height:t.height},a={x:t.x,y:t.y},r=Math.abs(t.opacity<.001)?0:t.opacity,o=t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length;this._options.enabled&&o&&(e.save(),e.globalAlpha=r,this.drawBackground(a,t,e,n),a.y+=t.yPadding,va.rtl.overrideTextDirection(e,t.textDirection),this.drawTitle(a,t,e),this.drawBody(a,t,e),this.drawFooter(a,t,e),va.rtl.restoreTextDirection(e,t.textDirection),e.restore())}},handleEvent:function(e){var t=this,n=t._options,a=!1;return t._lastActive=t._lastActive||[],"mouseout"===e.type?t._active=[]:(t._active=t._chart.getElementsAtEventForMode(e,n.mode,n),n.reverse&&t._active.reverse()),a=!va.arrayEquals(t._active,t._lastActive),a&&(t._lastActive=t._active,(n.enabled||n.custom)&&(t._eventPosition={x:e.x,y:e.y},t.update(!0),t.pivot())),a}}),Zr=Ar,Fr=jr;Fr.positioners=Zr;var Br=va.valueOrDefault;ia._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Xr=function(e,t){return this.construct(e,t),this};va.extend(Xr.prototype,{construct:function(e,t){var n=this;t=bt(t);var a=Lr.acquireContext(e,t),r=a&&a.canvas,o=r&&r.height,i=r&&r.width;if(n.id=va.uid(),n.ctx=a,n.canvas=r,n.config=t,n.width=i,n.height=o,n.aspectRatio=o?i/o:null,n.options=t.options,n._bufferedRender=!1,n._layers=[],n.chart=n,n.controller=n,Xr.instances[n.id]=n,Object.defineProperty(n,"data",{get:function(){return n.config.data},set:function(e){n.config.data=e}}),!a||!r)return void console.error("Failed to create chart: can't acquire context from the given item");n.initialize(),n.update()},initialize:function(){var e=this;return Nr.notify(e,"beforeInit"),va.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.initToolTip(),Nr.notify(e,"afterInit"),e},clear:function(){return va.canvas.clear(this),this},stop:function(){return Oa.cancelAnimation(this),this},resize:function(e){var t=this,n=t.options,a=t.canvas,r=n.maintainAspectRatio&&t.aspectRatio||null,o=Math.max(0,Math.floor(va.getMaximumWidth(a))),i=Math.max(0,Math.floor(r?o/r:va.getMaximumHeight(a)));if((t.width!==o||t.height!==i)&&(a.width=t.width=o,a.height=t.height=i,a.style.width=o+"px",a.style.height=i+"px",va.retinaScale(t,n.devicePixelRatio),!e)){var l={width:o,height:i};Nr.notify(t,"resize",[l]),n.onResize&&n.onResize(t,l),t.stop(),t.update({duration:n.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},n=e.scale;va.each(t.xAxes,function(e,n){e.id||(e.id=Et(t.xAxes,"x-axis-",n))}),va.each(t.yAxes,function(e,n){e.id||(e.id=Et(t.yAxes,"y-axis-",n))}),n&&(n.id=n.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,n=e.scales||{},a=[],r=Object.keys(n).reduce(function(e,t){return e[t]=!1,e},{});t.scales&&(a=a.concat((t.scales.xAxes||[]).map(function(e){return{options:e,dtype:"category",dposition:"bottom"}}),(t.scales.yAxes||[]).map(function(e){return{options:e,dtype:"linear",dposition:"left"}}))),t.scale&&a.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),va.each(a,function(t){var a=t.options,o=a.id,i=Br(a.type,t.dtype);wt(a.position)!==wt(t.dposition)&&(a.position=t.dposition),r[o]=!0;var l=null;if(o in n&&n[o].type===i)l=n[o],l.options=a,l.ctx=e.ctx,l.chart=e;else{var s=Ir.getScaleConstructor(i);if(!s)return;l=new s({id:o,type:i,options:a,ctx:e.ctx,chart:e}),n[l.id]=l}l.mergeTicksOptions(),t.isDefault&&(e.scale=l)}),va.each(r,function(e,t){e||delete n[t]}),e.scales=n,Ir.addScalesToLayout(this)},buildOrUpdateControllers:function(){var e,t,n=this,a=[],r=n.data.datasets;for(e=0,t=r.length;e<t;e++){var o=r[e],i=n.getDatasetMeta(e),l=o.type||n.config.type;if(i.type&&i.type!==l&&(n.destroyDatasetMeta(e),i=n.getDatasetMeta(e)),i.type=l,i.order=o.order||0,i.index=e,i.controller)i.controller.updateIndex(e),i.controller.linkScales();else{var s=hr[i.type];if(void 0===s)throw new Error('"'+i.type+'" is not a chart type.');i.controller=new s(n,e),a.push(i.controller)}}return a},resetElements:function(){var e=this;va.each(e.data.datasets,function(t,n){e.getDatasetMeta(n).controller.reset()},e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t,n,a=this;if(e&&"object"===typeof e||(e={duration:e,lazy:arguments[1]}),yt(a),Nr._invalidate(a),!1!==Nr.notify(a,"beforeUpdate")){a.tooltip._data=a.data;var r=a.buildOrUpdateControllers();for(t=0,n=a.data.datasets.length;t<n;t++)a.getDatasetMeta(t).controller.buildOrUpdateElements();a.updateLayout(),a.options.animation&&a.options.animation.duration&&va.each(r,function(e){e.reset()}),a.updateDatasets(),a.tooltip.initialize(),a.lastActive=[],Nr.notify(a,"afterUpdate"),a._layers.sort(_t("z","_idx")),a._bufferedRender?a._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:a.render(e)}},updateLayout:function(){var e=this;!1!==Nr.notify(e,"beforeLayout")&&(br.update(this,this.width,this.height),e._layers=[],va.each(e.boxes,function(t){t._configure&&t._configure(),e._layers.push.apply(e._layers,t._layers())},e),e._layers.forEach(function(e,t){e._idx=t}),Nr.notify(e,"afterScaleUpdate"),Nr.notify(e,"afterLayout"))},updateDatasets:function(){var e=this;if(!1!==Nr.notify(e,"beforeDatasetsUpdate")){for(var t=0,n=e.data.datasets.length;t<n;++t)e.updateDataset(t);Nr.notify(e,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this,n=t.getDatasetMeta(e),a={meta:n,index:e};!1!==Nr.notify(t,"beforeDatasetUpdate",[a])&&(n.controller._update(),Nr.notify(t,"afterDatasetUpdate",[a]))},render:function(e){var t=this;e&&"object"===typeof e||(e={duration:e,lazy:arguments[1]});var n=t.options.animation,a=Br(e.duration,n&&n.duration),r=e.lazy;if(!1!==Nr.notify(t,"beforeRender")){var o=function(e){Nr.notify(t,"afterRender"),va.callback(n&&n.onComplete,[e],t)};if(n&&a){var i=new Ca({numSteps:a/16.66,easing:e.easing||n.easing,render:function(e,t){var n=va.easing.effects[t.easing],a=t.currentStep,r=a/t.numSteps;e.draw(n(r),r,a)},onAnimationProgress:n.onProgress,onAnimationComplete:o});Oa.addAnimation(t,i,a,r)}else t.draw(),o(new Ca({numSteps:0,chart:t}));return t}},draw:function(e){var t,n,a=this;if(a.clear(),va.isNullOrUndef(e)&&(e=1),a.transition(e),!(a.width<=0||a.height<=0)&&!1!==Nr.notify(a,"beforeDraw",[e])){for(n=a._layers,t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(a.chartArea);for(a.drawDatasets(e);t<n.length;++t)n[t].draw(a.chartArea);a._drawTooltip(e),Nr.notify(a,"afterDraw",[e])}},transition:function(e){for(var t=this,n=0,a=(t.data.datasets||[]).length;n<a;++n)t.isDatasetVisible(n)&&t.getDatasetMeta(n).controller.transition(e);t.tooltip.transition(e)},_getSortedDatasetMetas:function(e){var t,n,a=this,r=a.data.datasets||[],o=[];for(t=0,n=r.length;t<n;++t)e&&!a.isDatasetVisible(t)||o.push(a.getDatasetMeta(t));return o.sort(_t("order","index")),o},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(e){var t,n,a=this;if(!1!==Nr.notify(a,"beforeDatasetsDraw",[e])){for(t=a._getSortedVisibleDatasetMetas(),n=t.length-1;n>=0;--n)a.drawDataset(t[n],e);Nr.notify(a,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var n=this,a={meta:e,index:e.index,easingValue:t};!1!==Nr.notify(n,"beforeDatasetDraw",[a])&&(e.controller.draw(t),Nr.notify(n,"afterDatasetDraw",[a]))},_drawTooltip:function(e){var t=this,n=t.tooltip,a={tooltip:n,easingValue:e};!1!==Nr.notify(t,"beforeTooltipDraw",[a])&&(n.draw(),Nr.notify(t,"afterTooltipDraw",[a]))},getElementAtEvent:function(e){return gr.modes.single(this,e)},getElementsAtEvent:function(e){return gr.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return gr.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,n){var a=gr.modes[t];return"function"===typeof a?a(this,e,n):[]},getDatasetAtEvent:function(e){return gr.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this,n=t.data.datasets[e];n._meta||(n._meta={});var a=n._meta[t.id];return a||(a=n._meta[t.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n.order||0,index:e}),a},getVisibleDatasetCount:function(){for(var e=0,t=0,n=this.data.datasets.length;t<n;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"===typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,n=this.data.datasets[e],a=n._meta&&n._meta[t];a&&(a.controller.destroy(),delete n._meta[t])},destroy:function(){var e,t,n=this,a=n.canvas;for(n.stop(),e=0,t=n.data.datasets.length;e<t;++e)n.destroyDatasetMeta(e);a&&(n.unbindEvents(),va.canvas.clear(n),Lr.releaseContext(n.ctx),n.canvas=null,n.ctx=null),Nr.notify(n,"destroy"),delete Xr.instances[n.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new Fr({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},n=function(){e.eventHandler.apply(e,arguments)};va.each(e.options.events,function(a){Lr.addEventListener(e,a,n),t[a]=n}),e.options.responsive&&(n=function(){e.resize()},Lr.addEventListener(e,"resize",n),t.resize=n)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,va.each(t,function(t,n){Lr.removeEventListener(e,n,t)}))},updateHoverStyle:function(e,t,n){var a,r,o,i=n?"set":"remove";for(r=0,o=e.length;r<o;++r)(a=e[r])&&this.getDatasetMeta(a._datasetIndex).controller[i+"HoverStyle"](a);"dataset"===t&&this.getDatasetMeta(e[0]._datasetIndex).controller["_"+i+"DatasetHoverStyle"]()},eventHandler:function(e){var t=this,n=t.tooltip;if(!1!==Nr.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var a=t.handleEvent(e);n&&(a=n._start?n.handleEvent(e):a|n.handleEvent(e)),Nr.notify(t,"afterEvent",[e]);var r=t._bufferedRequest;return r?t.render(r):a&&!t.animating&&(t.stop(),t.render({duration:t.options.hover.animationDuration,lazy:!0})),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t=this,n=t.options||{},a=n.hover,r=!1;return t.lastActive=t.lastActive||[],"mouseout"===e.type?t.active=[]:t.active=t.getElementsAtEventForMode(e,a.mode,a),va.callback(n.onHover||n.hover.onHover,[e.native,t.active],t),"mouseup"!==e.type&&"click"!==e.type||n.onClick&&n.onClick.call(t,e.native,t.active),t.lastActive.length&&t.updateHoverStyle(t.lastActive,a.mode,!1),t.active.length&&a.mode&&t.updateHoverStyle(t.active,a.mode,!0),r=!va.arrayEquals(t.active,t.lastActive),t.lastActive=t.active,r}}),Xr.instances={};var Hr=Xr;Xr.Controller=Xr,Xr.types={},va.configMerge=vt,va.scaleMerge=gt;va.extend(xt.prototype,{formats:St,parse:St,format:St,add:St,diff:St,startOf:St,endOf:St,_create:function(e){return e}}),xt.override=function(e){va.extend(xt.prototype,e)};var Jr=xt,Ur={_date:Jr},Qr={formatters:{values:function(e){return va.isArray(e)?e:""+e},linear:function(e,t,n){var a=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(a)>1&&e!==Math.floor(e)&&(a=e-Math.floor(e));var r=va.log10(Math.abs(a)),o="";if(0!==e){if(Math.max(Math.abs(n[0]),Math.abs(n[n.length-1]))<1e-4){var i=va.log10(Math.abs(e)),l=Math.floor(i)-Math.floor(r);l=Math.max(Math.min(l,20),0),o=e.toExponential(l)}else{var s=-1*Math.floor(r);s=Math.max(Math.min(s,20),0),o=e.toFixed(s)}}else o="0";return o},logarithmic:function(e,t,n){var a=e/Math.pow(10,Math.floor(va.log10(e)));return 0===e?"0":1===a||2===a||5===a||0===t||t===n.length-1?e.toExponential():""}}},Gr=va.isArray,Wr=va.isNullOrUndef,zr=va.valueOrDefault,Kr=va.valueAtIndexOrDefault;ia._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Qr.formatters.values,minor:{},major:{}}});var qr=xa.extend({zeroLineIndex:0,getPadding:function(){var e=this;return{left:e.paddingLeft||0,top:e.paddingTop||0,right:e.paddingRight||0,bottom:e.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels},mergeTicksOptions:function(){},beforeUpdate:function(){va.callback(this.options.beforeUpdate,[this])},update:function(e,t,n){var a,r,o,i,l,s=this,u=s.options.ticks,c=u.sampleSize;if(s.beforeUpdate(),s.maxWidth=e,s.maxHeight=t,s.margins=va.extend({left:0,right:0,top:0,bottom:0},n),s._ticks=null,s.ticks=null,s._labelSizes=null,s._maxLabelLines=0,s.longestLabelWidth=0,s.longestTextCache=s.longestTextCache||{},s._gridLineItems=null,s._labelItems=null,s.beforeSetDimensions(),s.setDimensions(),s.afterSetDimensions(),s.beforeDataLimits(),s.determineDataLimits(),s.afterDataLimits(),s.beforeBuildTicks(),i=s.buildTicks()||[],(!(i=s.afterBuildTicks(i)||i)||!i.length)&&s.ticks)for(i=[],a=0,r=s.ticks.length;a<r;++a)i.push({value:s.ticks[a],major:!1});return s._ticks=i,l=c<i.length,o=s._convertTicksToLabels(l?Pt(i,c):i),s._configure(),s.beforeCalculateTickRotation(),s.calculateTickRotation(),s.afterCalculateTickRotation(),s.beforeFit(),s.fit(),s.afterFit(),s._ticksToDraw=u.display&&(u.autoSkip||"auto"===u.source)?s._autoSkip(i):i,l&&(o=s._convertTicksToLabels(s._ticksToDraw)),s.ticks=o,s.afterUpdate(),s.minSize},_configure:function(){var e,t,n=this,a=n.options.ticks.reverse;n.isHorizontal()?(e=n.left,t=n.right):(e=n.top,t=n.bottom,a=!a),n._startPixel=e,n._endPixel=t,n._reversePixels=a,n._length=t-e},afterUpdate:function(){va.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){va.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){va.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){va.callback(this.options.beforeDataLimits,[this])},determineDataLimits:va.noop,afterDataLimits:function(){va.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){va.callback(this.options.beforeBuildTicks,[this])},buildTicks:va.noop,afterBuildTicks:function(e){var t=this;return Gr(e)&&e.length?va.callback(t.options.afterBuildTicks,[t,e]):(t.ticks=va.callback(t.options.afterBuildTicks,[t,t.ticks])||t.ticks,e)},beforeTickToLabelConversion:function(){va.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this,t=e.options.ticks;e.ticks=e.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){va.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){va.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e,t,n,a,r,o,i,l=this,s=l.options,u=s.ticks,c=l.getTicks().length,d=u.minRotation||0,f=u.maxRotation,p=d;if(!l._isVisible()||!u.display||d>=f||c<=1||!l.isHorizontal())return void(l.labelRotation=d);e=l._getLabelSizes(),t=e.widest.width,n=e.highest.height-e.highest.offset,a=Math.min(l.maxWidth,l.chart.width-t),r=s.offset?l.maxWidth/c:a/(c-1),t+6>r&&(r=a/(c-(s.offset?.5:1)),o=l.maxHeight-Mt(s.gridLines)-u.padding-kt(s.scaleLabel),i=Math.sqrt(t*t+n*n),p=va.toDegrees(Math.min(Math.asin(Math.min((e.highest.height+6)/r,1)),Math.asin(Math.min(o/i,1))-Math.asin(n/i))),p=Math.max(d,Math.min(f,p))),l.labelRotation=p},afterCalculateTickRotation:function(){va.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){va.callback(this.options.beforeFit,[this])},fit:function(){var e=this,t=e.minSize={width:0,height:0},n=e.chart,a=e.options,r=a.ticks,o=a.scaleLabel,i=a.gridLines,l=e._isVisible(),s="bottom"===a.position,u=e.isHorizontal();if(u?t.width=e.maxWidth:l&&(t.width=Mt(i)+kt(o)),u?l&&(t.height=Mt(i)+kt(o)):t.height=e.maxHeight,r.display&&l){var c=Lt(r),d=e._getLabelSizes(),f=d.first,p=d.last,m=d.widest,h=d.highest,g=.4*c.minor.lineHeight,v=r.padding;if(u){var b=0!==e.labelRotation,y=va.toRadians(e.labelRotation),E=Math.cos(y),w=Math.sin(y),_=w*m.width+E*(h.height-(b?h.offset:0))+(b?0:g);t.height=Math.min(e.maxHeight,t.height+_+v);var S,x,P=e.getPixelForTick(0)-e.left,C=e.right-e.getPixelForTick(e.getTicks().length-1);b?(S=s?E*f.width+w*f.offset:w*(f.height-f.offset),x=s?w*(p.height-p.offset):E*p.width+w*p.offset):(S=f.width/2,x=p.width/2),e.paddingLeft=Math.max((S-P)*e.width/(e.width-P),0)+3,e.paddingRight=Math.max((x-C)*e.width/(e.width-C),0)+3}else{var O=r.mirror?0:m.width+v+g;t.width=Math.min(e.maxWidth,t.width+O),e.paddingTop=f.height/2,e.paddingBottom=p.height/2}}e.handleMargins(),u?(e.width=e._length=n.width-e.margins.left-e.margins.right,e.height=t.height):(e.width=t.width,e.height=e._length=n.height-e.margins.top-e.margins.bottom)},handleMargins:function(){var e=this;e.margins&&(e.margins.left=Math.max(e.paddingLeft,e.margins.left),e.margins.top=Math.max(e.paddingTop,e.margins.top),e.margins.right=Math.max(e.paddingRight,e.margins.right),e.margins.bottom=Math.max(e.paddingBottom,e.margins.bottom))},afterFit:function(){va.callback(this.options.afterFit,[this])},isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(Wr(e))return NaN;if(("number"===typeof e||e instanceof Number)&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},_convertTicksToLabels:function(e){var t,n,a,r=this;for(r.ticks=e.map(function(e){return e.value}),r.beforeTickToLabelConversion(),t=r.convertTicksToLabels(e)||r.ticks,r.afterTickToLabelConversion(),n=0,a=e.length;n<a;++n)e[n].label=t[n];return t},_getLabelSizes:function(){var e=this,t=e._labelSizes;return t||(e._labelSizes=t=Dt(e.ctx,Lt(e.options.ticks),e.getTicks(),e.longestTextCache),e.longestLabelWidth=t.widest.width),t},_parseValue:function(e){var t,n,a,r;return Gr(e)?(t=+this.getRightValue(e[0]),n=+this.getRightValue(e[1]),a=Math.min(t,n),r=Math.max(t,n)):(e=+this.getRightValue(e),t=void 0,n=e,a=e,r=e),{min:a,max:r,start:t,end:n}},_getScaleLabel:function(e){var t=this._parseValue(e);return void 0!==t.start?"["+t.start+", "+t.end+"]":+this.getRightValue(e)},getLabelForIndex:va.noop,getPixelForValue:va.noop,getValueForPixel:va.noop,getPixelForTick:function(e){var t=this,n=t.options.offset,a=t._ticks.length,r=1/Math.max(a-(n?0:1),1);return e<0||e>a-1?null:t.getPixelForDecimal(e*r+(n?r/2:0))},getPixelForDecimal:function(e){var t=this;return t._reversePixels&&(e=1-e),t._startPixel+e*t._length},getDecimalForPixel:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this,t=e.min,n=e.max;return e.beginAtZero?0:t<0&&n<0?n:t>0&&n>0?t:0},_autoSkip:function(e){var t,n,a,r,o=this,i=o.options.ticks,l=o._length,s=i.maxTicksLimit||l/o._tickSize()+1,u=i.major.enabled?Rt(e):[],c=u.length,d=u[0],f=u[c-1];if(c>s)return At(e,u,c/s),Nt(e);if(a=Yt(u,e,l,s),c>0){for(t=0,n=c-1;t<n;t++)jt(e,a,u[t],u[t+1]);return r=c>1?(f-d)/(c-1):null,jt(e,a,va.isNullOrUndef(r)?0:d-r,d),jt(e,a,f,va.isNullOrUndef(r)?e.length:f+r),Nt(e)}return jt(e,a),Nt(e)},_tickSize:function(){var e=this,t=e.options.ticks,n=va.toRadians(e.labelRotation),a=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),o=e._getLabelSizes(),i=t.autoSkipPadding||0,l=o?o.widest.width+i:0,s=o?o.highest.height+i:0;return e.isHorizontal()?s*a>l*r?l/a:s/r:s*r<l*a?s/a:l/r},_isVisible:function(){var e,t,n,a=this,r=a.chart,o=a.options.display;if("auto"!==o)return!!o;for(e=0,t=r.data.datasets.length;e<t;++e)if(r.isDatasetVisible(e)&&(n=r.getDatasetMeta(e),n.xAxisID===a.id||n.yAxisID===a.id))return!0;return!1},_computeGridLineItems:function(e){var t,n,a,r,o,i,l,s,u,c,d,f,p,m,h,g,v,b=this,y=b.chart,E=b.options,w=E.gridLines,_=E.position,S=w.offsetGridLines,x=b.isHorizontal(),P=b._ticksToDraw,C=P.length+(S?1:0),O=Mt(w),D=[],M=w.drawBorder?Kr(w.lineWidth,0,0):0,k=M/2,T=va._alignPixel,L=function(e){return T(y,e,M)};for("top"===_?(t=L(b.bottom),l=b.bottom-O,u=t-k,d=L(e.top)+k,p=e.bottom):"bottom"===_?(t=L(b.top),d=e.top,p=L(e.bottom)-k,l=t+k,u=b.top+O):"left"===_?(t=L(b.right),i=b.right-O,s=t-k,c=L(e.left)+k,f=e.right):(t=L(b.left),c=e.left,f=L(e.right)-k,i=t+k,s=b.left+O),n=0;n<C;++n)a=P[n]||{},Wr(a.label)&&n<P.length||(n===b.zeroLineIndex&&E.offset===S?(m=w.zeroLineWidth,h=w.zeroLineColor,g=w.zeroLineBorderDash||[],v=w.zeroLineBorderDashOffset||0):(m=Kr(w.lineWidth,n,1),h=Kr(w.color,n,"rgba(0,0,0,0.1)"),g=w.borderDash||[],v=w.borderDashOffset||0),void 0!==(r=Ct(b,a._index||n,S))&&(o=T(y,r,m),x?i=s=c=f=o:l=u=d=p=o,D.push({tx1:i,ty1:l,tx2:s,ty2:u,x1:c,y1:d,x2:f,y2:p,width:m,color:h,borderDash:g,borderDashOffset:v})));return D.ticksLength=C,D.borderValue=t,D},_computeLabelItems:function(){var e,t,n,a,r,o,i,l,s,u,c,d,f=this,p=f.options,m=p.ticks,h=p.position,g=m.mirror,v=f.isHorizontal(),b=f._ticksToDraw,y=Lt(m),E=m.padding,w=Mt(p.gridLines),_=-va.toRadians(f.labelRotation),S=[];for("top"===h?(o=f.bottom-w-E,i=_?"left":"center"):"bottom"===h?(o=f.top+w+E,i=_?"right":"center"):"left"===h?(r=f.right-(g?0:w)-E,i=g?"left":"right"):(r=f.left+(g?0:w)+E,i=g?"right":"left"),e=0,t=b.length;e<t;++e)n=b[e],a=n.label,Wr(a)||(l=f.getPixelForTick(n._index||e)+m.labelOffset,s=n.major?y.major:y.minor,u=s.lineHeight,c=Gr(a)?a.length:1,v?(r=l,d="top"===h?((_?1:.5)-c)*u:(_?0:.5)*u):(o=l,d=(1-c)*u/2),S.push({x:r,y:o,rotation:_,label:a,font:s,textOffset:d,textAlign:i}));return S},_drawGrid:function(e){var t=this,n=t.options.gridLines;if(n.display){var a,r,o,i,l,s=t.ctx,u=t.chart,c=va._alignPixel,d=n.drawBorder?Kr(n.lineWidth,0,0):0,f=t._gridLineItems||(t._gridLineItems=t._computeGridLineItems(e));for(o=0,i=f.length;o<i;++o)l=f[o],a=l.width,r=l.color,a&&r&&(s.save(),s.lineWidth=a,s.strokeStyle=r,s.setLineDash&&(s.setLineDash(l.borderDash),s.lineDashOffset=l.borderDashOffset),s.beginPath(),n.drawTicks&&(s.moveTo(l.tx1,l.ty1),s.lineTo(l.tx2,l.ty2)),n.drawOnChartArea&&(s.moveTo(l.x1,l.y1),s.lineTo(l.x2,l.y2)),s.stroke(),s.restore());if(d){var p,m,h,g,v=d,b=Kr(n.lineWidth,f.ticksLength-1,1),y=f.borderValue;t.isHorizontal()?(p=c(u,t.left,v)-v/2,m=c(u,t.right,b)+b/2,h=g=y):(h=c(u,t.top,v)-v/2,g=c(u,t.bottom,b)+b/2,p=m=y),s.lineWidth=d,s.strokeStyle=Kr(n.color,0),s.beginPath(),s.moveTo(p,h),s.lineTo(m,g),s.stroke()}}},_drawLabels:function(){var e=this;if(e.options.ticks.display){var t,n,a,r,o,i,l,s,u=e.ctx,c=e._labelItems||(e._labelItems=e._computeLabelItems());for(t=0,a=c.length;t<a;++t){if(o=c[t],i=o.font,u.save(),u.translate(o.x,o.y),u.rotate(o.rotation),u.font=i.string,u.fillStyle=i.color,u.textBaseline="middle",u.textAlign=o.textAlign,l=o.label,s=o.textOffset,Gr(l))for(n=0,r=l.length;n<r;++n)u.fillText(""+l[n],0,s),s+=i.lineHeight;else u.fillText(l,0,s);u.restore()}}},_drawTitle:function(){var e=this,t=e.ctx,n=e.options,a=n.scaleLabel;if(a.display){var r,o,i=zr(a.fontColor,ia.global.defaultFontColor),l=va.options._parseFont(a),s=va.options.toPadding(a.padding),u=l.lineHeight/2,c=n.position,d=0;if(e.isHorizontal())r=e.left+e.width/2,o="bottom"===c?e.bottom-u-s.bottom:e.top+u+s.top;else{var f="left"===c;r=f?e.left+u+s.top:e.right-u-s.top,o=e.top+e.height/2,d=f?-.5*Math.PI:.5*Math.PI}t.save(),t.translate(r,o),t.rotate(d),t.textAlign="center",t.textBaseline="middle",t.fillStyle=i,t.font=l.string,t.fillText(a.labelString,0,0),t.restore()}},draw:function(e){var t=this;t._isVisible()&&(t._drawGrid(e),t._drawTitle(),t._drawLabels())},_layers:function(){var e=this,t=e.options,n=t.ticks&&t.ticks.z||0,a=t.gridLines&&t.gridLines.z||0;return e._isVisible()&&n!==a&&e.draw===e._draw?[{z:a,draw:function(){e._drawGrid.apply(e,arguments),e._drawTitle.apply(e,arguments)}},{z:n,draw:function(){e._drawLabels.apply(e,arguments)}}]:[{z:n,draw:function(){e.draw.apply(e,arguments)}}]},_getMatchingVisibleMetas:function(e){var t=this,n=t.isHorizontal();return t.chart._getSortedVisibleDatasetMetas().filter(function(a){return(!e||a.type===e)&&(n?a.xAxisID===t.id:a.yAxisID===t.id)})}});qr.prototype._draw=qr.prototype.draw;var Vr=qr,$r=va.isNullOrUndef,eo={position:"bottom"},to=Vr.extend({determineDataLimits:function(){var e,t=this,n=t._getLabels(),a=t.options.ticks,r=a.min,o=a.max,i=0,l=n.length-1;void 0!==r&&(e=n.indexOf(r))>=0&&(i=e),void 0!==o&&(e=n.indexOf(o))>=0&&(l=e),t.minIndex=i,t.maxIndex=l,t.min=n[i],t.max=n[l]},buildTicks:function(){var e=this,t=e._getLabels(),n=e.minIndex,a=e.maxIndex;e.ticks=0===n&&a===t.length-1?t:t.slice(n,a+1)},getLabelForIndex:function(e,t){var n=this,a=n.chart;return a.getDatasetMeta(t).controller._getValueScaleId()===n.id?n.getRightValue(a.data.datasets[t].data[e]):n._getLabels()[e]},_configure:function(){var e=this,t=e.options.offset,n=e.ticks;Vr.prototype._configure.call(e),e.isHorizontal()||(e._reversePixels=!e._reversePixels),n&&(e._startValue=e.minIndex-(t?.5:0),e._valueRange=Math.max(n.length-(t?0:1),1))},getPixelForValue:function(e,t,n){var a,r,o,i=this;return $r(t)||$r(n)||(e=i.chart.data.datasets[n].data[t]),$r(e)||(a=i.isHorizontal()?e.x:e.y),(void 0!==a||void 0!==e&&isNaN(t))&&(r=i._getLabels(),e=va.valueOrDefault(a,e),o=r.indexOf(e),t=-1!==o?o:t,isNaN(t)&&(t=e)),i.getPixelForDecimal((t-i._startValue)/i._valueRange)},getPixelForTick:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e],e+this.minIndex)},getValueForPixel:function(e){var t=this,n=Math.round(t._startValue+t.getDecimalForPixel(e)*t._valueRange);return Math.min(Math.max(n,0),t.ticks.length-1)},getBasePixel:function(){return this.bottom}}),no=eo;to._defaults=no;var ao=va.noop,ro=va.isNullOrUndef,oo=Vr.extend({getRightValue:function(e){return"string"===typeof e?+e:Vr.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var e=this,t=e.options,n=t.ticks;if(n.beginAtZero){var a=va.sign(e.min),r=va.sign(e.max);a<0&&r<0?e.max=0:a>0&&r>0&&(e.min=0)}var o=void 0!==n.min||void 0!==n.suggestedMin,i=void 0!==n.max||void 0!==n.suggestedMax;void 0!==n.min?e.min=n.min:void 0!==n.suggestedMin&&(null===e.min?e.min=n.suggestedMin:e.min=Math.min(e.min,n.suggestedMin)),void 0!==n.max?e.max=n.max:void 0!==n.suggestedMax&&(null===e.max?e.max=n.suggestedMax:e.max=Math.max(e.max,n.suggestedMax)),o!==i&&e.min>=e.max&&(o?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,n.beginAtZero||e.min--)},getTickLimit:function(){var e,t=this,n=t.options.ticks,a=n.stepSize,r=n.maxTicksLimit;return a?e=Math.ceil(t.max/a)-Math.floor(t.min/a)+1:(e=t._computeTickLimit(),r=r||11),r&&(e=Math.min(r,e)),e},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:ao,buildTicks:function(){var e=this,t=e.options,n=t.ticks,a=e.getTickLimit();a=Math.max(2,a);var r={maxTicks:a,min:n.min,max:n.max,precision:n.precision,stepSize:va.valueOrDefault(n.fixedStepSize,n.stepSize)},o=e.ticks=Zt(r,e);e.handleDirectionalChanges(),e.max=va.max(o),e.min=va.min(o),n.reverse?(o.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),Vr.prototype.convertTicksToLabels.call(e)},_configure:function(){var e,t=this,n=t.getTicks(),a=t.min,r=t.max;Vr.prototype._configure.call(t),t.options.offset&&n.length&&(e=(r-a)/Math.max(n.length-1,1)/2,a-=e,r+=e),t._startValue=a,t._endValue=r,t._valueRange=r-a}}),io={position:"left",ticks:{callback:Qr.formatters.linear}},lo=oo.extend({determineDataLimits:function(){var e,t,n,a,r=this,o=r.options,i=r.chart,l=i.data.datasets,s=r._getMatchingVisibleMetas(),u=o.stacked,c={},d=s.length;if(r.min=Number.POSITIVE_INFINITY,r.max=Number.NEGATIVE_INFINITY,void 0===u)for(e=0;!u&&e<d;++e)t=s[e],u=void 0!==t.stack;for(e=0;e<d;++e)t=s[e],n=l[t.index].data,u?Bt(r,c,t,n):Xt(r,t,n);va.each(c,function(e){a=e.pos.concat(e.neg),r.min=Math.min(r.min,va.min(a)),r.max=Math.max(r.max,va.max(a))}),r.min=va.isFinite(r.min)&&!isNaN(r.min)?r.min:0,r.max=va.isFinite(r.max)&&!isNaN(r.max)?r.max:1,r.handleTickRangeOptions()},_computeTickLimit:function(){var e,t=this;return t.isHorizontal()?Math.ceil(t.width/40):(e=va.options._parseFont(t.options.ticks),Math.ceil(t.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){var t=this;return t.getPixelForDecimal((+t.getRightValue(e)-t._startValue)/t._valueRange)},getValueForPixel:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange},getPixelForTick:function(e){var t=this.ticksAsNumbers;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])}}),so=io;lo._defaults=so;var uo=va.valueOrDefault,co=va.math.log10,fo={position:"left",ticks:{callback:Qr.formatters.logarithmic}},po=Vr.extend({determineDataLimits:function(){function e(e){return d?e.xAxisID===l.id:e.yAxisID===l.id}var t,n,a,r,o,i,l=this,s=l.options,u=l.chart,c=u.data.datasets,d=l.isHorizontal();l.min=Number.POSITIVE_INFINITY,l.max=Number.NEGATIVE_INFINITY,l.minNotZero=Number.POSITIVE_INFINITY;var f=s.stacked;if(void 0===f)for(t=0;t<c.length;t++)if(n=u.getDatasetMeta(t),u.isDatasetVisible(t)&&e(n)&&void 0!==n.stack){f=!0;break}if(s.stacked||f){var p={};for(t=0;t<c.length;t++){n=u.getDatasetMeta(t);var m=[n.type,void 0===s.stacked&&void 0===n.stack?t:"",n.stack].join(".");if(u.isDatasetVisible(t)&&e(n))for(void 0===p[m]&&(p[m]=[]),r=c[t].data,o=0,i=r.length;o<i;o++){var h=p[m];a=l._parseValue(r[o]),isNaN(a.min)||isNaN(a.max)||n.data[o].hidden||a.min<0||a.max<0||(h[o]=h[o]||0,h[o]+=a.max)}}va.each(p,function(e){if(e.length>0){var t=va.min(e),n=va.max(e);l.min=Math.min(l.min,t),l.max=Math.max(l.max,n)}})}else for(t=0;t<c.length;t++)if(n=u.getDatasetMeta(t),u.isDatasetVisible(t)&&e(n))for(r=c[t].data,o=0,i=r.length;o<i;o++)a=l._parseValue(r[o]),isNaN(a.min)||isNaN(a.max)||n.data[o].hidden||a.min<0||a.max<0||(l.min=Math.min(a.min,l.min),l.max=Math.max(a.max,l.max),0!==a.min&&(l.minNotZero=Math.min(a.min,l.minNotZero)));l.min=va.isFinite(l.min)?l.min:null,l.max=va.isFinite(l.max)?l.max:null,l.minNotZero=va.isFinite(l.minNotZero)?l.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;e.min=Jt(t.min,e.min),e.max=Jt(t.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(co(e.min))-1),e.max=Math.pow(10,Math.floor(co(e.max))+1)):(e.min=1,e.max=10)),null===e.min&&(e.min=Math.pow(10,Math.floor(co(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(co(e.min))+1):10),null===e.minNotZero&&(e.min>0?e.minNotZero=e.min:e.max<1?e.minNotZero=Math.pow(10,Math.floor(co(e.max))):e.minNotZero=1)},buildTicks:function(){var e=this,t=e.options.ticks,n=!e.isHorizontal(),a={min:Jt(t.min),max:Jt(t.max)},r=e.ticks=Ht(a,e);e.max=va.max(r),e.min=va.min(r),t.reverse?(n=!n,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),n&&r.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),Vr.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){var t=this.tickValues;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])},_getFirstTickValue:function(e){var t=Math.floor(co(e));return Math.floor(e/Math.pow(10,t))*Math.pow(10,t)},_configure:function(){var e=this,t=e.min,n=0;Vr.prototype._configure.call(e),0===t&&(t=e._getFirstTickValue(e.minNotZero),n=uo(e.options.ticks.fontSize,ia.global.defaultFontSize)/e._length),e._startValue=co(t),e._valueOffset=n,e._valueRange=(co(e.max)-co(t))/(1-n)},getPixelForValue:function(e){var t=this,n=0;return e=+t.getRightValue(e),e>t.min&&e>0&&(n=(co(e)-t._startValue)/t._valueRange+t._valueOffset),t.getPixelForDecimal(n)},getValueForPixel:function(e){var t=this,n=t.getDecimalForPixel(e);return 0===n&&0===t.min?0:Math.pow(10,t._startValue+(n-t._valueOffset)*t._valueRange)}}),mo=fo;po._defaults=mo;var ho=va.valueOrDefault,go=va.valueAtIndexOrDefault,vo=va.options.resolve,bo={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Qr.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}},yo=oo.extend({setDimensions:function(){var e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=Ut(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2},determineDataLimits:function(){var e=this,t=e.chart,n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;va.each(t.data.datasets,function(r,o){if(t.isDatasetVisible(o)){var i=t.getDatasetMeta(o);va.each(r.data,function(t,r){var o=+e.getRightValue(t);isNaN(o)||i.data[r].hidden||(n=Math.min(o,n),a=Math.max(o,a))})}}),e.min=n===Number.POSITIVE_INFINITY?0:n,e.max=a===Number.NEGATIVE_INFINITY?0:a,e.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Ut(this.options))},convertTicksToLabels:function(){var e=this;oo.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(function(){var t=va.callback(e.options.pointLabels.callback,arguments,e);return t||0===t?t:""})},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e=this,t=e.options;t.display&&t.pointLabels.display?Wt(e):e.setCenterPoint(0,0,0,0)},setReductions:function(e,t,n){var a=this,r=t.l/Math.sin(n.l),o=Math.max(t.r-a.width,0)/Math.sin(n.r),i=-t.t/Math.cos(n.t),l=-Math.max(t.b-(a.height-a.paddingTop),0)/Math.cos(n.b);r=en(r),o=en(o),i=en(i),l=en(l),a.drawingArea=Math.min(Math.floor(e-(r+o)/2),Math.floor(e-(i+l)/2)),a.setCenterPoint(r,o,i,l)},setCenterPoint:function(e,t,n,a){var r=this,o=r.width-t-r.drawingArea,i=e+r.drawingArea,l=n+r.drawingArea,s=r.height-r.paddingTop-a-r.drawingArea;r.xCenter=Math.floor((i+o)/2+r.left),r.yCenter=Math.floor((l+s)/2+r.top+r.paddingTop)},getIndexAngle:function(e){var t=this.chart,n=360/t.data.labels.length,a=t.options||{},r=a.startAngle||0,o=(e*n+r)%360;return(o<0?o+360:o)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(va.isNullOrUndef(e))return NaN;var n=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*n:(e-t.min)*n},getPointPosition:function(e,t){var n=this,a=n.getIndexAngle(e)-Math.PI/2;return{x:Math.cos(a)*t+n.xCenter,y:Math.sin(a)*t+n.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(e){var t=this,n=t.min,a=t.max;return t.getPointPositionForValue(e||0,t.beginAtZero?0:n<0&&a<0?a:n>0&&a>0?n:0)},_drawGrid:function(){var e,t,n,a=this,r=a.ctx,o=a.options,i=o.gridLines,l=o.angleLines,s=ho(l.lineWidth,i.lineWidth),u=ho(l.color,i.color);if(o.pointLabels.display&&Vt(a),i.display&&va.each(a.ticks,function(e,n){0!==n&&(t=a.getDistanceFromCenterForValue(a.ticksAsNumbers[n]),$t(a,i,t,n))}),l.display&&s&&u){for(r.save(),r.lineWidth=s,r.strokeStyle=u,r.setLineDash&&(r.setLineDash(vo([l.borderDash,i.borderDash,[]])),r.lineDashOffset=vo([l.borderDashOffset,i.borderDashOffset,0])),e=a.chart.data.labels.length-1;e>=0;e--)t=a.getDistanceFromCenterForValue(o.ticks.reverse?a.min:a.max),n=a.getPointPosition(e,t),r.beginPath(),r.moveTo(a.xCenter,a.yCenter),r.lineTo(n.x,n.y),r.stroke();r.restore()}},_drawLabels:function(){var e=this,t=e.ctx,n=e.options,a=n.ticks;if(a.display){var r,o,i=e.getIndexAngle(0),l=va.options._parseFont(a),s=ho(a.fontColor,ia.global.defaultFontColor);t.save(),t.font=l.string,t.translate(e.xCenter,e.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",va.each(e.ticks,function(n,i){(0!==i||a.reverse)&&(r=e.getDistanceFromCenterForValue(e.ticksAsNumbers[i]),a.showLabelBackdrop&&(o=t.measureText(n).width,t.fillStyle=a.backdropColor,t.fillRect(-o/2-a.backdropPaddingX,-r-l.size/2-a.backdropPaddingY,o+2*a.backdropPaddingX,l.size+2*a.backdropPaddingY)),t.fillStyle=s,t.fillText(n,0,-r))}),t.restore()}},_drawTitle:va.noop}),Eo=bo;yo._defaults=Eo;var wo=va._deprecated,_o=va.options.resolve,So=va.valueOrDefault,xo=Number.MIN_SAFE_INTEGER||-9007199254740991,Po=Number.MAX_SAFE_INTEGER||9007199254740991,Co={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Oo=Object.keys(Co),Do={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},Mo=Vr.extend({initialize:function(){this.mergeTicksOptions(),Vr.prototype.initialize.call(this)},update:function(){var e=this,t=e.options,n=t.time||(t.time={}),a=e._adapter=new Ur._date(t.adapters.date);return wo("time scale",n.format,"time.format","time.parser"),wo("time scale",n.min,"time.min","ticks.min"),wo("time scale",n.max,"time.max","ticks.max"),va.mergeIf(n.displayFormats,a.formats()),Vr.prototype.update.apply(e,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),Vr.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var e,t,n,a,r,o,i,l=this,s=l.chart,u=l._adapter,c=l.options,d=c.time.unit||"day",f=Po,p=xo,m=[],h=[],g=[],v=l._getLabels();for(e=0,n=v.length;e<n;++e)g.push(cn(l,v[e]));for(e=0,n=(s.data.datasets||[]).length;e<n;++e)if(s.isDatasetVisible(e))if(r=s.data.datasets[e].data,va.isObject(r[0]))for(h[e]=[],t=0,a=r.length;t<a;++t)o=cn(l,r[t]),m.push(o),h[e][t]=o;else h[e]=g.slice(0),i||(m=m.concat(g),i=!0);else h[e]=[];g.length&&(f=Math.min(f,g[0]),p=Math.max(p,g[g.length-1])),m.length&&(m=n>1?nn(m).sort(tn):m.sort(tn),f=Math.min(f,m[0]),p=Math.max(p,m[m.length-1])),f=cn(l,an(c))||f,p=cn(l,rn(c))||p,f=f===Po?+u.startOf(Date.now(),d):f,p=p===xo?+u.endOf(Date.now(),d)+1:p,l.min=Math.min(f,p),l.max=Math.max(f+1,p),l._table=[],l._timestamps={data:m,datasets:h,labels:g}},buildTicks:function(){var e,t,n,a=this,r=a.min,o=a.max,i=a.options,l=i.ticks,s=i.time,u=a._timestamps,c=[],d=a.getLabelCapacity(r),f=l.source,p=i.distribution;for(u="data"===f||"auto"===f&&"series"===p?u.data:"labels"===f?u.labels:mn(a,r,o,d),"ticks"===i.bounds&&u.length&&(r=u[0],o=u[u.length-1]),r=cn(a,an(i))||r,o=cn(a,rn(i))||o,e=0,t=u.length;e<t;++e)(n=u[e])>=r&&n<=o&&c.push(n);return a.min=r,a.max=o,a._unit=s.unit||(l.autoSkip?dn(s.minUnit,a.min,a.max,d):fn(a,c.length,s.minUnit,a.min,a.max)),a._majorUnit=l.major.enabled&&"year"!==a._unit?pn(a._unit):void 0,a._table=on(a._timestamps.data,r,o,p),a._offsets=hn(a._table,c,r,o,i),l.reverse&&c.reverse(),vn(a,c,a._majorUnit)},getLabelForIndex:function(e,t){var n=this,a=n._adapter,r=n.chart.data,o=n.options.time,i=r.labels&&e<r.labels.length?r.labels[e]:"",l=r.datasets[t].data[e];return va.isObject(l)&&(i=n.getRightValue(l)),o.tooltipFormat?a.format(un(n,i),o.tooltipFormat):"string"===typeof i?i:a.format(un(n,i),o.displayFormats.datetime)},tickFormatFunction:function(e,t,n,a){var r=this,o=r._adapter,i=r.options,l=i.time.displayFormats,s=l[r._unit],u=r._majorUnit,c=l[u],d=n[t],f=i.ticks,p=u&&c&&d&&d.major,m=o.format(e,a||(p?c:s)),h=p?f.major:f.minor,g=_o([h.callback,h.userCallback,f.callback,f.userCallback]);return g?g(m,t,n):m},convertTicksToLabels:function(e){var t,n,a=[];for(t=0,n=e.length;t<n;++t)a.push(this.tickFormatFunction(e[t].value,t,e));return a},getPixelForOffset:function(e){var t=this,n=t._offsets,a=sn(t._table,"time",e,"pos");return t.getPixelForDecimal((n.start+a)*n.factor)},getPixelForValue:function(e,t,n){var a=this,r=null;if(void 0!==t&&void 0!==n&&(r=a._timestamps.datasets[n][t]),null===r&&(r=cn(a,e)),null!==r)return a.getPixelForOffset(r)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this,n=t._offsets,a=t.getDecimalForPixel(e)/n.factor-n.end,r=sn(t._table,"pos",a,"time");return t._adapter._create(r)},_getLabelSize:function(e){var t=this,n=t.options.ticks,a=t.ctx.measureText(e).width,r=va.toRadians(t.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(r),i=Math.sin(r),l=So(n.fontSize,ia.global.defaultFontSize);return{w:a*o+l*i,h:a*i+l*o}},getLabelWidth:function(e){return this._getLabelSize(e).w},getLabelCapacity:function(e){var t=this,n=t.options.time,a=n.displayFormats,r=a[n.unit]||a.millisecond,o=t.tickFormatFunction(e,0,vn(t,[e],t._majorUnit),r),i=t._getLabelSize(o),l=Math.floor(t.isHorizontal()?t.width/i.w:t.height/i.h);return t.options.offset&&l--,l>0?l:1}}),ko=Do;Mo._defaults=ko;var To={category:to,linear:lo,logarithmic:po,radialLinear:yo,time:Mo},Lo={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Ur._date.override("function"===typeof e?{_id:"moment",formats:function(){return Lo},parse:function(t,n){return"string"===typeof t&&"string"===typeof n?t=e(t,n):t instanceof e||(t=e(t)),t.isValid()?t.valueOf():null},format:function(t,n){return e(t).format(n)},add:function(t,n,a){return e(t).add(n,a).valueOf()},diff:function(t,n,a){return e(t).diff(e(n),a)},startOf:function(t,n,a){return t=e(t),"isoWeek"===n?t.isoWeekday(a).valueOf():t.startOf(n).valueOf()},endOf:function(t,n){return e(t).endOf(n).valueOf()},_create:function(t){return e(t)}}:{}),ia._set("global",{plugins:{filler:{propagate:!0}}});var No={dataset:function(e){var t=e.fill,n=e.chart,a=n.getDatasetMeta(t),r=a&&n.isDatasetVisible(t),o=r&&a.dataset._children||[],i=o.length||0;return i?function(e,t){return t<i&&o[t]._view||null}:null},boundary:function(e){var t=e.boundary,n=t?t.x:null,a=t?t.y:null;return va.isArray(t)?function(e,n){return t[n]}:function(e){return{x:null===n?e.x:n,y:null===a?e.y:a}}}},Io={id:"filler",afterDatasetsUpdate:function(e,t){var n,a,r,o,i=(e.data.datasets||[]).length,l=t.propagate,s=[];for(a=0;a<i;++a)n=e.getDatasetMeta(a),r=n.dataset,o=null,r&&r._model&&r instanceof Xa.Line&&(o={visible:e.isDatasetVisible(a),fill:bn(r,a,i),chart:e,el:r}),n.$filler=o,s.push(o);for(a=0;a<i;++a)(o=s[a])&&(o.fill=_n(s,a,l),o.boundary=wn(o),o.mapper=Sn(o))},beforeDatasetsDraw:function(e){var t,n,a,r,o,i,l,s=e._getSortedVisibleDatasetMetas(),u=e.ctx;for(n=s.length-1;n>=0;--n)(t=s[n].$filler)&&t.visible&&(a=t.el,r=a._view,o=a._children||[],i=t.mapper,l=r.backgroundColor||ia.global.defaultColor,i&&l&&o.length&&(va.canvas.clipArea(u,e.chartArea),Cn(u,o,i,r,l,a._loop),va.canvas.unclipArea(u)))}},Yo=va.rtl.getRtlAdapter,Ro=va.noop,Ao=va.valueOrDefault;ia._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var n=t.datasetIndex,a=this.chart,r=a.getDatasetMeta(n);r.hidden=null===r.hidden?!a.data.datasets[n].hidden:null,a.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,n=e.options.legend||{},a=n.labels&&n.labels.usePointStyle;return e._getSortedDatasetMetas().map(function(n,r){var o=n.controller.getStyle(a?0:void 0);return{text:t[n.index].label,fillStyle:o.backgroundColor,hidden:!e.isDatasetVisible(r),lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:o.borderWidth,strokeStyle:o.borderColor,pointStyle:o.pointStyle,rotation:o.rotation,datasetIndex:r}},this)}}},legendCallback:function(e){var t,n,a,r,o=document.createElement("ul"),i=e.data.datasets;for(o.setAttribute("class",e.id+"-legend"),t=0,n=i.length;t<n;t++)a=o.appendChild(document.createElement("li")),r=a.appendChild(document.createElement("span")),r.style.backgroundColor=i[t].backgroundColor,i[t].label&&a.appendChild(document.createTextNode(i[t].label));return o.outerHTML}});var jo=xa.extend({initialize:function(e){var t=this;va.extend(t,e),t.legendHitBoxes=[],t._hoveredItem=null,t.doughnutMode=!1},beforeUpdate:Ro,update:function(e,t,n){var a=this;return a.beforeUpdate(),a.maxWidth=e,a.maxHeight=t,a.margins=n,a.beforeSetDimensions(),a.setDimensions(),a.afterSetDimensions(),a.beforeBuildLabels(),a.buildLabels(),a.afterBuildLabels(),a.beforeFit(),a.fit(),a.afterFit(),a.afterUpdate(),a.minSize},afterUpdate:Ro,beforeSetDimensions:Ro,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:Ro,beforeBuildLabels:Ro,buildLabels:function(){var e=this,t=e.options.labels||{},n=va.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(n=n.filter(function(n){return t.filter(n,e.chart.data)})),e.options.reverse&&n.reverse(),e.legendItems=n},afterBuildLabels:Ro,beforeFit:Ro,fit:function(){var e=this,t=e.options,n=t.labels,a=t.display,r=e.ctx,o=va.options._parseFont(n),i=o.size,l=e.legendHitBoxes=[],s=e.minSize,u=e.isHorizontal();if(u?(s.width=e.maxWidth,s.height=a?10:0):(s.width=a?10:0,s.height=e.maxHeight),!a)return void(e.width=s.width=e.height=s.height=0);if(r.font=o.string,u){var c=e.lineWidths=[0],d=0;r.textAlign="left",r.textBaseline="middle",va.each(e.legendItems,function(e,t){var a=On(n,i),o=a+i/2+r.measureText(e.text).width;(0===t||c[c.length-1]+o+2*n.padding>s.width)&&(d+=i+n.padding,c[c.length-(t>0?0:1)]=0),l[t]={left:0,top:0,width:o,height:i},c[c.length-1]+=o+n.padding}),s.height+=d}else{var f=n.padding,p=e.columnWidths=[],m=e.columnHeights=[],h=n.padding,g=0,v=0;va.each(e.legendItems,function(e,t){var a=On(n,i),o=a+i/2+r.measureText(e.text).width;t>0&&v+i+2*f>s.height&&(h+=g+n.padding,p.push(g),m.push(v),g=0,v=0),g=Math.max(g,o),v+=i+f,l[t]={left:0,top:0,width:o,height:i}}),h+=g,p.push(g),m.push(v),s.width+=h}e.width=s.width,e.height=s.height},afterFit:Ro,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,n=t.labels,a=ia.global,r=a.defaultColor,o=a.elements.line,i=e.height,l=e.columnHeights,s=e.width,u=e.lineWidths;if(t.display){var c,d=Yo(t.rtl,e.left,e.minSize.width),f=e.ctx,p=Ao(n.fontColor,a.defaultFontColor),m=va.options._parseFont(n),h=m.size;f.textAlign=d.textAlign("left"),f.textBaseline="middle",f.lineWidth=.5,f.strokeStyle=p,f.fillStyle=p,f.font=m.string;var g=On(n,h),v=e.legendHitBoxes,b=function(e,t,a){if(!(isNaN(g)||g<=0)){f.save();var i=Ao(a.lineWidth,o.borderWidth);if(f.fillStyle=Ao(a.fillStyle,r),f.lineCap=Ao(a.lineCap,o.borderCapStyle),f.lineDashOffset=Ao(a.lineDashOffset,o.borderDashOffset),f.lineJoin=Ao(a.lineJoin,o.borderJoinStyle),f.lineWidth=i,f.strokeStyle=Ao(a.strokeStyle,r),f.setLineDash&&f.setLineDash(Ao(a.lineDash,o.borderDash)),n&&n.usePointStyle){var l=g*Math.SQRT2/2,s=d.xPlus(e,g/2),u=t+h/2;va.canvas.drawPoint(f,a.pointStyle,l,s,u,a.rotation)}else f.fillRect(d.leftForLtr(e,g),t,g,h),0!==i&&f.strokeRect(d.leftForLtr(e,g),t,g,h);f.restore()}},y=function(e,t,n,a){var r=h/2,o=d.xPlus(e,g+r),i=t+r;f.fillText(n.text,o,i),n.hidden&&(f.beginPath(),f.lineWidth=2,f.moveTo(o,i),f.lineTo(d.xPlus(o,a),i),f.stroke())},E=function(e,a){switch(t.align){case"start":return n.padding;case"end":return e-a;default:return(e-a+n.padding)/2}},w=e.isHorizontal();c=w?{x:e.left+E(s,u[0]),y:e.top+n.padding,line:0}:{x:e.left+n.padding,y:e.top+E(i,l[0]),line:0},va.rtl.overrideTextDirection(e.ctx,t.textDirection);var _=h+n.padding;va.each(e.legendItems,function(t,a){var r=f.measureText(t.text).width,o=g+h/2+r,p=c.x,m=c.y;d.setWidth(e.minSize.width),w?a>0&&p+o+n.padding>e.left+e.minSize.width&&(m=c.y+=_,c.line++,p=c.x=e.left+E(s,u[c.line])):a>0&&m+_>e.top+e.minSize.height&&(p=c.x=p+e.columnWidths[c.line]+n.padding,c.line++,m=c.y=e.top+E(i,l[c.line]));var S=d.x(p);b(S,m,t),v[a].left=d.leftForLtr(S,v[a].width),v[a].top=m,y(S,m,t,r),w?c.x+=o+n.padding:c.y+=_}),va.rtl.restoreTextDirection(e.ctx,t.textDirection)}},_getLegendItemAt:function(e,t){var n,a,r,o=this;if(e>=o.left&&e<=o.right&&t>=o.top&&t<=o.bottom)for(r=o.legendHitBoxes,n=0;n<r.length;++n)if(a=r[n],e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height)return o.legendItems[n];return null},handleEvent:function(e){var t,n=this,a=n.options,r="mouseup"===e.type?"click":e.type;if("mousemove"===r){if(!a.onHover&&!a.onLeave)return}else{if("click"!==r)return;if(!a.onClick)return}t=n._getLegendItemAt(e.x,e.y),"click"===r?t&&a.onClick&&a.onClick.call(n,e.native,t):(a.onLeave&&t!==n._hoveredItem&&(n._hoveredItem&&a.onLeave.call(n,e.native,n._hoveredItem),n._hoveredItem=t),a.onHover&&t&&a.onHover.call(n,e.native,t))}}),Zo={id:"legend",_element:jo,beforeInit:function(e){var t=e.options.legend;t&&Dn(e,t)},beforeUpdate:function(e){var t=e.options.legend,n=e.legend;t?(va.mergeIf(t,ia.global.legend),n?(br.configure(e,n,t),n.options=t):Dn(e,t)):n&&(br.removeBox(e,n),delete e.legend)},afterEvent:function(e,t){var n=e.legend;n&&n.handleEvent(t)}},Fo=va.noop;ia._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Bo=xa.extend({initialize:function(e){var t=this;va.extend(t,e),t.legendHitBoxes=[]},beforeUpdate:Fo,update:function(e,t,n){var a=this;return a.beforeUpdate(),a.maxWidth=e,a.maxHeight=t,a.margins=n,a.beforeSetDimensions(),a.setDimensions(),a.afterSetDimensions(),a.beforeBuildLabels(),a.buildLabels(),a.afterBuildLabels(),a.beforeFit(),a.fit(),a.afterFit(),a.afterUpdate(),a.minSize},afterUpdate:Fo,beforeSetDimensions:Fo,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:Fo,beforeBuildLabels:Fo,buildLabels:Fo,afterBuildLabels:Fo,beforeFit:Fo,fit:function(){var e,t,n=this,a=n.options,r=n.minSize={},o=n.isHorizontal();if(!a.display)return void(n.width=r.width=n.height=r.height=0);e=va.isArray(a.text)?a.text.length:1,t=e*va.options._parseFont(a).lineHeight+2*a.padding,n.width=r.width=o?n.maxWidth:t,n.height=r.height=o?t:n.maxHeight},afterFit:Fo,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,n=e.options;if(n.display){var a,r,o,i=va.options._parseFont(n),l=i.lineHeight,s=l/2+n.padding,u=0,c=e.top,d=e.left,f=e.bottom,p=e.right;t.fillStyle=va.valueOrDefault(n.fontColor,ia.global.defaultFontColor),t.font=i.string,e.isHorizontal()?(r=d+(p-d)/2,o=c+s,a=p-d):(r="left"===n.position?d+s:p-s,o=c+(f-c)/2,a=f-c,u=Math.PI*("left"===n.position?-.5:.5)),t.save(),t.translate(r,o),t.rotate(u),t.textAlign="center",t.textBaseline="middle";var m=n.text;if(va.isArray(m))for(var h=0,g=0;g<m.length;++g)t.fillText(m[g],0,h,a),h+=l;else t.fillText(m,0,0,a);t.restore()}}}),Xo={id:"title",_element:Bo,beforeInit:function(e){var t=e.options.title;t&&Mn(e,t)},beforeUpdate:function(e){var t=e.options.title,n=e.titleBlock;t?(va.mergeIf(t,ia.global.title),n?(br.configure(e,n,t),n.options=t):Mn(e,t)):n&&(br.removeBox(e,n),delete e.titleBlock)}},Ho={},Jo=Io,Uo=Zo,Qo=Xo;Ho.filler=Jo,Ho.legend=Uo,Ho.title=Qo,Hr.helpers=va,function(){function e(e,t,n){var a;return"string"===typeof e?(a=parseInt(e,10),-1!==e.indexOf("%")&&(a=a/100*t.parentNode[n])):a=e,a}function t(e){return void 0!==e&&null!==e&&"none"!==e}function n(n,a,r){var o=document.defaultView,i=va._getParentNode(n),l=o.getComputedStyle(n)[a],s=o.getComputedStyle(i)[a],u=t(l),c=t(s),d=Number.POSITIVE_INFINITY;return u||c?Math.min(u?e(l,n,r):d,c?e(s,i,r):d):"none"}va.where=function(e,t){if(va.isArray(e)&&Array.prototype.filter)return e.filter(t);var n=[];return va.each(e,function(e){t(e)&&n.push(e)}),n},va.findIndex=Array.prototype.findIndex?function(e,t,n){return e.findIndex(t,n)}:function(e,t,n){n=void 0===n?e:n;for(var a=0,r=e.length;a<r;++a)if(t.call(n,e[a],a,e))return a;return-1},va.findNextWhere=function(e,t,n){va.isNullOrUndef(n)&&(n=-1);for(var a=n+1;a<e.length;a++){var r=e[a];if(t(r))return r}},va.findPreviousWhere=function(e,t,n){va.isNullOrUndef(n)&&(n=e.length);for(var a=n-1;a>=0;a--){var r=e[a];if(t(r))return r}},va.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},va.almostEquals=function(e,t,n){return Math.abs(e-t)<n},va.almostWhole=function(e,t){var n=Math.round(e);return n-t<=e&&n+t>=e},va.max=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.max(e,t)},Number.NEGATIVE_INFINITY)},va.min=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.min(e,t)},Number.POSITIVE_INFINITY)},va.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return e=+e,0===e||isNaN(e)?e:e>0?1:-1},va.toRadians=function(e){return e*(Math.PI/180)},va.toDegrees=function(e){return e*(180/Math.PI)},va._decimalPlaces=function(e){if(va.isFinite(e)){for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}},va.getAngleFromPoint=function(e,t){var n=t.x-e.x,a=t.y-e.y,r=Math.sqrt(n*n+a*a),o=Math.atan2(a,n);return o<-.5*Math.PI&&(o+=2*Math.PI),{angle:o,distance:r}},va.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},va.aliasPixel=function(e){return e%2===0?0:.5},va._alignPixel=function(e,t,n){var a=e.currentDevicePixelRatio,r=n/2;return Math.round((t-r)*a)/a+r},va.splineCurve=function(e,t,n,a){var r=e.skip?t:e,o=t,i=n.skip?t:n,l=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)),s=Math.sqrt(Math.pow(i.x-o.x,2)+Math.pow(i.y-o.y,2)),u=l/(l+s),c=s/(l+s);u=isNaN(u)?0:u,c=isNaN(c)?0:c;var d=a*u,f=a*c;return{previous:{x:o.x-d*(i.x-r.x),y:o.y-d*(i.y-r.y)},next:{x:o.x+f*(i.x-r.x),y:o.y+f*(i.y-r.y)}}},va.EPSILON=Number.EPSILON||1e-14,va.splineCurveMonotone=function(e){var t,n,a,r,o=(e||[]).map(function(e){return{model:e._model,deltaK:0,mK:0}}),i=o.length;for(t=0;t<i;++t)if(a=o[t],!a.model.skip){if(n=t>0?o[t-1]:null,(r=t<i-1?o[t+1]:null)&&!r.model.skip){var l=r.model.x-a.model.x;a.deltaK=0!==l?(r.model.y-a.model.y)/l:0}!n||n.model.skip?a.mK=a.deltaK:!r||r.model.skip?a.mK=n.deltaK:this.sign(n.deltaK)!==this.sign(a.deltaK)?a.mK=0:a.mK=(n.deltaK+a.deltaK)/2}var s,u,c,d;for(t=0;t<i-1;++t)a=o[t],r=o[t+1],a.model.skip||r.model.skip||(va.almostEquals(a.deltaK,0,this.EPSILON)?a.mK=r.mK=0:(s=a.mK/a.deltaK,u=r.mK/a.deltaK,(d=Math.pow(s,2)+Math.pow(u,2))<=9||(c=3/Math.sqrt(d),a.mK=s*c*a.deltaK,r.mK=u*c*a.deltaK)));var f;for(t=0;t<i;++t)a=o[t],a.model.skip||(n=t>0?o[t-1]:null,r=t<i-1?o[t+1]:null,n&&!n.model.skip&&(f=(a.model.x-n.model.x)/3,a.model.controlPointPreviousX=a.model.x-f,a.model.controlPointPreviousY=a.model.y-f*a.mK),r&&!r.model.skip&&(f=(r.model.x-a.model.x)/3,a.model.controlPointNextX=a.model.x+f,a.model.controlPointNextY=a.model.y+f*a.mK))},va.nextItem=function(e,t,n){return n?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},va.previousItem=function(e,t,n){return n?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},va.niceNum=function(e,t){var n=Math.floor(va.log10(e)),a=e/Math.pow(10,n);return(t?a<1.5?1:a<3?2:a<7?5:10:a<=1?1:a<=2?2:a<=5?5:10)*Math.pow(10,n)},va.requestAnimFrame=function(){return"undefined"===typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),va.getRelativePosition=function(e,t){var n,a,r=e.originalEvent||e,o=e.target||e.srcElement,i=o.getBoundingClientRect(),l=r.touches;l&&l.length>0?(n=l[0].clientX,a=l[0].clientY):(n=r.clientX,a=r.clientY);var s=parseFloat(va.getStyle(o,"padding-left")),u=parseFloat(va.getStyle(o,"padding-top")),c=parseFloat(va.getStyle(o,"padding-right")),d=parseFloat(va.getStyle(o,"padding-bottom")),f=i.right-i.left-s-c,p=i.bottom-i.top-u-d;return n=Math.round((n-i.left-s)/f*o.width/t.currentDevicePixelRatio),a=Math.round((a-i.top-u)/p*o.height/t.currentDevicePixelRatio),{x:n,y:a}},va.getConstraintWidth=function(e){return n(e,"max-width","clientWidth")},va.getConstraintHeight=function(e){return n(e,"max-height","clientHeight")},va._calculatePadding=function(e,t,n){return t=va.getStyle(e,t),t.indexOf("%")>-1?n*parseInt(t,10)/100:parseInt(t,10)},va._getParentNode=function(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t},va.getMaximumWidth=function(e){var t=va._getParentNode(e);if(!t)return e.clientWidth;var n=t.clientWidth,a=va._calculatePadding(t,"padding-left",n),r=va._calculatePadding(t,"padding-right",n),o=n-a-r,i=va.getConstraintWidth(e);return isNaN(i)?o:Math.min(o,i)},va.getMaximumHeight=function(e){var t=va._getParentNode(e);if(!t)return e.clientHeight;var n=t.clientHeight,a=va._calculatePadding(t,"padding-top",n),r=va._calculatePadding(t,"padding-bottom",n),o=n-a-r,i=va.getConstraintHeight(e);return isNaN(i)?o:Math.min(o,i)},va.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},va.retinaScale=function(e,t){var n=e.currentDevicePixelRatio=t||"undefined"!==typeof window&&window.devicePixelRatio||1;if(1!==n){var a=e.canvas,r=e.height,o=e.width;a.height=r*n,a.width=o*n,e.ctx.scale(n,n),a.style.height||a.style.width||(a.style.height=r+"px",a.style.width=o+"px")}},va.fontString=function(e,t,n){return t+" "+e+"px "+n},va.longestText=function(e,t,n,a){a=a||{};var r=a.data=a.data||{},o=a.garbageCollect=a.garbageCollect||[];a.font!==t&&(r=a.data={},o=a.garbageCollect=[],a.font=t),e.font=t;var i,l,s,u,c,d=0,f=n.length;for(i=0;i<f;i++)if(void 0!==(u=n[i])&&null!==u&&!0!==va.isArray(u))d=va.measureText(e,r,o,d,u);else if(va.isArray(u))for(l=0,s=u.length;l<s;l++)void 0===(c=u[l])||null===c||va.isArray(c)||(d=va.measureText(e,r,o,d,c));var p=o.length/2;if(p>n.length){for(i=0;i<p;i++)delete r[o[i]];o.splice(0,p)}return d},va.measureText=function(e,t,n,a,r){var o=t[r];return o||(o=t[r]=e.measureText(r).width,n.push(r)),o>a&&(a=o),a},va.numberOfLabelLines=function(e){var t=1;return va.each(e,function(e){va.isArray(e)&&e.length>t&&(t=e.length)}),t},va.color=Qn?function(e){return e instanceof CanvasGradient&&(e=ia.global.defaultColor),Qn(e)}:function(e){return console.error("Color.js not found!"),e},va.getHoverColor=function(e){return e instanceof CanvasPattern||e instanceof CanvasGradient?e:va.color(e).saturate(.5).darken(.1).rgbString()}}(),Hr._adapters=Ur,Hr.Animation=Ca,Hr.animationService=Oa,Hr.controllers=hr,Hr.DatasetController=Ta,Hr.defaults=ia,Hr.Element=xa,Hr.elements=Xa,Hr.Interaction=gr,Hr.layouts=br,Hr.platform=Lr,Hr.plugins=Nr,Hr.Scale=Vr,Hr.scaleService=Ir,Hr.Ticks=Qr,Hr.Tooltip=Fr,Hr.helpers.each(To,function(e,t){Hr.scaleService.registerScaleType(t,e,e._defaults)});for(var Go in Ho)Ho.hasOwnProperty(Go)&&Hr.plugins.register(Ho[Go]);Hr.platform.initialize();var Wo=Hr;return"undefined"!==typeof window&&(window.Chart=Hr),Hr.Chart=Hr,Hr.Legend=Ho.legend._element,Hr.Title=Ho.title._element,Hr.pluginService=Hr.plugins,Hr.PluginBase=Hr.Element.extend({}),Hr.canvasHelpers=Hr.helpers.canvas,Hr.layoutService=Hr.layouts,Hr.LinearScaleBase=oo,Hr.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(e){Hr[e]=function(t,n){return new Hr(t,Hr.helpers.merge(n||{},{type:e.charAt(0).toLowerCase()+e.slice(1)}))}}),Wo})},2122:function(e,t,n){var a=n(620),r=n(2123),o=r(function(e,t,n){a(e,n,t)});e.exports=o},2123:function(e,t,n){function a(e,t){return function(n,a){var s=l(n)?r:o,u=t?t():{};return s(n,e,i(a,2),u)}}var r=n(2124),o=n(2125),i=n(2131),l=n(168);e.exports=a},2124:function(e,t){function n(e,t,n,a){for(var r=-1,o=null==e?0:e.length;++r<o;){var i=e[r];t(a,i,n(i),e)}return a}e.exports=n},2125:function(e,t,n){function a(e,t,n,a){return r(e,function(e,r,o){t(a,e,n(e),o)}),a}var r=n(2126);e.exports=a},2126:function(e,t,n){var a=n(2127),r=n(2130),o=r(a);e.exports=o},2127:function(e,t,n){function a(e,t){return e&&r(e,t,o)}var r=n(2128),o=n(254);e.exports=a},2128:function(e,t,n){var a=n(2129),r=a();e.exports=r},2129:function(e,t){function n(e){return function(t,n,a){for(var r=-1,o=Object(t),i=a(t),l=i.length;l--;){var s=i[e?l:++r];if(!1===n(o[s],s,o))break}return t}}e.exports=n},2130:function(e,t,n){function a(e,t){return function(n,a){if(null==n)return n;if(!r(n))return e(n,a);for(var o=n.length,i=t?o:-1,l=Object(n);(t?i--:++i<o)&&!1!==a(l[i],i,l););return n}}var r=n(618);e.exports=a},2131:function(e,t,n){function a(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?l(e)?o(e[0],e[1]):r(e):s(e)}var r=n(2132),o=n(2135),i=n(920),l=n(168),s=n(2140);e.exports=a},2132:function(e,t,n){function a(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}var r=n(2133),o=n(2134),i=n(984);e.exports=a},2133:function(e,t,n){function a(e,t,n,a){var s=n.length,u=s,c=!a;if(null==e)return!u;for(e=Object(e);s--;){var d=n[s];if(c&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++s<u;){d=n[s];var f=d[0],p=e[f],m=d[1];if(c&&d[2]){if(void 0===p&&!(f in e))return!1}else{var h=new r;if(a)var g=a(p,m,f,e,t,h);if(!(void 0===g?o(m,p,i|l,a,h):g))return!1}}return!0}var r=n(606),o=n(605),i=1,l=2;e.exports=a},2134:function(e,t,n){function a(e){for(var t=o(e),n=t.length;n--;){var a=t[n],i=e[a];t[n]=[a,i,r(i)]}return t}var r=n(983),o=n(254);e.exports=a},2135:function(e,t,n){function a(e,t){return l(e)&&s(t)?u(c(e),t):function(n){var a=o(n,e);return void 0===a&&a===t?i(n,e):r(t,a,d|f)}}var r=n(605),o=n(2136),i=n(2137),l=n(623),s=n(983),u=n(984),c=n(407),d=1,f=2;e.exports=a},2136:function(e,t,n){function a(e,t,n){var a=null==e?void 0:r(e,t);return void 0===a?n:a}var r=n(625);e.exports=a},2137:function(e,t,n){function a(e,t){return null!=e&&o(e,t,r)}var r=n(2138),o=n(2139);e.exports=a},2138:function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},2139:function(e,t,n){function a(e,t,n){t=r(t,e);for(var a=-1,c=t.length,d=!1;++a<c;){var f=u(t[a]);if(!(d=null!=e&&n(e,f)))break;e=e[f]}return d||++a!=c?d:!!(c=null==e?0:e.length)&&s(c)&&l(f,c)&&(i(e)||o(e))}var r=n(508),o=n(612),i=n(168),l=n(912),s=n(614),u=n(407);e.exports=a},2140:function(e,t,n){function a(e){return i(e)?r(l(e)):o(e)}var r=n(2141),o=n(2142),i=n(623),l=n(407);e.exports=a},2141:function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},2142:function(e,t,n){function a(e){return function(t){return r(t,e)}}var r=n(625);e.exports=a},2143:function(e,t){},2144:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(7),d=a(c),f=n(31),p=a(f),m=n(473),h=a(m),g=n(525),v=a(g),b=n(4),y=n(526),E=a(y),w=n(8),_=a(w),S=n(1),x=n(3),P=n(5),C=a(P),O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getActiviesFiles=function(e,t,a){var r=n.state.filesData;b.seafileAPI.sysAdminStatisticStorages(e,t,a).then(function(e){var t=[],a=[],o=e.data;if(Array.isArray(o)){o.forEach(function(e){t.push((0,d.default)(e.datetime).format("YYYY-MM-DD")),a.push(e.total_storage)});var i={label:(0,S.gettext)("Total Storage"),data:a,borderColor:"#fd913a",backgroundColor:"#fd913a"};r=[i]}n.setState({filesData:r,labels:t,isLoading:!1})}).catch(function(e){var t=x.Utils.getErrorMsg(e);C.default.danger(t)})},n.state={filesData:[],labels:[],isLoading:!0},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state,t=e.labels,n=e.filesData,a=e.isLoading;return u.default.createElement(s.Fragment,null,u.default.createElement(p.default,null),u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(h.default,{currentItem:"storageStatistic"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(v.default,{getActiviesFiles:this.getActiviesFiles}),a&&u.default.createElement(_.default,null),!a&&t.length>0&&u.default.createElement(E.default,{labels:t,filesData:n,suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!1,chartTitle:(0,S.gettext)("Total Storage")}))))}}]),t}(u.default.Component);t.default=O},2145:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(7),d=a(c),f=n(1),p=n(4),m=n(31),h=a(m),g=n(473),v=a(g),b=n(525),y=a(b),E=n(8),w=a(E),_=n(2146),S=a(_),x=n(2147),P=a(x),C=n(526),O=a(C),D=n(3),M=n(5),k=a(M),T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.changeTabActive=function(e){n.setState({tabActive:e})},n.getActiviesFiles=function(e,t,a){p.seafileAPI.sysAdminStatisticTraffic(e,t,a).then(function(e){var t=[],a=[],r=[],o=[],i=[],l=[],s=[],u=[],c=[],p=e.data;if(Array.isArray(p)){p.forEach(function(e){t.push((0,d.default)(e.datetime).format("YYYY-MM-DD")),o.push(e["link-file-upload"]),i.push(e["link-file-download"]),l.push(e["sync-file-upload"]),s.push(e["sync-file-download"]),u.push(e["web-file-upload"]),c.push(e["web-file-download"]),a.push(e["link-file-upload"]+e["sync-file-upload"]+e["web-file-upload"]),r.push(e["link-file-download"]+e["sync-file-download"]+e["web-file-download"])});var m={label:(0,f.gettext)("Upload"),data:o,borderColor:"#fd913a",backgroundColor:"#fd913a"},h={label:(0,f.gettext)("Download"),data:i,borderColor:"#57cd6b",backgroundColor:"#57cd6b"},g={label:(0,f.gettext)("Upload"),data:l,borderColor:"#fd913a",backgroundColor:"#fd913a"},v={label:(0,f.gettext)("Download"),data:s,borderColor:"#57cd6b",backgroundColor:"#57cd6b"},b={label:(0,f.gettext)("Upload"),data:u,borderColor:"#fd913a",backgroundColor:"#fd913a"},y={label:(0,f.gettext)("Download"),data:c,borderColor:"#57cd6b",backgroundColor:"#57cd6b"},E={label:(0,f.gettext)("Upload"),data:a,borderColor:"#fd913a",backgroundColor:"#fd913a"},w={label:(0,f.gettext)("Download"),data:r,borderColor:"#57cd6b",backgroundColor:"#57cd6b"},_=[m,h],S=[g,v],x=[b,y],P=[E,w];n.setState({linkData:_,syncData:S,webData:x,filesData:P,labels:t,isLoading:!1})}}).catch(function(e){var t=D.Utils.getErrorMsg(e);k.default.danger(t)})},n.renderCommonTool=function(){var e=n.state.tabActive;return"system"===e?u.default.createElement(y.default,{getActiviesFiles:n.getActiviesFiles},u.default.createElement("div",{className:"statistic-traffic-tab"},u.default.createElement("div",{className:"statistic-traffic-tab-item "+("system"===e?"active":""),onClick:n.changeTabActive.bind(n,"system")},(0,f.gettext)("System")),u.default.createElement("div",{className:"statistic-traffic-tab-item "+("user"===e?"active":""),onClick:n.changeTabActive.bind(n,"user")},(0,f.gettext)("Users")),u.default.createElement("div",{className:"statistic-traffic-tab-item "+("organizations"===e?"active":""),onClick:n.changeTabActive.bind(n,"organizations")},(0,f.gettext)("Organizations")))):u.default.createElement("div",{className:"statistic-traffic-tab"},u.default.createElement("div",{className:"statistic-traffic-tab-item "+("system"===e?"active":""),onClick:n.changeTabActive.bind(n,"system")},(0,f.gettext)("System")),u.default.createElement("div",{className:"statistic-traffic-tab-item "+("user"===e?"active":""),onClick:n.changeTabActive.bind(n,"user")},(0,f.gettext)("Users")),u.default.createElement("div",{className:"statistic-traffic-tab-item "+("organizations"===e?"active":""),onClick:n.changeTabActive.bind(n,"organizations")},(0,f.gettext)("Organizations")))},n.state={filesData:[],linkData:[],syncData:[],webData:[],labels:[],isLoading:!0,tabActive:"system"},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state,t=e.labels,n=e.filesData,a=e.linkData,r=e.syncData,o=e.webData,i=e.isLoading,l=e.tabActive;return u.default.createElement(s.Fragment,null,u.default.createElement(h.default,null),u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(v.default,{currentItem:"trafficStatistic"}),u.default.createElement("div",{className:"cur-view-content"},this.renderCommonTool(),i&&u.default.createElement(w.default,null),!i&&"system"===l&&u.default.createElement("div",{className:"statistic-traffic-chart-container"},u.default.createElement("div",{className:"mb-4"},t.length>0&&u.default.createElement(O.default,{labels:t,filesData:n,chartTitle:(0,f.gettext)("Total Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})),u.default.createElement("div",{className:"mb-4"},t.length>0&&u.default.createElement(O.default,{labels:t,filesData:o,chartTitle:(0,f.gettext)("Web Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})),u.default.createElement("div",{className:"mb-4"},t.length>0&&u.default.createElement(O.default,{labels:t,filesData:a,chartTitle:(0,f.gettext)("Share Link Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})),u.default.createElement("div",{className:"mb-4"},t.length>0&&u.default.createElement(O.default,{labels:t,filesData:r,chartTitle:(0,f.gettext)("Sync Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0}))),!i&&"user"===l&&u.default.createElement(P.default,null),!i&&"organizations"===l&&u.default.createElement(S.default,null))))}}]),t}(u.default.Component);t.default=T},2146:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(7),f=a(d),p=n(1),m=n(985),h=a(m),g=n(986),v=a(g),b=n(4),y=n(63),E=a(y),w=n(8),_=a(w),S=n(3),x=n(5),P=a(x),C=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPreviousPage=function(){n.onGenerateReports(n.state.month,n.state.currentPage-1)},n.getNextPage=function(){n.onGenerateReports(n.state.month,n.state.currentPage+1)},n.handleChange=function(e){var t=e.target.value;n.setState({month:t})},n.handleKeyPress=function(e){var t=n.state.month;if("Enter"===e.key){if(!/^([012]\d{3})(0[1-9]|1[012])$/.test(t)){var a=(0,p.gettext)("Invalid month, should be yyyymm.");return void n.setState({errorMessage:a})}n.onGenerateReports(t,n.initPage),e.target.blur(),e.preventDefault()}},n.sortBySize=function(e,t){var a=n.state.userTrafficList,r=S.Utils.sortTraffic(a,e,t);n.setState({userTrafficList:r,sortOrder:t})},n.onGenerateReports=function(e,t){var a=n.state.perPage;n.setState({isLoading:!0,errorMessage:""}),b.seafileAPI.sysAdminListOrgTraffic(e,t,a).then(function(e){var t=e.data.org_monthly_traffic_list.slice(0);n.setState({userTrafficList:t,hasNextPage:e.data.has_next_page,isLoading:!1})}).catch(function(e){var t=S.Utils.getErrorMsg(e);P.default.danger(t)})},n.resetPerPage=function(e){n.setState({perPage:e},function(){return n.onGenerateReports(n.initPage,n.initMonth)})},n.state={userTrafficList:[],perPage:25,currentPage:1,hasNextPage:!1,month:(0,f.default)().format("YYYYMM"),isLoading:!1,errorMessage:"",sortOrder:"asc"},n.initPage=1,n.initMonth=(0,f.default)().format("YYYYMM"),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.onGenerateReports(e.initMonth,e.state.currentPage)})}},{key:"render",value:function(){var e=this.state,t=e.userTrafficList,n=e.currentPage,a=e.hasNextPage,r=e.perPage,o=e.isLoading,i=e.errorMessage,l=e.sortOrder;return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"d-flex align-items-center mt-4"},u.default.createElement("span",{className:"statistic-reports-tip"},(0,p.gettext)("Month:")),u.default.createElement(c.Input,{className:"statistic-reports-input",defaultValue:(0,f.default)().format("YYYYMM"),onChange:this.handleChange,onKeyPress:this.handleKeyPress}),i&&u.default.createElement("div",{className:"error"},i)),o&&u.default.createElement(_.default,null),!o&&u.default.createElement(h.default,{type:"org",sortOrder:l,sortBySize:this.sortBySize},t.length>0&&t.map(function(e,t){return u.default.createElement(v.default,{key:t,userTrafficItem:e,type:"org"})})),u.default.createElement(E.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:n,hasNextPage:a,curPerPage:r,resetPerPage:this.resetPerPage}))}}]),t}(u.default.Component);t.default=C},2147:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(985),f=a(d),p=n(986),m=a(p),h=n(4),g=n(63),v=a(g),b=n(7),y=a(b),E=n(8),w=a(E),_=n(1),S=n(3),x=n(5),P=a(x),C=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPreviousPage=function(){n.onGenerateReports(n.state.month,n.state.currentPage-1)},n.getNextPage=function(){n.onGenerateReports(n.state.month,n.state.currentPage+1)},n.handleChange=function(e){var t=e.target.value;n.setState({month:t})},n.sortBySize=function(e,t){var a=n.state.userTrafficList,r=S.Utils.sortTraffic(a,e,t);n.setState({userTrafficList:r,sortOrder:t})},n.handleKeyPress=function(e){var t=n.state.month;if("Enter"===e.key){if(!/^([012]\d{3})(0[1-9]|1[012])$/.test(t)){var a=(0,_.gettext)("Invalid month, should be yyyymm.");return void n.setState({errorMessage:a})}n.onGenerateReports(t,n.initPage),e.target.blur(),e.preventDefault()}},n.onGenerateReports=function(e,t){var a=n.state.perPage;n.setState({isLoading:!0,errorMessage:""}),h.seafileAPI.sysAdminListUserTraffic(e,t,a).then(function(e){var t=e.data.user_monthly_traffic_list.slice(0);n.setState({userTrafficList:t,hasNextPage:e.data.has_next_page,isLoading:!1})}).catch(function(e){var t=S.Utils.getErrorMsg(e);P.default.danger(t)})},n.resetPerPage=function(e){n.setState({perPage:e},function(){return n.onGenerateReports(n.initMonth,n.initPage)})},n.state={userTrafficList:[],hasNextPage:!1,perPage:25,currentPage:1,month:(0,y.default)().format("YYYYMM"),isLoading:!1,errorMessage:"",sortOrder:"asc"},n.initPage=1,n.initMonth=(0,y.default)().format("YYYYMM"),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.onGenerateReports(e.initMonth,e.state.currentPage)})}},{key:"render",value:function(){var e=this.state,t=e.userTrafficList,n=e.currentPage,a=e.hasNextPage,r=e.perPage,o=e.isLoading,i=e.errorMessage,l=e.sortOrder;return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"d-flex align-items-center mt-4"},u.default.createElement("span",{className:"statistic-reports-tip"},(0,_.gettext)("Month:")),u.default.createElement(c.Input,{className:"statistic-reports-input",defaultValue:(0,y.default)().format("YYYYMM"),onChange:this.handleChange,onKeyPress:this.handleKeyPress}),i&&u.default.createElement("div",{className:"error"},i)),o&&u.default.createElement(w.default,null),!o&&u.default.createElement(f.default,{type:"user",sortBySize:this.sortBySize,sortOrder:l},t.length>0&&t.map(function(e,t){return u.default.createElement(m.default,{key:t,userTrafficItem:e,type:"user"})})),u.default.createElement(v.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:n,hasNextPage:a,curPerPage:r,resetPerPage:this.resetPerPage}))}}]),t}(u.default.Component);t.default=C},2148:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(7),d=a(c),f=n(1),p=n(31),m=a(p),h=n(473),g=a(h),v=n(525),b=a(v),y=n(4),E=n(526),w=a(E),_=n(8),S=a(_),x=n(3),P=n(5),C=a(P),O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getActiviesFiles=function(e,t,a){var r=n.state.filesData;y.seafileAPI.sysAdminStatisticActiveUsers(e,t,a).then(function(e){var t=[],a=[],o=e.data;if(Array.isArray(o)){o.forEach(function(e){t.push((0,d.default)(e.datetime).format("YYYY-MM-DD")),a.push(e.count)});var i={label:(0,f.gettext)("Active Users"),data:a,borderColor:"#fd913a",backgroundColor:"#fd913a"};r=[i]}n.setState({filesData:r,labels:t,isLoading:!1})}).catch(function(e){var t=x.Utils.getErrorMsg(e);C.default.danger(t)})},n.state={filesData:[],labels:[],isLoading:!0},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state,t=e.labels,n=e.filesData,a=e.isLoading;return u.default.createElement(s.Fragment,null,u.default.createElement(m.default,null),u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(g.default,{currentItem:"usersStatistic"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(b.default,{getActiviesFiles:this.getActiviesFiles}),a&&u.default.createElement(S.default,null),!a&&t.length>0&&u.default.createElement(w.default,{labels:t,filesData:n,suggestedMaxNumbers:10,isLegendStatus:!1,chartTitle:(0,f.gettext)("Active Users")}))))}}]),t}(u.default.Component);t.default=O},2149:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(31),d=a(c),f=n(7),p=a(f),m=n(473),h=a(m),g=n(6),v=n(1),b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){var t=e.target.value;n.setState({month:t})},n.onGenerateReports=function(e){var t=v.siteRoot+"api/v2.1/admin/statistics/",a=n.state.month;if(!a){var r=(0,v.gettext)("It is required.");return void n.setState({errorMessage:r})}if("month"===e){if(!/^([012]\d{3})(0[1-9]|1[012])$/.test(a)){var o=(0,v.gettext)("Invalid month, should be yyyymm.");return void n.setState({errorMessage:o})}}switch(e){case"month":t+="system-user-traffic/excel/?month="+a;break;case"storage":t+="system-user-storage/excel/?"}n.setState({errorMessage:""}),window.location.href=t},n.state={month:(0,p.default)().format("YYYYMM"),errorMessage:""},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state.errorMessage;return u.default.createElement(s.Fragment,null,u.default.createElement(d.default,null),u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(h.default,{currentItem:"reportsStatistic"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement("div",{className:"statistic-reports"},u.default.createElement("div",{className:"statistic-reports-title"},(0,v.gettext)("Monthly User Traffic")),u.default.createElement("div",{className:"d-flex align-items-center mt-4"},u.default.createElement("span",{className:"statistic-reports-tip"},(0,v.gettext)("Month:")),u.default.createElement(g.Input,{className:"statistic-reports-input",defaultValue:(0,p.default)().format("YYYYMM"),onChange:this.handleChange}),u.default.createElement(g.Button,{className:"statistic-reports-submit operation-item",onClick:this.onGenerateReports.bind(this,"month")},(0,v.gettext)("Create Report"))),e&&u.default.createElement("div",{className:"error"},e)),u.default.createElement("div",{className:"statistic-reports"},u.default.createElement("div",{className:"statistic-reports-title"},(0,v.gettext)("User Storage")),u.default.createElement(g.Button,{className:"mt-4 operation-item",onClick:this.onGenerateReports.bind(this,"storage")},(0,v.gettext)("Create Report"))))))}}]),t}(u.default.Component);t.default=b},2150:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(728),d=a(c),f=n(987),p=a(f),m=n(31),h=a(m),g=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement(h.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(d.default,{currentItem:"desktop"}),u.default.createElement(p.default,{devicesPlatform:"desktop"}))))}}]),t}(s.Component);t.default=g},2151:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(1),p=n(6),m={unlinkDevice:d.default.func.isRequired,toggleDialog:d.default.func.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleInputChange=function(e){n.setState({inputChecked:e.target.checked})},n.unlinkDevice=function(){n.props.toggleDialog(),n.props.unlinkDevice(n.state.inputChecked)},n.state={inputChecked:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state.inputChecked,t=this.props.toggleDialog;return u.default.createElement(p.Modal,{isOpen:!0,toggle:t},u.default.createElement(p.ModalHeader,{toggle:t},(0,f.gettext)("Unlink device")),u.default.createElement(p.ModalBody,null,u.default.createElement("p",null,(0,f.gettext)("Are you sure you want to unlink this device?")),u.default.createElement("div",{className:"d-flex align-items-center"},u.default.createElement("input",{id:"delete-files",className:"mr-1",type:"checkbox",checked:e,onChange:this.handleInputChange}),u.default.createElement("label",{htmlFor:"delete-files",className:"m-0"},(0,f.gettext)("Delete files from this device the next time it comes online.")))),u.default.createElement(p.ModalFooter,null,u.default.createElement(p.Button,{color:"secondary",onClick:t},(0,f.gettext)("Cancel")),u.default.createElement(p.Button,{color:"primary",onClick:this.unlinkDevice},(0,f.gettext)("Unlink"))))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},2152:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(728),d=a(c),f=n(987),p=a(f),m=n(31),h=a(m),g=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement(h.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(d.default,{currentItem:"mobile"}),u.default.createElement(p.default,{devicesPlatform:"mobile"}))))}}]),t}(s.Component);t.default=g},2153:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(4),f=n(1),p=n(5),m=a(p),h=n(3),g=n(33),v=a(g),b=n(7),y=a(b),E=n(8),w=a(E),_=n(16),S=n(728),x=a(S),P=n(31),C=a(P),O=n(67),D=a(O),M=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,a=e.items;if(t)return u.default.createElement(w.default,null);if(n)return u.default.createElement("p",{className:"error text-center"},n);var r=u.default.createElement(v.default,null,u.default.createElement("h2",null,(0,f.gettext)("No sync errors"))),o=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"16%"},(0,f.gettext)("User")),u.default.createElement("th",{width:"20%"},(0,f.gettext)("Device")," / ",(0,f.gettext)("Version")),u.default.createElement("th",{width:"16%"},(0,f.gettext)("IP")),u.default.createElement("th",{width:"16%"},(0,f.gettext)("Library")),u.default.createElement("th",{width:"16%"},(0,f.gettext)("Error")),u.default.createElement("th",{width:"16%"},(0,f.gettext)("Time")))),u.default.createElement("tbody",null,a.map(function(e,t){return u.default.createElement(k,{key:t,item:e})}))));return a.length?o:r}}]),t}(s.Component),k=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.state={isOpIconShown:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item;return u.default.createElement("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut},u.default.createElement("td",null,u.default.createElement(D.default,{email:e.email,name:e.name})),u.default.createElement("td",null,e.device_name," / ",e.client_version),u.default.createElement("td",null,e.device_ip),u.default.createElement("td",null,u.default.createElement(_.Link,{to:f.siteRoot+"sysadmin/#libs/"+e.repo_id},e.repo_name)),u.default.createElement("td",null,e.error_msg),u.default.createElement("td",null,u.default.createElement("span",{className:"item-meta-info",title:(0,y.default)(e.last_accessed).format("llll")},(0,y.default)(e.error_time).fromNow())))}}]),t}(s.Component),T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clean=function(){d.seafileAPI.sysAdminClearDeviceErrors().then(function(e){n.setState({devicesErrors:[],isCleanBtnShown:!1});var t=(0,f.gettext)("Successfully cleaned all errors.");m.default.success(t)}).catch(function(e){var t=h.Utils.getErrorMsg(e);m.default.danger(t)})},n.state={loading:!0,errorMsg:"",devicesErrors:[],isCleanBtnShown:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;d.seafileAPI.sysAdminListDeviceErrors().then(function(t){e.setState({loading:!1,devicesErrors:t.data,isCleanBtnShown:t.data.length>0})}).catch(function(t){e.setState({loading:!1,errorMsg:h.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){return u.default.createElement(s.Fragment,null,this.state.isCleanBtnShown?u.default.createElement(C.default,null,u.default.createElement(c.Button,{className:"operation-item",onClick:this.clean},(0,f.gettext)("Clean"))):u.default.createElement(C.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(x.default,{currentItem:"errors"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(M,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.devicesErrors})))))}}]),t}(s.Component);t.default=T},2154:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(29),d=a(c),f=n(1),p=n(3),m=n(4),h=n(5),g=a(h),v=n(7),b=a(v),y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.listAbuseReports=function(){m.seafileAPI.sysAdminListAbuseReports().then(function(e){n.setState({abuseReportList:e.data.abuse_report_list})}).catch(function(e){n.handleError(e)})},n.updateAbuseReport=function(e,t){m.seafileAPI.sysAdminUpdateAbuseReport(e,t).then(function(e){var a=n.state.abuseReportList.map(function(n,a){return n.id===t&&(n.handled=e.data.handled),n});n.setState({abuseReportList:a})}).catch(function(e){n.handleError(e)})},n.handleError=function(e){e.response?g.default.danger(e.response.data.error_msg||e.response.data.detail||(0,f.gettext)("Error"),{duration:3}):g.default.danger((0,f.gettext)("Please check the network."),{duration:3})},n.state={abuseReportList:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.listAbuseReports()}},{key:"render",value:function(){var e=this,t=p.Utils.isDesktop(),n=this.state.abuseReportList.map(function(t,n){var a=(!t.handled).toString(),r=t.id,o=f.siteRoot+"lib/"+t.repo_id+"/file"+t.file_path;return u.default.createElement("tr",{key:n},u.default.createElement("td",null,t.repo_name),u.default.createElement("td",null,u.default.createElement("a",{href:o,target:"_blank"},t.file_path)),u.default.createElement("td",null,t.reporter),u.default.createElement("td",null,t.abuse_type),u.default.createElement("td",null,t.description),u.default.createElement("td",null,(0,b.default)(t.time).format("YYYY-MM-DD")),u.default.createElement("td",null,u.default.createElement("p",{onClick:e.updateAbuseReport.bind(e,a,r),className:"op-target ellipsis ellipsis-op-target cursor-pointer"},(0,f.gettext)(t.handled.toString()))))});return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"main-panel-north"},u.default.createElement("div",{className:"cur-view-toolbar"},u.default.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"})),u.default.createElement("div",{className:"common-toolbar"},u.default.createElement(d.default,{isAdminPanel:!0}))),u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,f.gettext)("Abuse Reports"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement("table",{className:"table-hover"+(t?"":" table-thead-hidden")},u.default.createElement("thead",null,t?u.default.createElement("tr",null,u.default.createElement("th",{width:"20%"},(0,f.gettext)("Library")),u.default.createElement("th",{width:"20%"},(0,f.gettext)("File")),u.default.createElement("th",{width:"10%"},(0,f.gettext)("Reporter")),u.default.createElement("th",{width:"15%"},(0,f.gettext)("Abuse Type")),u.default.createElement("th",{width:"20%"},(0,f.gettext)("Description")),u.default.createElement("th",{width:"10%"},(0,f.gettext)("Time")),u.default.createElement("th",{width:"5%"},(0,f.gettext)("Handled"))):u.default.createElement("tr",null,u.default.createElement("th",{width:"92%"}),u.default.createElement("th",{width:"8%"}))),u.default.createElement("tbody",null,n))))))}}]),t}(s.Component);t.default=y},2155:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m={toggle:d.default.func.isRequired,importUserInBatch:d.default.func.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggle=function(){n.props.toggle()},n.openFileInput=function(){n.fileInputRef.current.click()},n.uploadFile=function(e){if(n.fileInputRef.current.files.length){var t=n.fileInputRef.current.files[0].name;if("xlsx"!=t.substr(t.lastIndexOf(".")+1))return void n.setState({errorMsg:(0,p.gettext)("Please choose a .xlsx file.")});var a=n.fileInputRef.current.files[0];n.props.importUserInBatch(a),n.toggle()}},n.fileInputRef=u.default.createRef(),n.state={errorMsg:""},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state.errorMsg;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("Import users from a .xlsx file")),u.default.createElement(f.ModalBody,null,u.default.createElement("p",null,u.default.createElement("a",{className:"text-secondary small",href:p.siteRoot+"useradmin/batchadduser/example/"},(0,p.gettext)("Download an example file"))),u.default.createElement("button",{className:"btn btn-outline-primary",onClick:this.openFileInput},(0,p.gettext)("Upload file")),u.default.createElement("input",{className:"d-none",type:"file",onChange:this.uploadFile,ref:this.fileInputRef}),e&&u.default.createElement(f.Alert,{color:"danger"},e)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel"))))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},2156:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(40),m=a(p),h=n(1),g={toggle:d.default.func.isRequired,addAdminInBatch:d.default.func.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggle=function(){n.props.toggle()},n.handleSelectChange=function(e){n.setState({options:e,isSubmitBtnActive:e.length>0})},n.handleSubmit=function(){n.props.addAdminInBatch(n.state.options.map(function(e){return e.email})),n.toggle()},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.state={options:null,isSubmitBtnActive:!1},n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,h.gettext)("Add Admin")),u.default.createElement(f.ModalBody,null,u.default.createElement(m.default,{isMulti:!0,className:"reviewer-select",placeholder:(0,h.gettext)("Search users..."),onSelectChange:this.handleSelectChange})),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,h.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive},(0,h.gettext)("Submit"))))}}]),t}(u.default.Component);v.propTypes=g,t.default=v},2157:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){a(this,e),this.email=t.email,this.name=t.name,this.contact_email=t.contact_email,this.login_id=t.login_id,this.last_login=t.last_login,this.create_time=t.create_time,this.is_active=t.is_active,this.is_staff=t.is_staff,this.reference_id=t.reference_id,this.department=t.department,this.quota_total=t.quota_total,this.quota_usage=t.quota_usage,this.role=t.role,this.institution=t.institution,t.org_id&&(this.org_id=t.org_id),t.org_name&&(this.org_name=t.org_name),this.isSelected=!1};t.default=r},2158:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){a(this,e),this.email=t.email,this.name=t.name,this.contact_email=t.contact_email,this.login_id=t.login_id,this.last_login=t.last_login,this.create_time=t.create_time,this.is_active=t.is_active,this.is_staff=t.is_staff,this.quota_total=t.quota_total,this.quota_usage=t.quota_usage,this.admin_role=t.admin_role,this.isSelected=!1};t.default=r},2159:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(729),d=a(c),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(d.default,{isAdmin:!0})}}]),t}(s.Component);t.default=f},2160:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(729),d=a(c),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(d.default,{isLDAPImported:!0})}}]),t}(s.Component);t.default=f},2161:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(7),d=a(c),f=n(3),p=n(4),m=n(1),h=n(33),g=a(h),v=n(8),b=a(v),y=n(63),E=a(y),w=n(989),_=a(w),S=n(31),x=a(S),P=n(67),C=a(P),O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPreviousPage=function(){n.props.getListByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getListByPage(n.props.currentPage+1)},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,a=e.items,r=e.curPerPage,o=e.hasNextPage,i=e.currentPage;if(t)return u.default.createElement(b.default,null);if(n)return u.default.createElement("p",{className:"error text-center mt-4"},n);var l=u.default.createElement(g.default,null,u.default.createElement("h2",null,(0,m.gettext)("No users"))),c=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"40%"},(0,m.gettext)("Email")),u.default.createElement("th",{width:"30%"},(0,m.gettext)("Space Used")," / ",(0,m.gettext)("Quota")),u.default.createElement("th",{width:"30%"},(0,m.gettext)("Last Login")))),u.default.createElement("tbody",null,a.map(function(e,t){return u.default.createElement(D,{key:t,item:e})}))),u.default.createElement(E.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:o,curPerPage:r,resetPerPage:this.props.resetPerPage}));return a.length?c:l}}]),t}(s.Component),D=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item;f.Utils.HTMLescape(e.email);return u.default.createElement(s.Fragment,null,u.default.createElement("tr",null,u.default.createElement("td",null,u.default.createElement(C.default,{email:e.email,name:e.email})),u.default.createElement("td",null,f.Utils.bytesToSize(e.quota_usage)+" / "+(e.quota_total>0?f.Utils.bytesToSize(e.quota_total):"--")),u.default.createElement("td",null,e.last_login?(0,d.default)(e.last_login).fromNow():"--")))}}]),t}(s.Component),M=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getUsersListByPage=function(e){var t=n.state.perPage;p.seafileAPI.sysAdminListLDAPUsers(e,t).then(function(t){n.setState({loading:!1,userList:t.data.ldap_user_list,hasNextPage:t.data.has_next_page,currentPage:e})}).catch(function(e){n.setState({loading:!1,errorMsg:f.Utils.getErrorMsg(e,!0)})})},n.resetPerPage=function(e){n.setState({perPage:e},function(){n.getUsersListByPage(1)})},n.state={loading:!0,errorMsg:"",userList:{},hasNextPage:!1,currentPage:1,perPage:25},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.getUsersListByPage(e.state.currentPage)})}},{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement(x.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(_.default,{currentItem:"ldap"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(O,{resetPerPage:this.resetPerPage,loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,getListByPage:this.getUsersListByPage})))))}}]),t}(s.Component);t.default=M},2162:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(3),f=n(4),p=n(1),m=n(5),h=a(m),g=n(360),v=a(g),b=n(107),y=a(b),E=n(31),w=a(E),_=n(990),S=a(_),x=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleBatchSetQuotaDialog=function(){n.setState({isBatchSetQuotaDialogOpen:!n.state.isBatchSetQuotaDialogOpen})},n.toggleBatchDeleteUserDialog=function(){n.setState({isBatchDeleteUserDialogOpen:!n.state.isBatchDeleteUserDialogOpen})},n.onUserSelected=function(e){var t=!1,a=[],r=n.state.userList.map(function(n){return n.email===e.email&&(n.isSelected=!n.isSelected),1==n.isSelected?(t=!0,a.push(n)):a=a.filter(function(e){return e.email!=n.email}),n});n.setState({userList:r,hasUserSelected:t,selectedUserList:a})},n.toggleSelectAllUsers=function(){if(n.state.isAllUsersSelected){var e=n.state.userList.map(function(e){return e.isSelected=!1,e});n.setState({userList:e,hasUserSelected:!1,isAllUsersSelected:!1,selectedUserList:[]})}else{var t=n.state.userList.map(function(e){return e.isSelected=!0,e});n.setState({userList:t,hasUserSelected:!0,isAllUsersSelected:!0,selectedUserList:t})}},n.getItems=function(){f.seafileAPI.sysAdminSearchUsers(n.state.query.trim()).then(function(e){n.setState({userList:e.data.user_list,loading:!1})}).catch(function(e){n.setState({loading:!1,errorMsg:d.Utils.getErrorMsg(e,!0)})})},n.deleteUser=function(e){f.seafileAPI.sysAdminDeleteUser(e).then(function(t){var a=n.state.userList.filter(function(t){return t.email!=e});n.setState({userList:a}),h.default.success((0,p.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.setUserQuotaInBatch=function(e){var t=n.state.selectedUserList.map(function(e){return e.email});f.seafileAPI.sysAdminSetUserQuotaInBatch(t,e).then(function(e){var t=n.state.userList.map(function(t){return e.data.success.map(function(e){t.email==e.email&&(t.quota_total=e.quota_total)}),t});n.setState({userList:t})}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.deleteUserInBatch=function(){var e=n.state.selectedUserList.map(function(e){return e.email});f.seafileAPI.sysAdminDeleteUserInBatch(e).then(function(t){if(t.data.success.length){var a=n.state.userList,r=a.filter(function(e){return!t.data.success.some(function(t){return t.email==e.email})});n.setState({userList:r,hasUserSelected:e.length!=t.data.success.length});var o=t.data.success.length,i=1==o?(0,p.gettext)("Successfully deleted 1 user."):(0,p.gettext)("Successfully deleted {user_number_placeholder} users.").replace("{user_number_placeholder}",o);h.default.success(i)}t.data.failed.map(function(e){var t=e.email+": "+e.error_msg;h.default.danger(t)})}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.updateUser=function(e,t,a){f.seafileAPI.sysAdminUpdateUser(e,t,a).then(function(r){var o=n.state.userList.map(function(n){return n.email==e&&(n[t]=r.data[t]),n});n.setState({userList:o});var i="is_active"==t&&a?r.data.update_status_tip:(0,p.gettext)("Edit succeeded");h.default.success(i)}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.updateAdminRole=function(e,t){f.seafileAPI.sysAdminUpdateAdminRole(e,t).then(function(t){var a=n.state.userList.map(function(n){return n.email==e&&(n.admin_role=t.data.role),n});n.setState({userList:a}),h.default.success((0,p.gettext)("Edit succeeded"))}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.revokeAdmin=function(e,t){f.seafileAPI.sysAdminUpdateUser(e,"is_staff",!1).then(function(a){var r=n.state.userList.filter(function(t){return t.email!=e});n.setState({userList:r}),h.default.success((0,p.gettext)("Successfully revoked the admin permission of {placeholder}.").replace("{placeholder}",t))}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.handleInputChange=function(e){n.setState({query:e.target.value},n.checkSubmitBtnActive)},n.checkSubmitBtnActive=function(){var e=n.state.query;n.setState({isSubmitBtnActive:e.trim()})},n.state={query:"",isSubmitBtnActive:!1,loading:!0,errorMsg:"",userList:[],hasUserSelected:!1,selectedUserList:[],isAllUsersSelected:!1,isBatchSetQuotaDialogOpen:!1,isBatchDeleteUserDialogOpen:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=new URL(document.location).searchParams;this.setState({query:e.get("query")||""},this.getItems)}},{key:"render",value:function(){var e=this.state,t=e.query,n=e.isSubmitBtnActive,a=this.state,r=a.hasUserSelected,o=a.isBatchDeleteUserDialogOpen,i=a.isBatchSetQuotaDialogOpen;return u.default.createElement(s.Fragment,null,r?u.default.createElement(w.default,null,u.default.createElement(s.Fragment,null,u.default.createElement(c.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleBatchSetQuotaDialog},(0,p.gettext)("Set Quota")),u.default.createElement(c.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleBatchDeleteUserDialog},(0,p.gettext)("Delete Users")))):u.default.createElement(w.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,p.gettext)("Users"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement("div",{className:"mt-4 mb-6"},u.default.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},(0,p.gettext)("Search Users")),u.default.createElement(c.Form,null,u.default.createElement(c.FormGroup,{row:!0},u.default.createElement(c.Col,{sm:5},u.default.createElement(c.Input,{type:"text",name:"query",value:t,placeholder:(0,p.gettext)("Search users"),onChange:this.handleInputChange}))),u.default.createElement(c.FormGroup,{row:!0},u.default.createElement(c.Col,{sm:{size:5}},u.default.createElement("button",{className:"btn btn-outline-primary",disabled:!n,onClick:this.getItems},(0,p.gettext)("Submit")))))),u.default.createElement("div",{className:"mt-4 mb-6"},u.default.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},(0,p.gettext)("Result")),u.default.createElement(S.default,{isLDAPImported:!1,isAdmin:!1,isSearchResult:!0,loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,updateUser:this.updateUser,deleteUser:this.deleteUser,updateAdminRole:this.updateAdminRole,revokeAdmin:this.revokeAdmin,onUserSelected:this.onUserSelected,isAllUsersSelected:this.isAllUsersSelected,toggleSelectAllUsers:this.toggleSelectAllUsers}))))),i&&u.default.createElement(v.default,{toggle:this.toggleBatchSetQuotaDialog,updateQuota:this.setUserQuotaInBatch}),o&&u.default.createElement(y.default,{title:(0,p.gettext)("Delete Users"),message:(0,p.gettext)("Are you sure you want to delete the selected user(s) ?"),executeOperation:this.deleteUserInBatch,confirmBtnText:(0,p.gettext)("Delete"),toggleDialog:this.toggleBatchDeleteUserDialog}))}}]),t}(s.Component);t.default=x},2163:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(3),f=n(4),p=n(1),m=n(5),h=a(m),g=n(8),v=a(g),b=n(360),y=a(b),E=n(2164),w=a(E),_=n(31),S=a(_),x=n(475),P=a(x),C=window.sysadmin.pageOptions.twoFactorAuthEnabled,O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleSetQuotaDialog=function(){n.setState({isSetQuotaDialogOpen:!n.state.isSetQuotaDialogOpen})},n.updateQuota=function(e){n.props.updateUser("quota_total",e)},n.toggleDialog=function(e,t){n.setState({currentKey:e,dialogTitle:t,isUpdateUserDialogOpen:!n.state.isUpdateUserDialogOpen})},n.toggleSetNameDialog=function(){n.toggleDialog("name",(0,p.gettext)("Set Name"))},n.toggleSetUserLoginIDDialog=function(){n.toggleDialog("login_id",(0,p.gettext)("Set Login ID"))},n.toggleSetUserComtactEmailDialog=function(){n.toggleDialog("contact_email",(0,p.gettext)("Set Contact Email"))},n.toggleSetUserReferenceIDDialog=function(){n.toggleDialog("reference_id",(0,p.gettext)("Set Reference ID"))},n.updateValue=function(e){n.props.updateUser(n.state.currentKey,e)},n.toggleUpdateUserDialog=function(){n.toggleDialog("","")},n.showEditIcon=function(e){return u.default.createElement("span",{title:(0,p.gettext)("Edit"),className:"fa fa-pencil-alt attr-action-icon",onClick:e})},n.state={currentKey:"",dialogTitle:"",isSetQuotaDialogOpen:!1,isUpdateUserDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg;e.userInfo;if(t)return u.default.createElement(v.default,null);if(n)return u.default.createElement("p",{className:"error text-center mt-4"},n);var a=this.props.userInfo,r=this.state,o=r.currentKey,i=r.dialogTitle,l=r.isSetQuotaDialogOpen,f=r.isUpdateUserDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement("dl",{className:"m-0"},u.default.createElement("dt",{className:"info-item-heading"},(0,p.gettext)("Avatar")),u.default.createElement("dd",{className:"info-item-content"},u.default.createElement("img",{src:a.avatar_url,alt:a.name,width:"80",className:"rounded"})),u.default.createElement("dt",{className:"info-item-heading"},(0,p.gettext)("Email")),u.default.createElement("dd",{className:"info-item-content"},a.email),a.org_name&&u.default.createElement(s.Fragment,null,u.default.createElement("dt",{className:"info-item-heading"},(0,p.gettext)("Organization")),u.default.createElement("dd",{className:"info-item-content"},a.org_name)),u.default.createElement("dt",{className:"info-item-heading"},(0,p.gettext)("Name")),u.default.createElement("dd",{className:"info-item-content"},a.name||"--",this.showEditIcon(this.toggleSetNameDialog)),u.default.createElement("dt",{className:"info-item-heading"},(0,p.gettext)("Login ID")),u.default.createElement("dd",{className:"info-item-content"},a.login_id||"--",this.showEditIcon(this.toggleSetUserLoginIDDialog)),u.default.createElement("dt",{className:"info-item-heading"},(0,p.gettext)("Contact Email")),u.default.createElement("dd",{className:"info-item-content"},a.contact_email||"--",this.showEditIcon(this.toggleSetUserComtactEmailDialog)),u.default.createElement("dt",{className:"info-item-heading"},(0,p.gettext)("Reference ID")),u.default.createElement("dd",{className:"info-item-content"},a.reference_id||"--",this.showEditIcon(this.toggleSetUserReferenceIDDialog)),u.default.createElement("dt",{className:"info-item-heading"},(0,p.gettext)("Space Used / Quota")),u.default.createElement("dd",{className:"info-item-content"},d.Utils.bytesToSize(a.quota_usage)+" / "+(a.quota_total>0?d.Utils.bytesToSize(a.quota_total):"--"),this.showEditIcon(this.toggleSetQuotaDialog)),C&&u.default.createElement(s.Fragment,null,u.default.createElement("dt",{className:"info-item-heading"},(0,p.gettext)("Two-Factor Authentication")),u.default.createElement("dd",{className:"info-item-content"},a.has_default_device?u.default.createElement(c.FormGroup,null,u.default.createElement("p",{className:"mb-1"},(0,p.gettext)("Status: enabled")),u.default.createElement(c.Button,{onClick:this.props.disable2FA},(0,p.gettext)("Disable Two-Factor Authentication"))):u.default.createElement(c.FormGroup,null,u.default.createElement(c.Button,{disabled:!0},(0,p.gettext)("Disable Two-Factor Authentication"))),u.default.createElement(c.FormGroup,{check:!0},u.default.createElement(c.Label,{check:!0},u.default.createElement(c.Input,{type:"checkbox",checked:a.is_force_2fa,onChange:this.props.toggleForce2fa}),u.default.createElement("span",null,(0,p.gettext)("Force Two-Factor Authentication"))))))),l&&u.default.createElement(y.default,{updateQuota:this.updateQuota,toggle:this.toggleSetQuotaDialog}),f&&u.default.createElement(w.default,{dialogTitle:i,value:a[o],updateValue:this.updateValue,toggleDialog:this.toggleUpdateUserDialog}))}}]),t}(s.Component),D=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateUser=function(e,t){var a=n.state.userInfo.email;f.seafileAPI.sysAdminUpdateUser(a,e,t).then(function(t){var a=n.state.userInfo;a[e]=t.data[e],n.setState({userInfo:a}),h.default.success((0,p.gettext)("Edit succeeded"))}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.disable2FA=function(){var e=n.state.userInfo.email;f.seafileAPI.sysAdminDeleteTwoFactorAuth(e).then(function(e){var t=n.state.userInfo;t.has_default_device=!1,n.setState({userInfo:t})}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.toggleForce2fa=function(e){var t=n.state.userInfo.email,a=e.target.checked;f.seafileAPI.sysAdminSetForceTwoFactorAuth(t,a).then(function(e){var t=n.state.userInfo;t.is_force_2fa=a,n.setState({userInfo:t})}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.state={loading:!0,errorMsg:"",userInfo:{}},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;f.seafileAPI.sysAdminGetUser(this.props.email,160).then(function(t){e.setState({loading:!1,userInfo:t.data})}).catch(function(t){e.setState({loading:!1,errorMsg:d.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){var e=this.state.userInfo;return u.default.createElement(s.Fragment,null,u.default.createElement(S.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(P.default,{currentItem:"info",email:this.props.email,userName:e.name}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(O,{loading:this.state.loading,errorMsg:this.state.errorMsg,userInfo:this.state.userInfo,updateUser:this.updateUser,disable2FA:this.disable2FA,toggleForce2fa:this.toggleForce2fa})))))}}]),t}(s.Component);t.default=D},2164:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=(n(3),{dialogTitle:d.default.string.isRequired,updateValue:d.default.func.isRequired,toggleDialog:d.default.func.isRequired}),h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleInputChange=function(e){var t=e.target.value;n.setState({value:t})},n.handleKeyPress=function(e){"Enter"==e.key&&(n.handleSubmit(),e.preventDefault())},n.handleSubmit=function(){n.props.updateValue(n.state.value.trim()),n.props.toggleDialog()},n.state={value:n.props.value,isSubmitBtnActive:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=(e.dialogTitle,e.toggleDialog);return u.default.createElement(f.Modal,{isOpen:!0,toggle:t},u.default.createElement(f.ModalHeader,{toggle:t},this.props.dialogTitle),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.Input,{type:"text",value:this.state.value,onKeyPress:this.handleKeyPress,onChange:this.handleInputChange})))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:t},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},2165:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(16),d=n(7),f=a(d),p=n(3),m=n(4),h=n(1),g=n(5),v=a(g),b=n(33),y=a(b),E=n(8),w=a(E),_=n(107),S=a(_),x=n(356),P=a(x),C=n(132),O=a(C),D=n(31),M=a(D),k=n(475),T=a(k),L=window.sysadmin.pageOptions.enableSysAdminViewRepo,N=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items;if(n)return u.default.createElement(w.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var o=u.default.createElement(y.default,null,u.default.createElement("h2",null,(0,h.gettext)("No libraries"))),i=u.default.createElement(s.Fragment,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"5%"}),u.default.createElement("th",{width:"35%"},(0,h.gettext)("Name")),u.default.createElement("th",{width:"30%"},(0,h.gettext)("Size")),u.default.createElement("th",{width:"25%"},(0,h.gettext)("Last Update")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(I,{key:n,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteRepo:e.props.deleteRepo,transferRepo:e.props.transferRepo})}))));return r.length?i:o}}]),t}(s.Component),I=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.toggleDeleteDialog=function(){n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.deleteRepo=function(){n.props.deleteRepo(n.props.item.id)},n.toggleTransferDialog=function(){n.setState({isTransferDialogOpen:!n.state.isTransferDialogOpen})},n.transferRepo=function(e){n.props.transferRepo(n.props.item.id,e.email),n.toggleTransferDialog()},n.renderRepoName=function(){var e=n.props.item,t=e;return t.name?h.isPro&&L&&!t.encrypted?u.default.createElement(c.Link,{to:h.siteRoot+"sys/libraries/"+t.id+"/"},t.name):t.name:(0,h.gettext)("Broken ({repo_id_placeholder})").replace("{repo_id_placeholder}",t.id)},n.translateOperations=function(e){var t="";switch(e){case"Delete":t=(0,h.gettext)("Delete");break;case"Transfer":t=(0,h.gettext)("Transfer")}return t},n.onMenuItemClick=function(e){switch(e){case"Delete":n.toggleDeleteDialog();break;case"Transfer":n.toggleTransferDialog()}},n.state={isOpIconShown:!1,highlight:!1,isDeleteDialogOpen:!1,isTransferDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.state,n=t.isOpIconShown,a=t.isDeleteDialogOpen,r=t.isTransferDialogOpen,o=p.Utils.getLibIconUrl(e),i=p.Utils.getLibIconTitle(e),l='<span class="op-target">'+p.Utils.HTMLescape(e.name)+"</span>",c=(0,h.gettext)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",l);return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,u.default.createElement("img",{src:o,title:i,alt:i,width:"24"})),u.default.createElement("td",null,this.renderRepoName()),u.default.createElement("td",null,p.Utils.bytesToSize(e.size)),u.default.createElement("td",null,(0,f.default)(e.last_modified).fromNow()),u.default.createElement("td",null,n&&u.default.createElement(O.default,{operations:["Delete","Transfer"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),a&&u.default.createElement(S.default,{title:(0,h.gettext)("Delete Library"),message:c,executeOperation:this.deleteRepo,confirmBtnText:(0,h.gettext)("Delete"),toggleDialog:this.toggleDeleteDialog}),r&&u.default.createElement(P.default,{itemName:e.name,submit:this.transferRepo,canTransferToDept:!1,toggleDialog:this.toggleTransferDialog}))}}]),t}(s.Component),Y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.deleteRepo=function(e){m.seafileAPI.sysAdminDeleteRepo(e).then(function(t){var a=n.state.repoList.filter(function(t){return t.id!=e});n.setState({repoList:a}),v.default.success((0,h.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.transferRepo=function(e,t){m.seafileAPI.sysAdminTransferRepo(e,t).then(function(t){var a=n.state.repoList.filter(function(t){return t.id!=e});n.setState({repoList:a});var r=(0,h.gettext)("Successfully transferred the library.");v.default.success(r)}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.state={loading:!0,errorMsg:"",userInfo:{},repoList:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;m.seafileAPI.sysAdminGetUser(this.props.email).then(function(t){e.setState({userInfo:t.data})}),m.seafileAPI.sysAdminListReposByOwner(this.props.email).then(function(t){e.setState({loading:!1,repoList:t.data.repos})}).catch(function(t){e.setState({loading:!1,errorMsg:p.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement(M.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(T.default,{currentItem:"owned-repos",email:this.props.email,userName:this.state.userInfo.name}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(N,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repoList,deleteRepo:this.deleteRepo,transferRepo:this.transferRepo})))))}}]),t}(s.Component);t.default=Y},2166:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(16),d=n(7),f=a(d),p=n(3),m=n(4),h=n(1),g=n(33),v=a(g),b=n(8),y=a(b),E=n(31),w=a(E),_=n(67),S=a(_),x=n(475),P=a(x),C=window.sysadmin.pageOptions.enableSysAdminViewRepo,O=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,a=e.items;if(t)return u.default.createElement(y.default,null);if(n)return u.default.createElement("p",{className:"error text-center mt-4"},n);var r=u.default.createElement(v.default,null,u.default.createElement("h2",null,(0,h.gettext)("No libraries"))),o=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"5%"}),u.default.createElement("th",{width:"35%"},(0,h.gettext)("Name")),u.default.createElement("th",{width:"20%"},(0,h.gettext)("Share From")),u.default.createElement("th",{width:"20%"},(0,h.gettext)("Size")),u.default.createElement("th",{width:"20%"},(0,h.gettext)("Last Update")))),u.default.createElement("tbody",null,a.map(function(e,t){return u.default.createElement(D,{key:t,item:e})}))));return a.length?o:r}}]),t}(s.Component),D=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderRepoName=function(){var e=n.props.item,t=e;return t.name?h.isPro&&C&&!t.encrypted?u.default.createElement(c.Link,{to:h.siteRoot+"sys/libraries/"+t.id+"/"},t.name):t.name:(0,h.gettext)("Broken ({repo_id_placeholder})").replace("{repo_id_placeholder}",t.id)},n.getOwnerLink=function(){var e=void 0,t=n.props.item,a=t.owner_email.indexOf("@seafile_group");if(-1==a)e=u.default.createElement(S.default,{email:t.owner_email,name:t.owner_name});else{var r=t.owner_email.substring(0,a);e=u.default.createElement(c.Link,{to:h.siteRoot+"sys/departments/"+r+"/"},t.owner_name)}return e},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=p.Utils.getLibIconUrl(e),n=p.Utils.getLibIconTitle(e);return u.default.createElement(s.Fragment,null,u.default.createElement("tr",null,u.default.createElement("td",null,u.default.createElement("img",{src:t,title:n,alt:n,width:"24"})),u.default.createElement("td",null,this.renderRepoName()),u.default.createElement("td",null,this.getOwnerLink()),u.default.createElement("td",null,p.Utils.bytesToSize(e.size)),u.default.createElement("td",null,(0,f.default)(e.last_modify).fromNow())))}}]),t}(s.Component),M=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!0,errorMsg:"",userInfo:{},repoList:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;m.seafileAPI.sysAdminGetUser(this.props.email).then(function(t){e.setState({userInfo:t.data})}),m.seafileAPI.sysAdminListShareInRepos(this.props.email).then(function(t){e.setState({loading:!1,repoList:t.data.repo_list})}).catch(function(t){e.setState({loading:!1,errorMsg:p.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement(w.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(P.default,{currentItem:"shared-repos",email:this.props.email,userName:this.state.userInfo.name}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(O,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repoList})))))}}]),t}(s.Component);t.default=M},2167:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(3),d=n(4),f=n(1),p=n(5),m=a(p),h=n(33),g=a(h),v=n(8),b=a(v),y=n(132),E=a(y),w=n(522),_=a(w),S=n(31),x=a(S),P=n(475),C=a(P),O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items;if(n)return u.default.createElement(b.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var o=u.default.createElement(g.default,null,u.default.createElement("h2",null,(0,f.gettext)("No shared links"))),i=u.default.createElement(s.Fragment,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"5%"}),u.default.createElement("th",{width:"30%"},(0,f.gettext)("Name")),u.default.createElement("th",{width:"20%"},(0,f.gettext)("Size")),u.default.createElement("th",{width:"20%"},(0,f.gettext)("Type")),u.default.createElement("th",{width:"20%"},(0,f.gettext)("Visits")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(D,{key:n,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteItem:e.props.deleteItem})}))));return r.length?i:o}}]),t}(s.Component),D=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.toggleLinkDialog=function(){n.setState({isLinkDialogOpen:!n.state.isLinkDialogOpen})},n.deleteItem=function(){n.props.deleteItem(n.props.item)},n.translateOperations=function(e){var t="";switch(e){case"View":t=(0,f.gettext)("View");break;case"Delete":t=(0,f.gettext)("Delete")}return t},n.onMenuItemClick=function(e){switch(e){case"View":n.toggleLinkDialog();break;case"Delete":n.deleteItem()}},n.getRoleText=function(){var e=void 0;switch(n.props.item.role){case"Owner":e=(0,f.gettext)("Owner");break;case"Admin":e=(0,f.gettext)("Admin");break;case"Member":e=(0,f.gettext)("Member")}return e},n.getIconUrl=function(){var e=n.props.item;return"upload"==e.type?c.Utils.getFolderIconUrl():e.is_dir?c.Utils.getFolderIconUrl():c.Utils.getFileIconUrl(e.obj_name)},n.state={isOpIconShown:!1,highlight:!1,isLinkDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.state,n=t.isOpIconShown,a=t.isLinkDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,u.default.createElement("img",{src:this.getIconUrl(),alt:"",width:"24"})),u.default.createElement("td",null,"/"==e.obj_name?e.repo_name:e.obj_name),"upload"==e.type?u.default.createElement(s.Fragment,null,u.default.createElement("td",null),u.default.createElement("td",null,(0,f.gettext)("Upload"))):u.default.createElement(s.Fragment,null,u.default.createElement("td",null,e.is_dir?null:c.Utils.bytesToSize(e.size)),u.default.createElement("td",null,(0,f.gettext)("Download"))),u.default.createElement("td",null,e.view_cnt),u.default.createElement("td",null,n&&u.default.createElement(E.default,{operations:["View","Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),a&&u.default.createElement(_.default,{link:e.link,toggleDialog:this.toggleLinkDialog}))}}]),t}(s.Component),M=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.deleteItem=function(e){var t=e.type,a=e.token;"download"==t?d.seafileAPI.sysAdminDeleteShareLink(a).then(function(e){var t=n.state.shareLinkItems.filter(function(e){return e.token!=a});n.setState({shareLinkItems:t}),m.default.success((0,f.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=c.Utils.getErrorMsg(e);m.default.danger(t)}):d.seafileAPI.sysAdminDeleteUploadLink(a).then(function(e){var t=n.state.uploadLinkItems.filter(function(e){return e.token!=a});n.setState({uploadLinkItems:t}),m.default.success((0,f.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=c.Utils.getErrorMsg(e);m.default.danger(t)})},n.state={loading:!0,errorMsg:"",userInfo:{},uploadLinkItems:[],shareLinkItems:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;d.seafileAPI.sysAdminGetUser(this.props.email).then(function(t){e.setState({userInfo:t.data})}),d.seafileAPI.sysAdminListShareLinksByUser(this.props.email).then(function(t){var n=t.data.share_link_list.map(function(e){return e.type="download",e});n.sort(function(e,t){return e.is_dir?-1:1}),e.setState({loading:!1,shareLinkItems:n})}),d.seafileAPI.sysAdminListUploadLinksByUser(this.props.email).then(function(t){var n=t.data.upload_link_list.map(function(e){return e.type="upload",e});e.setState({loading:!1,uploadLinkItems:n})}).catch(function(t){e.setState({loading:!1,errorMsg:c.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){var e=this.state,t=e.shareLinkItems,n=e.uploadLinkItems;return u.default.createElement(s.Fragment,null,u.default.createElement(x.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(C.default,{currentItem:"links",email:this.props.email,userName:this.state.userInfo.name}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(O,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:[].concat(n,t),deleteItem:this.deleteItem})))))}}]),t}(s.Component);t.default=M},2168:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(16),d=n(7),f=a(d),p=n(3),m=n(4),h=n(1),g=n(5),v=a(g),b=n(33),y=a(b),E=n(8),w=a(E),_=n(132),S=a(_),x=n(107),P=a(x),C=n(31),O=a(C),D=n(475),M=a(D),k=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items;if(n)return u.default.createElement(w.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var o=u.default.createElement(y.default,null,u.default.createElement("h2",null,(0,h.gettext)("No groups"))),i=u.default.createElement(s.Fragment,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"35%"},(0,h.gettext)("Name")),u.default.createElement("th",{width:"30%"},(0,h.gettext)("Role")),u.default.createElement("th",{width:"30%"},(0,h.gettext)("Created At")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(T,{key:n,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteItem:e.props.deleteItem})}))));return r.length?i:o}}]),t}(s.Component),T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.toggleDeleteDialog=function(){n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.deleteItem=function(){n.props.deleteItem(n.props.item.id)},n.translateOperations=function(e){var t="";switch(e){case"Delete":t=(0,h.gettext)("Delete")}return t},n.onMenuItemClick=function(e){switch(e){case"Delete":n.toggleDeleteDialog()}},n.getRoleText=function(){var e=void 0;switch(n.props.item.role){case"Owner":e=(0,h.gettext)("Owner");break;case"Admin":e=(0,h.gettext)("Admin");break;case"Member":e=(0,h.gettext)("Member")}return e},n.state={isOpIconShown:!1,highlight:!1,isDeleteDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.state,n=t.isOpIconShown,a=t.isDeleteDialogOpen,r='<span class="op-target">'+p.Utils.HTMLescape(e.name)+"</span>",o=(0,h.gettext)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",r),i=0==e.parent_group_id?h.siteRoot+"sys/groups/"+e.id+"/libraries/":h.siteRoot+"sys/departments/"+e.id+"/";return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,u.default.createElement(c.Link,{to:i},e.name)),u.default.createElement("td",null,this.getRoleText()),u.default.createElement("td",null,(0,f.default)(e.created_at).format("YYYY-MM-DD HH:mm")),u.default.createElement("td",null,n&&0==e.parent_group_id&&u.default.createElement(S.default,{operations:["Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),a&&u.default.createElement(P.default,{title:(0,h.gettext)("Delete Group"),message:o,executeOperation:this.deleteItem,confirmBtnText:(0,h.gettext)("Delete"),toggleDialog:this.toggleDeleteDialog}))}}]),t}(s.Component),L=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.deleteItem=function(e){m.seafileAPI.sysAdminDismissGroupByID(e).then(function(t){var a=n.state.items.filter(function(t){return t.id!=e});n.setState({items:a}),v.default.success((0,h.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.state={loading:!0,errorMsg:"",userInfo:{},items:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;m.seafileAPI.sysAdminGetUser(this.props.email).then(function(t){e.setState({userInfo:t.data})}),m.seafileAPI.sysAdminListGroupsJoinedByUser(this.props.email).then(function(t){e.setState({loading:!1,items:t.data.group_list})}).catch(function(t){e.setState({loading:!1,errorMsg:p.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement(O.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(M.default,{currentItem:"groups",email:this.props.email,userName:this.state.userInfo.name}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(k,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.items,deleteItem:this.deleteItem})))))}}]),t}(s.Component);t.default=L},2169:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(16),d=n(6),f=n(3),p=n(4),m=n(1),h=n(5),g=a(h),v=n(2170),b=a(v),y=n(31),E=a(y),w=n(474),_=a(w),S=n(731),x=a(S),P=n(992),C=a(P),O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleCreateRepoDialog=function(){n.setState({isCreateRepoDialogOpen:!n.state.isCreateRepoDialogOpen})},n.getReposByPage=function(e){var t=n.state,a=t.perPage,r=t.sortBy;p.seafileAPI.sysAdminListAllRepos(e,a,r).then(function(e){n.setState({loading:!1,repos:e.data.repos,pageInfo:e.data.page_info})}).catch(function(e){n.setState({loading:!1,errorMsg:f.Utils.getErrorMsg(e,!0)})})},n.sortItems=function(e){n.setState({currentPage:1,sortBy:e},function(){var e=new URL(location.href),t=new URLSearchParams(e.search),a=n.state,r=a.currentPage,o=a.sortBy;t.set("page",r),t.set("order_by",o),e.search=t.toString(),(0,c.navigate)(e.toString()),n.getReposByPage(r)})},n.resetPerPage=function(e){n.setState({perPage:e},function(){n.getReposByPage(1)})},n.createRepo=function(e,t){p.seafileAPI.sysAdminCreateRepo(e,t).then(function(e){n.state.repos.unshift(e.data),n.setState({repos:n.state.repos})}).catch(function(e){var t=f.Utils.getErrorMsg(e);g.default.danger(t)})},n.onDeleteRepo=function(e){var t=n.state.repos.filter(function(t){return t.id!=e.id});n.setState({repos:t})},n.onTransferRepo=function(e){var t=n.state.repos.map(function(t){return t.id==e.id?e:t});n.setState({repos:t})},n.getSearch=function(){return u.default.createElement(_.default,{placeholder:(0,m.gettext)("Search libraries by name"),submit:n.searchRepos})},n.searchRepos=function(e){(0,c.navigate)(m.siteRoot+"sys/search-libraries/?name="+encodeURIComponent(e))},n.state={loading:!0,errorMsg:"",repos:[],pageInfo:{},perPage:25,sortBy:"",isCreateRepoDialogOpen:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=void 0===a?1:a,o=n.perPage,i=n.sortBy;this.setState({sortBy:t.get("order_by")||i,perPage:parseInt(t.get("per_page")||o),currentPage:parseInt(t.get("page")||r)},function(){e.getReposByPage(e.state.currentPage)})}},{key:"render",value:function(){var e=this.state.isCreateRepoDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement(E.default,{search:this.getSearch()},u.default.createElement(d.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleCreateRepoDialog},u.default.createElement("i",{className:"fas fa-plus-square text-secondary mr-1"}),(0,m.gettext)("New Library"))),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(x.default,{currentItem:"all"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(C.default,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repos,sortBy:this.state.sortBy,sortItems:this.sortItems,pageInfo:this.state.pageInfo,curPerPage:this.state.perPage,getListByPage:this.getReposByPage,resetPerPage:this.resetPerPage,onDeleteRepo:this.onDeleteRepo,onTransferRepo:this.onTransferRepo})))),e&&u.default.createElement(b.default,{createRepo:this.createRepo,toggleDialog:this.toggleCreateRepoDialog}))}}]),t}(s.Component);t.default=O},2170:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(40),h=a(m),g={createRepo:d.default.func.isRequired,toggleDialog:d.default.func.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleRepoNameChange=function(e){var t=e.target.value;n.setState({repoName:t,isSubmitBtnActive:t.trim()})},n.handleSubmit=function(){var e=n.state,t=e.repoName,a=e.ownerEmail;n.props.createRepo(t.trim(),a),n.toggle()},n.handleSelectChange=function(e){n.setState({ownerEmail:e?e.email:""})},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.toggle=function(){n.props.toggleDialog()},n.state={repoName:"",ownerEmail:"",errMessage:"",isSubmitBtnActive:!1},n.newInput=u.default.createRef(),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.newInput.focus()}},{key:"render",value:function(){var e=this;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("New Library")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,{for:"repoName"},(0,p.gettext)("Name")),u.default.createElement(f.Input,{id:"repoName",onKeyPress:this.handleKeyPress,innerRef:function(t){e.newInput=t},value:this.state.repoName,onChange:this.handleRepoNameChange})),u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,{for:"userSelect"},(0,p.gettext)("Owner"),u.default.createElement("span",{className:"small text-secondary"},(0,p.gettext)("(If left blank, owner will be admin)"))),u.default.createElement(h.default,{id:"userSelect",isMulti:!1,className:"reviewer-select",placeholder:(0,p.gettext)("Select a user"),onSelectChange:this.handleSelectChange}))),this.state.errMessage&&u.default.createElement(f.Alert,{color:"danger"},this.state.errMessage)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);v.propTypes=g,t.default=v},2171:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(2172),h=a(m),g=n(2173),v=a(g);n(138);var b={itemName:d.default.string.isRequired,itemPath:d.default.string.isRequired,toggleDialog:d.default.func.isRequired,repoID:d.default.string.isRequired,isGroupOwnedRepo:d.default.bool.isRequired,repoEncrypted:d.default.bool,userPerm:d.default.string,enableDirPrivateShare:d.default.bool},y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getInitialActiveTab=function(){return"shareToUser"},n.toggle=function(e){n.state.activeTab!==e&&n.setState({activeTab:e})},n.renderDirContent=function(){var e=n.state.activeTab,t=n.props,a=t.enableDirPrivateShare,r=t.isGroupOwnedRepo;return u.default.createElement(s.Fragment,null,u.default.createElement("div",{className:"share-dialog-side"},u.default.createElement(f.Nav,{pills:!0},a&&u.default.createElement(s.Fragment,null,u.default.createElement(f.NavItem,null,u.default.createElement(f.NavLink,{className:"shareToUser"===e?"active":"",onClick:n.toggle.bind(n,"shareToUser")},(0,p.gettext)("Share to user"))),u.default.createElement(f.NavItem,null,u.default.createElement(f.NavLink,{className:"shareToGroup"===e?"active":"",onClick:n.toggle.bind(n,"shareToGroup")},(0,p.gettext)("Share to group")))))),u.default.createElement("div",{className:"share-dialog-main"},u.default.createElement(f.TabContent,{activeTab:n.state.activeTab},a&&u.default.createElement(s.Fragment,null,u.default.createElement(f.TabPane,{tabId:"shareToUser"},u.default.createElement(h.default,{itemType:"library",isGroupOwnedRepo:r,itemPath:n.props.itemPath,repoID:n.props.repoID,isRepoOwner:n.state.isRepoOwner})),u.default.createElement(f.TabPane,{tabId:"shareToGroup"},u.default.createElement(v.default,{itemType:"library",isGroupOwnedRepo:r,itemPath:n.props.itemPath,repoID:n.props.repoID,isRepoOwner:n.state.isRepoOwner}))))))},n.state={activeTab:n.getInitialActiveTab(),isRepoOwner:!1},n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement(f.Modal,{isOpen:!0,style:{maxWidth:"720px"},className:"share-dialog",toggle:this.props.toggleDialog},u.default.createElement(f.ModalHeader,{toggle:this.props.toggleDialog},(0,p.gettext)("Share")," ",u.default.createElement("span",{className:"op-target",title:this.props.itemName},this.props.itemName)),u.default.createElement(f.ModalBody,{className:"share-dialog-content"},this.renderDirContent())))}}]),t}(u.default.Component);y.propTypes=b,t.default=y},2172:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(1),p=n(6),m=n(4),h=n(3),g=n(5),v=a(g),b=n(40),y=a(b),E=n(55),w=a(E),_=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.setState({isOperationShow:!0})},n.onMouseLeave=function(){n.setState({isOperationShow:!1})},n.deleteShareItem=function(){var e=n.props.item;n.props.deleteShareItem(e.user_email)},n.onChangeUserPermission=function(e){var t=n.props.item;n.props.onChangeUserPermission(t,e)},n.state={isOperationShow:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=e.is_admin?"admin":e.permission;return u.default.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("td",{className:"name"},e.user_name),u.default.createElement("td",null,u.default.createElement(w.default,{isTextMode:!0,isEditIconShow:this.state.isOperationShow,currentPermission:t,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})),u.default.createElement("td",null,u.default.createElement("span",{className:"sf2-icon-x3 action-icon "+(this.state.isOperationShow?"":"hide"),onClick:this.deleteShareItem,title:(0,f.gettext)("Delete")})))}}]),t}(u.default.Component),S=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props.items;return u.default.createElement("tbody",null,t.map(function(t,n){return u.default.createElement(_,{key:n,item:t,permissions:e.props.permissions,deleteShareItem:e.props.deleteShareItem,onChangeUserPermission:e.props.onChangeUserPermission})}))}}]),t}(u.default.Component),x={isGroupOwnedRepo:d.default.bool,itemPath:d.default.string.isRequired,itemType:d.default.string.isRequired,repoID:d.default.string.isRequired},P=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectChange=function(e){n.setState({selectedOption:e}),n.options=[]},n.setPermission=function(e){n.setState({permission:e})},n.shareToUser=function(){var e=[],t=n.props.repoID;if(n.state.selectedOption&&n.state.selectedOption.length>0)for(var a=0;a<n.state.selectedOption.length;a++)e[a]=n.state.selectedOption[a].email;m.seafileAPI.sysAdminAddRepoSharedItem(t,"user",e,n.state.permission).then(function(e){var t=[];if(e.data.failed.length>0)for(var a=0;a<e.data.failed.length;a++)t[a]=e.data.failed[a];var r=e.data.success;n.setState({errorMsg:t,sharedItems:n.state.sharedItems.concat(r),selectedOption:null,permission:"rw"}),n.refs.userSelect.clearSelect()}).catch(function(e){if(e.response){var t=(0,f.gettext)("Library can not be shared to owner."),a=[];a.push(t),n.setState({errorMsg:a,selectedOption:null})}})},n.deleteShareItem=function(e){var t=n.props.repoID;m.seafileAPI.sysAdminDeleteRepoSharedItem(t,"user",e).then(function(t){n.setState({sharedItems:n.state.sharedItems.filter(function(t){return t.user_email!==e})})}).catch(function(e){var t=h.Utils.getErrorMsg(e);v.default.danger(t)})},n.onChangeUserPermission=function(e,t){var a=n.props.repoID,r=e.user_email;m.seafileAPI.sysAdminUpdateRepoSharedItemPermission(a,"user",r,t).then(function(){n.updateSharedItems(e,t)}).catch(function(e){var t=h.Utils.getErrorMsg(e);v.default.danger(t)})},n.updateSharedItems=function(e,t){var a=e.user_name,r=n.state.sharedItems.map(function(e){var n=e.user_name;return a===n&&(e.permission=t,e.is_admin="admin"===t),e});n.setState({sharedItems:r})},n.state={selectedOption:null,errorMsg:[],permission:"rw",sharedItems:[]},n.options=[],n.permissions=["rw","r"],f.isPro&&n.permissions.push("admin","cloud-edit","preview"),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.repoID;m.seafileAPI.sysAdminListRepoSharedItems(t,"user").then(function(t){0!==t.data.length&&e.setState({sharedItems:t.data})}).catch(function(e){var t=h.Utils.getErrorMsg(e);v.default.danger(t)})}},{key:"render",value:function(){var e=this.state.sharedItems;return u.default.createElement(s.Fragment,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"50%"},(0,f.gettext)("User")),u.default.createElement("th",{width:"35%"},(0,f.gettext)("Permission")),u.default.createElement("th",{width:"15%"}))),u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("td",null,u.default.createElement(y.default,{ref:"userSelect",isMulti:!0,className:"reviewer-select",placeholder:(0,f.gettext)("Search users..."),onSelectChange:this.handleSelectChange})),u.default.createElement("td",null,u.default.createElement(w.default,{isTextMode:!1,isEditIconShow:!1,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission})),u.default.createElement("td",null,u.default.createElement(p.Button,{onClick:this.shareToUser},(0,f.gettext)("Submit")))),this.state.errorMsg.length>0&&this.state.errorMsg.map(function(e,t){var n="";return n=e.email?e.email+": "+e.error_msg:e,u.default.createElement("tr",{key:t},u.default.createElement("td",{colSpan:3},u.default.createElement("p",{className:"error"},n)))}))),u.default.createElement("div",{className:"share-list-container"},u.default.createElement("table",{className:"table-thead-hidden"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"50%"},(0,f.gettext)("User")),u.default.createElement("th",{width:"35%"},(0,f.gettext)("Permission")),u.default.createElement("th",{width:"15%"}))),u.default.createElement(S,{items:e,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission}))))}}]),t}(u.default.Component);P.propTypes=x,t.default=P},2173:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(0),d=a(c),f=n(2),p=a(f),m=n(6),h=n(79),g=a(h),v=n(274),b=a(v),y=n(1),E=n(4),w=n(3),_=n(5),S=a(_),x=n(55),P=a(x),C=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.setState({isOperationShow:!0})},n.onMouseLeave=function(){n.setState({isOperationShow:!1})},n.deleteShareItem=function(){var e=n.props.item;n.props.deleteShareItem(e.group_id)},n.onChangeUserPermission=function(e){var t=n.props.item;n.props.onChangeUserPermission(t,e)},n.state={isOperationShow:!1},n}return l(t,e),u(t,[{key:"render",value:function(){var e=this.props.item,t=e.is_admin?"admin":e.permission;return d.default.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},d.default.createElement("td",{className:"name"},e.group_name),d.default.createElement("td",null,d.default.createElement(P.default,{isTextMode:!0,isEditIconShow:this.state.isOperationShow,currentPermission:t,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})),d.default.createElement("td",null,d.default.createElement("span",{className:"sf2-icon-x3 action-icon "+(this.state.isOperationShow?"":"hide"),onClick:this.deleteShareItem,title:(0,y.gettext)("Delete")})))}}]),t}(d.default.Component),O=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props.items;return d.default.createElement("tbody",null,t.map(function(t,n){return d.default.createElement(C,{key:n,item:t,permissions:e.props.permissions,deleteShareItem:e.props.deleteShareItem,onChangeUserPermission:e.props.onChangeUserPermission})}))}}]),t}(d.default.Component),D={isGroupOwnedRepo:p.default.bool,itemPath:p.default.string.isRequired,itemType:p.default.string.isRequired,repoID:p.default.string.isRequired,isRepoOwner:p.default.bool.isRequired},M=function(e){return d.default.createElement("div",s({},e.innerProps,{style:{margin:"6px 10px",textAlign:"center",color:"hsl(0,0%,50%)"}}),(0,y.gettext)("Group not found"))},k=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectChange=function(e){n.setState({selectedOption:e})},n.loadOptions=function(){E.seafileAPI.shareableGroups().then(function(e){n.options=[];for(var t=0;t<e.data.length;t++){var a={};a.value=e.data[t].name,a.id=e.data[t].id,a.label=e.data[t].name,n.options.push(a)}}).catch(function(e){var t=w.Utils.getErrorMsg(e);S.default.danger(t)})},n.listSharedGroups=function(){var e=n.props.repoID;E.seafileAPI.sysAdminListRepoSharedItems(e,"group").then(function(e){0!==e.data.length&&n.setState({sharedItems:e.data})}).catch(function(e){var t=w.Utils.getErrorMsg(e);S.default.danger(t)})},n.setPermission=function(e){n.setState({permission:e})},n.shareToGroup=function(){var e=[],t=n.props.repoID;if(n.state.selectedOption&&n.state.selectedOption.length>0)for(var a=0;a<n.state.selectedOption.length;a++)e[a]=n.state.selectedOption[a].id;E.seafileAPI.sysAdminAddRepoSharedItem(t,"group",e,n.state.permission).then(function(e){var t=[];if(e.data.failed.length>0)for(var a=0;a<e.data.failed.length;a++)t[a]=e.data.failed[a];var r=e.data.success;n.setState({errorMsg:t,sharedItems:n.state.sharedItems.concat(r),selectedOption:null,permission:"rw"})}).catch(function(e){var t=w.Utils.getErrorMsg(e);S.default.danger(t)})},n.deleteShareItem=function(e){var t=n.props.repoID;E.seafileAPI.sysAdminDeleteRepoSharedItem(t,"group",e).then(function(){n.setState({sharedItems:n.state.sharedItems.filter(function(t){return t.group_id!==e})})}).catch(function(e){var t=w.Utils.getErrorMsg(e);S.default.danger(t)})},n.onChangeUserPermission=function(e,t){var a=n.props.repoID,r=e.group_id;E.seafileAPI.sysAdminUpdateRepoSharedItemPermission(a,"group",r,t).then(function(){n.updateSharedItems(e,t)}).catch(function(e){var t=w.Utils.getErrorMsg(e);S.default.danger(t)})},n.updateSharedItems=function(e,t){var a=e.group_id,r=n.state.sharedItems.map(function(e){var n=e.group_id;return a===n&&(e.permission=t,e.is_admin="admin"===t),e});n.setState({sharedItems:r})},n.state={selectedOption:null,errorMsg:[],permission:"rw",sharedItems:[]},n.options=[],n.permissions=["rw","r"],y.isPro&&n.permissions.push("admin","cloud-edit","preview"),n}return l(t,e),u(t,[{key:"componentDidMount",value:function(){this.loadOptions(),this.listSharedGroups()}},{key:"render",value:function(){return d.default.createElement(c.Fragment,null,d.default.createElement("table",null,d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",{width:"50%"},(0,y.gettext)("Group")),d.default.createElement("th",{width:"35%"},(0,y.gettext)("Permission")),d.default.createElement("th",{width:"15%"}))),d.default.createElement("tbody",null,d.default.createElement("tr",null,d.default.createElement("td",null,d.default.createElement(g.default,r({isMulti:!0,onChange:this.handleSelectChange,options:this.options,placeholder:(0,y.gettext)("Select groups..."),components:(0,b.default)(),maxMenuHeight:200,inputId:"react-select-2-input",value:this.state.selectedOption},"components",{NoOptionsMessage:M}))),d.default.createElement("td",null,d.default.createElement(P.default,{isTextMode:!1,isEditIconShow:!1,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission})),d.default.createElement("td",null,d.default.createElement(m.Button,{onClick:this.shareToGroup},(0,y.gettext)("Submit")))),this.state.errorMsg.length>0&&this.state.errorMsg.map(function(e,t){var n=e.group_name+": "+e.error_msg;return d.default.createElement("tr",{key:t},d.default.createElement("td",{colSpan:3},d.default.createElement("p",{className:"error"},n)))}))),d.default.createElement("div",{className:"share-list-container"},d.default.createElement("table",{className:"table-thead-hidden"},d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",{width:"50%"},(0,y.gettext)("Group")),d.default.createElement("th",{width:"35%"},(0,y.gettext)("Permission")),d.default.createElement("th",{width:"15%"}))),d.default.createElement(O,{items:this.state.sharedItems,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission}))))}}]),t}(d.default.Component);k.propTypes=D,t.default=k},2174:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(4),h=n(3),g=n(5),v=a(g),b={itemName:d.default.string.isRequired,toggleDialog:d.default.func.isRequired,repoID:d.default.string.isRequired},y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.submit=function(){var e=n.state.keepDays;n.state.autoHistory&&(e=n.state.expireDays);var t=n.props.repoID;if(/^-?\d+$/.test(e)){var a=(0,p.gettext)("Successfully set library history.");m.seafileAPI.sysAdminUpdateRepoHistorySetting(t,e).then(function(e){v.default.success(a),n.setState({keepDays:e.data.keep_days}),n.props.toggleDialog()}).catch(function(e){var t=h.Utils.getErrorMsg(e);v.default.danger(t)})}else n.setState({errorInfo:(0,p.gettext)("Please enter a non-negative integer")})},n.handleKeyPress=function(e){"Enter"===e.key&&(n.submit(),e.preventDefault())},n.onChange=function(e){var t=e.target.value;n.setState({keepDays:t,expireDays:t})},n.setLimitDays=function(e){"allHistory"===e?n.setState({keepDays:-1}):"noHistory"===e?n.setState({keepDays:0}):n.setState({disabled:!1}),n.setState({allHistory:"allHistory"===e,noHistory:"noHistory"===e,autoHistory:"autoHistory"===e})},n.state={keepDays:-1,expireDays:30,disabled:!0,allHistory:!0,noHistory:!1,autoHistory:!1,errorInfo:""},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;m.seafileAPI.sysAdminGetRepoHistorySetting(this.props.repoID).then(function(t){e.setState({keepDays:t.data.keep_days,allHistory:t.data.keep_days<0,noHistory:0===t.data.keep_days,autoHistory:t.data.keep_days>0,disabled:!(t.data.keep_days>0),expireDays:t.data.keep_days>0?t.data.keep_days:30})}).catch(function(e){var t=h.Utils.getErrorMsg(e);v.default.danger(t)})}},{key:"render",value:function(){var e=this,t=this.props.itemName;return u.default.createElement(f.Modal,{isOpen:!0},u.default.createElement(f.ModalHeader,{toggle:this.props.toggleDialog},u.default.createElement("span",{className:"op-target",title:t},t)," ",(0,p.gettext)("History Setting")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement(f.FormGroup,{check:!0},u.default.createElement(f.Input,{type:"radio",name:"radio1",checked:this.state.allHistory,onChange:function(){e.setLimitDays("allHistory")}})," ",u.default.createElement(f.Label,null,(0,p.gettext)("Keep full history"))),u.default.createElement(f.FormGroup,{check:!0},u.default.createElement(f.Input,{type:"radio",name:"radio1",checked:this.state.noHistory,onChange:function(){e.setLimitDays("noHistory")}})," ",u.default.createElement(f.Label,null,(0,p.gettext)("Don't keep history"))),u.default.createElement(f.FormGroup,{check:!0},u.default.createElement(f.Input,{type:"radio",name:"radio1",checked:this.state.autoHistory,onChange:function(){e.setLimitDays("autoHistory")}})," ",u.default.createElement(f.Label,null,(0,p.gettext)("Only keep a period of history:")),u.default.createElement(f.Input,{type:"text",className:"expire-input",value:this.state.expireDays,onChange:this.onChange,disabled:this.state.disabled,onKeyDown:this.handleKeyPress})," ",u.default.createElement(f.Label,null,u.default.createElement("span",null,(0,p.gettext)("days")))),this.state.errorInfo&&u.default.createElement(f.Alert,{color:"danger"},this.state.errorInfo))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.props.toggleDialog},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.submit},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);y.propTypes=b,t.default=y},2175:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(16),d=n(3),f=n(4),p=n(1),m=n(5),h=(a(m),n(8)),g=a(h),v=n(31),b=a(v),y=n(731),E=a(y),w=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,a=e.items;return t?u.default.createElement(g.default,null):n?u.default.createElement("p",{className:"error text-center"},n):u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"33%"},(0,p.gettext)("Name")),u.default.createElement("th",{width:"34%"},"ID"),u.default.createElement("th",{width:"33%"},(0,p.gettext)("Description")))),u.default.createElement("tbody",null,a.map(function(e,t){return u.default.createElement(_,{key:t,item:e})}))))}}]),t}(s.Component),_=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item;return u.default.createElement("tr",null,u.default.createElement("td",null,u.default.createElement(c.Link,{to:p.siteRoot+"sys/libraries/"+e.id+"/"},e.name)),u.default.createElement("td",null,e.id),u.default.createElement("td",null,e.description))}}]),t}(s.Component),S=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!0,errorMsg:"",items:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;f.seafileAPI.sysAdminGetSystemRepoInfo().then(function(t){var n=[];n.push(t.data),e.setState({items:n,loading:!1})}).catch(function(t){e.setState({loading:!1,errorMsg:d.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement(b.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(E.default,{currentItem:"system"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(w,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.items})))))}}]),t}(s.Component);t.default=S},2176:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(7),f=a(d),p=n(3),m=n(4),h=n(1),g=n(5),v=a(g),b=n(33),y=a(b),E=n(8),w=a(E),_=n(63),S=a(_),x=n(13),P=a(x),C=n(132),O=a(C),D=n(107),M=a(D),k=n(31),T=a(k),L=n(474),N=a(L),I=n(67),Y=a(I),R=n(731),A=a(R),j=window.sysadmin.pageOptions.trashReposExpireDays,Z=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPageList=function(){n.props.getListByPage(n.props.pageInfo.current_page-1)},n.getNextPageList=function(){n.props.getListByPage(n.props.pageInfo.current_page+1)},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items,o=t.pageInfo,i=t.curPerPage;if(n)return u.default.createElement(w.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var l=u.default.createElement(y.default,null,u.default.createElement("h2",null,(0,h.gettext)("No deleted libraries"))),c=u.default.createElement(s.Fragment,null,u.default.createElement("p",{className:"mt-4 small text-secondary"},(0,h.gettext)("Tip: libraries deleted {trashReposExpireDays} days ago will be cleaned automatically.").replace("{trashReposExpireDays}",j)),u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"5%"}),u.default.createElement("th",{width:"43%"},(0,h.gettext)("Name")),u.default.createElement("th",{width:"27%"},(0,h.gettext)("Owner")),u.default.createElement("th",{width:"20%"},(0,h.gettext)("Deleted Time")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(F,{key:n,repo:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDeleteRepo:e.props.onDeleteRepo,onRestoreRepo:e.props.onRestoreRepo})}))),o&&u.default.createElement(S.default,{gotoPreviousPage:this.getPreviousPageList,gotoNextPage:this.getNextPageList,currentPage:o.current_page,hasNextPage:o.has_next_page,curPerPage:i,resetPerPage:this.props.resetPerPage}));return r.length?c:l}}]),t}(s.Component),F=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseOver=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseOut=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.onDeleteRepo=function(){var e=n.props.repo;m.seafileAPI.sysAdminDeleteTrashRepo(e.id).then(function(t){n.props.onDeleteRepo(e);var a=(0,h.gettext)("Successfully deleted {name}.").replace("{name}",e.name);v.default.success(a)}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.onRestoreRepo=function(){var e=n.props.repo;m.seafileAPI.sysAdminRestoreTrashRepo(e.id).then(function(t){n.props.onRestoreRepo(e);var a=(0,h.gettext)("Successfully restored the library.");v.default.success(a)}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.toggleDeleteRepoDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteRepoDialogOpen:!n.state.isDeleteRepoDialogOpen})},n.toggleRestoreRepoDialog=function(e){e&&e.preventDefault(),n.setState({isRestoreRepoDialogOpen:!n.state.isRestoreRepoDialogOpen})},n.translateOperations=function(e){var t="";switch(e){case"Restore":t=(0,h.gettext)("Restore");break;case"Delete":t=(0,h.gettext)("Delete")}return t},n.onMenuItemClick=function(e){switch(e){case"Restore":n.toggleRestoreRepoDialog();break;case"Delete":n.toggleDeleteRepoDialog()}},n.state={highlight:!1,isOpIconShown:!1,isDeleteRepoDialogOpen:!1,isRestoreRepoDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.repo,t=this.state,n=t.isOpIconShown,a=t.isDeleteRepoDialogOpen,r=t.isRestoreRepoDialogOpen,o=p.Utils.getLibIconUrl(e),i=p.Utils.getLibIconTitle(e),l='<span class="op-target">'+p.Utils.HTMLescape(e.name)+"</span>";return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut},u.default.createElement("td",null,u.default.createElement("img",{src:o,title:i,alt:i,width:"24"})),u.default.createElement("td",null,e.name),u.default.createElement("td",null,-1==e.owner.indexOf("@seafile_group")?u.default.createElement(Y.default,{email:e.owner,name:e.owner_name}):e.group_name),u.default.createElement("td",null,(0,f.default)(e.delete_time).fromNow()),u.default.createElement("td",null,n&&u.default.createElement(O.default,{operations:["Restore","Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),a&&u.default.createElement(P.default,null,u.default.createElement(M.default,{title:(0,h.gettext)("Delete Library"),message:(0,h.gettext)("Are you sure you want to delete {placeholder} completely?").replace("{placeholder}",l),executeOperation:this.onDeleteRepo,confirmBtnText:(0,h.gettext)("Delete"),toggleDialog:this.toggleDeleteRepoDialog})),r&&u.default.createElement(P.default,null,u.default.createElement(M.default,{title:(0,h.gettext)("Restore Library"),message:(0,h.gettext)("Are you sure you want to restore {placeholder}?").replace("{placeholder}",l),executeOperation:this.onRestoreRepo,confirmBtnText:(0,h.gettext)("Restore"),toggleDialog:this.toggleRestoreRepoDialog})))}}]),t}(s.Component),B=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleCleanTrashDialog=function(){n.setState({isCleanTrashDialogOpen:!n.state.isCleanTrashDialogOpen})},n.getReposByPage=function(e){var t=n.state.perPage;m.seafileAPI.sysAdminListTrashRepos(e,t).then(function(e){n.setState({repos:e.data.repos,pageInfo:e.data.page_info,loading:!1})}).catch(function(e){n.setState({loading:!1,errorMsg:p.Utils.getErrorMsg(e,!0)})})},n.resetPerPage=function(e){n.setState({perPage:e},function(){n.getReposByPage(1)})},n.onDeleteRepo=function(e){var t=n.state.repos.filter(function(t){return t.id!=e.id});n.setState({repos:t})},n.onRestoreRepo=function(e){var t=n.state.repos.filter(function(t){return t.id!=e.id});n.setState({repos:t})},n.cleanTrash=function(){m.seafileAPI.sysAdminCleanTrashRepos().then(function(e){n.setState({repos:[]}),v.default.success((0,h.gettext)("Successfully cleared trash."))}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.getSearch=function(){return u.default.createElement(N.default,{placeholder:(0,h.gettext)("Search libraries by owner"),submit:n.searchRepos})},n.searchRepos=function(e){m.seafileAPI.sysAdminSearchTrashRepos(e).then(function(e){n.setState({repos:e.data.repos,pageInfo:null,errorMsg:"",loading:!1})}).catch(function(e){n.setState({loading:!1,errorMsg:p.Utils.getErrorMsg(e,!0)})})},n.state={loading:!0,errorMsg:"",repos:[],pageInfo:{},perPage:25,isCleanTrashDialogOpen:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=void 0===a?1:a,o=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||o),currentPage:parseInt(t.get("page")||r)},function(){e.getReposByPage(e.state.currentPage)})}},{key:"render",value:function(){var e=this.state.isCleanTrashDialogOpen;return u.default.createElement(s.Fragment,null,this.state.repos.length?u.default.createElement(T.default,null,u.default.createElement(c.Button,{className:"operation-item",onClick:this.toggleCleanTrashDialog},(0,h.gettext)("Clean"))):u.default.createElement(T.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(A.default,{currentItem:"trash"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(Z,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repos,pageInfo:this.state.pageInfo,onDeleteRepo:this.onDeleteRepo,onRestoreRepo:this.onRestoreRepo,getListByPage:this.getReposByPage,resetPerPage:this.resetPerPage,curPerPage:this.state.perPage})))),e&&u.default.createElement(M.default,{title:(0,h.gettext)("Clear Trash"),message:(0,h.gettext)("Are you sure you want to clear trash?"),executeOperation:this.cleanTrash,confirmBtnText:(0,h.gettext)("Clear"),toggleDialog:this.toggleCleanTrashDialog}))}}]),t}(s.Component);t.default=B},2177:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(4),f=n(1),p=n(3),m=n(31),h=a(m),g=n(992),v=a(g),b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getRepos=function(){var e=n.state.name;d.seafileAPI.sysAdminSearchRepos(e).then(function(e){n.setState({loading:!1,repos:e.data.repo_list})}).catch(function(e){n.setState({loading:!1,errorMsg:p.Utils.getErrorMsg(e,!0)})})},n.searchRepos=function(){n.getRepos()},n.onDeleteRepo=function(e){var t=n.state.repos.filter(function(t){return t.id!=e.id});n.setState({repos:t})},n.onTransferRepo=function(e){var t=n.state.repos.map(function(t){return t.id==e.id?e:t});n.setState({repos:t})},n.handleNameInputChange=function(e){n.setState({name:e.target.value},n.checkSubmitBtnActive)},n.checkSubmitBtnActive=function(){var e=n.state.name;n.setState({isSubmitBtnActive:e.trim()})},n.state={name:"",isSubmitBtnActive:!1,loading:!0,errorMsg:"",repos:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=new URL(document.location).searchParams;this.setState({name:e.get("name")||""},this.getRepos)}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.isSubmitBtnActive;return u.default.createElement(s.Fragment,null,u.default.createElement(h.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,f.gettext)("Libraries"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement("div",{className:"mt-4 mb-6"},u.default.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},(0,f.gettext)("Search Libraries")),u.default.createElement("p",{className:"text-secondary small"},(0,f.gettext)("Tip: you can search by keyword in name.")),u.default.createElement(c.Form,null,u.default.createElement(c.FormGroup,{row:!0},u.default.createElement(c.Label,{for:"name",sm:1},(0,f.gettext)("Name")),u.default.createElement(c.Col,{sm:5},u.default.createElement(c.Input,{type:"text",name:"name",id:"name",value:t,onChange:this.handleNameInputChange}))),u.default.createElement(c.FormGroup,{row:!0},u.default.createElement(c.Col,{sm:{size:5,offset:1}},u.default.createElement("button",{className:"btn btn-outline-primary",disabled:!n,onClick:this.searchRepos},(0,f.gettext)("Submit")))))),u.default.createElement("div",{className:"mt-4 mb-6"},u.default.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},(0,f.gettext)("Result")),u.default.createElement(v.default,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repos,onDeleteRepo:this.onDeleteRepo,onTransferRepo:this.onTransferRepo}))))))}}]),t}(s.Component);t.default=b},2178:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(409),f=n(3),p=n(4),m=n(1),h=n(5),g=a(h),v=n(357),b=a(v),y=n(2179),E=a(y),w=n(31),_=a(w),S=n(2180),x=a(S),P=n(2181),C=a(P),O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPathClick=function(e){n.loadDirentList(e)},n.toggleNewFolderDialog=function(){n.setState({isNewFolderDialogOpen:!n.state.isNewFolderDialogOpen})},n.createNewFolder=function(e){var t=f.Utils.getFileName(e);p.seafileAPI.sysAdminCreateSysRepoFolder(n.props.repoID,n.state.path,t).then(function(e){var t=new E.default(e.data),a=n.state.direntList;a.unshift(t),n.setState({direntList:a}),n.toggleNewFolderDialog()}).catch(function(e){var t=f.Utils.getErrorMsg(e);g.default.danger(t)})},n.openFolder=function(e){var t=f.Utils.joinPath(n.state.path,e.name);e.is_file||n.loadDirentList(t)},n.loadDirentList=function(e){var t=n.props.repoID;p.seafileAPI.sysAdminListRepoDirents(t,e).then(function(a){var r=a.data,o=r.is_system_library,i=r.repo_name,l=r.dirent_list,s=[];l.forEach(function(e){var t=new E.default(e);s.push(t)}),n.setState({loading:!1,repoName:i,isSystemRepo:o,direntList:s,path:e},function(){var a=m.siteRoot+"sys/libraries/"+t+"/"+encodeURIComponent(n.state.repoName)+f.Utils.encodePath(e);window.history.replaceState({url:a,path:e},e,a)})}).catch(function(e){n.setState({loading:!1,errorMsg:f.Utils.getErrorMsg(e,!0)})})},n.deleteDirent=function(e){var t=f.Utils.joinPath(n.state.path,e.name);p.seafileAPI.sysAdminDeleteRepoDirent(n.props.repoID,t).then(function(t){g.default.success((0,m.gettext)("Successfully deleted 1 item."));var a=n.state.direntList.filter(function(t){return t.name!=e.name});n.setState({direntList:a})}).catch(function(e){var t=f.Utils.getErrorMsg(e);g.default.danger(t)})},n.downloadDirent=function(e){var t=f.Utils.joinPath(n.state.path,e.name);p.seafileAPI.sysAdminGetRepoFileDownloadURL(n.props.repoID,t).then(function(e){location.href=e.data.download_url}).catch(function(e){var t=f.Utils.getErrorMsg(e);g.default.danger(t)})},n.openFileInput=function(){n.fileInput.current.click()},n.onFileInputChange=function(){if(n.fileInput.current.files.length){var e=n.fileInput.current.files[0],t=n.state.path;p.seafileAPI.sydAdminGetSysRepoItemUploadURL(t).then(function(a){var r=new FormData;r.append("parent_dir",t),r.append("file",e),(0,d.post)(a.data.upload_link,r).then(function(e){var t=e.data[0],a=new E.default({is_file:!0,obj_name:t.name,file_size:f.Utils.bytesToSize(t.size),last_update:(new Date).getTime()}),r=n.state.direntList,o=r.filter(function(e){return!e.is_file});r.splice(o.length,0,a),n.setState({direntList:r})})}).catch(function(e){var t=f.Utils.getErrorMsg(e);g.default.danger(t)})}},n.checkDuplicatedName=function(e){return n.state.direntList.some(function(t){return t.name===e})},n.fileInput=u.default.createRef(),n.state={loading:!0,errorMsg:"",isSystemRepo:!1,repoName:"",path:"",direntList:[],isNewFolderDialogOpen:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.loadDirentList("/")}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.errorMsg,a=e.repoName,r=e.direntList,o=e.isSystemRepo,i=e.path,l=e.isNewFolderDialogOpen,d=this.props.repoID;return u.default.createElement(s.Fragment,null,o?u.default.createElement(_.default,null,u.default.createElement(s.Fragment,null,u.default.createElement("input",{className:"d-none",type:"file",onChange:this.onFileInputChange,ref:this.fileInput}),u.default.createElement(c.Button,{className:"operation-item",onClick:this.openFileInput},(0,m.gettext)("Upload")),u.default.createElement(c.Button,{className:"operation-item",onClick:this.toggleNewFolderDialog},(0,m.gettext)("New Folder")))):u.default.createElement(_.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path align-items-center"},u.default.createElement(x.default,{isSystemRepo:o,repoID:d,repoName:a,currentPath:i,onPathClick:this.onPathClick})),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(C.default,{loading:t,errorMsg:n,fromSystemRepo:o,direntList:r,openFolder:this.openFolder,deleteDirent:this.deleteDirent,downloadDirent:this.downloadDirent})))),l&&u.default.createElement(b.default,{parentPath:i,checkDuplicatedName:this.checkDuplicatedName,onAddFolder:this.createNewFolder,addFolderCancel:this.toggleNewFolderDialog}))}}]),t}(s.Component);t.default=O},2179:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(t){a(this,e),this.name=t.obj_name,this.mtime=t.last_update,this.size=t.file_size,this.is_file=t.is_file}return r(e,[{key:"isDir",value:function(){return!this.is_file}}]),e}();t.default=o},2180:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(1),p=n(3),m={repoName:d.default.string.isRequired,currentPath:d.default.string.isRequired,onPathClick:d.default.func.isRequired,repoID:d.default.string.isRequired},h=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,c=Array(l),d=0;d<l;d++)c[d]=arguments[d];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.onPathClick=function(e){var t=p.Utils.getEventData(e,"path");a.props.onPathClick(t)},a.turnPathToLink=function(e){e="/"===e[e.length-1]?e.slice(0,e.length-1):e;var t=e.split("/"),n="";return t.map(function(e,r){if(""!==e)return r===t.length-1?u.default.createElement(s.Fragment,{key:r},u.default.createElement("span",{className:"path-split"},"/"),u.default.createElement("span",{className:"path-file-name"},e)):(n+="/"+e,u.default.createElement(s.Fragment,{key:r},u.default.createElement("span",{className:"path-split"},"/"),u.default.createElement("a",{className:"path-link","data-path":n,onClick:a.onPathClick},e)))})},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.isSystemRepo,n=e.currentPath,a=e.repoName,r=this.turnPathToLink(n);return u.default.createElement("div",{className:"path-container"},t?u.default.createElement("a",{href:f.siteRoot+"sys/system-library/"},(0,f.gettext)("System")):u.default.createElement("a",{href:f.siteRoot+"sys/all-libraries/"},(0,f.gettext)("All")),u.default.createElement("span",{className:"path-split"},"/"),"/"===n||""===n?u.default.createElement("span",{className:"path-repo-name"},a):u.default.createElement("a",{className:"path-link","data-path":"/",onClick:this.onPathClick},a),r)}}]),t}(u.default.Component);h.propTypes=m,t.default=h},2181:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(7),m=a(p),h=n(1),g=n(3),v=n(8),b=a(v),y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.openFolder=function(){n.props.openFolder(n.props.dirent)},n.deleteDirent=function(e){e.preventDefault(),n.props.deleteDirent(n.props.dirent)},n.downloadDirent=function(e){e.preventDefault(),n.props.downloadDirent(n.props.dirent)},n.state={isOpIconShown:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state,t=e.isOpIconShown,n=(e.isDeleteDialogOpen,this.props),a=n.dirent,r=n.fromSystemRepo,o=g.Utils.getDirentIcon(a);return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut},u.default.createElement("td",{className:"text-center"},u.default.createElement("img",{src:o,width:"24",alt:""})),u.default.createElement("td",null,a.is_file?a.name:u.default.createElement(f.Link,{to:"#",onClick:this.openFolder},a.name)),u.default.createElement("td",null,t&&r&&u.default.createElement("a",{href:"#",className:"op-icon sf2-icon-delete",title:(0,h.gettext)("Delete"),onClick:this.deleteDirent}),t&&a.is_file&&u.default.createElement("a",{href:"#",className:"op-icon sf2-icon-download",title:(0,h.gettext)("Download"),onClick:this.downloadDirent})),u.default.createElement("td",null,a.size),u.default.createElement("td",null,(0,m.default)(a.mtime).fromNow())))}}]),t}(u.default.Component),E={direntList:d.default.array.isRequired},w=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.direntList;return n?u.default.createElement(b.default,null):a?u.default.createElement("p",{className:"error text-center mt-4"},a):u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"5%"}),u.default.createElement("th",{width:"55%"},(0,h.gettext)("Name")),u.default.createElement("th",{width:"10%"}),u.default.createElement("th",{width:"15%"},(0,h.gettext)("Size")),u.default.createElement("th",{width:"15%"},(0,h.gettext)("Last Update")))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(y,{key:n,dirent:t,openFolder:e.props.openFolder,deleteDirent:e.props.deleteDirent,downloadDirent:e.props.downloadDirent,fromSystemRepo:e.props.fromSystemRepo})}))))}}]),t}(u.default.Component);w.propTypes=E,t.default=w},2182:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(16),d=n(6),f=n(3),p=n(4),m=n(1),h=n(5),g=a(h),v=n(2183),b=a(v),y=n(31),E=a(y),w=n(474),_=a(w),S=n(993),x=a(S),P=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleCreateGroupDialog=function(){n.setState({isCreateGroupDialogOpen:!n.state.isCreateGroupDialogOpen})},n.getGroupListByPage=function(e){p.seafileAPI.sysAdminListAllGroups(e,n.state.perPage).then(function(e){n.setState({loading:!1,groupList:e.data.groups,pageInfo:e.data.page_info})}).catch(function(e){n.setState({loading:!1,errorMsg:f.Utils.getErrorMsg(e,!0)})})},n.resetPerPage=function(e){n.setState({perPage:e},function(){n.getGroupListByPage(1)})},n.createGroup=function(e,t){p.seafileAPI.sysAdminCreateNewGroup(e,t).then(function(e){var t=n.state.groupList;t.unshift(e.data),n.setState({groupList:t}),n.toggleCreateGroupDialog()}).catch(function(e){var t=f.Utils.getErrorMsg(e);g.default.danger(t)})},n.deleteGroup=function(e){p.seafileAPI.sysAdminDismissGroupByID(e).then(function(t){var a=n.state.groupList.filter(function(t){return t.id!=e});n.setState({groupList:a}),g.default.success((0,m.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=f.Utils.getErrorMsg(e);g.default.danger(t)})},n.transferGroup=function(e,t){p.seafileAPI.sysAdminTransferGroup(t,e).then(function(t){var a=n.state.groupList.map(function(n){return n.id==e&&(n=t.data),n});n.setState({groupList:a}),g.default.success((0,m.gettext)("Successfully transferred the group."))}).catch(function(e){var t=f.Utils.getErrorMsg(e);g.default.danger(t)})},n.getSearch=function(){return u.default.createElement(_.default,{placeholder:(0,m.gettext)("Search groups by name"),submit:n.searchGroups})},n.searchGroups=function(e){(0,c.navigate)(m.siteRoot+"sys/search-groups/?name="+encodeURIComponent(e))},n.state={loading:!0,errorMsg:"",groupList:[],pageInfo:{},perPage:25,isCreateGroupDialogOpen:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=void 0===a?1:a,o=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||o),currentPage:parseInt(t.get("page")||r)},function(){e.getGroupListByPage(e.state.currentPage)})}},{key:"render",value:function(){var e=this.state.isCreateGroupDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement(E.default,{search:this.getSearch()},u.default.createElement(s.Fragment,null,u.default.createElement(d.Button,{className:"operation-item",onClick:this.toggleCreateGroupDialog},(0,m.gettext)("New Group")),u.default.createElement("a",{className:"btn btn-secondary operation-item",href:m.siteRoot+"sys/groupadmin/export-excel/"},(0,m.gettext)("Export Excel")))),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,m.gettext)("Groups"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(x.default,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.groupList,pageInfo:this.state.pageInfo,deleteGroup:this.deleteGroup,transferGroup:this.transferGroup,getListByPage:this.getGroupListByPage,resetPerPage:this.resetPerPage,curPerPage:this.state.perPage})))),e&&u.default.createElement(b.default,{createGroup:this.createGroup,toggleDialog:this.toggleCreateGroupDialog}))}}]),t}(s.Component);t.default=P},2183:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(40),h=a(m),g={createGroup:d.default.func.isRequired,toggleDialog:d.default.func.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleRepoNameChange=function(e){e.target.value.trim()?n.setState({isSubmitBtnActive:!0}):n.setState({isSubmitBtnActive:!1}),n.setState({groupName:e.target.value})},n.handleSubmit=function(){var e=n.state.groupName.trim();n.props.createGroup(e,n.state.ownerEmail)},n.handleSelectChange=function(e){n.setState({ownerEmail:e?e.email:""})},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.toggle=function(){n.props.toggleDialog()},n.state={groupName:"",ownerEmail:"",errMessage:"",isSubmitBtnActive:!1},n.newInput=u.default.createRef(),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.newInput.focus()}},{key:"render",value:function(){var e=this;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("New Group")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,{for:"groupName"},(0,p.gettext)("Name")),u.default.createElement(f.Input,{id:"groupName",onKeyPress:this.handleKeyPress,innerRef:function(t){e.newInput=t},value:this.state.groupName,onChange:this.handleRepoNameChange}),u.default.createElement(f.Label,{className:"mt-2"},(0,p.gettext)("Owner"),u.default.createElement("span",{className:"small text-secondary"},(0,p.gettext)("(If left blank, owner will be admin)"))),u.default.createElement(h.default,{isMulti:!1,className:"reviewer-select",placeholder:(0,p.gettext)("Select a user"),onSelectChange:this.handleSelectChange}))),this.state.errMessage&&u.default.createElement(f.Alert,{color:"danger"},this.state.errMessage)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);v.propTypes=g,t.default=v},2184:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(3),m=n(1),h=n(40),g=a(h),v={groupName:d.default.string.isRequired,transferGroup:d.default.func.isRequired,toggleDialog:d.default.func.isRequired},b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectChange=function(e){n.setState({selectedOption:e,submitBtnDisabled:null==e})},n.submit=function(){var e=n.state.selectedOption.email;n.props.transferGroup(e),n.props.toggleDialog()},n.state={selectedOption:null,submitBtnDisabled:!0},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state.submitBtnDisabled,t='<span class="op-target">'+p.Utils.HTMLescape(this.props.groupName)+"</span>",n=(0,m.gettext)("Transfer Group {placeholder} to").replace("{placeholder}",t);return u.default.createElement(f.Modal,{isOpen:!0},u.default.createElement(f.ModalHeader,{toggle:this.props.toggleDialog},u.default.createElement("span",{dangerouslySetInnerHTML:{__html:n}})),u.default.createElement(f.ModalBody,null,u.default.createElement(g.default,{ref:"userSelect",isMulti:!1,className:"reviewer-select",placeholder:(0,m.gettext)("Select a user"),onSelectChange:this.handleSelectChange})),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.props.toggleDialog},(0,m.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.submit,disabled:e},(0,m.gettext)("Submit"))))}}]),t}(u.default.Component);b.propTypes=v,t.default=b},2185:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(3),f=n(4),p=n(1),m=n(5),h=a(m),g=n(31),v=a(g),b=n(993),y=a(b),E=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getGroups=function(){var e=n.state.name;f.seafileAPI.sysAdminSearchGroups(e).then(function(e){n.setState({loading:!1,groupList:e.data.group_list})}).catch(function(e){n.setState({loading:!1,errorMsg:d.Utils.getErrorMsg(e,!0)})})},n.deleteGroup=function(e){f.seafileAPI.sysAdminDismissGroupByID(e).then(function(t){var a=n.state.groupList.filter(function(t){return t.id!=e});n.setState({groupList:a}),h.default.success((0,p.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.transferGroup=function(e,t){f.seafileAPI.sysAdminTransferGroup(t,e).then(function(t){var a=n.state.groupList.map(function(n){return n.id==e&&(n=t.data),n});n.setState({groupList:a}),h.default.success((0,p.gettext)("Successfully transferred the group."))}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.handleNameInputChange=function(e){n.setState({name:e.target.value},n.checkSubmitBtnActive)},n.checkSubmitBtnActive=function(){var e=n.state.name;n.setState({isSubmitBtnActive:e.trim()})},n.state={name:"",isSubmitBtnActive:!1,loading:!0,errorMsg:"",groupList:[],pageInfo:null},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=new URL(document.location).searchParams;this.setState({name:e.get("name")||""},this.getGroups)}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.isSubmitBtnActive;return u.default.createElement(s.Fragment,null,u.default.createElement(v.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,p.gettext)("Groups"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement("div",{className:"mt-4 mb-6"},u.default.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},(0,p.gettext)("Search Groups")),u.default.createElement("p",{className:"text-secondary small"},(0,p.gettext)("Tip: you can search by keyword in name.")),u.default.createElement(c.Form,null,u.default.createElement(c.FormGroup,{row:!0},u.default.createElement(c.Label,{for:"name",sm:1},(0,p.gettext)("Name")),u.default.createElement(c.Col,{sm:5},u.default.createElement(c.Input,{type:"text",name:"name",id:"name",value:t,onChange:this.handleNameInputChange}))),u.default.createElement(c.FormGroup,{row:!0},u.default.createElement(c.Col,{sm:{size:5,offset:1}},u.default.createElement("button",{className:"btn btn-outline-primary",disabled:!n,onClick:this.getGroups},(0,p.gettext)("Submit")))))),u.default.createElement("div",{className:"mt-4 mb-6"},u.default.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},(0,p.gettext)("Result")),u.default.createElement(y.default,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.groupList,deleteGroup:this.deleteGroup,transferGroup:this.transferGroup}))))))}}]),t}(s.Component);t.default=E},2186:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(3),d=n(4),f=n(1),p=n(5),m=a(p),h=n(33),g=a(h),v=n(8),b=a(v),y=n(107),E=a(y),w=n(31),_=a(w),S=n(67),x=a(S),P=n(994),C=a(P),O=window.sysadmin.pageOptions.enableSysAdminViewRepo,D=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items;if(n)return u.default.createElement(b.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var o=u.default.createElement(g.default,null,u.default.createElement("h2",null,(0,f.gettext)("No libraries"))),i=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"5%"}),u.default.createElement("th",{width:"30%"},(0,f.gettext)("Name")),u.default.createElement("th",{width:"30%"},(0,f.gettext)("Size")),u.default.createElement("th",{width:"25%"},(0,f.gettext)("Shared By")),u.default.createElement("th",{width:"10%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(M,{key:n,item:t,unshareRepo:e.props.unshareRepo})}))));return r.length?i:o}}]),t}(s.Component),M=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.setState({isOpIconShown:!0})},n.handleMouseLeave=function(){n.setState({isOpIconShown:!1})},n.toggleUnshareRepoDialog=function(e){e&&e.preventDefault(),n.setState({isUnshareRepoDialogOpen:!n.state.isUnshareRepoDialogOpen})},n.unshareRepo=function(){var e=n.props.item;n.props.unshareRepo(e.repo_id,e.name),n.toggleUnshareRepoDialog()},n.renderRepoName=function(){var e=n.props.item,t=e;return t.id=e.repo_id,t.name?f.isPro&&O&&!t.encrypted?u.default.createElement("a",{href:f.siteRoot+"sys/libraries/"+t.id+"/"},t.name):t.name:"--"},n.state={isOpIconShown:!1,isUnshareRepoDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state,t=e.isOpIconShown,n=e.isUnshareRepoDialogOpen,a=this.props.item,r=c.Utils.getLibIconUrl(a),o=c.Utils.getLibIconTitle(a),i='<span class="op-target">'+c.Utils.HTMLescape(a.name)+"</span>",l=(0,f.gettext)("Are you sure you want to unshare {placeholder} ?").replace("{placeholder}",i);return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,u.default.createElement("img",{src:r,title:o,alt:o,width:"24"})),u.default.createElement("td",null,this.renderRepoName()),u.default.createElement("td",null,c.Utils.bytesToSize(a.size)),u.default.createElement("td",null,u.default.createElement(x.default,{email:a.shared_by,name:a.shared_by_name})),u.default.createElement("td",null,u.default.createElement("a",{href:"#",className:"action-icon sf2-icon-x3 "+(t?"":"invisible"),title:(0,f.gettext)("Unshare"),onClick:this.toggleUnshareRepoDialog}))),n&&u.default.createElement(E.default,{title:(0,f.gettext)("Unshare Library"),message:l,executeOperation:this.unshareRepo,confirmBtnText:(0,f.gettext)("Unshare"),toggleDialog:this.toggleUnshareRepoDialog}))}}]),t}(s.Component),k=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.unshareRepo=function(e,t){d.seafileAPI.sysAdminUnshareRepoFromGroup(n.props.groupID,e).then(function(a){var r=n.state.repoList.filter(function(t){return t.repo_id!=e});n.setState({repoList:r});var o=(0,f.gettext)("Successfully unshared library {placeholder}").replace("{placeholder}",t);m.default.success(o)}).catch(function(e){var t=c.Utils.getErrorMsg(e);m.default.danger(t)})},n.state={loading:!0,errorMsg:"",groupName:"",repoList:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;d.seafileAPI.sysAdminListGroupRepos(this.props.groupID).then(function(t){e.setState({loading:!1,repoList:t.data.libraries,groupName:t.data.group_name})}).catch(function(t){e.setState({loading:!1,errorMsg:c.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement(_.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(C.default,{groupID:this.props.groupID,groupName:this.state.groupName,currentItem:"repos"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(D,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repoList,unshareRepo:this.unshareRepo})))))}}]),t}(s.Component);t.default=k},2187:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(3),f=n(4),p=n(1),m=n(5),h=a(m),g=n(33),v=a(g),b=n(8),y=a(b),E=n(107),w=a(E),_=n(2188),S=a(_),x=n(2189),P=a(x),C=n(31),O=a(C),D=n(67),M=a(D),k=n(994),T=a(k),L=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items;if(n)return u.default.createElement(y.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var o=u.default.createElement(v.default,null,u.default.createElement("h2",null,(0,p.gettext)("No members"))),i=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"5%"}),u.default.createElement("th",{width:"55%"},(0,p.gettext)("Name")),u.default.createElement("th",{width:"30%"},(0,p.gettext)("Role")),u.default.createElement("th",{width:"10%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(N,{key:n,item:t,removeMember:e.props.removeMember,updateMemberRole:e.props.updateMemberRole})}))));return r.length?i:o}}]),t}(s.Component),N=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.setState({isOpIconShown:!0})},n.handleMouseLeave=function(){n.setState({isOpIconShown:!1})},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.removeMember=function(){var e=n.props.item;n.props.removeMember(e.email,e.name),n.toggleDeleteDialog()},n.updateMemberRole=function(e){n.props.updateMemberRole(n.props.item.email,e)},n.state={isOpIconShown:!1,isDeleteDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state,t=e.isOpIconShown,n=e.isDeleteDialogOpen,a=this.props.item,r='<span class="op-target">'+d.Utils.HTMLescape(a.name)+"</span>",o=(0,p.gettext)("Are you sure you want to remove {placeholder} ?").replace("{placeholder}",r);return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,u.default.createElement("img",{src:a.avatar_url,alt:"",className:"rounded-circle",width:"24"})),u.default.createElement("td",null,u.default.createElement(M.default,{email:a.email,name:a.name})),u.default.createElement("td",null,"Owner"==a.role?(0,p.gettext)("Owner"):u.default.createElement(P.default,{isTextMode:!0,isEditIconShow:t,roleOptions:["Member","Admin"],currentRole:a.role,onRoleChanged:this.updateMemberRole})),u.default.createElement("td",null,"Owner"!=a.role&&u.default.createElement("a",{href:"#",className:"action-icon sf2-icon-x3 "+(t?"":"invisible"),title:(0,p.gettext)("Remove"),onClick:this.toggleDeleteDialog}))),n&&u.default.createElement(w.default,{title:(0,p.gettext)("Remove Member"),message:o,executeOperation:this.removeMember,confirmBtnText:(0,p.gettext)("Remove"),toggleDialog:this.toggleDeleteDialog}))}}]),t}(s.Component),I=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleAddMemgerDialog=function(){n.setState({isAddMemberDialogOpen:!n.state.isAddMemberDialogOpen})},n.addMembers=function(e){f.seafileAPI.sysAdminAddGroupMember(n.props.groupID,e).then(function(e){var t=e.data.success;t.length&&(n.setState({memberList:t.concat(n.state.memberList)}),t.map(function(e){var t=(0,p.gettext)("Successfully added {email_placeholder}").replace("{email_placeholder}",e.email);h.default.success(t)})),e.data.failed.map(function(e){var t=(0,p.gettext)("Failed to add {email_placeholder}: {error_msg_placeholder}").replace("{email_placeholder}",e.email).replace("{error_msg_placeholder}",e.error_msg);h.default.danger(t,{duration:3})})}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.removeMember=function(e,t){f.seafileAPI.sysAdminDeleteGroupMember(n.props.groupID,e).then(function(a){var r=n.state.memberList.filter(function(t){return t.email!=e});n.setState({memberList:r}),h.default.success((0,p.gettext)("Successfully removed {placeholder}.").replace("{placeholder}",t))}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.updateMemberRole=function(e,t){var a="Admin"==t;f.seafileAPI.sysAdminUpdateGroupMemberRole(n.props.groupID,e,a).then(function(a){var r=n.state.memberList.map(function(n){return n.email==e&&(n.role=t),n});n.setState({memberList:r})}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.state={loading:!0,errorMsg:"",groupName:"",memberList:[],isAddMemberDialogOpen:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;f.seafileAPI.sysAdminListGroupMembers(this.props.groupID).then(function(t){e.setState({loading:!1,memberList:t.data.members,groupName:t.data.group_name})}).catch(function(t){e.setState({loading:!1,errorMsg:d.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){var e=this.state.isAddMemberDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement(O.default,null,u.default.createElement(c.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleAddMemgerDialog},(0,p.gettext)("Add Member"))),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(T.default,{currentItem:"members",groupID:this.props.groupID,groupName:this.state.groupName}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(L,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.memberList,removeMember:this.removeMember,updateMemberRole:this.updateMemberRole})))),e&&u.default.createElement(S.default,{addMembers:this.addMembers,toggle:this.toggleAddMemgerDialog}))}}]),t}(s.Component);t.default=I},2188:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(40),h=a(m),g={toggle:d.default.func.isRequired,addMembers:d.default.func.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectChange=function(e){n.setState({selectedOptions:e,isSubmitBtnDisabled:!e.length})},n.addMembers=function(){var e=n.state.selectedOptions.map(function(e){return e.email});n.props.addMembers(e),n.props.toggle()},n.state={selectedOptions:null,isSubmitBtnDisabled:!0},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state.isSubmitBtnDisabled;return u.default.createElement(f.Modal,{isOpen:!0},u.default.createElement(f.ModalHeader,{toggle:this.props.toggle},(0,p.gettext)("Add Member")),u.default.createElement(f.ModalBody,null,u.default.createElement(h.default,{ref:"userSelect",isMulti:!0,className:"reviewer-select",placeholder:(0,p.gettext)("Search users..."),onSelectChange:this.handleSelectChange})),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.props.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.addMembers,disabled:e},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);v.propTypes=g,t.default=v},2189:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(1),p=n(60),m=a(p),h={isTextMode:d.default.bool.isRequired,isEditIconShow:d.default.bool.isRequired,roleOptions:d.default.array.isRequired,currentRole:d.default.string.isRequired,onRoleChanged:d.default.func.isRequired},g=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.translateRoles=function(e){switch(e){case"Member":return(0,f.gettext)("Member");case"Admin":return(0,f.gettext)("Admin");default:return e}},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(m.default,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.roleOptions,currentOption:this.props.currentRole,onOptionChanged:this.props.onRoleChanged,translateOption:this.translateRoles})}}]),t}(u.default.Component);g.propTypes=h,t.default=g},2190:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(l);n(330);var u=function(e){function t(e){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"render",value:function(){return s.default.createElement("div",{className:"h-100 org-departments"},this.props.children)}}]),t}(s.default.Component);t.default=u},2191:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=(a(c),n(7)),f=a(d),p=n(4),m=n(31),h=a(m),g=n(13),v=a(g),b=n(995),y=a(b),E=n(996),w=a(E),_=n(997),S=a(_),x=n(1),P=n(998),C=a(P);n(330),f.default.locale(x.lang);var O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.listDepartGroups=function(){p.seafileAPI.sysAdminListAllDepartments().then(function(e){n.setState({groups:e.data.data})})},n.showDeleteDepartDialog=function(e){n.setState({showDeleteDepartDialog:!0,groupID:e.id,groupName:e.name})},n.showSetGroupQuotaDialog=function(e){n.setState({showSetGroupQuotaDialog:!0,groupID:e})},n.toggleAddDepartDialog=function(){n.setState({isShowAddDepartDialog:!n.state.isShowAddDepartDialog})},n.toggleCancel=function(){n.setState({showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1})},n.onDepartChanged=function(){n.listDepartGroups()},n.state={groups:null,groupID:"",groupName:"",showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1,isShowAddDepartDialog:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.listDepartGroups()}},{key:"render",value:function(){var e=this,t=this.state.groups,n=u.default.createElement(s.Fragment,null,u.default.createElement("button",{className:"btn btn-secondary operation-item",title:(0,x.gettext)("New Department"),onClick:this.toggleAddDepartDialog},(0,x.gettext)("New Department")),this.state.isShowAddDepartDialog&&u.default.createElement(v.default,null,u.default.createElement(y.default,{onDepartChanged:this.onDepartChanged,groupID:this.state.groupID,toggle:this.toggleAddDepartDialog})));return u.default.createElement(s.Fragment,null,u.default.createElement(h.default,{children:n}),u.default.createElement("div",{className:"main-panel-center flex-row h-100"},u.default.createElement("div",{className:"cur-view-container o-auto"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("div",{className:"fleft"},u.default.createElement("h3",{className:"sf-heading"},(0,x.gettext)("Departments")))),u.default.createElement("div",{className:"cur-view-content"},t&&t.length>0?u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"40%"},(0,x.gettext)("Name")),u.default.createElement("th",{width:"25%"},(0,x.gettext)("Created At")),u.default.createElement("th",{width:"20%"},(0,x.gettext)("Quota")),u.default.createElement("th",{width:"15%"}))),u.default.createElement("tbody",null,t.map(function(t,n){return u.default.createElement(s.Fragment,{key:t.id},u.default.createElement(C.default,{group:t,showDeleteDepartDialog:e.showDeleteDepartDialog,showSetGroupQuotaDialog:e.showSetGroupQuotaDialog}))}))):u.default.createElement("p",{className:"no-group"},(0,x.gettext)("No departments"))),this.state.showDeleteDepartDialog&&u.default.createElement(v.default,null,u.default.createElement(w.default,{toggle:this.toggleCancel,groupID:this.state.groupID,groupName:this.state.groupName,onDepartChanged:this.onDepartChanged})),this.state.showSetGroupQuotaDialog&&u.default.createElement(v.default,null,u.default.createElement(S.default,{toggle:this.toggleCancel,groupID:this.state.groupID,onDepartChanged:this.onDepartChanged})))))}}]),t}(u.default.Component);t.default=O},2192:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(7),p=a(f),m=n(16),h=n(4),g=n(3),v=n(5),b=a(v),y=n(31),E=a(y),w=n(13),_=a(w),S=n(995),x=a(S),P=n(2193),C=a(P),O=n(2194),D=a(O),M=n(2195),k=a(M),T=n(2196),L=a(T),N=n(996),I=a(N),Y=n(997),R=a(Y),A=n(1),j=n(998),Z=a(j),F=n(2197),B=a(F),X=n(2198),H=a(X);n(330),p.default.locale(A.lang);var J={groupID:d.default.string},U=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.listGroupRepo=function(e){h.seafileAPI.sysAdminListGroupRepos(e).then(function(e){n.setState({repos:e.data.libraries})}).catch(function(e){var t=g.Utils.getErrorMsg(e);b.default.danger(t)})},n.listMembers=function(e){h.seafileAPI.sysAdminGetDepartmentInfo(e,!0).then(function(e){n.setState({members:e.data.members,groups:e.data.groups,ancestorGroups:e.data.ancestor_groups,groupName:e.data.name})}).catch(function(e){var t=g.Utils.getErrorMsg(e);b.default.danger(t)})},n.listSubDepartGroups=function(e){h.seafileAPI.sysAdminGetDepartmentInfo(e,!0).then(function(e){n.setState({groups:e.data.groups})}).catch(function(e){var t=g.Utils.getErrorMsg(e);b.default.danger(t)})},n.toggleCancel=function(){n.setState({showDeleteMemberDialog:!1,showDeleteRepoDialog:!1,showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1})},n.onSubDepartChanged=function(){n.listSubDepartGroups(n.props.groupID)},n.onRepoChanged=function(){n.listGroupRepo(n.props.groupID)},n.onMemberChanged=function(){n.listMembers(n.props.groupID)},n.toggleItemFreezed=function(e){n.setState({isItemFreezed:e})},n.showDeleteMemberDialog=function(e){n.setState({showDeleteMemberDialog:!0,deletedMember:e})},n.showDeleteRepoDialog=function(e){n.setState({showDeleteRepoDialog:!0,deletedRepo:e})},n.toggleAddRepoDialog=function(){n.setState({isShowAddRepoDialog:!n.state.isShowAddRepoDialog})},n.toggleAddMemberDialog=function(){n.setState({isShowAddMemberDialog:!n.state.isShowAddMemberDialog})},n.toggleAddDepartDialog=function(){n.setState({isShowAddDepartDialog:!n.state.isShowAddDepartDialog})},n.showDeleteDepartDialog=function(e){n.setState({showDeleteDepartDialog:!0,subGroupID:e.id,subGroupName:e.name})},n.showSetGroupQuotaDialog=function(e){n.setState({showSetGroupQuotaDialog:!0,subGroupID:e})},n.state={groupName:"",isItemFreezed:!1,ancestorGroups:[],members:[],deletedMember:{},isShowAddMemberDialog:!1,showDeleteMemberDialog:!1,repos:[],deletedRepo:{},isShowAddRepoDialog:!1,showDeleteRepoDialog:!1,groups:[],subGroupID:"",subGroupName:"",isShowAddDepartDialog:!1,showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.groupID;this.listGroupRepo(e),this.listMembers(e)}},{key:"componentWillReceiveProps",value:function(e){this.props.groupID!==e.groupID&&(this.listGroupRepo(e.groupID),this.listMembers(e.groupID))}},{key:"render",value:function(){var e=this,t=this.state,n=t.members,a=t.repos,r=t.groups,o=this.props.groupID,i="btn btn-secondary operation-item",l=u.default.createElement(s.Fragment,null,o&&u.default.createElement(s.Fragment,null,u.default.createElement("button",{className:i,title:(0,A.gettext)("New Sub-department"),onClick:this.toggleAddDepartDialog},(0,A.gettext)("New Sub-department")),u.default.createElement("button",{className:i,title:(0,A.gettext)("Add Member"),onClick:this.toggleAddMemberDialog},(0,A.gettext)("Add Member")),u.default.createElement("button",{className:i,onClick:this.toggleAddRepoDialog,title:(0,A.gettext)("New Library")},(0,A.gettext)("New Library"))),this.state.isShowAddMemberDialog&&u.default.createElement(_.default,null,u.default.createElement(C.default,{toggle:this.toggleAddMemberDialog,onMemberChanged:this.onMemberChanged,groupID:o})),this.state.isShowAddRepoDialog&&u.default.createElement(_.default,null,u.default.createElement(k.default,{toggle:this.toggleAddRepoDialog,onRepoChanged:this.onRepoChanged,groupID:o})),this.state.isShowAddDepartDialog&&u.default.createElement(_.default,null,u.default.createElement(x.default,{onDepartChanged:this.onSubDepartChanged,parentGroupID:o,toggle:this.toggleAddDepartDialog})));return u.default.createElement(s.Fragment,null,u.default.createElement(E.default,{children:l}),u.default.createElement("div",{className:"main-panel-center flex-row h-100"},u.default.createElement("div",{className:"cur-view-container o-auto"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("div",{className:"fleft"},u.default.createElement("h3",{className:"sf-heading"},o?u.default.createElement(m.Link,{to:A.siteRoot+"sys/departments/"},(0,A.gettext)("Departments")):u.default.createElement("span",null,(0,A.gettext)("Departments")),this.state.ancestorGroups.map(function(e){var t=A.siteRoot+"sys/departments/"+e.id+"/";return u.default.createElement("span",{key:e.id}," / ",u.default.createElement(m.Link,{to:t},e.name))}),o&&u.default.createElement("span",null," / ",this.state.groupName)))),u.default.createElement("div",{className:"cur-view-subcontainer org-groups"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("div",{className:"fleft"},u.default.createElement("h3",{className:"sf-heading"},(0,A.gettext)("Sub-departments")))),u.default.createElement("div",{className:"cur-view-content"},r&&r.length>0?u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"40%"},(0,A.gettext)("Name")),u.default.createElement("th",{width:"25%"},(0,A.gettext)("Created At")),u.default.createElement("th",{width:"20%"},(0,A.gettext)("Quota")),u.default.createElement("th",{width:"15%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(s.Fragment,{key:t.id},u.default.createElement(Z.default,{group:t,showDeleteDepartDialog:e.showDeleteDepartDialog,showSetGroupQuotaDialog:e.showSetGroupQuotaDialog}))}))):u.default.createElement("p",{className:"no-group"},(0,A.gettext)("No sub-departments")))),u.default.createElement("div",{className:"cur-view-subcontainer org-members"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("div",{className:"fleft"},u.default.createElement("h3",{className:"sf-heading"},(0,A.gettext)("Members")))),u.default.createElement("div",{className:"cur-view-content"},n&&1===n.length&&"Owner"===n[0].role?u.default.createElement("p",{className:"no-member"},(0,A.gettext)("No members")):u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"5%"}),u.default.createElement("th",{width:"50%"},(0,A.gettext)("Name")),u.default.createElement("th",{width:"15%"},(0,A.gettext)("Role")),u.default.createElement("th",{width:"30%"}))),u.default.createElement("tbody",null,n.map(function(t,n){return u.default.createElement(s.Fragment,{key:n},u.default.createElement(B.default,{member:t,showDeleteMemberDialog:e.showDeleteMemberDialog,isItemFreezed:e.state.isItemFreezed,onMemberChanged:e.onMemberChanged,toggleItemFreezed:e.toggleItemFreezed,groupID:o}))}))))),u.default.createElement("div",{className:"cur-view-subcontainer org-libriries"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("div",{className:"fleft"},u.default.createElement("h3",{className:"sf-heading"},(0,A.gettext)("Libraries")))),a.length>0?u.default.createElement("div",{className:"cur-view-content"},u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"5%"}),u.default.createElement("th",{width:"50%"},(0,A.gettext)("Name")),u.default.createElement("th",{width:"30%"},(0,A.gettext)("Size")),u.default.createElement("th",{width:"15%"}))),u.default.createElement("tbody",null,a.map(function(t,n){return u.default.createElement(s.Fragment,{key:n},u.default.createElement(H.default,{repo:t,showDeleteRepoDialog:e.showDeleteRepoDialog}))})))):u.default.createElement("p",{className:"no-libraty"},(0,A.gettext)("No libraries")))),this.state.showDeleteMemberDialog&&u.default.createElement(_.default,null,u.default.createElement(D.default,{toggle:this.toggleCancel,onMemberChanged:this.onMemberChanged,member:this.state.deletedMember,groupID:o})),this.state.showDeleteRepoDialog&&u.default.createElement(_.default,null,u.default.createElement(L.default,{toggle:this.toggleCancel,onRepoChanged:this.onRepoChanged,repo:this.state.deletedRepo,groupID:o})),this.state.showDeleteDepartDialog&&u.default.createElement(_.default,null,u.default.createElement(I.default,{toggle:this.toggleCancel,groupID:this.state.subGroupID,groupName:this.state.subGroupName,onDepartChanged:this.onSubDepartChanged})),this.state.showSetGroupQuotaDialog&&u.default.createElement(_.default,null,u.default.createElement(R.default,{toggle:this.toggleCancel,groupID:this.state.subGroupID,onDepartChanged:this.onSubDepartChanged}))))}}]),t}(u.default.Component);U.propTypes=J,t.default=U},2193:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(4),h=n(3),g=n(5),v=a(g),b=n(40),y=a(b),E={toggle:d.default.func.isRequired,groupID:d.default.string.isRequired,onMemberChanged:d.default.func.isRequired},w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectChange=function(e){n.setState({selectedOption:e})},n.handleSubmit=function(){if(n.state.selectedOption){var e=n.state.selectedOption.map(function(e){return e.email});n.refs.orgSelect.clearSelect(),n.setState({errMessage:[]}),m.seafileAPI.sysAdminAddGroupMember(n.props.groupID,e).then(function(e){n.setState({selectedOption:null}),e.data.failed.length>0&&n.setState({errMessage:e.data.failed[0].error_msg}),e.data.success.length>0&&(n.props.onMemberChanged(),n.props.toggle())}).catch(function(e){var t=h.Utils.getErrorMsg(e);v.default.danger(t)})}},n.state={selectedOption:null,errMessage:""},n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.props.toggle},u.default.createElement(f.ModalHeader,{toggle:this.props.toggle},(0,p.gettext)("Add Member")),u.default.createElement(f.ModalBody,null,u.default.createElement(y.default,{placeholder:(0,p.gettext)("Search users..."),onSelectChange:this.handleSelectChange,ref:"orgSelect",isMulti:!0,className:"org-add-member-select"}),this.state.errMessage&&u.default.createElement("p",{className:"error"},this.state.errMessage)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit},(0,p.gettext)("Submit")),u.default.createElement(f.Button,{color:"secondary",onClick:this.props.toggle},(0,p.gettext)("Cancel"))))}}]),t}(u.default.Component);w.propTypes=E,t.default=w},2194:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(4),h=n(3),g=n(5),v=a(g),b={member:d.default.object.isRequired,groupID:d.default.string.isRequired,toggle:d.default.func.isRequired,onMemberChanged:d.default.func.isRequired},y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.deleteMember=function(){var e=n.props.member.email;m.seafileAPI.sysAdminDeleteGroupMember(n.props.groupID,e).then(function(e){e.data.success&&(n.props.onMemberChanged(),n.props.toggle())}).catch(function(e){var t=h.Utils.getErrorMsg(e);v.default.danger(t)})},n}return i(t,e),l(t,[{key:"render",value:function(){var e=(0,p.gettext)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+h.Utils.HTMLescape(this.props.member.name)+"</span>"),u.default.createElement(f.Modal,{isOpen:!0,toggle:this.props.toggle},u.default.createElement(f.ModalHeader,{toggle:this.props.toggle},(0,p.gettext)("Delete Member")),u.default.createElement(f.ModalBody,null,u.default.createElement("div",{dangerouslySetInnerHTML:{__html:e}})),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"primary",onClick:this.deleteMember},(0,p.gettext)("Delete")),u.default.createElement(f.Button,{color:"secondary",onClick:this.props.toggle},(0,p.gettext)("Cancel"))))}}]),t}(u.default.Component);y.propTypes=b,t.default=y},2195:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(4),h=n(3),g={toggle:d.default.func.isRequired,groupID:d.default.string.isRequired,onRepoChanged:d.default.func.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSubmit=function(){n.validateName()&&m.seafileAPI.sysAdminAddRepoInDepartment(n.props.groupID,n.state.repoName.trim()).then(function(e){n.props.toggle(),n.props.onRepoChanged()}).catch(function(e){var t=h.Utils.getErrorMsg(e);n.setState({errMessage:t})})},n.validateName=function(){var e="";return!!n.state.repoName.trim().length||(e=(0,p.gettext)("Name is required"),n.setState({errMessage:e}),!1)},n.handleChange=function(e){n.setState({repoName:e.target.value})},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.state={repoName:"",errMessage:""},n.newInput=u.default.createRef(),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.props.toggle},u.default.createElement(f.ModalHeader,{toggle:this.props.toggle},(0,p.gettext)("New Library")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,{for:"repoName"},(0,p.gettext)("Name")),u.default.createElement(f.Input,{id:"repoName",onKeyPress:this.handleKeyPress,value:this.state.repoName,onChange:this.handleChange,innerRef:function(t){e.newInput=t}}))),this.state.errMessage&&u.default.createElement("p",{className:"error"},this.state.errMessage)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);v.propTypes=g,t.default=v},2196:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(4),h=n(3),g=n(5),v=a(g),b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.deleteRepo=function(){m.seafileAPI.sysAdminDeleteRepoInDepartment(n.props.groupID,n.props.repo.repo_id).then(function(e){e.data.success&&(n.props.onRepoChanged(),n.props.toggle())}).catch(function(e){var t=h.Utils.getErrorMsg(e);v.default.danger(t)})},n}return i(t,e),l(t,[{key:"render",value:function(){var e=(0,p.gettext)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+h.Utils.HTMLescape(this.props.repo.name)+"</span>"),u.default.createElement(f.Modal,{isOpen:!0,toggle:this.props.toggle},u.default.createElement(f.ModalHeader,{toggle:this.props.toggle},(0,p.gettext)("Delete Library")),u.default.createElement(f.ModalBody,null,u.default.createElement("div",{dangerouslySetInnerHTML:{__html:e}})),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"primary",onClick:this.deleteRepo},(0,p.gettext)("Delete")),u.default.createElement(f.Button,{color:"secondary",onClick:this.props.toggle},(0,p.gettext)("Cancel"))))}}]),t}(u.default.Component),y={repo:d.default.object.isRequired,toggle:d.default.func.isRequired,groupID:d.default.string.isRequired,onRepoChanged:d.default.func.isRequired};b.propTypes=y,t.default=b},2197:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(4),p=n(3),m=n(5),h=a(m),g=n(445),v=a(g),b=n(67),y=a(b),E={groupID:d.default.string.isRequired,member:d.default.object.isRequired,isItemFreezed:d.default.bool.isRequired,onMemberChanged:d.default.func.isRequired,showDeleteMemberDialog:d.default.func.isRequired,toggleItemFreezed:d.default.func.isRequired},w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.props.isItemFreezed||n.setState({highlight:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({highlight:!1})},n.toggleMemberRoleMenu=function(){n.setState({showRoleMenu:!n.state.showRoleMenu})},n.onChangeUserRole=function(e){var t="Admin"===e;f.seafileAPI.sysAdminUpdateGroupMemberRole(n.props.groupID,n.props.member.email,t).then(function(e){n.props.onMemberChanged()}).catch(function(e){var t=p.Utils.getErrorMsg(e);h.default.danger(t)}),n.setState({highlight:!1})},n.state={highlight:!1,showRoleMenu:!1},n.roles=["Admin","Member"],n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.member,t=this.state.highlight;return"Owner"===e.role?null:u.default.createElement("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("td",null,u.default.createElement("img",{src:e.avatar_url,alt:"member-header",width:"24",className:"avatar"})),u.default.createElement("td",null,u.default.createElement(y.default,{email:e.email,name:e.name})),u.default.createElement("td",null,u.default.createElement(v.default,{isTextMode:!0,isEditIconShow:t,currentRole:e.role,roles:this.roles,onRoleChanged:this.onChangeUserRole,toggleItemFreezed:this.props.toggleItemFreezed})),this.props.isItemFreezed?u.default.createElement("td",null):u.default.createElement("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteMemberDialog.bind(this,e)},u.default.createElement("span",{className:"sf2-icon-x3 action-icon "+(t?"":"vh"),title:"Delete"})))}}]),t}(u.default.Component);w.propTypes=E,t.default=w},2198:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(3),p=n(1),m={repo:d.default.object.isRequired,showDeleteRepoDialog:d.default.func.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.setState({highlight:!0})},n.onMouseLeave=function(){n.setState({highlight:!1})},n.state={highlight:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.repo,t=this.state.highlight,n=f.Utils.getLibIconUrl(e);return u.default.createElement("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("td",null,u.default.createElement("img",{src:n,width:"24",alt:(0,p.gettext)("icon")})),u.default.createElement("td",null,u.default.createElement("a",{href:p.siteRoot+"sys/libraries/"+e.repo_id+"/"+e.name+"/"},e.name)),u.default.createElement("td",null,f.Utils.bytesToSize(e.size)," "),u.default.createElement("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteRepoDialog.bind(this,e)},u.default.createElement("span",{className:"sf2-icon-delete action-icon "+(t?"":"vh"),title:"Delete"})))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},2199:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(16),d=n(4),f=n(1),p=n(5),m=a(p),h=n(3),g=n(33),v=a(g),b=n(7),y=a(b),E=n(8),w=a(E),_=n(63),S=a(_),x=n(999),P=a(x),C=n(31),O=a(C),D=n(67),M=a(D),k=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPreviousPage=function(){n.props.getShareLinksByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getShareLinksByPage(n.props.currentPage+1)},n.sortByTime=function(e){e.preventDefault(),n.props.sortItems("ctime")},n.sortByCount=function(e){e.preventDefault(),n.props.sortItems("view_cnt")},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items,o=t.perPage,i=t.currentPage,l=t.hasNextPage,c=t.sortBy,d=t.sortOrder;if(n)return u.default.createElement(w.default,null);if(a)return u.default.createElement("p",{className:"error text-center"},a);var p=u.default.createElement(v.default,null,u.default.createElement("h2",null,(0,f.gettext)("No share links"))),m=u.default.createElement("span",{className:"fas fa-sort"}),h=u.default.createElement("span",{className:"fas "+("asc"==d?"fa-caret-up":"fa-caret-down")}),g=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"18%"},(0,f.gettext)("Name")),u.default.createElement("th",{width:"18%"},(0,f.gettext)("Token")),u.default.createElement("th",{width:"18%"},(0,f.gettext)("Owner")),u.default.createElement("th",{width:"15%"},u.default.createElement("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByTime},(0,f.gettext)("Created At")," ","ctime"==c?h:m)),u.default.createElement("th",{width:"10%"},u.default.createElement("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByCount},(0,f.gettext)("Count")," ","view_cnt"==c?h:m)),u.default.createElement("th",{width:"11%"},(0,f.gettext)("Expiration")),u.default.createElement("th",{width:"10%"}))),r&&u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(T,{key:n,item:t,deleteShareLink:e.props.deleteShareLink})}))),u.default.createElement(S.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:l,curPerPage:o,resetPerPage:this.props.resetPerPage}));return r.length?g:p}}]),t}(s.Component),T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.deleteShareLink=function(){n.props.deleteShareLink(n.props.item.token)},n.renderExpiration=function(){var e=n.props.item;if(!e.expire_date)return"--";var t=(0,y.default)(e.expire_date).format("YYYY-MM-DD"),a=(0,y.default)(e.expire_date).format("YYYY-MM-DD HH:mm:ss");return u.default.createElement("span",{className:e.is_expired?"error":"",title:a},t)},n.state={isOpIconShown:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state.isOpIconShown,t=this.props.item,n="action-icon sf2-icon-delete "+(e?"":"invisible");return u.default.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},u.default.createElement("td",null,t.obj_name),u.default.createElement("td",null,t.token),u.default.createElement("td",null,u.default.createElement(M.default,{email:t.creator_email,name:t.creator_name})),u.default.createElement("td",null,(0,y.default)(t.ctime).fromNow()),u.default.createElement("td",null,t.view_cnt),u.default.createElement("td",null,this.renderExpiration()),u.default.createElement("td",null,u.default.createElement("a",{href:"#",className:n,title:(0,f.gettext)("Remove"),onClick:this.deleteShareLink})))}}]),t}(s.Component),L=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getShareLinksByPage=function(e){var t=n.state,a=t.perPage,r=t.sortBy,o=t.sortOrder;d.seafileAPI.sysAdminListShareLinks(e,a,r,o).then(function(t){n.setState({shareLinkList:t.data.share_link_list,loading:!1,currentPage:e,hasNextPage:h.Utils.hasNextPage(e,a,t.data.count)})}).catch(function(e){n.setState({loading:!1,errorMsg:h.Utils.getErrorMsg(e,!0)})})},n.sortItems=function(e){n.setState({currentPage:1,sortBy:e,sortOrder:"asc"==n.state.sortOrder?"desc":"asc"},function(){var e=new URL(location.href),t=new URLSearchParams(e.search),a=n.state,r=a.currentPage,o=a.sortBy,i=a.sortOrder;t.set("page",r),t.set("order_by",o),t.set("direction",i),e.search=t.toString(),(0,c.navigate)(e.toString()),n.getShareLinksByPage(r)})},n.deleteShareLink=function(e){d.seafileAPI.sysAdminDeleteShareLink(e).then(function(t){var a=n.state.shareLinkList.filter(function(t){return t.token!=e});n.setState({shareLinkList:a})}).catch(function(e){var t=h.Utils.getErrorMsg(e);m.default.danger(t)})},n.resetPerPage=function(e){n.setState({perPage:e},function(){return n.getShareLinksByPage(n.initPage)})},n.state={loading:!0,errorMsg:"",shareLinkList:[],perPage:25,currentPage:1,hasNextPage:!1,sortBy:"",sortOrder:"asc"},n.initPage=1,n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage,o=n.sortBy,i=n.sortOrder;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a),sortBy:t.get("order_by")||o,sortOrder:t.get("direction")||i},function(){e.getShareLinksByPage(e.state.currentPage)})}},{key:"render",value:function(){var e=this.state,t=e.shareLinkList,n=e.currentPage,a=e.perPage,r=e.hasNextPage;return u.default.createElement(s.Fragment,null,u.default.createElement(O.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(P.default,{currentItem:"shareLinks"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(k,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:n,perPage:a,hasNextPage:r,getShareLinksByPage:this.getShareLinksByPage,resetPerPage:this.resetPerPage,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortItems:this.sortItems,deleteShareLink:this.deleteShareLink})))))}}]),t}(s.Component);t.default=L},22:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(0),l=a(i),s=n(10),u=a(s),c=n(23),d=a(c),f="undefined"!==typeof window&&"undefined"!==typeof window.document,p=function e(){var t=this;if(r(this,e),this._bindNotify=function(e){t.notifyHandler=e},this._bindGetToasts=function(e){t.getToastsHandler=e},this._bindCloseAll=function(e){t.closeAllHandler=e},this.getToasts=function(){return t.getToastsHandler()},this.closeAll=function(){return t.closeAllHandler()},this.notify=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,o({},n,{intent:"none"}))},this.success=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,o({},n,{intent:"success"}))},this.warning=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,o({},n,{intent:"warning"}))},this.danger=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,o({},n,{intent:"danger"}))},f){var n=document.createElement("div");n.setAttribute("data-evergreen-toaster-container",""),document.body.appendChild(n),u.default.render(l.default.createElement(d.default,{bindNotify:this._bindNotify,bindGetToasts:this._bindGetToasts,bindCloseAll:this._bindCloseAll}),n)}};t.default=p},2200:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(4),d=n(1),f=n(5),p=a(f),m=n(3),h=n(33),g=a(h),v=n(7),b=a(v),y=n(8),E=a(y),w=n(63),_=a(w),S=n(999),x=a(S),P=n(31),C=a(P),O=n(67),D=a(O),M=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPreviousPage=function(){n.props.getUploadLinksByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getUploadLinksByPage(n.props.currentPage+1)},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items,o=t.perPage,i=t.currentPage,l=t.hasNextPage;if(n)return u.default.createElement(E.default,null);if(a)return u.default.createElement("p",{className:"error text-center"},a);var c=u.default.createElement(g.default,null,u.default.createElement("h2",null,(0,d.gettext)("No upload links"))),f=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"18%"},(0,d.gettext)("Name")),u.default.createElement("th",{width:"18%"},(0,d.gettext)("Token")),u.default.createElement("th",{width:"18%"},(0,d.gettext)("Owner")),u.default.createElement("th",{width:"15%"},(0,d.gettext)("Created At")),u.default.createElement("th",{width:"10%"},(0,d.gettext)("Count")),u.default.createElement("th",{width:"11%"},(0,d.gettext)("Expiration")),u.default.createElement("th",{width:"10%"}))),r&&u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(k,{key:n,item:t,deleteUploadLink:e.props.deleteUploadLink})}))),u.default.createElement(_.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:l,curPerPage:o,resetPerPage:this.props.resetPerPage}));return r.length?f:c}}]),t}(s.Component),k=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.deleteUploadLink=function(){n.props.deleteUploadLink(n.props.item.token)},n.renderExpiration=function(){var e=n.props.item;if(!e.expire_date)return"--";var t=(0,b.default)(e.expire_date).format("YYYY-MM-DD"),a=(0,b.default)(e.expire_date).format("YYYY-MM-DD HH:mm:ss");return u.default.createElement("span",{className:e.is_expired?"error":"",title:a},t)},n.state={isOpIconShown:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state.isOpIconShown,t=this.props.item,n="action-icon sf2-icon-delete "+(e?"":"invisible");return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},u.default.createElement("td",null,t.path),u.default.createElement("td",null,t.token),u.default.createElement("td",null,u.default.createElement(D.default,{email:t.creator_email,name:t.creator_name})),u.default.createElement("td",null,(0,b.default)(t.ctime).fromNow()),u.default.createElement("td",null,t.view_cnt),u.default.createElement("td",null,this.renderExpiration()),u.default.createElement("td",null,u.default.createElement("a",{href:"#",className:n,title:(0,d.gettext)("Remove"),onClick:this.deleteUploadLink}))))}}]),t}(s.Component),T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getUploadLinksByPage=function(e){var t=n.state.perPage;c.seafileAPI.sysAdminListAllUploadLinks(e,t).then(function(a){n.setState({uploadLinkList:a.data.upload_link_list,loading:!1,currentPage:e,hasNextPage:m.Utils.hasNextPage(e,t,a.data.count)})}).catch(function(e){n.setState({loading:!1,errorMsg:m.Utils.getErrorMsg(e,!0)})})},n.deleteUploadLink=function(e){c.seafileAPI.sysAdminDeleteUploadLink(e).then(function(t){var a=n.state.uploadLinkList.filter(function(t){return t.token!=e});n.setState({uploadLinkList:a})}).catch(function(e){var t=m.Utils.getErrorMsg(e);p.default.danger(t)})},n.resetPerPage=function(e){n.setState({perPage:e},function(){return n.getUploadLinksByPage(n.initPage)})},n.state={loading:!0,errorMsg:"",uploadLinkList:[],perPage:25,currentPage:1,hasNextPage:!1},n.initPage=1,n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.getUploadLinksByPage(e.state.currentPage)})}},{key:"render",value:function(){var e=this.state,t=e.uploadLinkList,n=e.currentPage,a=e.perPage,r=e.hasNextPage;return u.default.createElement(s.Fragment,null,u.default.createElement(C.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(x.default,{currentItem:"uploadLinks"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(M,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:n,perPage:a,hasNextPage:r,getUploadLinksByPage:this.getUploadLinksByPage,resetPerPage:this.resetPerPage,deleteUploadLink:this.deleteUploadLink})))))}}]),t}(s.Component);t.default=T},2201:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(16),d=n(6),f=n(3),p=n(4),m=n(1),h=n(5),g=a(h),v=n(2202),b=a(v),y=n(31),E=a(y),w=n(474),_=a(w),S=n(1e3),x=a(S),P=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getItemsByPage=function(e){var t=n.state.perPage;p.seafileAPI.sysAdminListOrgs(e,t).then(function(a){n.setState({loading:!1,orgList:a.data.organizations,currentPage:e,hasNextPage:f.Utils.hasNextPage(e,t,a.data.total_count)})}).catch(function(e){n.setState({loading:!1,errorMsg:f.Utils.getErrorMsg(e,!0)})})},n.resetPerPage=function(e){n.setState({perPage:e},function(){n.getItemsByPage(1)})},n.toggleAddOrgDialog=function(){n.setState({isAddOrgDialogOpen:!n.state.isAddOrgDialogOpen})},n.updateRole=function(e,t){var a={};a.role=t,p.seafileAPI.sysAdminUpdateOrg(e,a).then(function(a){var r=n.state.orgList.map(function(n){return n.org_id==e&&(n.role=t),n});n.setState({orgList:r}),g.default.success((0,m.gettext)("Edit succeeded"))}).catch(function(e){var t=f.Utils.getErrorMsg(e);g.default.danger(t)})},n.addOrg=function(e){var t=e.orgName,a=e.ownerEmail,r=e.password;p.seafileAPI.sysAdminAddOrg(t,a,r).then(function(e){var t=n.state.orgList;t.unshift(e.data),n.setState({orgList:t})}).catch(function(e){var t=f.Utils.getErrorMsg(e);g.default.danger(t)})},n.deleteOrg=function(e){p.seafileAPI.sysAdminDeleteOrg(e).then(function(t){var a=n.state.orgList.filter(function(t){return t.org_id!=e});n.setState({orgList:a}),g.default.success((0,m.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=f.Utils.getErrorMsg(e);g.default.danger(t)})},n.getSearch=function(){return u.default.createElement(_.default,{placeholder:(0,m.gettext)("Search organizations"),submit:n.searchItems})},n.searchItems=function(e){(0,c.navigate)(m.siteRoot+"sys/search-organizations/?query="+encodeURIComponent(e))},n.state={loading:!0,errorMsg:"",orgList:[],currentPage:1,perPage:25,hasNextPage:!1,isAddOrgDialogOpen:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.getItemsByPage(e.state.currentPage)})}},{key:"render",value:function(){var e=this.state.isAddOrgDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement(E.default,{search:this.getSearch()},u.default.createElement(d.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleAddOrgDialog},(0,m.gettext)("Add Organization"))),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,m.gettext)("Organizations"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(x.default,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.orgList,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getListByPage:this.getItemsByPage,updateRole:this.updateRole,deleteOrg:this.deleteOrg})))),e&&u.default.createElement(b.default,{addOrg:this.addOrg,toggleDialog:this.toggleAddOrgDialog}))}}]),t}(s.Component);t.default=P},2202:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m={toggleDialog:d.default.func.isRequired,addOrg:d.default.func.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.checkSubmitBtnActive=function(){var e=n.state,t=e.name,a=e.email,r=e.password,o=e.passwordAgain,i=!0;i=""!=t.trim()&&""!=a.trim()&&""!=r.trim()&&""!=o.trim(),n.setState({isSubmitBtnActive:i})},n.toggle=function(){n.props.toggleDialog()},n.inputPassword=function(e){var t=e.target.value;n.setState({password:t},n.checkSubmitBtnActive)},n.inputPasswordAgain=function(e){var t=e.target.value;n.setState({passwordAgain:t},n.checkSubmitBtnActive)},n.inputEmail=function(e){var t=e.target.value;n.setState({email:t},n.checkSubmitBtnActive)},n.inputName=function(e){var t=e.target.value;n.setState({name:t},n.checkSubmitBtnActive)},n.handleSubmit=function(){var e=n.state,t=e.name,a=e.email,r=e.password;if(r!=e.passwordAgain)return void n.setState({errorMsg:(0,p.gettext)("Passwords do not match.")});var o={orgName:t.trim(),ownerEmail:a.trim(),password:r.trim()};n.props.addOrg(o),n.toggle()},n.state={name:"",email:"",password:"",passwordAgain:"",errorMsg:"",isSubmitBtnActive:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state,t=e.errorMsg,n=e.password,a=e.passwordAgain,r=e.email,o=e.name,i=e.isSubmitBtnActive;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("Add Organization")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,{autoComplete:"off"},u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,null,(0,p.gettext)("Name")),u.default.createElement(f.Input,{value:o,onChange:this.inputName})),u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,null,(0,p.gettext)("Owner"),u.default.createElement("span",{className:"small text-secondary ml-1 fas fa-question-circle",title:(0,p.gettext)("Owner can use admin panel in an organization, must be a new account.")})),u.default.createElement(f.Input,{value:r,onChange:this.inputEmail})),u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,null,(0,p.gettext)("Password")),u.default.createElement(f.Input,{type:"password",value:n,onChange:this.inputPassword})),u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,null,(0,p.gettext)("Password again")),u.default.createElement(f.Input,{type:"password",value:a,onChange:this.inputPasswordAgain}))),t&&u.default.createElement(f.Alert,{color:"danger"},t)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit,disabled:!i},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},2203:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(3),f=n(4),p=n(1),m=n(5),h=a(m),g=n(31),v=a(g),b=n(1e3),y=a(b),E=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getItems=function(){f.seafileAPI.sysAdminSearchOrgs(n.state.query.trim()).then(function(e){n.setState({loading:!1,orgList:e.data.organization_list})}).catch(function(e){n.setState({loading:!1,errorMsg:d.Utils.getErrorMsg(e,!0)})})},n.updateRole=function(e,t){var a={};a.role=t,f.seafileAPI.sysAdminUpdateOrg(e,a).then(function(a){var r=n.state.orgList.map(function(n){return n.org_id==e&&(n.role=t),n});n.setState({orgList:r}),h.default.success((0,p.gettext)("Edit succeeded"))}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.deleteOrg=function(e){f.seafileAPI.sysAdminDeleteOrg(e).then(function(t){var a=n.state.orgList.filter(function(t){return t.org_id!=e});n.setState({orgList:a}),h.default.success((0,p.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.handleInputChange=function(e){n.setState({query:e.target.value},n.checkSubmitBtnActive)},n.checkSubmitBtnActive=function(){var e=n.state.query;n.setState({isSubmitBtnActive:e.trim()})},n.state={query:"",isSubmitBtnActive:!1,loading:!0,errorMsg:"",orgList:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=new URL(document.location).searchParams;this.setState({query:e.get("query")||""},this.getItems)}},{key:"render",value:function(){var e=this.state,t=e.query,n=e.isSubmitBtnActive;return u.default.createElement(s.Fragment,null,u.default.createElement(v.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,p.gettext)("Organizations"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement("div",{className:"mt-4 mb-6"},u.default.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},(0,p.gettext)("Search Organizations")),u.default.createElement("p",{className:"text-secondary small"},(0,p.gettext)("Tip: you can search by keyword in name.")),u.default.createElement(c.Form,null,u.default.createElement(c.FormGroup,{row:!0},u.default.createElement(c.Label,{for:"name",sm:1},(0,p.gettext)("Name")),u.default.createElement(c.Col,{sm:5},u.default.createElement(c.Input,{type:"text",name:"query",id:"name",value:t,onChange:this.handleInputChange}))),u.default.createElement(c.FormGroup,{row:!0},u.default.createElement(c.Col,{sm:{size:5,offset:1}},u.default.createElement("button",{className:"btn btn-outline-primary",disabled:!n,onClick:this.getItems},(0,p.gettext)("Submit")))))),u.default.createElement("div",{className:"mt-4 mb-6"},u.default.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},(0,p.gettext)("Result")),u.default.createElement(y.default,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.orgList,updateRole:this.updateRole,deleteOrg:this.deleteOrg}))))))}}]),t}(s.Component);t.default=E},2204:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(3),d=n(4),f=n(1),p=n(5),m=a(p),h=n(8),g=a(h),v=n(360),b=a(v),y=n(2205),E=a(y),w=n(2206),_=a(w),S=n(31),x=a(S),P=n(527),C=a(P),O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleSetQuotaDialog=function(){n.setState({isSetQuotaDialogOpen:!n.state.isSetQuotaDialogOpen})},n.toggleSetNameDialog=function(){n.setState({isSetNameDialogOpen:!n.state.isSetNameDialogOpen})},n.toggleSetMaxUserNumberDialog=function(){n.setState({isSetMaxUserNumberDialogOpen:!n.state.isSetMaxUserNumberDialogOpen})},n.showEditIcon=function(e){return u.default.createElement("span",{title:(0,f.gettext)("Edit"),className:"fa fa-pencil-alt attr-action-icon",onClick:e})},n.state={isSetQuotaDialogOpen:!1,isSetNameDialogOpen:!1,isSetMaxUserNumberDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg;e.orgInfo;if(t)return u.default.createElement(g.default,null);if(n)return u.default.createElement("p",{className:"error text-center"},n);var a=this.props.orgInfo,r=a.org_name,o=a.users_count,i=a.max_user_number,l=a.groups_count,d=a.quota,p=a.quota_usage,m=this.state,h=m.isSetQuotaDialogOpen,v=m.isSetNameDialogOpen,y=m.isSetMaxUserNumberDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement("dl",{className:"m-0"},u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("Name")),u.default.createElement("dd",{className:"info-item-content"},r,this.showEditIcon(this.toggleSetNameDialog)),u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("Number of members")),u.default.createElement("dd",{className:"info-item-content"},o),i&&u.default.createElement(s.Fragment,null,u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("Max number of members")),u.default.createElement("dd",{className:"info-item-content"},i,this.showEditIcon(this.toggleSetMaxUserNumberDialog))),u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("Number of groups")),u.default.createElement("dd",{className:"info-item-content"},l),u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("Space Used")),u.default.createElement("dd",{className:"info-item-content"},c.Utils.bytesToSize(p)+" / "+(d>0?c.Utils.bytesToSize(d):"--"),this.showEditIcon(this.toggleSetQuotaDialog))),h&&u.default.createElement(b.default,{updateQuota:this.props.updateQuota,toggle:this.toggleSetQuotaDialog}),v&&u.default.createElement(E.default,{name:r,updateName:this.props.updateName,toggle:this.toggleSetNameDialog}),y&&u.default.createElement(_.default,{value:i,updateValue:this.props.updateMaxUserNumber,toggle:this.toggleSetMaxUserNumberDialog}))}}]),t}(s.Component),D=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateQuota=function(e){var t={quota:e};d.seafileAPI.sysAdminUpdateOrg(n.props.orgID,t).then(function(e){var t=Object.assign(n.state.orgInfo,{quota:e.data.quota});n.setState({orgInfo:t}),m.default.success((0,f.gettext)("Successfully set quota."))}).catch(function(e){var t=c.Utils.getErrorMsg(e);m.default.danger(t)})},n.updateName=function(e){var t={orgName:e};d.seafileAPI.sysAdminUpdateOrg(n.props.orgID,t).then(function(e){var t=Object.assign(n.state.orgInfo,{org_name:e.data.org_name});n.setState({orgInfo:t}),m.default.success((0,f.gettext)("Successfully set name."))}).catch(function(e){var t=c.Utils.getErrorMsg(e);m.default.danger(t)})},n.updateMaxUserNumber=function(e){var t={maxUserNumber:e};d.seafileAPI.sysAdminUpdateOrg(n.props.orgID,t).then(function(e){var t=Object.assign(n.state.orgInfo,{max_user_number:e.data.max_user_number});n.setState({orgInfo:t}),m.default.success((0,f.gettext)("Successfully set max number of members."))}).catch(function(e){var t=c.Utils.getErrorMsg(e);m.default.danger(t)})},n.state={loading:!0,errorMsg:"",orgInfo:{}},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;d.seafileAPI.sysAdminGetOrg(this.props.orgID).then(function(t){e.setState({loading:!1,orgInfo:t.data})}).catch(function(t){e.setState({loading:!1,errorMsg:c.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){var e=this.state.orgInfo;return u.default.createElement(s.Fragment,null,u.default.createElement(x.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(C.default,{currentItem:"info",orgID:this.props.orgID,orgName:e.org_name}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(O,{orgID:this.props.orgID,loading:this.state.loading,errorMsg:this.state.errorMsg,orgInfo:this.state.orgInfo,updateQuota:this.updateQuota,updateName:this.updateName,updateMaxUserNumber:this.updateMaxUserNumber})))))}}]),t}(s.Component);t.default=D},2205:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=(n(3),{toggle:d.default.func.isRequired,updateName:d.default.func.isRequired}),h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggle=function(){n.props.toggle()},n.handleInputChange=function(e){var t=e.target.value;n.setState({name:t,isSubmitBtnActive:""!=t.trim()})},n.handleKeyPress=function(e){"Enter"==e.key&&(n.handleSubmit(),e.preventDefault())},n.handleSubmit=function(){n.props.updateName(n.state.name.trim()),n.toggle()},n.state={name:n.props.name,isSubmitBtnActive:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.isSubmitBtnActive;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("Set Name")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.Input,{type:"text",value:t,onKeyPress:this.handleKeyPress,onChange:this.handleInputChange})))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit,disabled:!n},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},2206:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=(n(3),{toggle:d.default.func.isRequired,updateValue:d.default.func.isRequired}),h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggle=function(){n.props.toggle()},n.handleInputChange=function(e){var t=e.target.value;n.setState({value:t,isSubmitBtnActive:""!=t.trim()})},n.handleKeyPress=function(e){"Enter"==e.key&&(n.handleSubmit(),e.preventDefault())},n.handleSubmit=function(){n.props.updateValue(n.state.value.trim()),n.toggle()},n.state={value:n.props.value,isSubmitBtnActive:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state,t=e.value,n=e.isSubmitBtnActive;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("Set max number of members")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.Input,{type:"text",className:"form-control",value:t,onKeyPress:this.handleKeyPress,onChange:this.handleInputChange})))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit,disabled:!n},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},2207:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(7),f=a(d),p=n(3),m=n(4),h=n(1),g=n(5),v=a(g),b=n(33),y=a(b),E=n(8),w=a(E),_=n(991),S=a(_),x=n(988),P=a(x),C=n(107),O=a(C),D=n(132),M=a(D),k=n(31),T=a(k),L=n(67),N=a(L),I=n(527),Y=a(I),R=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items;if(n)return u.default.createElement(w.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var o=u.default.createElement(y.default,null,u.default.createElement("h2",null,(0,h.gettext)("No members"))),i=u.default.createElement(s.Fragment,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"25%"},(0,h.gettext)("Name")),u.default.createElement("th",{width:"20%"},(0,h.gettext)("Status")),u.default.createElement("th",{width:"20%"},(0,h.gettext)("Space Used")),u.default.createElement("th",{width:"30%"},(0,h.gettext)("Created At")," / ",(0,h.gettext)("Last Login")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(A,{key:n,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,updateStatus:e.props.updateStatus,deleteUser:e.props.deleteUser})}))));return r.length?i:o}}]),t}(s.Component),A=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.onMenuItemClick=function(e){switch(e){case"Delete":n.toggleDeleteDialog();break;case"Reset Password":n.toggleResetPasswordDialog()}},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.toggleResetPasswordDialog=function(e){e&&e.preventDefault(),n.setState({isResetPasswordDialogOpen:!n.state.isResetPasswordDialogOpen})},n.updateStatus=function(e){n.props.updateStatus(n.props.item.email,e)},n.deleteUser=function(){var e=n.props.item;n.props.deleteUser(e.org_id,e.email)},n.resetPassword=function(){m.seafileAPI.sysAdminResetUserPassword(n.props.item.email).then(function(e){v.default.success(e.data.reset_tip)}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.translateOperations=function(e){var t="";switch(e){case"Delete":t=(0,h.gettext)("Delete");break;case"Reset Password":t=(0,h.gettext)("Reset Password")}return t},n.state={isOpIconShown:!1,highlight:!1,isDeleteDialogOpen:!1,isResetPasswordDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.state,n=t.isOpIconShown,a=t.isDeleteDialogOpen,r=t.isResetPasswordDialogOpen,o='<span class="op-target">'+p.Utils.HTMLescape(e.name)+"</span>",i=(0,h.gettext)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",o),l=(0,h.gettext)("Are you sure you want to reset the password of {placeholder} ?").replace("{placeholder}",o);return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,u.default.createElement(N.default,{email:e.email,name:e.name})),u.default.createElement("td",null,u.default.createElement(S.default,{isTextMode:!0,isEditIconShow:n,currentStatus:e.active?"active":"inactive",statusOptions:["active","inactive"],onStatusChanged:this.updateStatus})),u.default.createElement("td",null,p.Utils.bytesToSize(e.quota_usage)+" / "+(e.quota_total>0?p.Utils.bytesToSize(e.quota_total):"--")),u.default.createElement("td",null,(0,f.default)(e.create_time).format("YYYY-MM-DD HH:mm:ss")," / ",e.last_login?(0,f.default)(e.last_login).fromNow():"--"),u.default.createElement("td",null,n&&e.email!=h.username&&u.default.createElement(M.default,{operations:["Delete","Reset Password"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),a&&u.default.createElement(O.default,{title:(0,h.gettext)("Delete Member"),message:i,executeOperation:this.deleteUser,confirmBtnText:(0,h.gettext)("Delete"),toggleDialog:this.toggleDeleteDialog}),r&&u.default.createElement(O.default,{title:(0,h.gettext)("Reset Password"),message:l,executeOperation:this.resetPassword,confirmBtnText:(0,h.gettext)("Reset"),toggleDialog:this.toggleResetPasswordDialog}))}}]),t}(s.Component),j=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleAddUserDialog=function(){n.setState({isAddUserDialogOpen:!n.state.isAddUserDialogOpen})},n.addUser=function(e){var t=e.email,a=e.name,r=e.password;m.seafileAPI.sysAdminAddOrgUser(n.props.orgID,t,a,r).then(function(e){var t=n.state.userList;t.unshift(e.data),n.setState({userList:t})}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.deleteUser=function(e,t){m.seafileAPI.sysAdminDeleteOrgUser(e,t).then(function(e){var a=n.state.userList.filter(function(e){return e.email!=t});n.setState({userList:a}),v.default.success((0,h.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.updateStatus=function(e,t){var a="active"==t;m.seafileAPI.sysAdminUpdateOrgUser(n.props.orgID,e,"active",a).then(function(t){var a=n.state.userList.map(function(n){return n.email==e&&(n.active=t.data.active),n});n.setState({userList:a})}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.state={loading:!0,errorMsg:"",orgName:"",userList:[],isAddUserDialogOpen:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;m.seafileAPI.sysAdminGetOrg(this.props.orgID).then(function(t){e.setState({orgName:t.data.org_name})}),m.seafileAPI.sysAdminListOrgUsers(this.props.orgID).then(function(t){e.setState({loading:!1,userList:t.data.users})}).catch(function(t){e.setState({loading:!1,errorMsg:p.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){var e=this.state,t=e.isAddUserDialogOpen,n=e.orgName;return u.default.createElement(s.Fragment,null,u.default.createElement(T.default,null,u.default.createElement(c.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleAddUserDialog},(0,h.gettext)("Add Member"))),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(Y.default,{currentItem:"users",orgID:this.props.orgID,orgName:n}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(R,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,updateStatus:this.updateStatus,deleteUser:this.deleteUser})))),t&&u.default.createElement(P.default,{addUser:this.addUser,toggleDialog:this.toggleAddUserDialog}))}}]),t}(s.Component);t.default=j},2208:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(7),d=a(c),f=n(3),p=n(4),m=n(1),h=n(5),g=a(h),v=n(33),b=a(v),y=n(8),E=a(y),w=n(107),_=a(w),S=n(31),x=a(S),P=n(67),C=a(P),O=n(527),D=a(O),M=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items;if(n)return u.default.createElement(E.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var o=u.default.createElement(b.default,null,u.default.createElement("h2",null,(0,m.gettext)("No groups"))),i=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"30%"},(0,m.gettext)("Name")),u.default.createElement("th",{width:"30%"},(0,m.gettext)("Creator")),u.default.createElement("th",{width:"30%"},(0,m.gettext)("Created At")),u.default.createElement("th",{width:"10%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(k,{key:n,item:t,deleteGroup:e.props.deleteGroup})}))));return r.length?i:o}}]),t}(s.Component),k=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.setState({isOpIconShown:!0})},n.handleMouseLeave=function(){n.setState({isOpIconShown:!1})},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.deleteGroup=function(){n.toggleDeleteDialog(),n.props.deleteGroup(n.props.item.group_id)},n.state={isOpIconShown:!1,isDeleteDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.state,n=t.isOpIconShown,a=t.isDeleteDialogOpen,r='<span class="op-target">'+f.Utils.HTMLescape(e.group_name)+"</span>",o=(0,m.gettext)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",r),i=0==e.parent_group_id?m.siteRoot+"sys/groups/"+e.group_id+"/libraries/":m.siteRoot+"sysadmin/#address-book/groups/"+e.group_id+"/";return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,u.default.createElement("a",{href:i},e.group_name)),u.default.createElement("td",null,u.default.createElement(C.default,{email:e.creator_email,name:e.creator_name})),u.default.createElement("td",null,(0,d.default)(e.created_at).format("YYYY-MM-DD HH:mm:ss")),u.default.createElement("td",null,u.default.createElement("a",{href:"#",className:"action-icon sf2-icon-delete "+(n?"":"invisible"),title:(0,m.gettext)("Delete"),onClick:this.toggleDeleteDialog}))),a&&u.default.createElement(_.default,{title:(0,m.gettext)("Delete Group"),message:o,executeOperation:this.deleteGroup,confirmBtnText:(0,m.gettext)("Delete"),toggleDialog:this.toggleDeleteDialog}))}}]),t}(s.Component),T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.deleteGroup=function(e){p.seafileAPI.sysAdminDismissGroupByID(e).then(function(t){var a=n.state.groupList.filter(function(t){return t.group_id!=e});n.setState({groupList:a}),g.default.success((0,m.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=f.Utils.getErrorMsg(e);g.default.danger(t)})},n.state={loading:!0,errorMsg:"",orgName:"",groupList:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;p.seafileAPI.sysAdminGetOrg(this.props.orgID).then(function(t){e.setState({orgName:t.data.org_name})}),p.seafileAPI.sysAdminListOrgGroups(this.props.orgID).then(function(t){e.setState({loading:!1,groupList:t.data.group_list})}).catch(function(t){e.setState({loading:!1,errorMsg:f.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement(x.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(D.default,{currentItem:"groups",orgID:this.props.orgID,orgName:this.state.orgName}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(M,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.groupList,deleteGroup:this.deleteGroup})))))}}]),t}(s.Component);t.default=T},2209:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(3),d=n(4),f=n(1),p=n(5),m=a(p),h=n(33),g=a(h),v=n(8),b=a(v),y=n(107),E=a(y),w=n(31),_=a(w),S=n(67),x=a(S),P=n(527),C=a(P),O=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items;if(n)return u.default.createElement(b.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var o=u.default.createElement(g.default,null,u.default.createElement("h2",null,(0,f.gettext)("No libraries"))),i=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"5%"}),u.default.createElement("th",{width:"30%"},(0,f.gettext)("Name")),u.default.createElement("th",{width:"35%"},(0,f.gettext)("ID")),u.default.createElement("th",{width:"20%"},(0,f.gettext)("Owner")),u.default.createElement("th",{width:"10%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(D,{key:n,item:t,deleteRepo:e.props.deleteRepo})}))));return r.length?i:o}}]),t}(s.Component),D=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.setState({isOpIconShown:!0})},n.handleMouseLeave=function(){n.setState({isOpIconShown:!1})},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.deleteRepo=function(){n.props.deleteRepo(n.props.item.repo_id)},n.state={isOpIconShown:!1,isDeleteDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.state,n=t.isOpIconShown,a=t.isDeleteDialogOpen,r=c.Utils.getLibIconUrl(e),o=c.Utils.getLibIconTitle(e),i='<span class="op-target">'+c.Utils.HTMLescape(e.repo_name)+"</span>",l=(0,f.gettext)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",i);return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,u.default.createElement("img",{src:r,title:o,alt:o,width:"24"})),u.default.createElement("td",null,e.repo_name),u.default.createElement("td",null,e.repo_id),u.default.createElement("td",null,e.owner_email?u.default.createElement(x.default,{email:e.owner_email,name:e.owner_name}):"--"),u.default.createElement("td",null,u.default.createElement("a",{href:"#",className:"action-icon sf2-icon-delete "+(n?"":"invisible"),title:(0,f.gettext)("Delete"),onClick:this.toggleDeleteDialog}))),a&&u.default.createElement(E.default,{title:(0,f.gettext)("Delete Library"),message:l,executeOperation:this.deleteRepo,confirmBtnText:(0,f.gettext)("Delete"),toggleDialog:this.toggleDeleteDialog}))}}]),t}(s.Component),M=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.deleteRepo=function(e){d.seafileAPI.sysAdminDeleteRepo(e).then(function(t){var a=n.state.repoList.filter(function(t){return t.repo_id!=e});n.setState({repoList:a}),m.default.success((0,f.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=c.Utils.getErrorMsg(e);m.default.danger(t)})},n.state={loading:!0,errorMsg:"",orgName:"",repoList:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;d.seafileAPI.sysAdminGetOrg(this.props.orgID).then(function(t){e.setState({orgName:t.data.org_name})}),d.seafileAPI.sysAdminListOrgRepos(this.props.orgID).then(function(t){e.setState({loading:!1,repoList:t.data.repo_list})}).catch(function(t){e.setState({loading:!1,errorMsg:c.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement(_.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(C.default,{currentItem:"repos",orgID:this.props.orgID,orgName:this.state.orgName}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(O,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repoList,deleteRepo:this.deleteRepo})))))}}]),t}(s.Component);t.default=M},2210:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(16),d=n(6),f=n(7),p=a(f),m=n(3),h=n(4),g=n(1),v=n(5),b=a(v),y=n(33),E=a(y),w=n(8),_=a(w),S=n(107),x=a(S),P=n(31),C=a(P),O=n(2211),D=a(O),M=n(63),k=a(M),T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPreviousPage=function(){n.props.getInstitutionsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getInstitutionsByPage(n.props.currentPage+1)},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items,o=t.perPage,i=t.currentPage,l=t.hasNextPage;if(n)return u.default.createElement(_.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var c=u.default.createElement(E.default,null,u.default.createElement("h2",null,(0,g.gettext)("No institutions"))),d=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"75%"},(0,g.gettext)("Name")),u.default.createElement("th",{width:"20%"},(0,g.gettext)("Created At")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(L,{key:n,item:t,deleteInstitution:e.props.deleteInstitution})}))),u.default.createElement(k.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:l,curPerPage:o,resetPerPage:this.props.resetPerPage}));return r.length?d:c}}]),t}(s.Component),L=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.setState({isOpIconShown:!0})},n.handleMouseLeave=function(){n.setState({isOpIconShown:!1})},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.deleteInstitution=function(){n.props.deleteInstitution(n.props.item.id)},n.state={isOpIconShown:!1,isDeleteDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.state,n=t.isOpIconShown,a=t.isDeleteDialogOpen,r='<span class="op-target">'+m.Utils.HTMLescape(e.name)+"</span>",o=(0,g.gettext)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",r);return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,u.default.createElement(c.Link,{to:g.siteRoot+"sys/institutions/"+e.id+"/info/"},e.name)),u.default.createElement("td",null,(0,p.default)(e.ctime).fromNow()),u.default.createElement("td",null,u.default.createElement("a",{href:"#",className:"action-icon sf2-icon-delete "+(n?"":"invisible"),title:(0,g.gettext)("Delete"),onClick:this.toggleDeleteDialog}))),a&&u.default.createElement(x.default,{title:(0,g.gettext)("Delete Institution"),message:o,executeOperation:this.deleteInstitution,confirmBtnText:(0,g.gettext)("Delete"),toggleDialog:this.toggleDeleteDialog}))}}]),t}(s.Component),N=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getInstitutionsByPage=function(e){var t=n.state.perPage;h.seafileAPI.sysAdminListInstitutions(e,t).then(function(a){n.setState({loading:!1,institutionList:a.data.institution_list,currentPage:e,hasNextPage:m.Utils.hasNextPage(e,t,a.data.total_count)})}).catch(function(e){n.setState({loading:!1,errorMsg:m.Utils.getErrorMsg(e,!0)})})},n.resetPerPage=function(e){n.setState({perPage:e},function(){return n.getInstitutionsByPage(n.initPage)})},n.toggleAddInstitutionDialog=function(){n.setState({isAddInstitutionDialogOpen:!n.state.isAddInstitutionDialogOpen})},n.addInstitution=function(e){h.seafileAPI.sysAdminAddInstitution(e).then(function(e){var t=n.state.institutionList;t.push(e.data),n.setState({institutionList:t})}).catch(function(e){var t=m.Utils.getErrorMsg(e);b.default.danger(t)})},n.deleteInstitution=function(e){h.seafileAPI.sysAdminDeleteInstitution(e).then(function(t){var a=n.state.institutionList.filter(function(t){return t.id!=e});n.setState({institutionList:a}),b.default.success((0,g.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=m.Utils.getErrorMsg(e);b.default.danger(t)})},n.state={loading:!0,errorMsg:"",institutionList:[],perPage:25,currentPage:1,hasNextPage:!1,isAddInstitutionDialogOpen:!1},n.initPage=1,n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.getInstitutionsByPage(e.state.currentPage)})}},{key:"render",value:function(){var e=this.state,t=e.isAddInstitutionDialogOpen,n=e.hasNextPage,a=e.currentPage,r=e.perPage;return u.default.createElement(s.Fragment,null,u.default.createElement(C.default,null,u.default.createElement(d.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleAddInstitutionDialog},(0,g.gettext)("Add Institution"))),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,g.gettext)("Institutions"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(T,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.institutionList,deleteInstitution:this.deleteInstitution,currentPage:a,perPage:r,hasNextPage:n,getInstitutionsByPage:this.getInstitutionsByPage,resetPerPage:this.resetPerPage})))),t&&u.default.createElement(D.default,{addInstitution:this.addInstitution,toggle:this.toggleAddInstitutionDialog}))}}]),t}(s.Component);t.default=N},2211:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m={toggle:d.default.func.isRequired,addInstitution:d.default.func.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){var t=e.target.value;n.setState({value:t,isSubmitBtnActive:""!=t.trim()})},n.handleSubmit=function(){n.toggle(),n.props.addInstitution(n.state.value.trim())},n.toggle=function(){n.props.toggle()},n.state={value:"",isSubmitBtnActive:!1},n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("Add institution")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement("p",null,(0,p.gettext)("Name")),u.default.createElement(f.FormGroup,null,u.default.createElement(f.Input,{value:this.state.value,onChange:this.handleChange})))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},2212:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(3),d=n(4),f=n(1),p=n(5),m=a(p),h=n(8),g=a(h),v=n(360),b=a(v),y=n(31),E=a(y),w=n(732),_=a(w),S=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleSetQuotaDialog=function(){n.setState({isSetQuotaDialogOpen:!n.state.isSetQuotaDialogOpen})},n.showEditIcon=function(e){return u.default.createElement("span",{title:(0,f.gettext)("Edit"),className:"fa fa-pencil-alt attr-action-icon",onClick:e})},n.state={isSetQuotaDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,a=e.institutionInfo;if(t)return u.default.createElement(g.default,null);if(n)return u.default.createElement("p",{className:"error text-center"},n);var r=a.name,o=a.user_count,i=a.quota_total,l=a.quota_used,d=this.state.isSetQuotaDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement("dl",{className:"m-0"},u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("Name")),u.default.createElement("dd",{className:"info-item-content"},r),u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("Number of members")),u.default.createElement("dd",{className:"info-item-content"},o),u.default.createElement("dt",{className:"info-item-heading"},(0,f.gettext)("Space Used")),u.default.createElement("dd",{className:"info-item-content"},c.Utils.bytesToSize(l)+" / "+(i>0?c.Utils.bytesToSize(i):"--"),this.showEditIcon(this.toggleSetQuotaDialog))),d&&u.default.createElement(b.default,{updateQuota:this.props.updateQuota,toggle:this.toggleSetQuotaDialog}))}}]),t}(s.Component),x=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateQuota=function(e){d.seafileAPI.sysAdminUpdateInstitution(n.props.institutionID,e).then(function(e){var t=Object.assign(n.state.institutionInfo,{quota_total:e.data.quota_total});n.setState({institutionInfo:t}),m.default.success((0,f.gettext)("Successfully set quota."))}).catch(function(e){var t=c.Utils.getErrorMsg(e);m.default.danger(t)})},n.state={loading:!0,errorMsg:"",institutionInfo:{}},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;d.seafileAPI.sysAdminGetInstitution(this.props.institutionID).then(function(t){e.setState({loading:!1,institutionInfo:t.data})}).catch(function(t){e.setState({loading:!1,errorMsg:c.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){var e=this.state.institutionInfo;return u.default.createElement(s.Fragment,null,u.default.createElement(E.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(_.default,{currentItem:"info",institutionID:this.props.institutionID,institutionName:e.name}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(S,{loading:this.state.loading,errorMsg:this.state.errorMsg,institutionInfo:this.state.institutionInfo,updateQuota:this.updateQuota})))))}}]),t}(s.Component);t.default=x},2213:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(7),f=a(d),p=n(3),m=n(4),h=n(1),g=n(5),v=a(g),b=n(33),y=a(b),E=n(8),w=a(E),_=n(63),S=a(_),x=n(132),P=a(x),C=n(2214),O=a(C),D=n(107),M=a(D),k=n(67),T=a(k),L=n(31),N=a(L),I=n(732),Y=a(I),R=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPage=function(){n.props.getInstitutionUsersByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getInstitutionUsersByPage(n.props.currentPage+1)},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items,o=t.perPage,i=t.currentPage,l=t.hasNextPage;if(n)return u.default.createElement(w.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var c=u.default.createElement(y.default,null,u.default.createElement("h2",null,(0,h.gettext)("No members"))),d=u.default.createElement(s.Fragment,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"25%"},(0,h.gettext)("Name")),u.default.createElement("th",{width:"10%"},(0,h.gettext)("Status")),u.default.createElement("th",{width:"20%"},(0,h.gettext)("Space Used")),u.default.createElement("th",{width:"40%"},(0,h.gettext)("Created At")," / ",(0,h.gettext)("Last Login")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(A,{key:n,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,setAdmin:e.props.setAdmin,deleteUser:e.props.deleteUser})}))),u.default.createElement(S.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:l,curPerPage:o,resetPerPage:this.props.resetPerPage}));return r.length?d:c}}]),t}(s.Component),A=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.toggleSetAdminDialog=function(e){e&&e.preventDefault(),n.setState({isSetAdminDialogOpen:!n.state.isSetAdminDialogOpen})},n.setAdmin=function(){n.props.setAdmin(n.props.item.email)},n.onMenuItemClick=function(e){switch(e){case"Delete":n.props.deleteUser(n.props.item.email);break;case"Set Admin":n.toggleSetAdminDialog()}},n.getOperations=function(){var e=[];return n.props.item.is_institution_admin||e.push("Set Admin"),e.push("Delete"),e},n.translateOperations=function(e){var t="";switch(e){case"Delete":t=(0,h.gettext)("Delete");break;case"Set Admin":t=(0,h.gettext)("Set Admin")}return t},n.state={isOpIconShown:!1,highlight:!1,isSetAdminDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.state,n=t.isOpIconShown,a=t.isSetAdminDialogOpen,r='<span class="op-target">'+p.Utils.HTMLescape(e.name)+"</span>",o=(0,h.gettext)("Are you sure you want to set {placeholder} as Admin?").replace("{placeholder}",r);return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,u.default.createElement(T.default,{email:e.email,name:e.name})),u.default.createElement("td",null,e.is_active?(0,h.gettext)("Active"):(0,h.gettext)("Inactive")),u.default.createElement("td",null,p.Utils.bytesToSize(e.quota_usage)+" / "+(e.quota_total>0?p.Utils.bytesToSize(e.quota_total):"--")),u.default.createElement("td",null,(0,f.default)(e.create_time).format("YYYY-MM-DD HH:mm:ss")," / ",e.last_login?(0,f.default)(e.last_login).fromNow():"--"),u.default.createElement("td",null,n&&u.default.createElement(P.default,{operations:this.getOperations(),translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),a&&u.default.createElement(M.default,{title:(0,h.gettext)("Set Admin"),message:o,executeOperation:this.setAdmin,toggleDialog:this.toggleSetAdminDialog,confirmBtnText:(0,h.gettext)("Set Admin")}))}}]),t}(s.Component),j=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getInstitutionUsersByPage=function(e){var t=n.state.perPage;m.seafileAPI.sysAdminListInstitutionUsers(n.props.institutionID,e,t).then(function(a){n.setState({loading:!1,userList:a.data.user_list,currentPage:e,hasNextPage:p.Utils.hasNextPage(e,t,a.data.total_count)})}).catch(function(e){n.setState({loading:!1,errorMsg:p.Utils.getErrorMsg(e,!0)})})},n.setAdmin=function(e){m.seafileAPI.sysAdminUpdateInstitutionUser(n.props.institutionID,e,!0).then(function(t){var a=n.state.userList.map(function(t){return t.email==e&&(t.is_institution_admin=!0),t});n.setState({userList:a}),v.default.success((0,h.gettext)("Success"))}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.toggleAddUserDialog=function(){n.setState({isAddUserDialogOpen:!n.state.isAddUserDialogOpen})},n.resetPerPage=function(e){n.setState({perPage:e},function(){return n.getInstitutionUsersByPage(n.initPage)})},n.addUser=function(e){m.seafileAPI.sysAdminAddInstitutionUserBatch(n.props.institutionID,e).then(function(e){n.toggleAddUserDialog();var t=e.data.success,a=e.data.failed;if(t.length){var r=n.state.userList.concat(t);n.setState({userList:r})}a.map(function(e){v.default.danger(e.error_msg)})}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.deleteUser=function(e){m.seafileAPI.sysAdminDeleteInstitutionUser(n.props.institutionID,e).then(function(t){var a=n.state.userList.filter(function(t){return t.email!=e});n.setState({userList:a}),v.default.success("success")}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.state={loading:!0,errorMsg:"",institutionName:"",userList:[],perPage:25,currentPage:1,hasNextPage:!1,isAddUserDialogOpen:!1},n.initPage=1,n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;m.seafileAPI.sysAdminGetInstitution(this.props.institutionID).then(function(t){e.setState({institutionName:t.data.name})});var t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.getInstitutionUsersByPage(e.state.currentPage)})}},{key:"render",value:function(){var e=this.state,t=e.isAddUserDialogOpen,n=e.institutionName,a=e.hasNextPage,r=e.currentPage,o=e.perPage;return u.default.createElement(s.Fragment,null,u.default.createElement(N.default,null,u.default.createElement(c.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleAddUserDialog},(0,h.gettext)("Add Member"))),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(Y.default,{currentItem:"members",institutionID:this.props.institutionID,institutionName:n}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(R,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,setAdmin:this.setAdmin,deleteUser:this.deleteUser,currentPage:r,perPage:o,hasNextPage:a,getInstitutionUsersByPage:this.getInstitutionUsersByPage,resetPerPage:this.resetPerPage})))),t&&u.default.createElement(O.default,{addUser:this.addUser,toggle:this.toggleAddUserDialog}))}}]),t}(s.Component);t.default=j},2214:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(40),h=a(m),g={toggle:d.default.func.isRequired,addUser:d.default.func.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectChange=function(e){n.setState({selectedOption:e})},n.handleSubmit=function(){if(n.state.selectedOption){var e=n.state.selectedOption.map(function(e){return e.email});n.props.addUser(e)}},n.state={selectedOption:[]},n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.props.toggle},u.default.createElement(f.ModalHeader,{toggle:this.props.toggle},(0,p.gettext)("Add Member")),u.default.createElement(f.ModalBody,null,u.default.createElement(h.default,{placeholder:(0,p.gettext)("Search users..."),onSelectChange:this.handleSelectChange,isMulti:!0,className:"org-add-member-select"})),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit},(0,p.gettext)("Submit")),u.default.createElement(f.Button,{color:"secondary",onClick:this.props.toggle},(0,p.gettext)("Cancel"))))}}]),t}(u.default.Component);v.propTypes=g,t.default=v},2215:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(7),d=a(c),f=n(3),p=n(4),m=n(1),h=n(5),g=a(h),v=n(33),b=a(v),y=n(8),E=a(y),w=n(132),_=a(w),S=n(107),x=a(S),P=n(67),C=a(P),O=n(31),D=a(O),M=n(732),k=a(M),T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items;if(n)return u.default.createElement(E.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var o=u.default.createElement(b.default,null,u.default.createElement("h2",null,(0,m.gettext)("No admins"))),i=u.default.createElement(s.Fragment,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"25%"},(0,m.gettext)("Name")),u.default.createElement("th",{width:"10%"},(0,m.gettext)("Status")),u.default.createElement("th",{width:"20%"},(0,m.gettext)("Space Used")),u.default.createElement("th",{width:"40%"},(0,m.gettext)("Created At")," / ",(0,m.gettext)("Last Login")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(L,{key:n,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,revokeAdmin:e.props.revokeAdmin,deleteUser:e.props.deleteUser})}))));return r.length?i:o}}]),t}(s.Component),L=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.toggleRevokeAdminDialog=function(e){e&&e.preventDefault(),n.setState({isRevokeAdminDialogOpen:!n.state.isRevokeAdminDialogOpen})},n.revokeAdmin=function(){n.props.revokeAdmin(n.props.item)},n.onMenuItemClick=function(e){switch(e){case"Revoke Admin":n.toggleRevokeAdminDialog()}},n.translateOperations=function(e){var t="";switch(e){case"Revoke Admin":t=(0,m.gettext)("Revoke Admin")}return t},n.state={isOpIconShown:!1,highlight:!1,isRevokeAdminDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.state,n=t.isOpIconShown,a=t.isRevokeAdminDialogOpen,r='<span class="op-target">'+f.Utils.HTMLescape(e.name)+"</span>",o=(0,m.gettext)("Are you sure you want to revoke the admin permission of {placeholder} ?").replace("{placeholder}",r);return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,u.default.createElement(C.default,{email:e.email,name:e.name})),u.default.createElement("td",null,e.is_active?(0,m.gettext)("Active"):(0,m.gettext)("Inactive")),u.default.createElement("td",null,f.Utils.bytesToSize(e.quota_usage)+" / "+(e.quota_total>0?f.Utils.bytesToSize(e.quota_total):"--")),u.default.createElement("td",null,(0,d.default)(e.create_time).format("YYYY-MM-DD HH:mm:ss")," / ",e.last_login?(0,d.default)(e.last_login).fromNow():"--"),u.default.createElement("td",null,n&&u.default.createElement(_.default,{operations:["Revoke Admin"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),a&&u.default.createElement(x.default,{title:(0,m.gettext)("Revoke Admin"),message:o,executeOperation:this.revokeAdmin,confirmBtnText:(0,m.gettext)("Revoke"),toggleDialog:this.toggleRevokeAdminDialog}))}}]),t}(s.Component),N=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.revokeAdmin=function(e){var t=e.email,a=e.name;p.seafileAPI.sysAdminUpdateInstitutionUser(n.props.institutionID,t,!1).then(function(e){var r=n.state.userList.filter(function(e){return e.email!=t});n.setState({userList:r}),g.default.success((0,m.gettext)("Successfully revoked the admin permission of {placeholder}.").replace("{placeholder}",a))}).catch(function(e){var t=f.Utils.getErrorMsg(e);g.default.danger(t)})},n.deleteUser=function(e){p.seafileAPI.sysAdminDeleteInstitutionUser(n.props.institutionID,e).then(function(t){var a=n.state.userList.filter(function(t){return t.email!=e});n.setState({userList:a}),g.default.success("success")}).catch(function(e){var t=f.Utils.getErrorMsg(e);g.default.danger(t)})},n.state={loading:!0,errorMsg:"",institutionName:"",userList:[],isAddUserDialogOpen:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;p.seafileAPI.sysAdminGetInstitution(this.props.institutionID).then(function(t){e.setState({institutionName:t.data.name})}),p.seafileAPI.sysAdminListInstitutionAdmins(this.props.institutionID).then(function(t){e.setState({loading:!1,userList:t.data.user_list})}).catch(function(t){e.setState({loading:!1,errorMsg:f.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){var e=this.state.institutionName;return u.default.createElement(s.Fragment,null,u.default.createElement(D.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(k.default,{currentItem:"admins",institutionID:this.props.institutionID,institutionName:e}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(T,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,revokeAdmin:this.revokeAdmin,deleteUser:this.deleteUser})))))}}]),t}(s.Component);t.default=N},2216:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(4),d=n(1),f=n(3),p=n(6),m=n(33),h=a(m),g=n(7),v=a(g),b=n(8),y=a(b),E=n(63),w=a(E),_=n(528),S=a(_),x=n(31),P=a(x),C=n(67),O=a(C),D=n(529),M=a(D),k=n(13),T=a(k),L=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPreviousPage=function(){n.props.getLogsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getLogsByPage(n.props.currentPage+1)},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,a=e.items,r=e.perPage,o=e.currentPage,i=e.hasNextPage;if(t)return u.default.createElement(y.default,null);if(n)return u.default.createElement("p",{className:"error text-center"},n);var l=u.default.createElement(h.default,null,u.default.createElement("h2",null,(0,d.gettext)("No login logs"))),c=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"25%"},(0,d.gettext)("Name")),u.default.createElement("th",{width:"25%"},(0,d.gettext)("IP")),u.default.createElement("th",{width:"25%"},(0,d.gettext)("Status")),u.default.createElement("th",{width:"25%"},(0,d.gettext)("Time")))),a&&u.default.createElement("tbody",null,a.map(function(e,t){return u.default.createElement(N,{key:t,item:e})}))),u.default.createElement(w.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:o,hasNextPage:i,curPerPage:r,resetPerPage:this.props.resetPerPage}));return a.length?c:l}}]),t}(s.Component),N=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.state={isOpIconShown:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item;return u.default.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},u.default.createElement("td",null,u.default.createElement(O.default,{email:e.email,name:e.name})),u.default.createElement("td",null,e.login_ip),u.default.createElement("td",null,e.log_success?(0,d.gettext)("Success"):(0,d.gettext)("Failed")),u.default.createElement("td",null,(0,v.default)(e.login_time).fromNow()))}}]),t}(s.Component),I=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleExportExcelDialog=function(){n.setState({isExportExcelDialogOpen:!n.state.isExportExcelDialogOpen})},n.getLogsByPage=function(e){var t=n.state.perPage;c.seafileAPI.sysAdminListLoginLogs(e,t).then(function(a){n.setState({logList:a.data.login_log_list,loading:!1,currentPage:e,hasNextPage:f.Utils.hasNextPage(e,t,a.data.total_count)})}).catch(function(e){n.setState({loading:!1,errorMsg:f.Utils.getErrorMsg(e,!0)})})},n.resetPerPage=function(e){n.setState({perPage:e},function(){return n.getLogsByPage(n.initPage)})},n.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1,isExportExcelDialogOpen:!1},n.initPage=1,n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.getLogsByPage(e.state.currentPage)})}},{key:"render",value:function(){var e=this.state,t=e.logList,n=e.currentPage,a=e.perPage,r=e.hasNextPage,o=e.isExportExcelDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement(P.default,null,u.default.createElement(p.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleExportExcelDialog},(0,d.gettext)("Export Excel"))),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(S.default,{currentItem:"loginLogs"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(L,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:n,perPage:a,hasNextPage:r,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})))),o&&u.default.createElement(T.default,null,u.default.createElement(M.default,{logType:"login",toggle:this.toggleExportExcelDialog})))}}]),t}(s.Component);t.default=I},2217:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(4),d=n(1),f=n(3),p=n(33),m=a(p),h=n(6),g=n(7),v=a(g),b=n(8),y=a(b),E=n(63),w=a(E),_=n(528),S=a(_),x=n(31),P=a(x),C=n(67),O=a(C),D=n(529),M=a(D),k=n(13),T=a(k),L=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPreviousPage=function(){n.props.getLogsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getLogsByPage(n.props.currentPage+1)},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,a=e.items,r=e.perPage,o=e.currentPage,i=e.hasNextPage;if(t)return u.default.createElement(y.default,null);if(n)return u.default.createElement("p",{className:"error text-center"},n);var l=u.default.createElement(m.default,null,u.default.createElement("h2",null,(0,d.gettext)("No file access logs"))),c=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"20%"},(0,d.gettext)("Name")),u.default.createElement("th",{width:"10%"},(0,d.gettext)("Type")),u.default.createElement("th",{width:"20%"},(0,d.gettext)("IP")," / ",(0,d.gettext)("Device")),u.default.createElement("th",{width:"20%"},(0,d.gettext)("Date")),u.default.createElement("th",{width:"15%"},(0,d.gettext)("Library")),u.default.createElement("th",{width:"15%"},(0,d.gettext)("File")," / ",(0,d.gettext)("Folder")))),a&&u.default.createElement("tbody",null,a.map(function(e,t){return u.default.createElement(N,{key:t,item:e})}))),u.default.createElement(w.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:o,hasNextPage:i,curPerPage:r,resetPerPage:this.props.resetPerPage}));return a.length?c:l}}]),t}(s.Component),N=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.state={isOpIconShown:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item;return u.default.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},u.default.createElement("td",null,u.default.createElement(O.default,{email:e.email,name:e.name})),u.default.createElement("td",null,e.event_type),u.default.createElement("td",null,e.ip," / ",e.device),u.default.createElement("td",null,(0,v.default)(e.time).fromNow()),u.default.createElement("td",null,e.repo_name?e.repo_name:(0,d.gettext)("Deleted")),u.default.createElement("td",null,e.file_or_dir_name))}}]),t}(s.Component),I=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleExportExcelDialog=function(){n.setState({isExportExcelDialogOpen:!n.state.isExportExcelDialogOpen})},n.getLogsByPage=function(e){var t=n.state.perPage;c.seafileAPI.sysAdminListFileAccessLogs(e,t).then(function(t){n.setState({logList:t.data.file_access_log_list,loading:!1,currentPage:e,hasNextPage:t.data.has_next_page})}).catch(function(e){n.setState({loading:!1,errorMsg:f.Utils.getErrorMsg(e,!0)})})},n.resetPerPage=function(e){n.setState({perPage:e},function(){return n.getLogsByPage(n.initPage)})},n.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1,isExportExcelDialogOpen:!1},n.initPage=1,n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.getLogsByPage(e.state.currentPage)})}},{key:"render",value:function(){var e=this.state,t=e.logList,n=e.currentPage,a=e.perPage,r=e.hasNextPage,o=e.isExportExcelDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement(P.default,null,u.default.createElement(h.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleExportExcelDialog},(0,d.gettext)("Export Excel"))),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(S.default,{currentItem:"fileAccessLogs"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(L,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:n,perPage:a,hasNextPage:r,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})))),o&&u.default.createElement(T.default,null,u.default.createElement(M.default,{logType:"fileAccess",toggle:this.toggleExportExcelDialog})))}}]),t}(s.Component);t.default=I},2218:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(4),d=n(1),f=n(3),p=n(33),m=a(p),h=n(7),g=a(h),v=n(8),b=a(v),y=n(63),E=a(y),w=n(528),_=a(w),S=n(6),x=n(31),P=a(x),C=n(67),O=a(C),D=n(13),M=a(D),k=n(722),T=a(k),L=n(529),N=a(L),I=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPreviousPage=function(){n.props.getLogsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getLogsByPage(n.props.currentPage+1)},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,a=e.items,r=e.perPage,o=e.currentPage,i=e.hasNextPage;if(t)return u.default.createElement(b.default,null);if(n)return u.default.createElement("p",{className:"error text-center"},n);var l=u.default.createElement(m.default,null,u.default.createElement("h2",null,(0,d.gettext)("No file update logs"))),c=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"25%"},(0,d.gettext)("Name")),u.default.createElement("th",{width:"25%"},(0,d.gettext)("Date")),u.default.createElement("th",{width:"25%"},(0,d.gettext)("Library")),u.default.createElement("th",{width:"25%"},(0,d.gettext)("Action")))),a&&u.default.createElement("tbody",null,a.map(function(e,t){return u.default.createElement(Y,{key:t,item:e})}))),u.default.createElement(E.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:o,hasNextPage:i,curPerPage:r,resetPerPage:this.props.resetPerPage}));return a.length?c:l}}]),t}(s.Component),Y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.toggleCommitDetailsDialog=function(){n.setState({isCommitDetailsDialogOpen:!n.state.isCommitDetailsDialogOpen})},n.showCommitDetails=function(e){e.preventDefault(),n.setState({isCommitDetailsDialogOpen:!n.state.isCommitDetailsDialogOpen})},n.state={isOpIconShown:!1,isCommitDetailsDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item;return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},u.default.createElement("td",null,u.default.createElement(O.default,{email:e.email,name:e.name})),u.default.createElement("td",null,(0,g.default)(e.time).fromNow()),u.default.createElement("td",null,e.repo_name?e.repo_name:(0,d.gettext)("Deleted")),u.default.createElement("td",null,e.file_operation,e.repo_name&&!e.repo_encrypted&&u.default.createElement("a",{className:"ml-1",href:"#",onClick:this.showCommitDetails},(0,d.gettext)("Details")))),this.state.isCommitDetailsDialogOpen&&u.default.createElement(M.default,null,u.default.createElement(T.default,{repoID:e.repo_id,commitID:e.commit_id,commitTime:e.time,toggleDialog:this.toggleCommitDetailsDialog})))}}]),t}(s.Component),R=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleExportExcelDialog=function(){n.setState({isExportExcelDialogOpen:!n.state.isExportExcelDialogOpen})},n.getLogsByPage=function(e){var t=n.state.perPage;c.seafileAPI.sysAdminListFileUpdateLogs(e,t).then(function(t){n.setState({logList:t.data.file_update_log_list,loading:!1,currentPage:e,hasNextPage:t.data.has_next_page})}).catch(function(e){n.setState({loading:!1,errorMsg:f.Utils.getErrorMsg(e,!0)})})},n.resetPerPage=function(e){n.setState({perPage:e},function(){return n.getLogsByPage(n.initPage)})},n.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1,isExportExcelDialogOpen:!1},n.initPage=1,n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.getLogsByPage(e.state.currentPage)})}},{key:"render",value:function(){var e=this.state,t=e.logList,n=e.currentPage,a=e.perPage,r=e.hasNextPage,o=e.isExportExcelDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement(P.default,null,u.default.createElement(S.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleExportExcelDialog},(0,d.gettext)("Export Excel"))),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(_.default,{currentItem:"fileUpdateLogs"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(I,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:n,perPage:a,hasNextPage:r,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})))),o&&u.default.createElement(M.default,null,u.default.createElement(N.default,{logType:"fileUpdate",toggle:this.toggleExportExcelDialog})))}}]),t}(s.Component);t.default=R},2219:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(4),d=n(1),f=n(3),p=n(33),m=a(p),h=n(7),g=a(h),v=n(6),b=n(8),y=a(b),E=n(63),w=a(E),_=n(528),S=a(_),x=n(31),P=a(x),C=n(67),O=a(C),D=n(529),M=a(D),k=n(13),T=a(k),L=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPreviousPage=function(){n.props.getLogsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getLogsByPage(n.props.currentPage+1)},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,a=e.items,r=e.perPage,o=e.currentPage,i=e.hasNextPage;if(t)return u.default.createElement(y.default,null);if(n)return u.default.createElement("p",{className:"error text-center"},n);var l=u.default.createElement(m.default,null,u.default.createElement("h2",null,(0,d.gettext)("No permission logs"))),c=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"10%"},(0,d.gettext)("Share From")),u.default.createElement("th",{width:"10%"},(0,d.gettext)("Share To")),u.default.createElement("th",{width:"20%"},(0,d.gettext)("Actions")),u.default.createElement("th",{width:"13%"},(0,d.gettext)("Permission")),u.default.createElement("th",{width:"20%"},(0,d.gettext)("Library")),u.default.createElement("th",{width:"12%"},(0,d.gettext)("Folder")),u.default.createElement("th",{width:"15%"},(0,d.gettext)("Date")))),a&&u.default.createElement("tbody",null,a.map(function(e,t){return u.default.createElement(N,{key:t,item:e})}))),u.default.createElement(w.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:o,hasNextPage:i,curPerPage:r,resetPerPage:this.props.resetPerPage}));return a.length?c:l}}]),t}(s.Component),N=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.getActionTextByEType=function(e){return-1!=e.indexOf("add")?(0,d.gettext)("Add"):-1!=e.indexOf("modify")?(0,d.gettext)("Modify"):-1!=e.indexOf("delete")?(0,d.gettext)("Delete"):""},n.state={isOpIconShown:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item;return u.default.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},u.default.createElement("td",null,u.default.createElement(O.default,{email:e.from_user_email,name:e.from_user_name})),u.default.createElement("td",null,u.default.createElement(O.default,{email:e.to_user_email,name:e.to_user_name})),u.default.createElement("td",null,this.getActionTextByEType(e.etype)),u.default.createElement("td",null,f.Utils.sharePerms(e.permission)),u.default.createElement("td",null,e.repo_name?e.repo_name:(0,d.gettext)("Deleted")),u.default.createElement("td",null,e.folder),u.default.createElement("td",null,(0,g.default)(e.date).fromNow()))}}]),t}(s.Component),I=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleExportExcelDialog=function(){n.setState({isExportExcelDialogOpen:!n.state.isExportExcelDialogOpen})},n.getLogsByPage=function(e){var t=n.state.perPage;c.seafileAPI.sysAdminListSharePermissionLogs(e,t).then(function(t){n.setState({logList:t.data.share_permission_log_list,loading:!1,currentPage:e,hasNextPage:t.data.has_next_page})}).catch(function(e){n.setState({loading:!1,errorMsg:f.Utils.getErrorMsg(e,!0)})})},n.resetPerPage=function(e){n.setState({perPage:e},function(){return n.getLogsByPage(n.initPage)})},n.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1,isExportExcelDialogOpen:!1},n.initPage=1,n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.getLogsByPage(e.state.currentPage)})}},{key:"render",value:function(){var e=this.state,t=e.logList,n=e.currentPage,a=e.perPage,r=e.hasNextPage,o=e.isExportExcelDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement(P.default,null,u.default.createElement(v.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleExportExcelDialog},(0,d.gettext)("Export Excel"))),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(S.default,{currentItem:"sharePermissionLogs"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(L,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:n,perPage:a,hasNextPage:r,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})))),o&&u.default.createElement(T.default,null,u.default.createElement(M.default,{logType:"sharePermission",toggle:this.toggleExportExcelDialog})))}}]),t}(s.Component);t.default=I},2220:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(3),d=n(4),f=n(1),p=n(8),m=a(p),h=n(5),g=a(h),v=n(31),b=a(v),y=n(2221),E=a(y),w=n(2222),_=a(w),S=n(2223),x=a(S),P=n(2224),C=a(P);n(2225);var O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.saveSetting=function(e,t){d.seafileAPI.sysAdminSetSysSettingInfo(e,t).then(function(e){n.setState({config_dict:e.data}),g.default.success((0,f.gettext)("Success"))}).catch(function(e){var t=c.Utils.getErrorMsg(e);g.default.danger(t)})},n.postFile=function(e,t){var a=void 0;"Logo"==t?a=d.seafileAPI.sysAdminUpdateLogo(e):"Favicon"==t?a=d.seafileAPI.sysAdminUpdateFavicon(e):"loginBGImage"==t&&(a=d.seafileAPI.sysAdminUpdateLoginBG(e)),a.then(function(e){"Logo"==t?n.setState({logoPath:e.data.logo_path}):"Favicon"==t?n.setState({faviconPath:e.data.favicon_path}):"loginBGImage"==t&&n.setState({loginBGPath:e.data.login_bg_image_path}),g.default.success((0,f.gettext)("Success"))}).catch(function(e){var t=c.Utils.getErrorMsg(e);g.default.danger(t)})},n.state={loading:!0,errorMsg:"",config_dict:null,logoPath:f.mediaUrl+f.logoPath,faviconPath:f.mediaUrl+f.faviconPath,loginBGPath:f.mediaUrl+f.loginBGPath},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;d.seafileAPI.sysAdminGetSysSettingInfo().then(function(t){e.setState({loading:!1,config_dict:t.data})}).catch(function(t){e.setState({loading:!1,errorMsg:c.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.errorMsg,a=e.config_dict,r=e.logoPath,o=e.faviconPath,i=e.loginBGPath;return u.default.createElement(s.Fragment,null,u.default.createElement(b.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,f.gettext)("Settings"))),u.default.createElement("div",{className:"cur-view-content container mw-100"},t&&u.default.createElement(m.default,null),n&&u.default.createElement("p",{className:"error text-center mt-4"},n),!t&&!n&&a&&u.default.createElement(s.Fragment,null,u.default.createElement("p",{className:"small text-secondary my-4"},(0,f.gettext)("Note: Settings via web interface are saved in database table (seahub-db/constance_config). They have a higher priority over the settings in config files.")),u.default.createElement(E.default,{headingText:"URL"},u.default.createElement(s.Fragment,null,u.default.createElement(_.default,{saveSetting:this.saveSetting,displayName:"SERVICE_URL",keyText:"SERVICE_URL",value:a.SERVICE_URL,helpTip:(0,f.gettext)("The URL of the server, like https://seafile.example.com or http://192.168.1.2:8000")}),u.default.createElement(_.default,{saveSetting:this.saveSetting,displayName:"FILE_SERVER_ROOT",keyText:"FILE_SERVER_ROOT",value:a.FILE_SERVER_ROOT,helpTip:(0,f.gettext)("The internal URL for downloading/uploading files. Users will not be able to download/upload files if this is not set correctly. If you config Seafile behind Nginx/Apache, it should be SERVICE_URL/seafhttp, like https://seafile.example.com/seafhttp .")}))),u.default.createElement(E.default,{headingText:(0,f.gettext)("Branding")},u.default.createElement(s.Fragment,null,u.default.createElement(_.default,{saveSetting:this.saveSetting,displayName:"SITE_TITLE",keyText:"SITE_TITLE",value:a.SITE_TITLE,helpTip:(0,f.gettext)("Site title shown in a browser tab")}),u.default.createElement(_.default,{saveSetting:this.saveSetting,displayName:"SITE_NAME",keyText:"SITE_NAME",value:a.SITE_NAME,helpTip:(0,f.gettext)("Site name used in email sending")}),u.default.createElement(x.default,{postFile:this.postFile,displayName:"Logo",keyText:"Logo",filePath:r,fileWidth:256,fileHeight:64,helpTip:"logo.png, 256px * 64px"}),u.default.createElement(x.default,{postFile:this.postFile,displayName:"Favicon",keyText:"Favicon",filePath:o,fileWidth:32,fileHeight:32,helpTip:"favicon.ico, 32px * 32px"}),u.default.createElement(x.default,{postFile:this.postFile,displayName:(0,f.gettext)("Login Background Image"),keyText:"loginBGImage",filePath:i,fileWidth:240,fileHeight:160,helpTip:"login-bg.jpg, 2400px * 1600px"}),u.default.createElement(C.default,{saveSetting:this.saveSetting,displayName:"ENABLE_BRANDING_CSS",keyText:"ENABLE_BRANDING_CSS",value:a.ENABLE_BRANDING_CSS,helpTip:(0,f.gettext)("Use custom CSS")}),u.default.createElement(_.default,{inputType:"textarea",saveSetting:this.saveSetting,displayName:(0,f.gettext)("Custom CSS"),keyText:"CUSTOM_CSS",value:a.CUSTOM_CSS,helpTip:""}))),u.default.createElement(E.default,{headingText:(0,f.gettext)("User")},u.default.createElement(s.Fragment,null,u.default.createElement(C.default,{saveSetting:this.saveSetting,displayName:(0,f.gettext)("allow new registrations"),keyText:"ENABLE_SIGNUP",value:a.ENABLE_SIGNUP,helpTip:(0,f.gettext)("Allow new user registrations. Uncheck this to prevent anyone from creating a new account.")}),u.default.createElement(C.default,{saveSetting:this.saveSetting,displayName:(0,f.gettext)("activate after registration"),keyText:"ACTIVATE_AFTER_REGISTRATION",value:a.ACTIVATE_AFTER_REGISTRATION,helpTip:(0,f.gettext)("Activate user immediately after registration. If unchecked, a user need to be activated by administrator or via activation email")}),u.default.createElement(C.default,{saveSetting:this.saveSetting,displayName:(0,f.gettext)("send activation email"),keyText:"REGISTRATION_SEND_MAIL",value:a.REGISTRATION_SEND_MAIL,helpTip:(0,f.gettext)("Send activation Email after user registration.")}),u.default.createElement(_.default,{saveSetting:this.saveSetting,displayName:(0,f.gettext)("keep sign in"),keyText:"LOGIN_REMEMBER_DAYS",value:a.LOGIN_REMEMBER_DAYS,helpTip:(0,f.gettext)("Number of days that keep user sign in.")}),u.default.createElement(_.default,{saveSetting:this.saveSetting,displayName:"LOGIN_ATTEMPT_LIMIT",keyText:"LOGIN_ATTEMPT_LIMIT",value:a.LOGIN_ATTEMPT_LIMIT,helpTip:(0,f.gettext)("The maximum number of failed login attempts before showing CAPTCHA.")}),u.default.createElement(C.default,{saveSetting:this.saveSetting,displayName:"FREEZE_USER_ON_LOGIN_FAILED",keyText:"FREEZE_USER_ON_LOGIN_FAILED",value:a.FREEZE_USER_ON_LOGIN_FAILED,helpTip:(0,f.gettext)("Freeze user account when failed login attempts exceed limit.")}))),u.default.createElement(E.default,{headingText:(0,f.gettext)("Groups")},u.default.createElement(C.default,{saveSetting:this.saveSetting,displayName:"ENABLE_SHARE_TO_ALL_GROUPS",keyText:"ENABLE_SHARE_TO_ALL_GROUPS",value:a.ENABLE_SHARE_TO_ALL_GROUPS,helpTip:(0,f.gettext)("Enable users to share libraries to any groups in the system.")})),u.default.createElement(E.default,{headingText:(0,f.gettext)("Password")},u.default.createElement(s.Fragment,null,u.default.createElement(C.default,{saveSetting:this.saveSetting,displayName:"strong password",keyText:"USER_STRONG_PASSWORD_REQUIRED",value:a.USER_STRONG_PASSWORD_REQUIRED,helpTip:(0,f.gettext)("Force user to use a strong password when sign up or change password.")}),u.default.createElement(C.default,{saveSetting:this.saveSetting,displayName:"force password change",keyText:"FORCE_PASSWORD_CHANGE",value:a.FORCE_PASSWORD_CHANGE,helpTip:(0,f.gettext)("Force user to change password when account is newly added or reset by admin")}),u.default.createElement(_.default,{saveSetting:this.saveSetting,displayName:(0,f.gettext)("password minimum length"),keyText:"USER_PASSWORD_MIN_LENGTH",value:a.USER_PASSWORD_MIN_LENGTH,helpTip:(0,f.gettext)("The least number of characters an account password should include.")}),u.default.createElement(_.default,{saveSetting:this.saveSetting,displayName:(0,f.gettext)("password strength level"),keyText:"USER_PASSWORD_STRENGTH_LEVEL",value:a.USER_PASSWORD_STRENGTH_LEVEL,helpTip:(0,f.gettext)("The level(1-4) of an account password's strength. For example, '3' means password must have at least 3 of the following: num, upper letter, lower letter and other symbols")}),u.default.createElement(C.default,{saveSetting:this.saveSetting,displayName:"enable two factor authentication",keyText:"ENABLE_TWO_FACTOR_AUTH",value:a.ENABLE_TWO_FACTOR_AUTH,helpTip:(0,f.gettext)("Enable two factor authentication")}))),u.default.createElement(E.default,{headingText:(0,f.gettext)("Library")},u.default.createElement(s.Fragment,null,u.default.createElement(C.default,{saveSetting:this.saveSetting,displayName:"library history",keyText:"ENABLE_REPO_HISTORY_SETTING",value:a.ENABLE_REPO_HISTORY_SETTING,helpTip:(0,f.gettext)("Allow user to change library history settings")}),u.default.createElement(C.default,{saveSetting:this.saveSetting,displayName:"encrypted library",keyText:"ENABLE_ENCRYPTED_LIBRARY",value:a.ENABLE_ENCRYPTED_LIBRARY,helpTip:(0,f.gettext)("Allow user to create encrypted libraries")}),u.default.createElement(_.default,{saveSetting:this.saveSetting,displayName:(0,f.gettext)("library password minimum length"),keyText:"REPO_PASSWORD_MIN_LENGTH",value:a.REPO_PASSWORD_MIN_LENGTH,helpTip:(0,f.gettext)("The least number of characters an encrypted library password should include.")}),u.default.createElement(_.default,{saveSetting:this.saveSetting,displayName:(0,f.gettext)("download/upload link password minimum length"),keyText:"SHARE_LINK_PASSWORD_MIN_LENGTH",value:a.SHARE_LINK_PASSWORD_MIN_LENGTH,helpTip:(0,f.gettext)("The least number of characters a download/upload link password should include.")}),u.default.createElement(C.default,{saveSetting:this.saveSetting,displayName:"ENABLE_USER_CREATE_ORG_REPO",keyText:"ENABLE_USER_CREATE_ORG_REPO",value:a.ENABLE_USER_CREATE_ORG_REPO,helpTip:(0,f.gettext)("Allow user to add organization libraries. Otherwise, only system admin can add organization libraries.")}),u.default.createElement(C.default,{saveSetting:this.saveSetting,displayName:"ENABLE_USER_CLEAN_TRASH",keyText:"ENABLE_USER_CLEAN_TRASH",value:a.ENABLE_USER_CLEAN_TRASH,helpTip:(0,f.gettext)("Allow user to clean library trash")}))),u.default.createElement(E.default,{headingText:(0,f.gettext)("Online Preview")},u.default.createElement(_.default,{inputType:"textarea",saveSetting:this.saveSetting,displayName:(0,f.gettext)("text file extensions"),keyText:"TEXT_PREVIEW_EXT",value:a.TEXT_PREVIEW_EXT,helpTip:(0,f.gettext)("Extensions of text files that can be online previewed, each suffix is separated by a comma.")})),u.default.createElement(E.default,{headingText:(0,f.gettext)("Sync")},u.default.createElement(C.default,{saveSetting:this.saveSetting,displayName:"DISABLE_SYNC_WITH_ANY_FOLDER",keyText:"DISABLE_SYNC_WITH_ANY_FOLDER",value:a.DISABLE_SYNC_WITH_ANY_FOLDER,helpTip:(0,f.gettext)("If turn on, the desktop clients will not be able to sync a folder outside the default Seafile folder.")})),f.isPro&&u.default.createElement(E.default,{headingText:(0,f.gettext)("Terms")},u.default.createElement(C.default,{saveSetting:this.saveSetting,displayName:"ENABLE_TERMS_AND_CONDITIONS",keyText:"ENABLE_TERMS_AND_CONDITIONS",value:a.ENABLE_TERMS_AND_CONDITIONS,helpTip:(0,f.gettext)("Enable system admin to add Terms and Conditions, and all users will have to accept the terms.")})))))))}}]),t}(s.Component);t.default=O},2221:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f={headingText:d.default.string.isRequired,children:d.default.object.isRequired},p=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.headingText,n=e.children;return u.default.createElement("div",{className:"mb-4"},u.default.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},t),n)}}]),t}(s.Component);p.propTypes=f,t.default=p},2222:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(733),h=a(m),g={inputType:d.default.string,saveSetting:d.default.func.isRequired,keyText:d.default.string.isRequired,value:d.default.oneOfType([d.default.string,d.default.number]),helpTip:d.default.string.isRequired,displayName:d.default.string.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleBtns=function(){n.setState({isBtnsShown:!n.state.isBtnsShown})},n.hideBtns=function(e){n.state.isBtnsShown&&(n.props.value!=n.state.value&&n.setState({value:n.props.value}),n.toggleBtns())},n.onInputChange=function(e){n.setState({value:e.target.value})},n.onSubmit=function(e){var t=n.state.value.trim();t!=n.props.value&&n.props.saveSetting(n.props.keyText,t),n.toggleBtns()},n.state={isBtnsShown:!1,value:n.props.value},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state,t=e.isBtnsShown,n=e.value,a=this.props,r=a.helpTip,o=a.displayName,i=a.inputType;return u.default.createElement(h.default,{displayName:o,helpTip:r,mainContent:u.default.createElement(f.Input,{type:i||"text",className:"textarea"==i?"web-setting-textarea":"",onChange:this.onInputChange,onFocus:this.toggleBtns,onBlur:this.hideBtns,value:n}),extraContent:t?u.default.createElement(s.Fragment,null,u.default.createElement(f.Button,{className:"sf2-icon-tick web-setting-icon-btn web-setting-icon-btn-submit",onMouseDown:this.onSubmit,title:(0,p.gettext)("Submit")}),u.default.createElement(f.Button,{className:"ml-1 sf2-icon-x2 web-setting-icon-btn web-setting-icon-btn-cancel",title:(0,p.gettext)("Cancel")})):null})}}]),t}(s.Component);v.propTypes=g,t.default=v},2223:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(733),h=a(m),g={postFile:d.default.func.isRequired,keyText:d.default.string.isRequired,filePath:d.default.string.isRequired,helpTip:d.default.string.isRequired,fileWidth:d.default.number.isRequired,fileHeight:d.default.number.isRequired,displayName:d.default.string.isRequired},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.uploadFile=function(){if(n.fileInput.current.files.length){var e=n.fileInput.current.files[0];n.props.postFile(e,n.props.keyText)}},n.openFileInput=function(){n.fileInput.current.click()},n.fileInput=u.default.createRef(),n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.helpTip,n=e.filePath,a=e.fileWidth,r=e.fileHeight,o=e.displayName;return u.default.createElement(h.default,{displayName:o,helpTip:t,mainContent:u.default.createElement("img",{src:n+"?t="+(new Date).getTime(),alt:o,width:a,height:r,className:"mb-1"}),extraContent:u.default.createElement(s.Fragment,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.openFileInput},(0,p.gettext)("Change")),u.default.createElement("input",{className:"d-none",type:"file",onChange:this.uploadFile,ref:this.fileInput}))})}}]),t}(s.Component);v.propTypes=g,t.default=v},2224:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(733),m=a(p),h={saveSetting:d.default.func.isRequired,keyText:d.default.string.isRequired,value:d.default.oneOfType([d.default.bool,d.default.number]),helpTip:d.default.string.isRequired,displayName:d.default.string.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInputChange=function(e){var t=e.target.checked,a=t?1:0;n.setState({inputChecked:t}),n.props.saveSetting(n.props.keyText,a)},n.state={inputChecked:n.props.value},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state.inputChecked,t=this.props,n=t.helpTip,a=t.displayName;return u.default.createElement(m.default,{displayName:a,mainContent:u.default.createElement(s.Fragment,null,u.default.createElement(f.Input,{className:"ml-0",checked:e,type:"checkbox",onChange:this.onInputChange}),u.default.createElement("p",{className:"ml-4"},n))})}}]),t}(s.Component);g.propTypes=h,t.default=g},2225:function(e,t){},2226:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(3),f=n(4),p=n(1),m=n(5),h=a(m),g=n(33),v=a(g),b=n(8),y=a(b),E=n(132),w=a(E),_=n(107),S=a(_),x=n(2227),P=a(x),C=n(31),O=a(C),D=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items;if(n)return u.default.createElement(y.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var o=u.default.createElement(v.default,null,u.default.createElement("h2",null,(0,p.gettext)("No notifications"))),i=u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"95%"},(0,p.gettext)("Notification Detail")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(M,{key:n,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteNotification:e.props.deleteNotification,setToCurrent:e.props.setToCurrent})})));return r.length?i:o}}]),t}(s.Component),M=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.deleteNotification=function(){n.props.deleteNotification(n.props.item.id),n.toggleDeleteDialog()},n.setToCurrent=function(){n.props.setToCurrent(n.props.item.id)},n.onMenuItemClick=function(e){switch(e){case"Set to current":n.setToCurrent();break;case"Delete":n.toggleDeleteDialog()}},n.translateOperations=function(e){var t="";switch(e){case"Set to current":t=(0,p.gettext)("Set to current");break;case"Delete":t=(0,p.gettext)("Delete")}return t},n.getOperations=function(){var e=n.props.item,t=[];return e.is_current||t.push("Set to current"),t.push("Delete"),t},n.state={isOpIconShown:!1,highlight:!1,isDeleteDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.state,n=t.isOpIconShown,a=t.isDeleteDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,e.msg,e.is_current&&u.default.createElement("span",{className:"small text-orange"},(0,p.gettext)("(current notification)"))),u.default.createElement("td",null,n&&u.default.createElement(w.default,{operations:this.getOperations(),translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),a&&u.default.createElement(S.default,{title:(0,p.gettext)("Delete Notification"),message:(0,p.gettext)("Are you sure you want to delete the notification ?"),toggleDialog:this.toggleDeleteDialog,executeOperation:this.deleteNotification,confirmBtnText:(0,p.gettext)("Delete")}))}}]),t}(s.Component),k=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleAddNotificationDialog=function(){n.setState({isAddNotificationDialogOpen:!n.state.isAddNotificationDialogOpen})},n.addNotification=function(e){f.seafileAPI.sysAdminAddSysNotification(e).then(function(e){var t=n.state.notificationList;t.unshift(e.data.notification),n.setState({notificationList:t})}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.deleteNotification=function(e){f.seafileAPI.sysAdminDeleteSysNotification(e).then(function(t){var a=n.state.notificationList.filter(function(t){return t.id!=e});n.setState({notificationList:a}),h.default.success((0,p.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.setToCurrent=function(e){f.seafileAPI.sysAdminSetSysNotificationToCurrent(e).then(function(t){var a=n.state.notificationList.map(function(t){return t.id==e?t.is_current=!0:t.is_current=!1,t});n.setState({notificationList:a})}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)})},n.state={loading:!0,errorMsg:"",notificationList:[],isAddNotificationDialogOpen:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;f.seafileAPI.sysAdminListAllSysNotifications().then(function(t){e.setState({loading:!1,notificationList:t.data.notifications})}).catch(function(t){e.setState({loading:!1,errorMsg:d.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){var e=this.state.isAddNotificationDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement(O.default,null,u.default.createElement(c.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleAddNotificationDialog},(0,p.gettext)("Add new notification"))),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,p.gettext)("All Notifications"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(D,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.notificationList,deleteNotification:this.deleteNotification,setToCurrent:this.setToCurrent})))),e&&u.default.createElement(P.default,{addNotification:this.addNotification,toggle:this.toggleAddNotificationDialog}))}}]),t}(s.Component);t.default=k},2227:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m={toggle:d.default.func.isRequired,addNotification:d.default.func.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){var t=e.target.value;n.setState({value:t,isSubmitBtnActive:""!=t.trim()})},n.handleSubmit=function(){n.toggle(),n.props.addNotification(n.state.value.trim())},n.toggle=function(){n.props.toggle()},n.state={value:"",isSubmitBtnActive:!1},n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("Add new notification")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.Input,{type:"textarea",value:this.state.value,onChange:this.handleChange})))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},2228:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(4),p=n(1),m=n(3),h=n(29),g=a(h),v={loading:d.default.bool.isRequired,errorMsg:d.default.string.isRequired,records:d.default.array.isRequired},b=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,a=e.records;return t?u.default.createElement("span",{className:"loading-icon loading-tip"}):n?u.default.createElement("p",{className:"error text-center"},n):u.default.createElement("table",{width:"100%",className:"table table-hover table-vcenter"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"16%"},(0,p.gettext)("Library")),u.default.createElement("th",{width:"30%"},"ID"),u.default.createElement("th",{width:"30%"},(0,p.gettext)("Path")),u.default.createElement("th",{width:"12%"},(0,p.gettext)("Label")),u.default.createElement("th",{width:"12%"},(0,p.gettext)("Suggestion")))),u.default.createElement("tbody",null,a.map(function(e,t){return u.default.createElement(E,{key:t,record:e})})))}}]),t}(s.Component);b.propTypes=v;var y={record:d.default.object.isRequired},E=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.record;return u.default.createElement("tr",null,u.default.createElement("td",null,e.repo_name),u.default.createElement("td",null,e.repo_id),u.default.createElement("td",null,e.path),u.default.createElement("td",null,e.detail.label),u.default.createElement("td",null,e.detail.suggestion))}}]),t}(s.Component);E.propTypes=y;var w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!0,errorMsg:"",records:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;f.seafileAPI.listFileScanRecords().then(function(t){e.setState({loading:!1,records:t.data.record_list})}).catch(function(t){e.setState({loading:!1,errorMsg:m.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){return u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{className:"main-panel-north border-left-show"},u.default.createElement("div",{className:"cur-view-toolbar"},u.default.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"})),u.default.createElement("div",{className:"common-toolbar"},u.default.createElement(g.default,{isAdminPanel:!0}))),u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container",id:"content-scan-records"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,p.gettext)("Content Scan Records"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(b,{loading:this.state.loading,errorMsg:this.state.errorMsg,records:this.state.records})))))}}]),t}(s.Component);t.default=w},2229:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(255),f=a(d),p=n(4),m=n(1),h=n(3),g=n(5),v=a(g),b=n(29),y=a(b),E=n(2230),w=n(2233),_=a(w);n(1002);var S=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getDepartmentsTree=function(e){for(var t=[],n=[],a=0;a<e.length;a++)-1===t.indexOf(e[a].id)&&t.push(e[a].id),-1===n.indexOf(e[a].parentid)&&n.push(e[a].parentid);var r=n.filter(function(e){return-1!==t.indexOf(e)}),o=n.concat(r).filter(function(e){return-1===n.indexOf(e)||-1===r.indexOf(e)}),i=f.default.cloneDeep(e);return i.filter(function(e){var t=i.filter(function(t){return e.id===t.parentid});return t.length>0&&(e.children=t),-1!==o.indexOf(e.parentid)})},n.getWorkWeixinDepartmentsList=function(e){p.seafileAPI.adminListWorkWeixinDepartments(e).then(function(t){if(e)n.setState({importDepartmentChildrenCount:t.data.department.length,importDepartmentMembersCount:n.state.membersTempObj[e].length});else{var a=n.getDepartmentsTree(t.data.department);n.setState({isTreeLoading:!1,departmentsTree:a})}}).catch(function(e){n.handleError(e),n.setState({isTreeLoading:!1,isMembersListLoading:!1}),e.response&&403===e.response.status&&(window.location=m.siteRoot+"sys/useradmin/")})},n.getWorkWeixinDepartmentMembersList=function(e){n.setState({isMembersListLoading:!0}),p.seafileAPI.adminListWorkWeixinDepartmentMembers(e,{fetch_child:!0}).then(function(t){var a=n.state.membersTempObj;a[e]=t.data.userlist;var r=n.getCanCheckUserIds(t.data.userlist);n.setState({membersTempObj:a,membersList:t.data.userlist,isMembersListLoading:!1,canCheckUserIds:r})}).catch(function(e){n.setState({isMembersListLoading:!1}),n.handleError(e)})},n.getCanCheckUserIds=function(e){var t=[];return e.forEach(function(e){e.email||t.push(e.userid)}),t},n.onChangeDepartment=function(e){if(n.setState({newUsersTempObj:{},isCheckedAll:!1,checkedDepartmentId:e}),e in n.state.membersTempObj){var t=n.getCanCheckUserIds(n.state.membersTempObj[e]);n.setState({membersList:n.state.membersTempObj[e],canCheckUserIds:t})}else n.getWorkWeixinDepartmentMembersList(e)},n.onUserChecked=function(e){if(-1!==n.state.canCheckUserIds.indexOf(e.userid)){var t=n.state.newUsersTempObj;e.userid in t?(delete t[e.userid],n.state.isCheckedAll&&n.setState({isCheckedAll:!1})):(t[e.userid]=e,Object.keys(t).length===n.state.canCheckUserIds.length&&n.setState({isCheckedAll:!0})),n.setState({newUsersTempObj:t})}},n.onAllUsersChecked=function(){n.setState({isCheckedAll:!n.state.isCheckedAll},function(){if(n.state.isCheckedAll){for(var e={},t=n.state.membersList.filter(function(e){return-1!==n.state.canCheckUserIds.indexOf(e.userid)}),a=0;a<t.length;a++)e[t[a].userid]=t[a];n.setState({newUsersTempObj:e})}else n.setState({newUsersTempObj:{}})})},n.onSubmit=function(){var e=n.state.newUsersTempObj;if("{}"!==JSON.stringify(e)){var t=[];for(var a in e)t.push(e[a]);if(0===t.length)return void v.default.danger("\u672a\u9009\u62e9\u6210\u5458",{duration:3});p.seafileAPI.adminAddWorkWeixinUsersBatch(t).then(function(e){if(n.setState({newUsersTempObj:{},isCheckedAll:!1}),e.data.success&&n.handleSubmitSuccess(e.data.success),e.data.failed)for(var t=e.data.failed,a=0;a<t.length;a++)v.default.danger(t[a].name+" "+t[a].error_msg,{duration:3})}).catch(function(e){n.handleError(e)})}},n.handleSubmitSuccess=function(e){for(var t=n.state,a=t.membersTempObj,r=t.membersList,o=t.canCheckUserIds,i=0;i<e.length;i++){var l=e[i],s=l.userid,u=l.name,c=l.email;v.default.success(u+" \u6210\u529f\u5bfc\u5165",{duration:1}),-1!==o.indexOf(s)&&o.splice(o.indexOf(s),1);for(var d=0;d<r.length;d++)if(r[d].userid===s){r[d].email=c;break}for(var f in a)for(var p=0;p<a[f].length;p++)if(a[f][p].userid===s){a[f][p].email=c;break}}n.setState({membersTempObj:a,membersList:r,canCheckUserIds:o})},n.importDepartmentDialogToggle=function(e){n.setState({isImportDepartmentDialogShow:!n.state.isImportDepartmentDialogShow,importDepartment:e},function(){e&&n.getWorkWeixinDepartmentsList(e.id)})},n.onImportDepartmentSubmit=function(){var e=n.state.importDepartment;e&&p.seafileAPI.adminImportWorkWeixinDepartment(e.id).then(function(t){n.setState({isMembersListLoading:!0,checkedDepartmentId:e.id,membersTempObj:{},membersList:[],newUsersTempObj:{},isCheckedAll:!1,canCheckUserIds:[]}),n.getWorkWeixinDepartmentMembersList(e.id),n.importDepartmentDialogToggle(null),t.data.success&&n.handleImportDepartmentSubmitSuccess(t.data.success),t.data.failed&&n.handleImportDepartmentSubmitFailed(t.data.failed)}).catch(function(e){n.handleError(e)})},n.handleImportDepartmentSubmitSuccess=function(e){for(var t=0,n=e.length;t<n;t++){var a=e[t],r="department"===a.type?"\u90e8\u95e8 "+a.department_name+" \u5bfc\u5165\u6210\u529f":a.api_user_name+" \u5bfc\u5165\u6210\u529f";v.default.success(r,{duration:3})}},n.handleImportDepartmentSubmitFailed=function(e){for(var t=0,n=e.length;t<n;t++){var a=e[t],r="department"===a.type?a.department_name:a.api_user_name;v.default.danger(r+" "+a.msg,{duration:3})}},n.handleError=function(e){var t=h.Utils.getErrorMsg(e);v.default.danger(t)},n.state={isTreeLoading:!0,isMembersListLoading:!0,departmentsTree:[],checkedDepartmentId:0,membersTempObj:{},membersList:[],newUsersTempObj:{},isCheckedAll:!1,canCheckUserIds:[],isImportDepartmentDialogShow:!1,importDepartment:null,importDepartmentChildrenCount:0,importDepartmentMembersCount:0},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.getWorkWeixinDepartmentsList(null)}},{key:"renderNav",value:function(){var e="btn btn-secondary operation-item ";return u.default.createElement("div",{className:"main-panel-north border-left-show"},u.default.createElement("div",{className:"cur-view-toolbar"},u.default.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"}),u.default.createElement(c.Button,{className:e+"my-1 d-md-none",onClick:this.onSubmit},"\u5bfc\u5165\u7528\u6237"),u.default.createElement(c.Button,{className:e+"hidden-md-up",onClick:this.onSubmit},"\u5bfc\u5165\u7528\u6237")),u.default.createElement("div",{className:"common-toolbar"},u.default.createElement(y.default,{isAdminPanel:!0})))}},{key:"render",value:function(){var e=this.state,t=e.isImportDepartmentDialogShow,n=e.isTreeLoading,a=e.importDepartment,r=e.importDepartmentChildrenCount,o=e.importDepartmentMembersCount,i=!(!m.isPro||!t||n||!a);return u.default.createElement(s.Fragment,null,this.renderNav(),u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},"\u4f01\u4e1a\u5fae\u4fe1\u96c6\u6210")),u.default.createElement("div",{className:"cur-view-content d-flex flex-row"},u.default.createElement(E.WorkWeixinDepartmentsTreePanel,{departmentsTree:this.state.departmentsTree,isTreeLoading:this.state.isTreeLoading,onChangeDepartment:this.onChangeDepartment,checkedDepartmentId:this.state.checkedDepartmentId,importDepartmentDialogToggle:this.importDepartmentDialogToggle}),u.default.createElement("div",{className:"dir-content-resize"}),u.default.createElement(E.WorkWeixinDepartmentMembersList,{isMembersListLoading:this.state.isMembersListLoading,membersList:this.state.membersList,checkedDepartmentId:this.state.checkedDepartmentId,newUsersTempObj:this.state.newUsersTempObj,onUserChecked:this.onUserChecked,onAllUsersChecked:this.onAllUsersChecked,isCheckedAll:this.state.isCheckedAll,canCheckUserIds:this.state.canCheckUserIds})))),i&&u.default.createElement(_.default,{importDepartmentDialogToggle:this.importDepartmentDialogToggle,onImportDepartmentSubmit:this.onImportDepartmentSubmit,departmentsCount:r,membersCount:o,departmentName:a.name}))}}]),t}(s.Component);t.default=S},2230:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.WorkWeixinDepartmentsTreeNode=t.WorkWeixinDepartmentsTreePanel=t.WorkWeixinDepartmentMembersList=void 0;var r=n(2231),o=a(r),i=n(2232),l=a(i),s=n(1001),u=a(s);t.WorkWeixinDepartmentMembersList=o.default,t.WorkWeixinDepartmentsTreePanel=l.default,t.WorkWeixinDepartmentsTreeNode=u.default},2231:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(8),h=a(m),g={isMembersListLoading:d.default.bool.isRequired,membersList:d.default.array.isRequired,newUsersTempObj:d.default.object.isRequired,checkedDepartmentId:d.default.number.isRequired,onUserChecked:d.default.func.isRequired,onAllUsersChecked:d.default.func.isRequired,isCheckedAll:d.default.bool.isRequired,canCheckUserIds:d.default.array.isRequired},v=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.newUsersTempObj,a=t.checkedDepartmentId,r=t.isMembersListLoading,o=t.canCheckUserIds,i=this.props.membersList.map(function(t,r){var o=t.avatar;return o=t.avatar.length>0?t.avatar.substring(0,t.avatar.length-1)+"100":p.siteRoot+"media/avatars/default.png",u.default.createElement("tr",{key:a.toString()+t.userid},u.default.createElement("td",null,!t.email&&u.default.createElement("input",{type:"checkbox",className:"vam",onChange:function(){return e.props.onUserChecked(t)},checked:t.userid in n?"checked":""})),u.default.createElement("td",null,u.default.createElement("img",{className:"avatar",src:o,alt:""})),u.default.createElement("td",null,t.name),u.default.createElement("td",null,t.mobile),u.default.createElement("td",null,t.contact_email),u.default.createElement("td",null,t.email&&u.default.createElement("i",{className:"sf2-icon-tick"})))});return u.default.createElement("div",{className:"dir-content-main"},r&&u.default.createElement(h.default,null),!r&&this.props.membersList.length>0&&u.default.createElement(f.Table,{hover:!0},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"5%"},o.length>0&&u.default.createElement("input",{type:"checkbox",className:"vam",checked:this.props.isCheckedAll,onChange:function(){return e.props.onAllUsersChecked()}})),u.default.createElement("th",{width:"10%"}),u.default.createElement("th",{width:"20%"},"\u540d\u79f0"),u.default.createElement("th",{width:"20%"},"\u624b\u673a\u53f7"),u.default.createElement("th",{width:"30%"},"\u90ae\u7bb1"),u.default.createElement("th",{width:"15%"},"\u5df2\u6dfb\u52a0"))),u.default.createElement("tbody",null,i)),!r&&0===this.props.membersList.length&&u.default.createElement("div",{className:"message empty-tip text-center"},u.default.createElement("img",{src:p.siteRoot+"media/img/member-list-empty-2x.png",alt:""}),u.default.createElement("h4",null,"\u6210\u5458\u5217\u8868\u4e3a\u7a7a")))}}]),t}(s.Component);v.propTypes=g,t.default=v},2232:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(8),p=a(f),m=n(1001),h=a(m),g={isTreeLoading:d.default.bool.isRequired,departmentsTree:d.default.array.isRequired,onChangeDepartment:d.default.func.isRequired,checkedDepartmentId:d.default.number.isRequired,importDepartmentDialogToggle:d.default.func.isRequired},v=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props.departmentsTree;return u.default.createElement("div",{className:"dir-content-nav"},u.default.createElement("div",{className:"tree-view tree"},this.props.isTreeLoading?u.default.createElement(p.default,null):u.default.createElement("div",{className:"tree-node"},t.length>0&&t.map(function(t,n){return u.default.createElement(h.default,{key:t.id,index:n,department:t,isChildrenShow:!0,onChangeDepartment:e.props.onChangeDepartment,checkedDepartmentId:e.props.checkedDepartmentId,importDepartmentDialogToggle:e.props.importDepartmentDialogToggle})}))))}}]),t}(s.Component);v.propTypes=g,t.default=v},2233:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(8),m=a(p),h={importDepartmentDialogToggle:d.default.func.isRequired,onImportDepartmentSubmit:d.default.func.isRequired,departmentsCount:d.default.number.isRequired,membersCount:d.default.number.isRequired,departmentName:d.default.string.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggle=function(){n.props.importDepartmentDialogToggle(null)},n.handleSubmit=function(){n.props.onImportDepartmentSubmit(),n.setState({isLoading:!0})},n.state={isLoading:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.departmentsCount,n=e.membersCount,a=e.departmentName;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},u.default.createElement("span",null,"\u5bfc\u5165\u90e8\u95e8 "),u.default.createElement("span",{className:"op-target",title:a},a)),u.default.createElement(f.ModalBody,null,u.default.createElement("p",null,"\u5c06\u8981\u5bfc\u5165 ",u.default.createElement("strong",null,t)," \u4e2a\u90e8\u95e8\uff0c\u5176\u4e2d\u5305\u62ec ",u.default.createElement("strong",null,n)," \u4e2a\u6210\u5458"),this.state.isLoading&&u.default.createElement(m.default,null)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},"\u53d6\u6d88"),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit},"\u5bfc\u5165")))}}]),t}(u.default.Component);g.propTypes=h,t.default=g},2234:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(255),f=a(d),p=n(4),m=n(1),h=n(3),g=n(5),v=a(g),b=n(29),y=a(b),E=n(2235),w=n(2238),_=a(w);n(1002),n(2239);var S=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getDepartmentsTree=function(e){for(var t=[],n=[],a=0;a<e.length;a++)-1===t.indexOf(e[a].id)&&t.push(e[a].id),-1===n.indexOf(e[a].parentid)&&n.push(e[a].parentid);var r=n.filter(function(e){return-1!==t.indexOf(e)}),o=n.concat(r).filter(function(e){return-1===n.indexOf(e)||-1===r.indexOf(e)}),i=f.default.cloneDeep(e);return i.filter(function(e){var t=i.filter(function(t){return e.id===t.parentid});return t.length>0&&(e.children=t),-1!==o.indexOf(e.parentid)})},n.getDingtalkDepartmentsList=function(e){p.seafileAPI.adminListDingtalkDepartments(e).then(function(t){if(e)n.setState({importDepartmentChildrenCount:t.data.department.length,importDepartmentMembersCount:n.state.membersTempObj[e].length});else{var a=n.getDepartmentsTree(t.data.department);n.setState({isTreeLoading:!1,departmentsTree:a})}}).catch(function(e){n.handleError(e),n.setState({isTreeLoading:!1,isMembersListLoading:!1}),e.response&&403===e.response.status&&(window.location=m.siteRoot+"sys/useradmin/")})},n.getDingtalkDepartmentMembersList=function(e){n.setState({isMembersListLoading:!0}),p.seafileAPI.adminListDingtalkDepartmentMembers(e).then(function(t){var a=n.state.membersTempObj;a[e]=t.data.userlist;var r=n.getCanCheckUserIds(t.data.userlist);n.setState({membersTempObj:a,membersList:t.data.userlist,isMembersListLoading:!1,canCheckUserIds:r})}).catch(function(e){n.setState({isMembersListLoading:!1}),n.handleError(e)})},n.getCanCheckUserIds=function(e){var t=[];return e.forEach(function(e){e.email||t.push(e.userid)}),t},n.onChangeDepartment=function(e){if(n.setState({newUsersTempObj:{},isCheckedAll:!1,checkedDepartmentId:e}),e in n.state.membersTempObj){var t=n.getCanCheckUserIds(n.state.membersTempObj[e]);n.setState({membersList:n.state.membersTempObj[e],canCheckUserIds:t})}else n.getDingtalkDepartmentMembersList(e)},n.onUserChecked=function(e){if(-1!==n.state.canCheckUserIds.indexOf(e.userid)){var t=n.state.newUsersTempObj;e.userid in t?(delete t[e.userid],n.state.isCheckedAll&&n.setState({isCheckedAll:!1})):(t[e.userid]=e,Object.keys(t).length===n.state.canCheckUserIds.length&&n.setState({isCheckedAll:!0})),n.setState({newUsersTempObj:t})}},n.onAllUsersChecked=function(){n.setState({isCheckedAll:!n.state.isCheckedAll},function(){if(n.state.isCheckedAll){for(var e={},t=n.state.membersList.filter(function(e){return-1!==n.state.canCheckUserIds.indexOf(e.userid)}),a=0;a<t.length;a++)e[t[a].userid]=t[a];n.setState({newUsersTempObj:e})}else n.setState({newUsersTempObj:{}})})},n.onSubmit=function(){var e=n.state.newUsersTempObj;if("{}"!==JSON.stringify(e)){var t=[];for(var a in e)t.push(e[a]);if(0===t.length)return void v.default.danger("\u672a\u9009\u62e9\u6210\u5458",{duration:3});p.seafileAPI.adminAddDingtalkUsersBatch(t).then(function(e){if(n.setState({newUsersTempObj:{},isCheckedAll:!1}),e.data.success&&n.handleSubmitSuccess(e.data.success),e.data.failed)for(var t=e.data.failed,a=0;a<t.length;a++)v.default.danger(t[a].name+" "+t[a].error_msg,{duration:3})}).catch(function(e){n.handleError(e)})}},n.handleSubmitSuccess=function(e){for(var t=n.state,a=t.membersTempObj,r=t.membersList,o=t.canCheckUserIds,i=0;i<e.length;i++){var l=e[i],s=l.userid,u=l.name,c=l.email;v.default.success(u+" \u6210\u529f\u5bfc\u5165",{duration:1}),-1!==o.indexOf(s)&&o.splice(o.indexOf(s),1);for(var d=0;d<r.length;d++)if(r[d].userid===s){r[d].email=c;break}for(var f in a)for(var p=0;p<a[f].length;p++)if(a[f][p].userid===s){a[f][p].email=c;break}}n.setState({membersTempObj:a,membersList:r,canCheckUserIds:o})},n.importDepartmentDialogToggle=function(e){n.setState({isImportDepartmentDialogShow:!n.state.isImportDepartmentDialogShow,importDepartment:e},function(){e&&n.getDingtalkDepartmentsList(e.id)})},n.onImportDepartmentSubmit=function(){var e=n.state.importDepartment;e&&p.seafileAPI.adminImportDingtalkDepartment(e.id).then(function(t){n.setState({isMembersListLoading:!0,checkedDepartmentId:e.id,membersTempObj:{},membersList:[],newUsersTempObj:{},isCheckedAll:!1,canCheckUserIds:[]}),n.getDingtalkDepartmentMembersList(e.id),n.importDepartmentDialogToggle(null),t.data.success&&n.handleImportDepartmentSubmitSuccess(t.data.success),t.data.failed&&n.handleImportDepartmentSubmitFailed(t.data.failed)}).catch(function(e){n.handleError(e)})},n.handleImportDepartmentSubmitSuccess=function(e){for(var t=0,n=e.length;t<n;t++){var a=e[t],r="department"===a.type?"\u90e8\u95e8 "+a.department_name+" \u5bfc\u5165\u6210\u529f":a.api_user_name+" \u5bfc\u5165\u6210\u529f";v.default.success(r,{duration:3})}},n.handleImportDepartmentSubmitFailed=function(e){for(var t=0,n=e.length;t<n;t++){var a=e[t],r="department"===a.type?a.department_name:a.api_user_name;v.default.danger(r+" "+a.msg,{duration:3})}},n.handleError=function(e){var t=h.Utils.getErrorMsg(e);v.default.danger(t)},n.state={isTreeLoading:!0,isMembersListLoading:!0,departmentsTree:[],checkedDepartmentId:0,membersTempObj:{},membersList:[],newUsersTempObj:{},isCheckedAll:!1,canCheckUserIds:[],isImportDepartmentDialogShow:!1,importDepartment:null,importDepartmentChildrenCount:0,importDepartmentMembersCount:0},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.getDingtalkDepartmentsList(null)}},{key:"renderNav",value:function(){var e="btn btn-secondary operation-item ";return u.default.createElement("div",{className:"main-panel-north border-left-show"},u.default.createElement("div",{className:"cur-view-toolbar"},u.default.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"}),u.default.createElement(c.Button,{className:e+"my-1 d-md-none",onClick:this.onSubmit},"\u5bfc\u5165\u7528\u6237"),u.default.createElement(c.Button,{className:e+"hidden-md-up",onClick:this.onSubmit},"\u5bfc\u5165\u7528\u6237")),u.default.createElement("div",{className:"common-toolbar"},u.default.createElement(y.default,{isAdminPanel:!0})))}},{key:"render",value:function(){var e=this.state,t=e.isImportDepartmentDialogShow,n=e.isTreeLoading,a=e.importDepartment,r=e.importDepartmentChildrenCount,o=e.importDepartmentMembersCount,i=!(!m.isPro||!t||n||!a);return u.default.createElement(s.Fragment,null,this.renderNav(),u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},"\u9489\u9489\u96c6\u6210")),u.default.createElement("div",{className:"cur-view-content d-flex flex-row"},u.default.createElement(E.DingtalkDepartmentsTreePanel,{departmentsTree:this.state.departmentsTree,isTreeLoading:this.state.isTreeLoading,onChangeDepartment:this.onChangeDepartment,checkedDepartmentId:this.state.checkedDepartmentId,importDepartmentDialogToggle:this.importDepartmentDialogToggle}),u.default.createElement("div",{className:"dir-content-resize"}),u.default.createElement(E.DingtalkDepartmentMembersList,{isMembersListLoading:this.state.isMembersListLoading,membersList:this.state.membersList,checkedDepartmentId:this.state.checkedDepartmentId,newUsersTempObj:this.state.newUsersTempObj,onUserChecked:this.onUserChecked,onAllUsersChecked:this.onAllUsersChecked,isCheckedAll:this.state.isCheckedAll,canCheckUserIds:this.state.canCheckUserIds})))),i&&u.default.createElement(_.default,{importDepartmentDialogToggle:this.importDepartmentDialogToggle,onImportDepartmentSubmit:this.onImportDepartmentSubmit,departmentsCount:r,membersCount:o,departmentName:a.name}))}}]),t}(s.Component);t.default=S},2235:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DingtalkDepartmentsTreeNode=t.DingtalkDepartmentsTreePanel=t.DingtalkDepartmentMembersList=void 0;var r=n(2236),o=a(r),i=n(2237),l=a(i),s=n(1003),u=a(s);t.DingtalkDepartmentMembersList=o.default,t.DingtalkDepartmentsTreePanel=l.default,t.DingtalkDepartmentsTreeNode=u.default},2236:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(8),h=a(m),g={isMembersListLoading:d.default.bool.isRequired,membersList:d.default.array.isRequired,newUsersTempObj:d.default.object.isRequired,checkedDepartmentId:d.default.number.isRequired,onUserChecked:d.default.func.isRequired,onAllUsersChecked:d.default.func.isRequired,isCheckedAll:d.default.bool.isRequired,canCheckUserIds:d.default.array.isRequired},v=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.newUsersTempObj,a=t.checkedDepartmentId,r=t.isMembersListLoading,o=t.canCheckUserIds,i=this.props.membersList.map(function(t,r){var o=t.avatar;return o=t.avatar.length>0?t.avatar:p.siteRoot+"media/avatars/default.png",u.default.createElement("tr",{key:a.toString()+t.userid},u.default.createElement("td",null,!t.email&&u.default.createElement("input",{type:"checkbox",className:"vam",onChange:function(){return e.props.onUserChecked(t)},checked:t.userid in n?"checked":""})),u.default.createElement("td",null,u.default.createElement("img",{className:"avatar",src:o,alt:""})),u.default.createElement("td",null,t.name),u.default.createElement("td",null,t.mobile),u.default.createElement("td",null,t.contact_email),u.default.createElement("td",null,t.email&&u.default.createElement("i",{className:"sf2-icon-tick"})))});return u.default.createElement("div",{className:"dir-content-main"},r&&u.default.createElement(h.default,null),!r&&this.props.membersList.length>0&&u.default.createElement(f.Table,{hover:!0},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"5%"},o.length>0&&u.default.createElement("input",{type:"checkbox",className:"vam",checked:this.props.isCheckedAll,onChange:function(){return e.props.onAllUsersChecked()}})),u.default.createElement("th",{width:"10%"}),u.default.createElement("th",{width:"20%"},"\u540d\u79f0"),u.default.createElement("th",{width:"20%"},"\u624b\u673a\u53f7"),u.default.createElement("th",{width:"30%"},"\u90ae\u7bb1"),u.default.createElement("th",{width:"15%"},"\u5df2\u6dfb\u52a0"))),u.default.createElement("tbody",null,i)),!r&&0===this.props.membersList.length&&u.default.createElement("div",{className:"message empty-tip text-center"},u.default.createElement("img",{src:p.siteRoot+"media/img/member-list-empty-2x.png",alt:""}),u.default.createElement("h4",null,"\u6210\u5458\u5217\u8868\u4e3a\u7a7a")))}}]),t}(s.Component);v.propTypes=g,t.default=v},2237:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(8),p=a(f),m=n(1003),h=a(m),g={isTreeLoading:d.default.bool.isRequired,departmentsTree:d.default.array.isRequired,onChangeDepartment:d.default.func.isRequired,checkedDepartmentId:d.default.number.isRequired,importDepartmentDialogToggle:d.default.func.isRequired},v=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props.departmentsTree;return u.default.createElement("div",{className:"dir-content-nav"},u.default.createElement("div",{className:"tree-view tree"},this.props.isTreeLoading?u.default.createElement(p.default,null):u.default.createElement("div",{className:"tree-node"},t.length>0&&t.map(function(t,n){return u.default.createElement(h.default,{key:t.id,index:n,department:t,isChildrenShow:!0,onChangeDepartment:e.props.onChangeDepartment,checkedDepartmentId:e.props.checkedDepartmentId,importDepartmentDialogToggle:e.props.importDepartmentDialogToggle})}))))}}]),t}(s.Component);v.propTypes=g,t.default=v},2238:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(8),m=a(p),h={importDepartmentDialogToggle:d.default.func.isRequired,onImportDepartmentSubmit:d.default.func.isRequired,departmentsCount:d.default.number.isRequired,membersCount:d.default.number.isRequired,departmentName:d.default.string.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggle=function(){n.props.importDepartmentDialogToggle(null)},n.handleSubmit=function(){n.props.onImportDepartmentSubmit(),n.setState({isLoading:!0})},n.state={isLoading:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.departmentsCount,n=e.membersCount,a=e.departmentName;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},u.default.createElement("span",null,"\u5bfc\u5165\u90e8\u95e8 "),u.default.createElement("span",{className:"op-target",title:a},a)),u.default.createElement(f.ModalBody,null,u.default.createElement("p",null,"\u5c06\u8981\u5bfc\u5165 ",u.default.createElement("strong",null,t)," \u4e2a\u90e8\u95e8\uff0c\u5176\u4e2d\u5305\u62ec ",u.default.createElement("strong",null,n)," \u4e2a\u6210\u5458"),this.state.isLoading&&u.default.createElement(m.default,null)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},"\u53d6\u6d88"),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit},"\u5bfc\u5165")))}}]),t}(u.default.Component);g.propTypes=h,t.default=g},2239:function(e,t){},224:function(e,t){},2240:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(7),f=a(d),p=n(3),m=n(4),h=n(1),g=n(5),v=a(g),b=n(33),y=a(b),E=n(8),w=a(E),_=n(63),S=a(_),x=n(132),P=a(x),C=n(31),O=a(C),D=n(67),M=a(D),k=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPage=function(){n.props.getItemsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getItemsByPage(n.props.currentPage+1)},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items,o=(t.pageInfo,t.curPerPage),i=t.hasNextPage,l=t.currentPage;if(n)return u.default.createElement(w.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var c=u.default.createElement(y.default,null,u.default.createElement("h2",null,(0,h.gettext)("No invitations"))),d=u.default.createElement(s.Fragment,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"20%"},(0,h.gettext)("Inviter")),u.default.createElement("th",{width:"20%"},(0,h.gettext)("Accepter")),u.default.createElement("th",{width:"9%"},(0,h.gettext)("Type")),u.default.createElement("th",{width:"14%"},(0,h.gettext)("Invited at")),u.default.createElement("th",{width:"14%"},(0,h.gettext)("Accepted at")),u.default.createElement("th",{width:"18%"},(0,h.gettext)("Expired at")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(T,{key:n,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteItem:e.props.deleteItem})}))),u.default.createElement(S.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:l,hasNextPage:i,curPerPage:o,resetPerPage:this.props.resetPerPage}));return r.length?d:c}}]),t}(s.Component),T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.deleteItem=function(){n.props.deleteItem(n.props.item)},n.translateOperations=function(e){var t="";switch(e){case"Delete":t=(0,h.gettext)("Delete")}return t},n.onMenuItemClick=function(e){switch(e){case"Delete":n.deleteItem()}},n.getInviteTypeText=function(){var e="";switch(n.props.item.invite_type){case"Guest":e=(0,h.gettext)("Guest")}return e},n.state={isOpIconShown:!1,highlight:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.state.isOpIconShown;return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,u.default.createElement(M.default,{email:e.inviter_email,name:e.inviter_name})),u.default.createElement("td",null,e.accept_time?u.default.createElement(M.default,{email:e.accepter_email,name:e.accepter_name}):e.accepter_email),u.default.createElement("td",null,this.getInviteTypeText()),u.default.createElement("td",null,u.default.createElement("span",{title:(0,f.default)(e.invite_time).format("llll")},(0,f.default)(e.invite_time).fromNow())),u.default.createElement("td",null,e.accept_time?u.default.createElement("span",{title:(0,f.default)(e.accept_time).format("llll")},(0,f.default)(e.accept_time).fromNow()):"--"),u.default.createElement("td",null,e.is_expired?u.default.createElement("span",{className:"text-red"},(0,f.default)(e.expire_time).format("YYYY-MM-DD HH:mm")):(0,f.default)(e.expire_time).format("YYYY-MM-DD HH:mm")),u.default.createElement("td",null,t&&u.default.createElement(P.default,{operations:["Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))))}}]),t}(s.Component),L=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getItemsByPage=function(e){var t=n.state.perPage;m.seafileAPI.sysAdminListInvitations(e,t).then(function(a){n.setState({loading:!1,items:a.data.invitation_list,hasNextPage:p.Utils.hasNextPage(e,t,a.data.total_count),currentPage:e})}).catch(function(e){n.setState({loading:!1,errorMsg:p.Utils.getErrorMsg(e,!0)})})},n.deleteItem=function(e){var t=e.token;m.seafileAPI.sysAdminDeleteInvitation(t).then(function(e){var a=n.state.items.filter(function(e){return e.token!=t});n.setState({items:a}),v.default.success((0,h.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.deleteItemInBatch=function(){m.seafileAPI.sysAdminDeleteExpiredInvitations().then(function(e){var t=n.state.items,a=n.state.items.filter(function(e){return!e.is_expired});a.length<t.length&&(n.setState({items:a}),v.default.success((0,h.gettext)("Operation succeeded.")))}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.resetPerPage=function(e){n.setState({perPage:e},function(){n.getItemsByPage(1)})},n.state={loading:!0,errorMsg:"",items:[],totalItemCount:0,hasNextPage:!1,currentPage:1,perPage:25},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.getItemsByPage(e.state.currentPage)})}},{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement(O.default,null,u.default.createElement(c.Button,{className:"btn btn-secondary operation-item",onClick:this.deleteItemInBatch},(0,h.gettext)("Delete Expired Invitations"))),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,h.gettext)("Invitations"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(k,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.items,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getItemsByPage:this.getItemsByPage,deleteItem:this.deleteItem})))))}}]),t}(s.Component);t.default=L},2241:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(6),d=n(3),f=n(4),p=n(1),m=n(1004),h=a(m),g=n(13),v=a(g),b=n(5),y=a(b),E=n(31),w=a(E),_=n(2244),S=a(_),x=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleAddTermDialog=function(){n.setState({isAddTermDialogOpen:!n.state.isAddTermDialogOpen})},n.addTerm=function(e,t,n,a){f.seafileAPI.sysAdminAddTermAndCondition(e,t,n,a).then(function(e){location.reload()}).catch(function(e){var t=d.Utils.getErrorMsg(e);y.default.danger(t)})},n.updateTerm=function(e,t,a,r,o){f.seafileAPI.sysAdminUpdateTermAndCondition(e,t,a,r,o).then(function(t){var a=n.state.termList.map(function(n){return n.id==e?t.data:n});n.setState({termList:a}),y.default.success((0,p.gettext)("Update succeeded."))}).catch(function(e){var t=d.Utils.getErrorMsg(e);y.default.danger(t)})},n.deleteTerm=function(e){f.seafileAPI.sysAdminDeleteTermAndCondition(e).then(function(t){var a=n.state.termList.filter(function(t){return t.id!=e});n.setState({termList:a}),y.default.success((0,p.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=d.Utils.getErrorMsg(e);y.default.danger(t)})},n.state={loading:!0,errorMsg:"",termList:[],isAddTermDialogOpen:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;f.seafileAPI.sysAdminListTermsAndConditions().then(function(t){e.setState({termList:t.data.term_and_condition_list,loading:!1})}).catch(function(t){e.setState({loading:!1,errorMsg:d.Utils.getErrorMsg(t,!0)})})}},{key:"render",value:function(){var e=this.state,t=e.termList,n=e.isAddTermDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement(w.default,null,u.default.createElement(c.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleAddTermDialog},(0,p.gettext)("Add"))),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},(0,p.gettext)("Terms and Conditions"))),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(S.default,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,deleteTerm:this.deleteTerm,updateTerm:this.updateTerm})))),n&&u.default.createElement(v.default,null,u.default.createElement(h.default,{isUpdate:!1,addTerm:this.addTerm,toggle:this.toggleAddTermDialog})))}}]),t}(s.Component);t.default=x},2242:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(550),m=n(1),h={title:d.default.string,content:d.default.string,onCommit:d.default.func.isRequired,onCloseEditorDialog:d.default.func.isRequired},g=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.onKeyDown=function(e){e.stopPropagation()},a.toggle=function(){if(a.isContentChanged()){var e=a.getCurrentContent();a.props.onCommit(e)}a.props.onCloseEditorDialog()},a.isContentChanged=function(){return a.simpleEditor.hasContentChange()},a.getCurrentContent=function(){return a.simpleEditor.getMarkdown()},a.setSimpleEditorRef=function(e){a.simpleEditor=e},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.content,n=e.title;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle,onKeyDown:this.onKeyDown,wrapClassName:"conditions-editor-dialog-wrapper",className:"conditions-editor-dialog",contentClassName:"conditions-editor-dialog-content",size:"lg",style:{width:770}},u.default.createElement(f.ModalHeader,{className:"conditions-editor-dialog-title",toggle:this.toggle},n),u.default.createElement(f.ModalBody,{className:"conditions-editor-dialog-main"},u.default.createElement(p.SimpleEditor,{onRef:this.setSimpleEditorRef.bind(this),value:t||""})))}}]),t}(u.default.Component);g.defaultProps={title:(0,m.gettext)("Terms")},g.propTypes=h,t.default=g},2243:function(e,t){},2244:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(1),p=n(33),m=a(p),h=n(8),g=a(h),v=n(2245),b=a(v),y={loading:d.default.bool.isRequired,items:d.default.array.isRequired,errorMsg:d.default.string,deleteTerm:d.default.func.isRequired,updateTerm:d.default.func.isRequired},E=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items;if(n)return u.default.createElement(g.default,null);if(a)return u.default.createElement("p",{className:"error text-center"},a);var o=u.default.createElement(m.default,null,u.default.createElement("h2",null,(0,f.gettext)("No terms and conditions"))),i=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"20%"},(0,f.gettext)("Name")),u.default.createElement("th",{width:"10%"},(0,f.gettext)("Version")),u.default.createElement("th",{width:"25%"},(0,f.gettext)("Text")),u.default.createElement("th",{width:"20%"},(0,f.gettext)("Created")),u.default.createElement("th",{width:"20%"},(0,f.gettext)("Activated")),u.default.createElement("th",{width:"5%"}))),r&&u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(b.default,{key:n,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteTerm:e.props.deleteTerm,updateTerm:e.props.updateTerm})}))));return r.length?i:o}}]),t}(s.Component);E.propTypes=y,t.default=E},2245:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(7),p=a(f),m=n(120),h=n(1),g=n(3),v=n(2246),b=a(v),y=n(1004),E=a(y),w=n(107),_=a(w),S=n(2247),x=a(S),P=n(13),C=a(P),O=n(132),D=a(O),M={item:d.default.object.isRequired,isItemFreezed:d.default.bool.isRequired,onFreezedItem:d.default.func.isRequired,onUnfreezedItem:d.default.func.isRequired,deleteTerm:d.default.func.isRequired,updateTerm:d.default.func.isRequired},k=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.toggleUpdateDialog=function(e){n.setState({isUpdateDialogOpen:!n.state.isUpdateDialogOpen})},n.toggleDeleteDialog=function(e){n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.toggleTermsContentDialog=function(e){n.setState({isTermsPerviewDialogOpen:!n.state.isTermsPerviewDialogOpen})},n.onMenuItemClick=function(e){switch(e){case"Update":n.toggleUpdateDialog();break;case"Delete":n.toggleDeleteDialog()}},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.deleteTerm=function(){n.props.deleteTerm(n.props.item.id),n.toggleDeleteDialog()},n.updateTerm=function(e,t,a,r){n.props.updateTerm(n.props.item.id,e,t,a,r),n.toggleUpdateDialog()},n.translateOperations=function(e){var t="";switch(e){case"Update":t=(0,h.gettext)("Update");break;case"Delete":t=(0,h.gettext)("Delete")}return t},n.state={itemContent:"...",isOpIconShown:!1,isUpdateDialogOpen:!1,isDeleteDialogOpen:!1,isTermsPerviewDialogOpen:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.item.text;m.processor.process(t).then(function(t){var n=String(t);e.setState({itemContent:n})})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.item.text!==this.props.item.text){var n=e.item.text;m.processor.process(n).then(function(e){var n=String(e);t.setState({itemContent:n})})}}},{key:"render",value:function(){var e=this.props.item,t=this.state,n=t.isDeleteDialogOpen,a=t.isUpdateDialogOpen,r=t.isTermsPerviewDialogOpen,o=(0,b.default)(e.text),i='<span class="op-target">'+g.Utils.HTMLescape(e.name)+"</span>",l=(0,h.gettext)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",i);return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,e.name),u.default.createElement("td",null,e.version_number),u.default.createElement("td",{className:"ellipsis"},u.default.createElement("a",{href:"#",onClick:this.toggleTermsContentDialog},o.previewText)),u.default.createElement("td",null,(0,p.default)(e.ctime).fromNow()),u.default.createElement("td",null,e.activate_time?(0,p.default)(e.activate_time).fromNow():"--"),u.default.createElement("td",null,this.state.isOpIconShown&&u.default.createElement(D.default,{operations:["Update","Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),n&&u.default.createElement(C.default,null,u.default.createElement(_.default,{title:(0,h.gettext)("Delete T&C"),message:l,toggleDialog:this.toggleDeleteDialog,executeOperation:this.deleteTerm,confirmBtnText:(0,h.gettext)("Delete")})),a&&u.default.createElement(C.default,null,u.default.createElement(E.default,{updateTerm:this.updateTerm,toggle:this.toggleUpdateDialog,isUpdate:!0,oldTermObj:e})),r&&u.default.createElement(C.default,null,u.default.createElement(x.default,{content:e.text,onClosePreviewDialog:this.toggleTermsContentDialog})))}}]),t}(s.Component);k.propTypes=M,t.default=k},2246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=/\[.+\]\(\S+\)|<img src=(\S+).+\/>|!\[\]\(\S+\)|<\S+>/g,r=/^<img src="(\S+)" .+\/>/,o=/^!\[\]\((\S+)\)/,i=/^\[.+\]\(\S+\)/,l=/^<\S+>$/,s=function(e){var t={links:[],images:[]};return e.forEach(function(e){if(e.search(i)>=0||e.search(l)>=0)t.links.push(e);else{var n=e.match(r),a=e.match(o);n?t.images.push(n[1]):a&&t.images.push(a[1])}}),t},u=function(e){for(var t="",n=e.replace(a,""),r=0;r<n.length&&("#"===n[r]||("\n"===n[r]?t+=" ":t+=n[r],30!==t.length));r++);var o=e.match(a);if(o){var i=s(o);return{previewText:t,images:i.images,links:i.links}}return{previewText:t,images:[],links:[]}};t.default=u},2247:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(354),m=a(p),h=n(1),g={title:d.default.string,content:d.default.string,onClosePreviewDialog:d.default.func.isRequired},v=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.toggle=function(){a.props.onClosePreviewDialog()},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.content;return u.default.createElement(f.Modal,{isOpen:!0,size:"lg",style:{width:600},wrapClassName:"conditions-perview-wrapper",toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},t),u.default.createElement(f.ModalBody,null,u.default.createElement(m.default,{content:n})))}}]),t}(u.default.Component);v.defaultProps={title:(0,h.gettext)("Terms")},v.propTypes=g,t.default=v},2248:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(4),p=n(1),m=n(3),h=n(5),g=a(h),v=n(132),b=a(v),y=n(8),E=a(y),w=n(63),_=a(w),S=n(31),x=a(S),P=n(1005),C=a(P),O={virusFile:d.default.object.isRequired,isItemFreezed:d.default.bool.isRequired,onFreezedItem:d.default.func.isRequired,onUnfreezedItem:d.default.func.isRequired},D=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.onMenuItemClick=function(e){n.props.handleFile(n.props.virusFile.virus_id,e)},n.translateOperations=function(e){var t="";switch(e){case"delete":t=(0,p.gettext)("Delete");break;case"ignore":t=(0,p.gettext)("Ignore");break;case"do-not-ignore":t=(0,p.gettext)("Don't ignore")}return t},n.state={highlight:!1,isOpIconShown:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.virusFile,t="",n=[];return e.has_deleted?t=u.default.createElement("span",{className:"text-green"},(0,p.gettext)("Deleted")):e.has_ignored?(t=u.default.createElement("span",{className:"text-orange"},(0,p.gettext)("Ignored")),n=["do-not-ignore"]):(t=u.default.createElement("span",{className:"text-red"},(0,p.gettext)("Unhandled")),n=["delete","ignore"]),u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,e.repo_name),u.default.createElement("td",null,e.repo_owner),u.default.createElement("td",null,e.file_path),u.default.createElement("td",null,t),u.default.createElement("td",null,n.length>0&&this.state.isOpIconShown&&u.default.createElement(b.default,{operations:n,translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})))}}]),t}(s.Component);D.propTypes=O;var M={loading:d.default.bool.isRequired,errorMsg:d.default.string.isRequired,virusFiles:d.default.array.isRequired},k=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPage=function(){n.props.getListByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getListByPage(n.props.currentPage+1)},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.virusFiles,o=t.curPerPage,i=t.hasNextPage,l=t.currentPage;return n?u.default.createElement(E.default,null):a?u.default.createElement("p",{className:"error text-center mt-4"},a):u.default.createElement(s.Fragment,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"27%"},(0,p.gettext)("Library")),u.default.createElement("th",{width:"25%"},(0,p.gettext)("Owner")),u.default.createElement("th",{width:"28%"},(0,p.gettext)("Virus File")),u.default.createElement("th",{width:"15%"},(0,p.gettext)("Status")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(D,{key:n,virusFile:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,handleFile:e.props.handleFile})}))),r.length>0&&u.default.createElement(_.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:l,hasNextPage:i,curPerPage:o,resetPerPage:this.props.resetPerPage}))}}]),t}(s.Component);k.propTypes=M;var T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getListByPage=function(e){var t=n.state.perPage;f.seafileAPI.listVirusFiles(e,t).then(function(e){var t=e.data;n.setState({loading:!1,virusFiles:t.virus_file_list,hasNextPage:t.has_next_page})}).catch(function(e){n.setState({loading:!1,errorMsg:m.Utils.getErrorMsg(e,!0)})})},n.resetPerPage=function(e){n.setState({perPage:e},function(){n.getListByPage(1)})},n.handleFile=function(e,t){var a=void 0;switch(t){case"delete":a=f.seafileAPI.deleteVirusFile(e);break;case"ignore":a=f.seafileAPI.toggleIgnoreVirusFile(e,!0);break;case"do-not-ignore":a=f.seafileAPI.toggleIgnoreVirusFile(e,!1)}a.then(function(a){n.setState({virusFiles:n.state.virusFiles.map(function(n){return n.virus_id==e&&("delete"==t?n.has_deleted=!0:n=a.data.virus_file),n})})}).catch(function(e){g.default.danger(m.Utils.getErrorMsg(e))})},n.state={loading:!0,errorMsg:"",virusFiles:[],currentPage:1,perPage:25,hasNextPage:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.getListByPage(e.state.currentPage)})}},{key:"render",value:function(){return u.default.createElement(s.Fragment,null,u.default.createElement(x.default,null),u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(C.default,{currentItem:"all"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(k,{loading:this.state.loading,errorMsg:this.state.errorMsg,virusFiles:this.state.virusFiles,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getListByPage:this.getListByPage,handleFile:this.handleFile})))))}}]),t}(s.Component);t.default=T},2249:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(4),m=n(1),h=n(3),g=n(5),v=a(g),b=n(132),y=a(b),E=n(8),w=a(E),_=n(63),S=a(_),x=n(31),P=a(x),C=n(1005),O=a(C),D={virusFile:d.default.object.isRequired,isItemFreezed:d.default.bool.isRequired,onFreezedItem:d.default.func.isRequired,onUnfreezedItem:d.default.func.isRequired},M=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.onMenuItemClick=function(e){n.props.handleFile(n.props.virusFile.virus_id,e)},n.translateOperations=function(e){var t="";switch(e){case"delete":t=(0,m.gettext)("Delete");break;case"ignore":t=(0,m.gettext)("Ignore");break;case"do-not-ignore":t=(0,m.gettext)("Don't ignore")}return t},n.toggleItemSelected=function(e){n.props.toggleItemSelected(n.props.virusFile,e.target.checked)},n.state={highlight:!1,isOpIconShown:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.virusFile,t="",n=[];return e.has_deleted?t=u.default.createElement("span",{className:"text-green"},(0,m.gettext)("Deleted")):e.has_ignored?(t=u.default.createElement("span",{className:"text-orange"},(0,m.gettext)("Ignored")),n=["do-not-ignore"]):(t=u.default.createElement("span",{className:"text-red"},(0,m.gettext)("Unhandled")),n=["delete","ignore"]),u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",{className:"text-center"},u.default.createElement("input",{type:"checkbox",checked:e.isSelected,onChange:this.toggleItemSelected})),u.default.createElement("td",null,e.repo_name),u.default.createElement("td",null,e.repo_owner),u.default.createElement("td",null,e.file_path),u.default.createElement("td",null,t),u.default.createElement("td",null,n.length>0&&this.state.isOpIconShown&&u.default.createElement(y.default,{operations:n,translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})))}}]),t}(s.Component);M.propTypes=D;var k={loading:d.default.bool.isRequired,errorMsg:d.default.string.isRequired,virusFiles:d.default.array.isRequired},T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPage=function(){n.props.getListByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getListByPage(n.props.currentPage+1)},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.virusFiles,o=t.curPerPage,i=t.hasNextPage,l=t.currentPage,c=t.isAllItemsSelected;return n?u.default.createElement(w.default,null):a?u.default.createElement("p",{className:"error text-center mt-4"},a):u.default.createElement(s.Fragment,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"3%",className:"text-center"},u.default.createElement("input",{type:"checkbox",checked:c,onChange:this.props.toggleAllSelected})),u.default.createElement("th",{width:"24%"},(0,m.gettext)("Library")),u.default.createElement("th",{width:"25%"},(0,m.gettext)("Owner")),u.default.createElement("th",{width:"28%"},(0,m.gettext)("Virus File")),u.default.createElement("th",{width:"15%"},(0,m.gettext)("Status")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(M,{key:n,virusFile:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,handleFile:e.props.handleFile,toggleItemSelected:e.props.toggleItemSelected})}))),r.length>0&&u.default.createElement(S.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:l,hasNextPage:i,curPerPage:o,resetPerPage:this.props.resetPerPage}))}}]),t}(s.Component);T.propTypes=k;var L=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getListByPage=function(e){var t=n.state.perPage;p.seafileAPI.listVirusFiles(e,t,!1).then(function(e){var t=e.data,a=t.virus_file_list.map(function(e){return e.isSelected=!1,e});n.setState({loading:!1,virusFiles:a,hasNextPage:t.has_next_page})}).catch(function(e){n.setState({loading:!1,errorMsg:h.Utils.getErrorMsg(e,!0)})})},n.resetPerPage=function(e){n.setState({perPage:e},function(){n.getListByPage(1)})},n.handleFile=function(e,t){var a=void 0;switch(t){case"delete":a=p.seafileAPI.deleteVirusFile(e);break;case"ignore":a=p.seafileAPI.toggleIgnoreVirusFile(e,!0);break;case"do-not-ignore":a=p.seafileAPI.toggleIgnoreVirusFile(e,!1)}a.then(function(a){n.setState({virusFiles:n.state.virusFiles.map(function(n){return n.virus_id==e&&("delete"==t?n.has_deleted=!0:n=a.data.virus_file),n})})}).catch(function(e){v.default.danger(h.Utils.getErrorMsg(e))})},n.toggleAllSelected=function(){n.setState(function(e){return{isAllItemsSelected:!e.isAllItemsSelected,virusFiles:n.state.virusFiles.map(function(t){return t.isSelected=!e.isAllItemsSelected,t})}})},n.toggleItemSelected=function(e,t){n.setState({virusFiles:n.state.virusFiles.map(function(n){return n===e&&(n.isSelected=t),n})},function(){n.setState({isAllItemsSelected:!n.state.virusFiles.some(function(e){return!e.isSelected})})})},n.handleSelectedItems=function(e){var t=n.state.virusFiles.filter(function(t){return"delete-virus"==e?t.isSelected&&!t.has_deleted:t.isSelected&&!t.has_ignored}).map(function(e){return e.virus_id});p.seafileAPI.batchProcessVirusFiles(t,e).then(function(t){var a=n.state.virusFiles;t.data.success.forEach(function(t){var n=a.find(function(e){return e.virus_id==t.virus_id});"delete-virus"==e?n.has_deleted=!0:n.has_ignored=!0}),n.setState({virusFiles:a}),t.data.failed.forEach(function(t){var n=a.find(function(e){return e.virus_id==t.virus_id}),r="delete-virus"==e?(0,m.gettext)("Failed to delete %(virus_file) from library %(library): %(error_msg)"):(0,m.gettext)("Failed to ignore %(virus_file) from library %(library): %(error_msg)");r=r.replace("%(virus_file)",n.file_path).replace("%(library)",n.repo_name).replace("%(error_msg)",t.error_msg),v.default.danger(r)})}).catch(function(e){v.default.danger(h.Utils.getErrorMsg(e))})},n.deleteSelectedItems=function(){n.handleSelectedItems("delete-virus")},n.ignoreSelectedItems=function(){n.handleSelectedItems("ignore-virus")},n.state={loading:!0,errorMsg:"",virusFiles:[],isAllItemsSelected:!1,selectedItems:[],currentPage:1,perPage:25,hasNextPage:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.getListByPage(e.state.currentPage)})}},{key:"render",value:function(){return u.default.createElement(s.Fragment,null,this.state.virusFiles.some(function(e){return e.isSelected})?u.default.createElement(P.default,null,u.default.createElement(s.Fragment,null,u.default.createElement(f.Button,{onClick:this.deleteSelectedItems,className:"operation-item"},(0,m.gettext)("Delete")),u.default.createElement(f.Button,{onClick:this.ignoreSelectedItems,className:"operation-item"},(0,m.gettext)("Ignore")))):u.default.createElement(P.default,null),u.default.createElement("div",{className:"main-panel-center"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(O.default,{currentItem:"unhandled"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(T,{loading:this.state.loading,errorMsg:this.state.errorMsg,virusFiles:this.state.virusFiles,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getListByPage:this.getListByPage,handleFile:this.handleFile,isAllItemsSelected:this.state.isAllItemsSelected,toggleAllSelected:this.toggleAllSelected,toggleItemSelected:this.toggleItemSelected})))))}}]),t}(s.Component);t.default=L},2250:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(4),d=n(1),f=n(3),p=n(33),m=a(p),h=n(7),g=a(h),v=n(8),b=a(v),y=n(63),E=a(y),w=n(1006),_=a(w),S=n(31),x=a(S),P=n(67),C=a(P),O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPreviousPage=function(){n.props.getLogsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getLogsByPage(n.props.currentPage+1)},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,a=e.items,r=e.perPage,o=e.currentPage,i=e.hasNextPage;if(t)return u.default.createElement(b.default,null);if(n)return u.default.createElement("p",{className:"error text-center"},n);var l=u.default.createElement(m.default,null,u.default.createElement("h2",null,(0,d.gettext)("No Admin operation logs"))),c=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"20%"},(0,d.gettext)("Name")),u.default.createElement("th",{width:"15%"},(0,d.gettext)("Operation")),u.default.createElement("th",{width:"50%"},(0,d.gettext)("Detail")),u.default.createElement("th",{width:"15%"},(0,d.gettext)("Time")))),a&&u.default.createElement("tbody",null,a.map(function(e,t){return u.default.createElement(D,{key:t,item:e})}))),u.default.createElement(E.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:o,hasNextPage:i,curPerPage:r,resetPerPage:this.props.resetPerPage}));return a.length?c:l}}]),t}(s.Component),D=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getOperationText=function(e){switch(e){case"repo_create":return(0,d.gettext)("Create Library");case"repo_delete":return(0,d.gettext)("Delete Library");case"repo_transfer":return(0,d.gettext)("Transfer Library");case"group_create":return(0,d.gettext)("Create Group");case"group_transfer":return(0,d.gettext)("Transfer Group");case"group_delete":return(0,d.gettext)("Delete Group");case"user_add":return(0,d.gettext)("Add User");case"user_delete":return(0,d.gettext)("Delete User");default:return""}},n.getOperationDetail=function(e){var t=e.detail,n="";t.owner&&(n=d.siteRoot+"sys/users/"+encodeURIComponent(t.owner)+"/");var a="";t.email&&(a=d.siteRoot+"sys/users/"+encodeURIComponent(t.email)+"/");var r="",o="",i="";switch("repo_create"!=e.operation&&"repo_delete"!=e.operation&&"repo_transfer"!=e.operation||(o=d.siteRoot+"sys/libraries/"+t.id+"/"+encodeURIComponent(t.name)+"/"),"group_create"!=e.operation&&"group_delete"!=e.operation&&"group_transfer"!=e.operation||(i=d.siteRoot+"sys/groups/"+t.id+"/libraries/"),e.operation){case"repo_create":return r=(0,d.gettext)("Created library {library_name} with {owner} as its owner").replace("{owner}",'<a href="'+n+'">'+t.owner+"</a>"),r=d.isPro&&d.enableSysAdminViewRepo?r.replace("{library_name}",'<a href="'+o+'">'+t.name+"</a>"):r.replace("{library_name}",'<span class="font-weight-bold">'+t.name+"</span>");case"repo_delete":return r=(0,d.gettext)("Deleted library {library_name}").replace("{library_name}",'<span class="font-weight-bold">'+t.name+"</span>");case"repo_transfer":return r=(0,d.gettext)("Transferred library {library_name} from {user_from} to {user_to}").replace("{user_from}",'<span class="font-weight-bold">'+t.from+"</span>").replace("{user_to}",'<span class="font-weight-bold">'+t.to+"</span>"),r=d.isPro&&d.enableSysAdminViewRepo?r.replace("{library_name}",'<a href="'+o+'">'+t.name+"</a>"):r.replace("{library_name}",'<span class="font-weight-bold">'+t.name+"</span>");case"group_create":return r=(0,d.gettext)("Created group {group_name}").replace("{group_name}",'<a href="'+i+'">'+t.name+"</a>");case"group_transfer":return r=(0,d.gettext)("Transferred group {group_name} from {user_from} to {user_to}").replace("{user_from}",'<span class="font-weight-bold">'+t.from+"</span>").replace("{user_to}",'<span class="font-weight-bold">'+t.to+"</span>").replace("{group_name}",'<a href="'+i+'">'+t.name+"</a>");case"group_delete":return r=(0,d.gettext)("Deleted group {group_name}").replace("{group_name}",'<span class="font-weight-bold">'+t.name+"</span>");case"user_add":return r=(0,d.gettext)("Added user {user}").replace("{user}",'<a href="'+a+'">'+t.email+"</a>");case"user_delete":return r=(0,d.gettext)("Deleted user {user}").replace("{user}",'<span class="font-weight-bold">'+t.email+"</span>");default:return""}},n.state={isOpIconShown:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item;return u.default.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},u.default.createElement("td",null,u.default.createElement(C.default,{email:e.email,name:e.name})),u.default.createElement("td",null,this.getOperationText(e.operation)),u.default.createElement("td",null,u.default.createElement("span",{dangerouslySetInnerHTML:{__html:this.getOperationDetail(e)}})),u.default.createElement("td",null,(0,g.default)(e.datetime).fromNow()))}}]),t}(s.Component),M=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getLogsByPage=function(e){var t=n.state.perPage;c.seafileAPI.sysAdminListAdminLogs(e,t).then(function(a){n.setState({logList:a.data.data,loading:!1,currentPage:e,hasNextPage:f.Utils.hasNextPage(e,t,a.data.total_count)})}).catch(function(e){n.setState({loading:!1,errorMsg:f.Utils.getErrorMsg(e,!0)})})},n.resetPerPage=function(e){n.setState({perPage:e},function(){return n.getLogsByPage(n.initPage)})},n.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1},n.initPage=1,n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.getLogsByPage(e.state.currentPage)})}},{key:"render",value:function(){var e=this.state,t=e.logList,n=e.currentPage,a=e.perPage,r=e.hasNextPage;return u.default.createElement(s.Fragment,null,u.default.createElement(x.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(_.default,{currentItem:"adminOperationLogs"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(O,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:n,perPage:a,hasNextPage:r,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})))))}}]),t}(s.Component);t.default=M},2251:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(4),d=n(1),f=n(3),p=n(33),m=a(p),h=n(7),g=a(h),v=n(8),b=a(v),y=n(63),E=a(y),w=n(1006),_=a(w),S=n(31),x=a(S),P=n(67),C=a(P),O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPreviousPage=function(){n.props.getLogsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getLogsByPage(n.props.currentPage+1)},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,a=e.items,r=e.perPage,o=e.currentPage,i=e.hasNextPage;if(t)return u.default.createElement(b.default,null);if(n)return u.default.createElement("p",{className:"error text-center"},n);var l=u.default.createElement(m.default,null,u.default.createElement("h2",null,(0,d.gettext)("No Admin login logs"))),c=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"25%"},(0,d.gettext)("Name")),u.default.createElement("th",{width:"25%"},(0,d.gettext)("IP")),u.default.createElement("th",{width:"25%"},(0,d.gettext)("Status")),u.default.createElement("th",{width:"25%"},(0,d.gettext)("Time")))),a&&u.default.createElement("tbody",null,a.map(function(e,t){return u.default.createElement(D,{key:t,item:e})}))),u.default.createElement(E.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:o,hasNextPage:i,curPerPage:r,resetPerPage:this.props.resetPerPage}));return a.length?c:l}}]),t}(s.Component),D=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item;return u.default.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},u.default.createElement("td",null,u.default.createElement(C.default,{email:e.email,name:e.name})),u.default.createElement("td",null,e.login_ip),u.default.createElement("td",null,e.login_success?(0,d.gettext)("Success"):(0,d.gettext)("Failed")),u.default.createElement("td",null,(0,g.default)(e.login_time).fromNow()))}}]),t}(s.Component),M=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getLogsByPage=function(e){var t=n.state.perPage;c.seafileAPI.sysAdminListAdminLoginLogs(e,t).then(function(a){n.setState({logList:a.data.data,loading:!1,currentPage:e,hasNextPage:f.Utils.hasNextPage(e,t,a.data.total_count)})}).catch(function(e){n.setState({loading:!1,errorMsg:f.Utils.getErrorMsg(e,!0)})})},n.resetPerPage=function(e){n.setState({perPage:e},function(){return n.getLogsByPage(n.initPage)})},n.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1},n.initPage=1,n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},function(){e.getLogsByPage(e.state.currentPage)})}},{key:"render",value:function(){var e=this.state,t=e.logList,n=e.currentPage,a=e.perPage,r=e.hasNextPage;return u.default.createElement(s.Fragment,null,u.default.createElement(x.default,null),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(_.default,{currentItem:"adminLoginLogs"}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(O,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:n,perPage:a,hasNextPage:r,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})))))}}]),t}(s.Component);t.default=M},226:function(e,t){},227:function(e,t){},23:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(0),f=a(d),p=n(11),m=n(2),h=a(m),g=n(24),v=a(g),b=(0,p.css)({maxWidth:560,margin:"0 auto",top:0,left:0,right:0,position:"fixed",zIndex:999999}),y=function(e){return Object.hasOwnProperty.call(e,"id")},E=function(e){function t(e,n){i(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.getToasts=function(){return a.state.toasts},a.closeAll=function(){a.getToasts().forEach(function(e){return e.close()})},a.notify=function(e,t){if(y(t)){var n=!0,r=!1,i=void 0;try{for(var l,s=a.state.toasts[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var u=l.value;String(u.id).startsWith(t.id)&&a.closeToast(u.id)}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}var c=a.createToastInstance(e,t);return a.setState(function(e){return{toasts:[c].concat(o(e.toasts))}}),c},a.createToastInstance=function(e,n){var r=++t.idCounter,o=y(n)?n.id+"-"+r:r;return{id:o,title:e,description:n.description,hasCloseButton:n.hasCloseButton||!0,duration:n.duration||2,close:function(){return a.closeToast(o)},intent:n.intent}},a.closeToast=function(e){a.setState(function(t){return{toasts:t.toasts.map(function(t){return t.id===e?u({},t,{isShown:!1}):t})}})},a.removeToast=function(e){a.setState(function(t){return{toasts:t.toasts.filter(function(t){return t.id!==e})}})},e.bindNotify(a.notify),e.bindGetToasts(a.getToasts),e.bindCloseAll(a.closeAll),a.state={toasts:[]},a}return s(t,e),c(t,[{key:"render",value:function(){var e=this;return f.default.createElement("span",{className:b},this.state.toasts.map(function(t){var n=t.id,a=t.description,o=r(t,["id","description"]);return f.default.createElement(v.default,u({key:n,onRemove:function(){return e.removeToast(n)}},o),a)}))}}]),t}(f.default.PureComponent);E.propTypes={bindNotify:h.default.func.isRequired,bindGetToasts:h.default.func.isRequired,bindCloseAll:h.default.func.isRequired},E.idCounter=0,t.default=E},24:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(11),d=n(2),f=a(d),p=n(41),m=a(p),h=n(25),g=a(h),v={deceleration:"cubic-bezier(0.0, 0.0, 0.2, 1)",acceleration:"cubic-bezier(0.4, 0.0, 1, 1)",spring:"cubic-bezier(0.175, 0.885, 0.320, 1.175)"},b=c.css.keyframes("openAnimation",{from:{opacity:0,transform:"translateY(-120%)"},to:{transform:"translateY(0)"}}),y=c.css.keyframes("closeAnimation",{from:{transform:"scale(1)",opacity:1},to:{transform:"scale(0.9)",opacity:0}}),E=(0,c.css)({display:"flex",flexDirection:"column",alignItems:"center",height:0,transition:"all 240ms "+v.deceleration,'&[data-state="entering"], &[data-state="entered"]':{animation:b+" 240ms "+v.spring+" both"},'&[data-state="exiting"]':{animation:y+" 120ms "+v.acceleration+" both"}}),w=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={isShown:!0,height:0},a.close=function(){a.clearCloseTimer(),a.setState({isShown:!1})},a.startCloseTimer=function(){a.props.duration&&(a.closeTimer=setTimeout(function(){a.close()},1e3*a.props.duration))},a.clearCloseTimer=function(){a.closeTimer&&(clearTimeout(a.closeTimer),a.closeTimer=null)},a.handleMouseEnter=function(){a.clearCloseTimer()},a.handleMouseLeave=function(){a.startCloseTimer()},a.onRef=function(e){if(null!==e){var t=e.getBoundingClientRect(),n=t.height;a.setState({height:n})}},i=n,o(a,i)}return i(t,e),l(t,[{key:"componentDidUpdate",value:function(e){e.isShown!==this.props.isShown&&this.setState({isShown:this.props.isShown})}},{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"render",value:function(){var e=this;return u.default.createElement(m.default,{appear:!0,unmountOnExit:!0,timeout:240,in:this.state.isShown,onExited:this.props.onRemove},function(t){return u.default.createElement("div",{"data-state":t,className:E,onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,style:{height:e.state.height,zIndex:e.props.zIndex,marginBottom:e.state.isShown?0:-e.state.height}},u.default.createElement("div",{ref:e.onRef,style:{padding:8}},u.default.createElement(g.default,{intent:e.props.intent,title:e.props.title,children:e.props.children,isRemoveable:e.props.hasCloseButton,onRemove:function(){return e.close()}})))})}}]),t}(u.default.PureComponent);w.propTypes={zIndex:f.default.number,duration:f.default.number,onRemove:f.default.func,intent:f.default.oneOf(["none","success","warning","danger"]).isRequired,title:f.default.node,children:f.default.node,hasCloseButton:f.default.bool,isShown:f.default.bool},w.defaultProps={intent:"none"},t.default=w},25:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(11),d=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.containerStyle=(0,c.css)({borderRadius:"3px",backgroundColor:"#fff",padding:"10px 16px",display:"flex",boxSizing:"border-box",boxShadow:"rgba(67, 90, 111, 0.3) 0px 0px 1px, rgba(67, 90, 111, 0.47) 0px 8px 10px -4px",justifyContent:"space-between",flexDirection:"row"}),n.containerBorderSuccess=(0,c.css)({borderLeft:"3px solid rgb(71, 184, 129)"}),n.containerBorderWarn=(0,c.css)({borderLeft:"3px solid rgb(217, 130, 43)"}),n.containerBorderDanger=(0,c.css)({borderLeft:"3px solid rgb(236, 76, 71)"}),n.containerBorderNotify=(0,c.css)({borderLeft:"3px solid rgb(16, 112, 202)"}),n.toastTextTitle=(0,c.css)({fontWeight:"600",fontSize:"14px",color:"#435a6f",margin:"0"}),n.toastTextChild=(0,c.css)({fontSize:"14px",color:"#999",margin:"0"}),n.toastClose=(0,c.css)({marginLeft:"15px",height:"24px",width:"24px",lineHeight:"22px",fontWeight:"700",textAlign:"center",fontSize:"20px",color:"#000",cursor:"pointer",opacity:"0.5",":hover":{opacity:1}}),n.toastIcon=(0,c.css)({marginRight:"10px",width:"14px",height:"20px",lineHeight:"20px"}),n}return o(t,e),l(t,[{key:"getContainerStyle",value:function(e){switch(e){case"success":return{borderStyle:this.containerBorderSuccess,iconColor:(0,c.css)({color:"rgb(71, 184, 129)"}),iconClass:"fa fa-check-circle"};case"warning":return{borderStyle:this.containerBorderWarn,iconColor:(0,c.css)({color:"rgb(217, 130, 43)"}),iconClass:"fa fa-exclamation-triangle"};case"none":return{borderStyle:this.containerBorderNotify,iconColor:(0,c.css)({color:"rgb(16, 112, 202)"}),iconClass:"fa fa-exclamation-circle"};case"danger":return{borderStyle:this.containerBorderDanger,iconColor:(0,c.css)({color:"rgb(236, 76, 71)"}),iconClass:"fa fa-exclamation-circle"}}}},{key:"render",value:function(){var e=this.getContainerStyle(this.props.intent);return u.default.createElement("div",(0,c.css)(e.borderStyle,this.containerStyle),u.default.createElement("div",{className:this.toastIcon},u.default.createElement("i",i({className:e.iconClass},e.iconColor))),u.default.createElement("div",{className:this.toastTextContainer},u.default.createElement("p",{className:this.toastTextTitle},this.props.title),this.props.children?u.default.createElement("p",{className:this.toastTextChild},this.props.children):null),u.default.createElement("div",{onClick:this.props.onRemove,className:this.toastClose},u.default.createElement("span",null,"\xd7")))}}]),t}(u.default.PureComponent);t.default=d},26:function(e,t,n){"use strict";function a(){var e=i.loginUrl+"?next="+encodeURIComponent(location.href),t=(0,i.gettext)("Permission denied. Please try {placeholder-left}login again.{placeholder-right}");return t=t.replace("{placeholder-left}",'<a class="action-link p-0" href='+e+">"),t=t.replace("{placeholder-right}","</a>"),o.default.createElement("span",{className:"error",dangerouslySetInnerHTML:{__html:t}})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(1);t.default=a},273:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(3),h={repo:d.default.object.isRequired,isRepoDeleted:d.default.bool.isRequired,toggle:d.default.func.isRequired,onDeleteRepo:d.default.func.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggle=function(){n.props.toggle()},n.onDeleteRepo=function(){n.setState({isRequestSended:!0},function(){n.props.onDeleteRepo(n.props.repo)})},n.state={isRequestSended:!1},n}return i(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){e.isRepoDeleted||this.setState({isRequestSended:!1})}},{key:"render",value:function(){var e=this.state.isRequestSended,t=this.props.repo,n='<span class="op-target">'+m.Utils.HTMLescape(t.repo_name||t.name)+"</span>",a=(0,p.gettext)("Are you sure you want to delete %s ?");return a=a.replace("%s",n),u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("Delete Library")),u.default.createElement(f.ModalBody,null,u.default.createElement("p",{dangerouslySetInnerHTML:{__html:a}})),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",disabled:e,onClick:this.onDeleteRepo},(0,p.gettext)("Delete"))))}}]),t}(s.Component);g.propTypes=h,t.default=g},274:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,a,r=l(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function l(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ValueContainer=t.SingleValue=t.Placeholder=t.MultiValue=t.Input=void 0;var s=a(n(422)),u=a(n(512)),c=n(513),d=a(n(432)),f=a(n(433)),p=a(n(434)),m=a(n(435)),h=a(n(436)),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.defaultComponents)({components:e}),n=t.Input,a=t.MultiValue,o=t.Placeholder,l=t.SingleValue,s=t.ValueContainer,u=i(t,["Input","MultiValue","Placeholder","SingleValue","ValueContainer"]);return r({Input:(0,d.default)(n),MultiValue:(0,f.default)(a),Placeholder:(0,p.default)(o),SingleValue:(0,m.default)(l),ValueContainer:(0,h.default)(s)},u)},v=g(),b=v.Input;t.Input=b;var y=v.MultiValue;t.MultiValue=y;var E=v.Placeholder;t.Placeholder=E;var w=v.SingleValue;t.SingleValue=w;var _=v.ValueContainer;t.ValueContainer=_;var S=(0,s.default)(g,u.default);t.default=S},29:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(10),p=a(f),m=n(3),h=n(4),g=n(1),v=n(5),b=a(v),y={isAdminPanel:d.default.bool},E=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getContainer=function(){return p.default.findDOMNode(n)},n.handleProps=function(){n.state.showInfo?n.addEvents():n.removeEvents()},n.addEvents=function(){["click","touchstart","keyup"].forEach(function(e){return document.addEventListener(e,n.handleDocumentClick,!0)})},n.removeEvents=function(){["click","touchstart","keyup"].forEach(function(e){return document.removeEventListener(e,n.handleDocumentClick,!0)})},n.handleDocumentClick=function(e){if(!e||3!==e.which&&("keyup"!==e.type||e.which===m.Utils.keyCodes.tab)){var t=n.getContainer();(!t.contains(e.target)||t===e.target||"keyup"===e.type&&e.which!==m.Utils.keyCodes.tab)&&n.setState({showInfo:!n.state.showInfo})}},n.onClickAccount=function(){n.isFirstMounted?(h.seafileAPI.getAccountInfo().then(function(e){n.setState({userName:e.data.name,contactEmail:e.data.email,usageRate:e.data.space_usage,quotaUsage:m.Utils.bytesToSize(e.data.usage),quotaTotal:m.Utils.bytesToSize(e.data.total),isStaff:e.data.is_staff,isInstAdmin:e.data.is_inst_admin,isOrgStaff:1===e.data.is_org_staff,showInfo:!n.state.showInfo})}).catch(function(e){var t=m.Utils.getErrorMsg(e);b.default.danger(t)}),n.isFirstMounted=!1):n.setState({showInfo:!n.state.showInfo})},n.renderMenu=function(){var e=void 0,t=n.state,a=t.isStaff,r=t.isOrgStaff,o=t.isInstAdmin;return n.props.isAdminPanel?a?e={url:g.siteRoot,text:(0,g.gettext)("Exit System Admin")}:r?e={url:g.siteRoot,text:(0,g.gettext)("Exit Organization Admin")}:o&&(e={url:g.siteRoot,text:(0,g.gettext)("Exit Institution Admin")}):a?e={url:g.siteRoot+"sys/info/",text:(0,g.gettext)("System Admin")}:r?e={url:g.siteRoot+"org/useradmin/",text:(0,g.gettext)("Organization Admin")}:o&&(e={url:g.siteRoot+"inst/useradmin/",text:(0,g.gettext)("Institution Admin")}),e&&u.default.createElement("a",{href:e.url,title:e.text,className:"item"},e.text)},n.renderAvatar=function(){return u.default.createElement("img",{src:g.appAvatarURL,width:"36",height:"36",className:"avatar",alt:(0,g.gettext)("Avatar")})},n.state={showInfo:!1,userName:"",contactEmail:"",quotaUsage:"",quotaTotal:"",isStaff:!1,isOrgStaff:!1,usageRate:""},n.isFirstMounted=!0,n}return i(t,e),l(t,[{key:"componentDidUpdate",value:function(e){this.handleProps()}},{key:"render",value:function(){return u.default.createElement("div",{id:"account"},u.default.createElement("a",{id:"my-info",onClick:this.onClickAccount,className:"account-toggle no-deco d-none d-md-block","aria-label":"View profile and more"},u.default.createElement("span",null,this.renderAvatar()),u.default.createElement("span",{className:"fas fa-caret-down vam"})),u.default.createElement("span",{className:"account-toggle sf2-icon-more mobile-icon d-md-none","aria-label":"View profile and more",onClick:this.onClickAccount}),u.default.createElement("div",{id:"user-info-popup",className:"account-popup sf-popover "+(this.state.showInfo?"":"hide")},u.default.createElement("div",{className:"outer-caret up-outer-caret"},u.default.createElement("div",{className:"inner-caret"})),u.default.createElement("div",{className:"sf-popover-con"},u.default.createElement("div",{className:"item o-hidden"},this.renderAvatar(),u.default.createElement("div",{className:"txt"},this.state.userName)),u.default.createElement("div",{id:"space-traffic"},u.default.createElement("div",{className:"item"},u.default.createElement("p",null,(0,g.gettext)("Used:")," ",this.state.quotaUsage," / ",this.state.quotaTotal),u.default.createElement("div",{id:"quota-bar"},u.default.createElement("span",{id:"quota-usage",className:"usage",style:{width:this.state.usageRate}})))),u.default.createElement("a",{href:g.siteRoot+"profile/",className:"item"},(0,g.gettext)("Settings")),this.renderMenu(),u.default.createElement("a",{href:g.siteRoot+"accounts/logout/",className:"item"},(0,g.gettext)("Log out")))))}}]),t}(s.Component);E.defaultProps={isAdminPanel:!1},E.propTypes=y,t.default=E},3:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;var r=n(1),o=n(21),i=n(15),l=a(i),s=n(0),u=a(s),c=n(5),d=a(c),f=n(26),p=a(f),m=t.Utils={keyCodes:{esc:27,space:32,tab:9,up:38,down:40},bytesToSize:function(e){if("undefined"==typeof e)return" ";if(e<0)return"--";var t=["bytes","KB","MB","GB","TB","PB"];if(0===e)return e+" "+t[0];var n=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return 0===n?e+" "+t[n]:(e/Math.pow(1e3,n)).toFixed(1)+" "+t[n]},isHiDPI:function(){return(window.devicePixelRatio?window.devicePixelRatio:1)>1},isDesktop:function(){return window.innerWidth>=768},isWeChat:function(){var e=window.navigator.userAgent.toLowerCase(),t="micromessenger"==e.match(/MicroMessenger/i);return"micromessenger"==e.match(/MicroMessenger/i)&&"wxwork"==e.match(/wxwork/i)||t},FILEEXT_ICON_MAP:{md:"txt.png",txt:"txt.png",pdf:"pdf.png",doc:"word.png",docx:"word.png",odt:"word.png",fodt:"word.png",ppt:"ppt.png",pptx:"ppt.png",odp:"ppt.png",fodp:"ppt.png",xls:"excel.png",xlsx:"excel.png",ods:"excel.png",fods:"excel.png",mp4:"video.png",ogv:"video.png",webm:"video.png",mov:"video.png",flv:"video.png",wmv:"video.png",rmvb:"video.png",mp3:"music.png",oga:"music.png",ogg:"music.png",flac:"music.png",aac:"music.png",ac3:"music.png",wma:"music.png",jpg:"pic.png",jpeg:"pic.png",png:"pic.png",svg:"pic.png",gif:"pic.png",bmp:"pic.png",ico:"pic.png",default:"file.png"},imageCheck:function(e){return-1!=e.lastIndexOf(".")&&-1!=["gif","jpeg","jpg","png","ico","bmp","tif","tiff"].indexOf(e.substr(e.lastIndexOf(".")+1).toLowerCase())},getShareLinkPermissionList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=[];return"library"===e?r.push("preview_download"):"dir"===e?"rw"!=t&&"admin"!=t&&"r"!=t||r.push("preview_download"):"file"===e&&("rw"!=t&&"admin"!=t&&"r"!=t||r.push("preview_download"),this.isEditableOfficeFile(n)&&("rw"==t||"admin"==t)&&a&&r.push("edit_download")),r.push("preview_only"),r},getShareLinkPermissionStr:function(e){var t=e.can_edit,n=e.can_download;return t?n?"edit_download":"cloud_edit":n?"preview_download":"preview_only"},isEditableOfficeFile:function(e){return-1!=e.lastIndexOf(".")&&-1!=["docx","pptx","xlsx"].indexOf(e.substr(e.lastIndexOf(".")+1).toLowerCase())},videoCheck:function(e){return-1!=e.lastIndexOf(".")&&-1!=["mp4","ogv","webm","mov"].indexOf(e.substr(e.lastIndexOf(".")+1).toLowerCase())},checkDuplicatedNameInList:function(e,t){return e.some(function(e){return e.name===t})},encodePath:function(e){if(!e)return"";for(var t=e.split("/"),n=[],a=0,r=t.length;a<r;a++)n.push(encodeURIComponent(t[a]));return n.join("/")},HTMLescape:function(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML},generateDialogTitle:function(e,t){var n=this.HTMLescape(t),a='<span class="op-target ellipsis ellipsis-op-target" title='+n+">"+n+"</span>";return e.replace("{placeholder}",a)},getFileName:function(e){var t=e.lastIndexOf("/");return e.slice(t+1)},getPaths:function(e){for(var t=e.split("/").slice(1),n=[];t.length;)n.push("/"+t.join("/")),t.pop();return n.reverse()},getFolderName:function(e){return"/"===e?e:(e="/"!==e[e.length-1]?e:e.slice(0,e.length-2),e.slice(e.lastIndexOf("/")+1))},getDirName:function(e){var t=e.slice(0,e.lastIndexOf("/"));return""===t?"/":t},isChildPath:function(e,t){return this.getDirName(e)===t},isAncestorPath:function(e,t){return t.indexOf(e)>-1},renameAncestorPath:function(e,t,n){return e.replace(t,n)},joinPath:function(e,t){return"/"===e[e.length-1]?e+t:e+"/"+t},isSupportUploadFolder:function(){return-1!=navigator.userAgent.indexOf("Firefox")||navigator.userAgent.indexOf("Chrome")>-1||navigator.userAgent.indexOf("Safari")>-1},isIEBrower:function(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,n=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;return t||n},getDefaultLibIconUrl:function(e){var t=m.isHiDPI()?48:24;t=e?256:t;return r.mediaUrl+"img/lib/"+t+"/lib.png"},getLibIconUrl:function(e,t){var n=e.permission||e.share_permission,a=m.isHiDPI()?48:24;a=t?256:a;var o="lib.png";switch(e.encrypted&&(o="lib-encrypted.png"),n){case"r":o="lib-readonly.png";break;case"preview":o="lib-cloud-preview.png";break;case"cloud-edit":o="lib-cloud-preview-edit.png"}return"read-only"==e.status&&(o="lib-readonly.png"),r.mediaUrl+"img/lib/"+a+"/"+o},getDirentIcon:function(e,t){var n=this.isHiDPI()?48:24;if(n=t?192:n,e.isDir()){var a=!1;return!e.permission||"r"!==e.permission&&"preview"!==e.permission||(a=!0),this.getFolderIconUrl(a,n)}return this.getFileIconUrl(e.name,n)},getAdminTemplateDirentIcon:function(e,t){var n=this.isHiDPI()?48:24;return n=t?192:n,e.is_file?this.getFileIconUrl(e.obj_name,n):this.getFolderIconUrl()},getFolderIconUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];return t||(t=m.isHiDPI()?48:24),t=t>24?192:24,r.mediaUrl+"img/folder"+(e?"-read-only-":"-")+t+".png"},getFileIconUrl:function(e,t){t||(t=m.isHiDPI()?48:24),t=t>24?192:24;var n="";return-1==e.lastIndexOf(".")?r.mediaUrl+"img/file/"+t+"/"+this.FILEEXT_ICON_MAP.default:(n=e.substr(e.lastIndexOf(".")+1).toLowerCase(),this.FILEEXT_ICON_MAP[n]?r.mediaUrl+"img/file/"+t+"/"+this.FILEEXT_ICON_MAP[n]:r.mediaUrl+"img/file/"+t+"/"+this.FILEEXT_ICON_MAP.default)},getLibIconTitle:function(e){var t,n=e.permission||e.share_permission;if(e.encrypted)t=(0,r.gettext)("Encrypted library");else if(e.is_admin)t=(0,r.gettext)("Admin access");else switch(n){case"rw":t=(0,r.gettext)("Read-Write library");break;case"r":t=(0,r.gettext)("Read-Only library");break;case"cloud-edit":t=(0,r.gettext)("Online Read-Write library");break;case"preview":t=(0,r.gettext)("Online Read-Only library")}return t},getFolderIconTitle:function(e){var t;switch(e.permission){case"rw":t=(0,r.gettext)("Read-Write folder");break;case"r":t=(0,r.gettext)("Read-Only folder");break;case"cloud-edit":t=(0,r.gettext)("Online Read-Write folder");break;case"preview":t=(0,r.gettext)("Online Read-Only folder")}return t},getFolderOperationList:function(e,t,n,a){var o=[],i=l.default.SHARE,s=l.default.DOWNLOAD,u=l.default.DELETE,c=l.default.RENAME,d=l.default.MOVE,f=l.default.COPY,p=l.default.PERMISSION,h=l.default.OPEN_VIA_CLIENT,g=n.permission;return a&&("rw"!=g&&"r"!=g||o.push(s),m.isHasPermissionToShare(t,g,n)&&o.push(i),"rw"==g&&o.push(u,"Divider")),"rw"==g&&(o.push(c,d,f),r.folderPermEnabled&&(e&&t.has_been_shared_out||t.is_admin)&&o.push("Divider",p),o.push("Divider",h)),"r"!=g||t.encrypted||o.push(f),o},getFileOperationList:function(e,t,n){var a=[],o=l.default.SHARE,i=l.default.DOWNLOAD,s=l.default.DELETE,u=l.default.RENAME,c=l.default.MOVE,d=l.default.COPY,f=l.default.TAGS,p=l.default.UNLOCK,h=l.default.LOCK,g=l.default.COMMENT,v=l.default.HISTORY,b=l.default.ACCESS_LOG,y=l.default.OPEN_VIA_CLIENT,E=t.permission;return n&&("rw"!=E&&"r"!=E||a.push(i),m.isHasPermissionToShare(e,E,t)&&a.push(o),"rw"==E&&(!t.is_locked||t.is_locked&&t.locked_by_me)&&a.push(s),a.push("Divider")),"rw"==E&&((!t.is_locked||t.is_locked&&t.locked_by_me)&&a.push(u,c),a.push(d,f),r.isPro&&(t.is_locked?(t.locked_by_me||"OnlineOffice"==t.lock_owner)&&a.push(p):a.push(h)),a.push("Divider"),r.enableFileComment&&a.push(g),a.push(v),r.isPro&&r.fileAuditEnabled&&a.push(b),a.push("Divider",y)),"r"==E&&(e.encrypted||a.push(d),r.enableFileComment&&a.push(g),a.push(v)),a},getDirentOperationList:function(e,t,n,a){return"dir"==n.type?m.getFolderOperationList(e,t,n,a):m.getFileOperationList(t,n,a)},sharePerms:function(e){var t;switch(e){case"rw":t=(0,r.gettext)("Read-Write");break;case"r":t=(0,r.gettext)("Read-Only");break;case"admin":t=(0,r.gettext)("Admin");break;case"cloud-edit":t=(0,r.gettext)("Online Read-Write");break;case"preview":t=(0,r.gettext)("Online Read-Only")}return t},sharePermsExplanation:function(e){var t;switch(e){case"rw":t=(0,r.gettext)("User can read, write, upload, download and sync files.");break;case"r":t=(0,r.gettext)("User can read, download and sync files.");break;case"admin":t=(0,r.gettext)("Besides Write permission, user can also share the library.");break;case"cloud-edit":t=(0,r.gettext)("User can view and edit file online via browser. Files can't be downloaded.");break;case"preview":t=(0,r.gettext)("User can only view files online via browser. Files can't be downloaded.")}return t},getShareLinkPermissionObject:function(e){switch(e){case"preview_download":return{value:e,text:(0,r.gettext)("Preview and download"),permissionDetails:{can_edit:!1,can_download:!0}};case"preview_only":return{value:e,text:(0,r.gettext)("Preview only"),permissionDetails:{can_edit:!1,can_download:!1}};case"edit_download":return{value:e,text:(0,r.gettext)("Edit on cloud and download"),permissionDetails:{can_edit:!0,can_download:!0}};case"cloud_edit":return{value:e,text:(0,r.gettext)("Edit on cloud only"),permissionDetails:{can_edit:!0,can_download:!1}}}return{text:""}},formatSize:function(e){var t=e.bytes,n=e.precision||0;return t>=0&&t<1e3?t+" B":t>=1e3&&t<1e6?(t/1e3).toFixed(n)+" KB":t>=1e6&&t<1e9?(t/1e6).toFixed(n)+" MB":t>=1e9&&t<1e12?(t/1e9).toFixed(n)+" GB":t>=1e12?(t/1e12).toFixed(n)+" TB":t+" B"},formatBitRate:function(e){var t;return"number"!==typeof e?"":(t=e/8,t>=1e9?(t/1e9).toFixed(2)+" GB/s":t>=1e6?(t/1e6).toFixed(2)+" MB/s":t>=1e3?(t/1e3).toFixed(2)+" kB/s":t.toFixed(2)+" B/s")},isMarkdownFile:function(e){var t=e.lastIndexOf(".");if(-1===t)return!1;var n=e.substring(t).toLowerCase();return".md"===n||".markdown"===n},isInternalFileLink:function(e,t){return new RegExp(r.serviceURL+"/lib/"+t+"/file.*").test(e)},isInternalMarkdownLink:function(e,t){return new RegExp(r.serviceURL+"/lib/"+t+".*.md$").test(e)},isInternalDirLink:function(e,t){return new RegExp(r.serviceURL+"/library/"+t+".*").test(e)},getPathFromInternalMarkdownLink:function(e,t){var n=new RegExp(r.serviceURL+"/lib/"+t+"/file(.*.md)"),a=n.exec(e);return decodeURIComponent(a[1])},getPathFromInternalDirLink:function(e,t){var n=new RegExp(r.serviceURL+"/library/"+t+"(/.*)"),a=n.exec(e),o=decodeURIComponent(a[1]);return o=o.slice(1),o=o.slice(o.indexOf("/"))},isWikiInternalMarkdownLink:function(e,t){return t=encodeURIComponent(t),new RegExp(r.serviceURL+"/published/"+t+".*.md$").test(e)},isWikiInternalDirLink:function(e,t){return t=encodeURIComponent(t),new RegExp(r.serviceURL+"/published/"+t+".*").test(e)},getPathFromWikiInternalMarkdownLink:function(e,t){t=encodeURIComponent(t);var n=new RegExp(r.serviceURL+"/published/"+t+"(.*.md)"),a=n.exec(e),o=a[1];try{o=decodeURIComponent(o)}catch(e){o=o.replace(/%/g,"%25"),o=decodeURIComponent(o)}return o},getPathFromWikiInternalDirLink:function(e,t){t=encodeURIComponent(t);var n=new RegExp(r.serviceURL+"/published/"+t+"(/.*)"),a=n.exec(e),o=a[1];try{o=decodeURIComponent(o)}catch(e){o=o.replace(/%/g,"%25"),o=decodeURIComponent(o)}return o},compareTwoWord:function(e,t){var n,a,r=e.charCodeAt(0),i=t.charCodeAt(0);return 19968<r&&r<40869&&19968<i&&i<40869?(n=o.strChineseFirstPY.charAt(r-19968).toLowerCase(),a=o.strChineseFirstPY.charAt(i-19968).toLowerCase(),n>=a?1:-1):19968<r&&r<40869&&!(19968<i&&i<40869)?1:!(19968<r&&r<40869)&&19968<i&&i<40869?-1:(n=e.toLowerCase(),a=t.toLowerCase(),this.compareStrWithNumbersIn(n,a))},compareStrWithNumbersIn:function(e,t){var n,a,r,o=/\d+|\D+/g,i=/\d/,l=e.match(o),s=t.match(o),u=Math.min(l.length,s.length);if(l&&s&&(n=i.test(l[0]))==i.test(s[0]))for(var c=0;c<u;c++){if(a=l[c],r=s[c],n&&(a=parseInt(a,10),r=parseInt(r,10)),a!=r)return a<r?-1:1;n=!n}return(e>=t)-(e<=t)},sortRepos:function(e,t,n){var a=this,r=void 0;switch(t+"-"+n){case"name-asc":r=function(e,t){return e.repo_name?t.repo_name?a.compareTwoWord(e.repo_name,t.repo_name):-1:1};break;case"name-desc":r=function(e,t){return e.repo_name?t.repo_name?-a.compareTwoWord(e.repo_name,t.repo_name):1:-1};break;case"time-asc":r=function(e,t){return e.last_modified<t.last_modified?-1:1};break;case"time-desc":r=function(e,t){return e.last_modified<t.last_modified?1:-1};break;case"size-asc":r=function(e,t){if(e.size===t.size){return a.compareTwoWord(e.repo_name,t.repo_name)}return e.size_original<t.size_original?-1:1};break;case"size-desc":r=function(e,t){if(e.size===t.size){return-a.compareTwoWord(e.repo_name,t.repo_name)}return e.size_original<t.size_original?1:-1}}return e.sort(r),e},sortDirents:function(e,t,n){var a=this,r=void 0;switch(t+"-"+n){case"name-asc":r=function(e,t){return a.compareTwoWord(e.name,t.name)};break;case"name-desc":r=function(e,t){return-a.compareTwoWord(e.name,t.name)};break;case"time-asc":r=function(e,t){return e.mtime<t.mtime?-1:1};break;case"time-desc":r=function(e,t){return e.mtime<t.mtime?1:-1};break;case"size-asc":r=function(e,t){return"dir"==e.type&&"dir"==t.type?0:e.size_original<t.size_original?-1:1};break;case"size-desc":r=function(e,t){return"dir"==e.type&&"dir"==t.type?0:e.size_original<t.size_original?1:-1}}return e.sort(function(e,t){return"dir"==e.type&&"file"==t.type?-1:"file"==e.type&&"dir"==t.type?1:r(e,t)}),e},sortDirentsInSharedDir:function(e,t,n){var a=this,r=void 0;switch(t+"-"+n){case"name-asc":r=function(e,t){return e.is_dir?a.compareTwoWord(e.folder_name,t.folder_name):a.compareTwoWord(e.file_name,t.file_name)};break;case"name-desc":r=function(e,t){return-(e.is_dir?a.compareTwoWord(e.folder_name,t.folder_name):a.compareTwoWord(e.file_name,t.file_name))};break;case"time-asc":r=function(e,t){return e.last_modified<t.last_modified?-1:1};break;case"time-desc":r=function(e,t){return e.last_modified<t.last_modified?1:-1};break;case"size-asc":r=function(e,t){return e.is_dir?0:e.size<t.size?-1:1};break;case"size-desc":r=function(e,t){return e.is_dir?0:e.size<t.size?1:-1}}return e.sort(function(e,t){return e.is_dir&&!t.is_dir?-1:!e.is_dir&&t.is_dir?1:r(e,t)}),e},sortTraffic:function(e,t,n){var a=void 0;switch(n){case"asc":a=function(e,n){return e[t]<n[t]?-1:1};break;case"desc":a=function(e,n){return e[t]<n[t]?1:-1}}return e.sort(a),e},getErrorMsg:function(e,t){var n="";return e.response?403==e.response.status?(t&&d.default.danger(u.default.createElement(p.default,null),{id:"permission_denied",duration:3600}),n=(0,r.gettext)("Permission denied")):n=e.response.data&&e.response.data.error_msg?e.response.data.error_msg:(0,r.gettext)("Error"):n=(0,r.gettext)("Please check the network."),n},changeMarkdownNodes:function(e,t){return e.map(function(e){t(e),e.children&&e.children.length>0&&m.changeMarkdownNodes(e.children,t)}),e},chooseLanguage:function(e){var t=void 0;switch(e){case"py":t="python";break;case"js":t="javascript";break;case"c":t="text/x-csrc";break;case"cpp":t="text/x-c++src";break;case"java":t="text/x-java";break;case"cs":t="text/x-csharp";break;case"mdf":t="text/x-sql";break;case"html":t="htmlmixed";break;default:t=e}return t},DARK_COLOR_MAP:{red:"#D11507",orange:"#FF8C00",yellow:"#EDEF00",green:"#006400",cyan:"#00E0E1",blue:"#2510A3",indigo:"#350C56",purple:"#551054",pink:"#E3A5B0",azure:"#C4D0D0",lime:"#00E100",teal:"#006A6B",gray:"#545454","#FFA8A8":"#E49090","#FFA94D":"#E39136","#FFD43B":"#E0B815","#A0EC50":"#83CF32","#A9E34B":"#8DC72E","#63E6BE":"#43CAA4","#4FD2C9":"#2DB9B0","#72C3FC":"#57ABE3","#91A7FF":"#7A91E7","#E599F7":"#CC82DE","#B197FC":"#9B82E5","#F783AC":"#DF6D97","#CED4DA":"#A8ADB2"},getDarkColor:function(e){return this.DARK_COLOR_MAP[e]},getCopySuccessfulMessage:function(e){var t=void 0,n=e.length;return 1===n?t=(0,r.gettext)("Successfully copied %(name)s."):2===n?t=(0,r.gettext)("Successfully copied %(name)s and 1 other item."):(t=(0,r.gettext)("Successfully copied %(name)s and %(amount)s other items."),t=t.replace("%(amount)s",n-1)),t=t.replace("%(name)s",e[0])},getMoveSuccessMessage:function(e){var t=void 0,n=e.length;return 1===n?t=(0,r.gettext)("Successfully moved %(name)s."):2===n?t=(0,r.gettext)("Successfully moved %(name)s and 1 other item."):(t=(0,r.gettext)("Successfully moved %(name)s and %(amount)s other items."),t=t.replace("%(amount)s",n-1)),t=t.replace("%(name)s",e[0])},getCopyFailedMessage:function(e){var t=void 0,n=e.length;return n>1?(t=(0,r.gettext)("Failed to copy %(name)s and %(amount)s other item(s)."),t=t.replace("%(amount)s",n-1)):t=(0,r.gettext)("Failed to copy %(name)s."),t=t.replace("%(name)s",e[0])},getMoveFailedMessage:function(e){var t=void 0,n=e.length;return n>1?(t=(0,r.gettext)("Failed to move %(name)s and %(amount)s other item(s)."),t=t.replace("%(amount)s",n-1)):t=(0,r.gettext)("Failed to move %(name)s."),t=t.replace("%(name)s",e[0])},handleSearchedItemClick:function(e){if(!0===e.is_dir){var t=r.siteRoot+"library/"+e.repo_id+"/"+e.repo_name+e.path;window.open("about:blank").location.href=t}else{var n=r.siteRoot+"lib/"+e.repo_id+"/file"+m.encodePath(e.path);window.open("about:blank").location.href=n}},generatePassword:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz0123456789",n="",a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},pathNormalize:function(e){for(var t=e.split("/"),n=[],a=0;a<t.length;a++)"."!==t[a]&&""!==t[a]&&(".."===t[a]?n.pop():n.push(t[a]));return n.join("/")},getEventData:function(e,t){return e.target.dataset?e.target.dataset[t]:e.target.getAttribute("data-"+t)},isHasPermissionToShare:function(e,t,n){var a=e.is_admin,o=e.is_virtual,i=e.encrypted,l=e.owner_email,s=l===r.username;if(i)return!0;if(n&&("rw"==t||"r"==t))return!0;if(r.canGenerateShareLink&&("rw"==t||"r"==t))return!0;if(r.canGenerateUploadLink&&"rw"==t)return!0;return!(o||!s&&!a)&&!0},registerGlobalVariable:function(e,t,n){window[e]||(window[e]={}),window[e][t]=n},formatTime:function(e){var t=parseInt(e),n=0,a=0;t>60&&(n=parseInt(t/60),t=parseInt(t%60)),n>60&&(a=parseInt(n/60),n=parseInt(n%60));var r=("00"+parseInt(t)).slice(-2);return r=n>0?("00"+parseInt(n)).slice(-2)+":"+r:"00:"+r,r=a>0?("00"+parseInt(a)).slice(-2)+":"+r:"00:"+r},hasNextPage:function(e,t,n){return e*t<n}}},31:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(29),p=a(f),m={children:d.default.object},h=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"main-panel-north "+(this.props.children?"border-left-show":"")},u.default.createElement("div",{className:"cur-view-toolbar"},u.default.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"}),u.default.createElement("div",{className:"operation"},this.props.children)),u.default.createElement("div",{className:"common-toolbar"},this.props.search&&this.props.search,u.default.createElement(p.default,{isAdminPanel:!0})))}}]),t}(s.Component);h.propTypes=m,t.default=h},33:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(1),p={forDialog:d.default.bool},m=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:this.props.forDialog?"text-center mt-8":"empty-tip"},u.default.createElement("img",{src:f.mediaUrl+"img/no-items-tip.png",alt:"",width:"100",height:"100",className:"no-items-img-tip"}),this.props.children)}}]),t}(u.default.Component);m.propTypes=p,t.default=m},330:function(e,t){},354:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(120),p=n(8),m=a(p),h={content:d.default.string,onContentClick:d.default.func},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.formatterLongTextValue=function(e){f.processor.process(e).then(function(e){var t=String(e);n.setState({isFormatValue:!1,innerHtml:t})})},n.state={innerHtml:null,isFormatValue:!0},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.content;e?this.formatterLongTextValue(e):this.setState({isFormatValue:!1,innerHtml:""})}},{key:"componentWillReceiveProps",value:function(e){var t=e.content;this.formatterLongTextValue(t)}},{key:"render",value:function(){return this.state.isFormatValue?u.default.createElement(m.default,null):u.default.createElement("div",{className:"conditions-preview-container",onClick:this.props.onContentClick},u.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.innerHtml}}))}}]),t}(u.default.Component);g.propTypes=h,t.default=g},356:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(79),m=a(p),h=n(274),g=a(h),v=n(4),b=n(1),y=n(3),E=n(5),w=a(E),_=n(40),S=a(_),x={itemName:d.default.string.isRequired,toggleDialog:d.default.func.isRequired,submit:d.default.func.isRequired,canTransferToDept:d.default.bool},P=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectChange=function(e){n.setState({selectedOption:e})},n.submit=function(){var e=n.state.selectedOption;n.props.submit(e)},n.onClick=function(){n.setState({transferToUser:!n.state.transferToUser})},n.state={selectedOption:null,errorMsg:[],transferToUser:!0},n.options=[],n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;b.isPro&&v.seafileAPI.listDepartments().then(function(t){for(var n=0;n<t.data.length;n++){var a={};a.value=t.data[n].name,a.email=t.data[n].email,a.label=t.data[n].name,e.options.push(a)}}).catch(function(e){var t=y.Utils.getErrorMsg(e);w.default.danger(t)})}},{key:"render",value:function(){var e=this.props.itemName,t='<span class="op-target" title='+e+">"+e+"</span>",n=(0,b.gettext)("Transfer Library {library_name}"),a=n.replace("{library_name}",t),r=!0;return void 0!=this.props.canTransferToDept&&(r=this.props.canTransferToDept),u.default.createElement(f.Modal,{isOpen:!0},u.default.createElement(f.ModalHeader,{toggle:this.props.toggleDialog},u.default.createElement("div",{dangerouslySetInnerHTML:{__html:a}})),u.default.createElement(f.ModalBody,null,this.state.transferToUser?u.default.createElement(S.default,{ref:"userSelect",isMulti:!1,className:"reviewer-select",placeholder:(0,b.gettext)("Select a user"),onSelectChange:this.handleSelectChange}):u.default.createElement(m.default,{isClearable:!0,isMulti:!1,maxMenuHeight:200,hideSelectedOptions:!0,components:(0,g.default)(),placeholder:(0,b.gettext)("Select a department"),options:this.options,onChange:this.handleSelectChange}),b.isPro&&r&&u.default.createElement("span",{className:"action-link",onClick:this.onClick},this.state.transferToUser?(0,b.gettext)("Transfer to department"):(0,b.gettext)("Transfer to user"))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.props.toggleDialog},(0,b.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.submit},(0,b.gettext)("Submit"))))}}]),t}(u.default.Component);P.propTypes=x,t.default=P},357:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(3),h={fileType:d.default.string,parentPath:d.default.string.isRequired,onAddFolder:d.default.func.isRequired,checkDuplicatedName:d.default.func.isRequired,addFolderCancel:d.default.func.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){e.target.value.trim()?n.setState({isSubmitBtnActive:!0}):n.setState({isSubmitBtnActive:!1}),n.setState({childName:e.target.value})},n.handleSubmit=function(){if(n.state.isSubmitBtnActive){var e=n.state.childName;if(n.checkDuplicatedName()){var t=(0,p.gettext)('The name "{name}" is already taken. Please choose a different name.');t=t.replace("{name}",m.Utils.HTMLescape(e)),n.setState({errMessage:t})}else{var a=n.state.parentPath+e;n.props.onAddFolder(a)}}},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.toggle=function(){n.props.addFolderCancel()},n.checkDuplicatedName=function(){return n.props.checkDuplicatedName(n.state.childName)},n.state={parentPath:"",childName:"",errMessage:"",isSubmitBtnActive:!1},n.newInput=u.default.createRef(),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.parentPath;"/"===e[e.length-1]?this.setState({parentPath:e}):this.setState({parentPath:e+"/"}),this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("New Folder")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,{for:"folderName"},(0,p.gettext)("Name")),u.default.createElement(f.Input,{id:"folderName",value:this.state.childName,innerRef:function(t){e.newInput=t},onKeyPress:this.handleKeyPress,onChange:this.handleChange}))),this.state.errMessage&&u.default.createElement(f.Alert,{color:"danger",className:"mt-2"},this.state.errMessage)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);g.propTypes=h,t.default=g},360:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=(n(3),{toggle:d.default.func.isRequired,updateQuota:d.default.func.isRequired}),h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggle=function(){n.props.toggle()},n.handleQuotaChange=function(e){var t=e.target.value;n.setState({quota:t,isSubmitBtnActive:""!=t.trim()})},n.handleKeyPress=function(e){"Enter"==e.key&&(n.handleSubmit(),e.preventDefault())},n.handleSubmit=function(){n.props.updateQuota(n.state.quota.trim()),n.toggle()},n.state={quota:"",isSubmitBtnActive:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.state,t=e.quota,n=e.isSubmitBtnActive;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},(0,p.gettext)("Set Quota")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.InputGroup,null,u.default.createElement(f.Input,{type:"text",className:"form-control",value:t,onKeyPress:this.handleKeyPress,onChange:this.handleQuotaChange}),u.default.createElement(f.InputGroupAddon,{addonType:"append"},u.default.createElement(f.InputGroupText,null,"MB"))),u.default.createElement("p",{className:"small text-secondary mt-2 mb-2"},(0,p.gettext)("An integer that is greater than or equal to 0."),u.default.createElement("br",null),(0,p.gettext)("Tip: 0 means default limit"))))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit,disabled:!n},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},374:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(552),d=n(376),f=n(377),p=n(47),m=n(565),h=n(567),g=n(568),v=n(199),b=n(569),y=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.onToggleLink=function(e){if(!n.editorUtils.isLinkActive())return void n.props.onToggleLinkDialog();n.editorUtils.unwrapLink()},n.editor=window.editor,n.editorUtils=new v.a(n.editor),n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t,n=this.props.toolbarStatus,a=this.props.readOnly,r=n.isTableActive,o=n.isHeadActive,i=n.isCodeActive,l=n.isBoldActive,s=n.isItalicActive,p=n.isInlineCodeActive,v=n.isLinkActive,y=n.isBlockquoteActive,E=n.isOrderedListActive,w=n.isUnorderedListActive,_=n.isCheckListActive;return u.a.createElement("div",{className:"sf-editor-rich-menu "+(this.props.isSimpleEditor?"":"rich-menu")},u.a.createElement("div",{className:"button-container"},!a&&u.a.createElement("div",{className:"header-list-container"},u.a.createElement(c.a,{disabled:i||r,headerType:n.headerType,onClickHeader:this.editorUtils.onClickHeader})),u.a.createElement(d.a,{className:"editor-btn-group"},u.a.createElement(f.a,{disabled:i||o,isRichEditor:!0,text:t("bold"),id:"BOLDButton",icon:"iconfont icon-bold",isActive:l,onMouseDown:function(t){return e.editorUtils.onClickMark(t,"BOLD")}}),u.a.createElement(f.a,{disabled:i||o,isRichEditor:!0,text:t("italic"),id:"ITALICButton",icon:"iconfont icon-italic",isActive:s,onMouseDown:function(t){return e.editorUtils.onClickMark(t,"ITALIC")}}),u.a.createElement(f.a,{disabled:i||o,isRichEditor:!0,text:t("code"),id:"CODEButton",icon:"iconfont icon-code",isActive:p,onMouseDown:function(t){return e.editorUtils.onClickMark(t,"CODE")}}),u.a.createElement(f.a,{disabled:i||o,isRichEditor:!0,text:t("insert_link"),id:"linkButton",icon:"iconfont icon-link",isActive:v,onMouseDown:this.onToggleLink})),u.a.createElement(d.a,{className:"editor-btn-group"},u.a.createElement(f.a,{disabled:r||i||o,isRichEditor:!0,text:t("quote"),id:"block-quoteButton",icon:"iconfont icon-quote-left",isActive:y,onMouseDown:function(t){return e.editorUtils.onClickBlock(t,"blockquote")}}),u.a.createElement(f.a,{disabled:r||i||o,isRichEditor:!0,text:t("ordered_list"),id:"ordered_listButton",icon:"iconfont icon-list-ol",isActive:E,onMouseDown:function(t){return e.editorUtils.onClickBlock(t,"ordered_list")}}),u.a.createElement(f.a,{disabled:r||i||o,isRichEditor:!0,text:t("unordered_list"),id:"unordered_listButton",icon:"iconfont icon-list-ul",isActive:w,onMouseDown:function(t){return e.editorUtils.onClickBlock(t,"unordered_list")}}),u.a.createElement(f.a,{disabled:r||i||o,isRichEditor:!0,text:t("check_list_item"),id:"checkListItemButton",icon:"iconfont icon-check-square",isActive:_,onMouseDown:this.editorUtils.onToggleCheckItem})),u.a.createElement(d.a,{className:"editor-btn-group"},u.a.createElement(f.a,{disabled:r||o,isRichEditor:!0,text:t("code_block"),id:"codeButton",icon:"iconfont icon-code-block",onMouseDown:function(t){return e.editorUtils.onClickBlock(t,"code_block")},isActive:i&&!a}),u.a.createElement(f.a,{disabled:i||r||o,isRichEditor:!0,text:t("insert_table"),id:"tableButton",icon:"iconfont icon-table",onMouseDown:this.editorUtils.onAddTable}),u.a.createElement(b.a,{disabled:i||o,text:"insert_image",id:"insertImageButton",insertRepoFile:this.props.insertRepoFile,isSimpleEditor:this.props.isSimpleEditor,onInsertImage:this.editorUtils.insertImage,toolbarStatus:this.props.toolbarStatus,onToggleImageDialog:this.props.onToggleImageDialog})),r&&!a&&u.a.createElement(g.a,{onRemoveTable:this.editorUtils.onRemoveTable,onInsertColumn:this.editorUtils.onInsertColumn,onRemoveColumn:this.editorUtils.onRemoveColumn,onInsertRow:this.editorUtils.onInsertRow,onRemoveRow:this.editorUtils.onRemoveRow,onSetAlign:this.editorUtils.onSetAlign})),this.props.hasSidePanel&&u.a.createElement("div",{className:"button-container"},!this.props.isShowSidePanel&&u.a.createElement(d.a,{className:"editor-btn-group position-absolute dropdown-menu-right"},u.a.createElement(f.a,{isRichEditor:!0,text:t("Show_side_panel"),id:"showSidepanel",icon:"fas fa-angle-double-left",isActive:!1,onMouseDown:this.props.toggleSidePanel})),this.props.isShowSidePanel&&u.a.createElement(d.a,{className:"editor-btn-group position-absolute dropdown-menu-right"},u.a.createElement(f.a,{isRichEditor:!0,text:t("Hide_side_panel"),id:"hideSidepanel",icon:"fas fa-angle-double-right",isActive:!1,onMouseDown:this.props.toggleSidePanel}))),this.props.isShowLinkDialog&&u.a.createElement(m.a,{toggleLinkDialog:this.props.onToggleLinkDialog}),this.props.isShowImageDialog&&u.a.createElement(h.a,{onToggleImageDialog:this.props.onToggleImageDialog,insertImage:this.editorUtils.insertImage}))}}]),t}(u.a.Component);t.a=Object(p.withTranslation)("seafile-editor")(y)},376:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"btn-group "+this.props.className,role:"group"},this.props.children)}}]),t}(u.a.PureComponent);t.a=c},377:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(191),s=n(19),u=n(0),c=n.n(u),d=n(90),f=n(47),p=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.toggle=function(){if(!(n.props.disabled||n.state.isFreezed&&!n.state.tooltipOpen)){n.setState({tooltipOpen:!n.state.tooltipOpen,isFreezed:!0});var e=Object(l.a)(n);setTimeout(function(){e.setState({isFreezed:!1})},100)}},n.state={tooltipOpen:!1,isFreezed:!1},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.disabled!==e.disabled?(this.setState({tooltipOpen:!1}),!0):t.tooltipOpen!==this.state.tooltipOpen||e.isActive!==this.props.isActive}},{key:"render",value:function(){var e=this.props.isRichEditor?"rich-icon-btn "+(this.props.disabled?"rich-icon-btn-disabled":"rich-icon-btn-hover"):"btn btn-icon btn-secondary btn-active";return c.a.createElement("button",{id:this.props.id,type:"button",onClick:this.props.disabled?null:this.props.onClick,onMouseDown:this.props.disabled?null:this.props.onMouseDown,className:e,"data-active":this.props.isActive||!1,disabled:this.props.disabled},c.a.createElement("i",{className:this.props.icon}),c.a.createElement(d.n,{toggle:this.toggle,delay:{show:0,hide:0},target:this.props.id,placement:"bottom",isOpen:this.state.tooltipOpen},this.props.text))}}]),t}(c.a.Component);t.a=Object(f.withTranslation)("seafile-editor")(p)},384:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(495),r=n(35),o={isHistory:function(e){return Object(a.a)(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||r.Operation.isOperationList(e.redos[0]))&&(0===e.undos.length||r.Operation.isOperationList(e.undos[0]))}},i={isHistoryCommand:function(e){if(r.Command.isCommand(e))switch(e.type){case"redo":case"undo":return!0}return!1}},l=(new WeakMap,new WeakMap),s=new WeakMap,u={isHistoryEditor:function(e){return r.Editor.isEditor(e)&&o.isHistory(e.history)},isMerging:function(e){return s.get(e)},isSaving:function(e){return l.get(e)},withoutMerging:function(e,t){var n=u.isMerging(e);s.set(e,!1),t(),s.set(e,n)},withoutSaving:function(e,t){var n=u.isSaving(e);l.set(e,!1),t(),l.set(e,n)}},c=function(e){var t=e.apply,n=e.exec;return e.history={undos:[],redos:[]},e.exec=function(t){if(u.isHistoryEditor(e)&&i.isHistoryCommand(t)){var a=e.history,o=a.undos,l=a.redos;if("redo"===t.type&&l.length>0){var s=l[l.length-1];return u.withoutSaving(e,function(){r.Editor.withoutNormalizing(e,function(){var t=!0,n=!1,a=void 0;try{for(var r,o=s[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;e.apply(i)}}catch(e){n=!0,a=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}})}),a.redos.pop(),void a.undos.push(s)}if("undo"===t.type&&o.length>0){var c=o[o.length-1];return u.withoutSaving(e,function(){r.Editor.withoutNormalizing(e,function(){var t=c.map(r.Operation.inverse).reverse(),n=!0,a=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;s===t[t.length-1]&&"set_selection"===s.type&&null==s.newProperties||e.apply(s)}}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}})}),a.redos.push(c),void a.undos.pop()}}n(t)},e.apply=function(n){if(u.isHistoryEditor(e)){var a=e.operations,r=e.history,o=r.undos,i=o[o.length-1],l=i&&i[i.length-1],s=p(n,l),c=u.isSaving(e),h=u.isMerging(e);if(null==c&&(c=f(n)),c){if(null==h&&(h=null!=i&&(0!==a.length||(d(n,l)||s))),i&&h)s&&i.pop(),i.push(n);else{var g=[n];o.push(g)}for(;o.length>100;)o.shift();m(n)&&(r.redos=[])}}t(n)},e},d=function(e,t){return"set_selection"===e.type||(!(!t||"insert_text"!==e.type||"insert_text"!==t.type||e.offset!==t.offset+t.text.length||!r.Path.equals(e.path,t.path))||!(!t||"remove_text"!==e.type||"remove_text"!==t.type||e.offset+e.text.length!==t.offset||!r.Path.equals(e.path,t.path)))},f=function(e,t){return"set_selection"!==e.type||null!=e.newProperties},p=function(e,t){return!(!t||"set_selection"!==e.type||"set_selection"!==t.type)},m=function(e){return"set_selection"!==e.type}},387:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(90),d=n(47),f=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.saveRef=function(e){n.refDom=e},n.getLinkUrl=function(){var e=n.props.editorUtils.getCurrentLinkNode();e&&(n.linkUrl=e.data.href)},n.setMenuPosition=function(){if(0!==window.getSelection().anchorOffset&&0!==window.getSelection().focusOffset){var e=window.getSelection(),t=e.getRangeAt(0),a=t.getBoundingClientRect();navigator.userAgent.indexOf("Chrome")<0&&navigator.userAgent.indexOf("Safari")>0&&t.collapsed&&0===a.top&&0===a.height&&(0===t.startOffset?t.setEnd(t.endContainer,1):t.setStart(t.startContainer,t.startOffset-1),a=t.getBoundingClientRect(),0===a.top&&0===a.height&&t.getClientRects().length&&(a=t.getClientRects()[0]));var r=n.refDom.style;r.zIndex="1050",r.top="".concat(a.top-45,"px");var o=parseInt(a.x-125);o<0?r.left="0px":o+250>document.body.clientWidth?r.left="".concat(document.body.clientWidth-250,"px"):r.left="".concat(a.x-125,"px")}},n.componentDidMount=function(){requestAnimationFrame(function(){n.setMenuPosition()})},n.componentWillUnmount=function(){n.refDom=null},n.componentWillMount=function(){n.getLinkUrl()},n.linkUrl="",n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(){this.setMenuPosition()}},{key:"componentWillReceiveProps",value:function(){this.getLinkUrl()}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"seafile-ed-hovermenu",ref:function(t){return e.refDom=t}},u.a.createElement("a",{href:this.linkUrl,target:"blank",className:"seafile-ed-hovermenu-link"},this.linkUrl),u.a.createElement(c.a,{color:"",className:"seafile-ed-hovermenu-btn",onClick:this.props.editorUtils.unwrapLink},u.a.createElement("i",{className:"iconfont icon-delete"})),u.a.createElement(c.a,{color:"",onClick:this.props.onToggleLinkDialog,className:"seafile-ed-hovermenu-btn"},u.a.createElement("i",{className:"iconfont icon-edit"})),u.a.createElement("span",{className:"seafile-ed-hovermenu-triangle"}))}}]),t}(u.a.Component);t.a=Object(d.withTranslation)("seafile-editor")(f)},388:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(47),d=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.setMenuPosition=function(){var e=n.menu.offsetHeight;0===e&&requestAnimationFrame(n.setMenuPosition);var t=0;t=n.position.top+e>document.body.clientHeight?document.body.clientHeight-e-5:n.position.top;var a=n.position.left+3;n.setState({contextStyle:{top:t,left:a,zIndex:"1051",display:"block"}})},n.tableUtils=e.tableUtils,n.state={contextStyle:{}},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.position=this.props.contextMenuPosition,this.setMenuPosition()}},{key:"componentWillUnmount",value:function(){this.menu=null}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{role:"menu",style:this.state.contextStyle,ref:function(t){return e.menu=t},className:"seafile-contextmenu dropdown-menu"},u.a.createElement("button",{onMouseDown:function(t){return e.tableUtils.insertRow("before")},className:"seafile-contextmenu-item dropdown-item"},this.props.t("Insert_Row_Before")),u.a.createElement("button",{onMouseDown:function(t){return e.tableUtils.insertRow("after")},className:"seafile-contextmenu-item dropdown-item"},this.props.t("Insert_Row_After")),u.a.createElement("button",{onMouseDown:function(t){return e.tableUtils.insertColumn("before")},className:"seafile-contextmenu-item dropdown-item"},this.props.t("Insert_Column_Before")),u.a.createElement("button",{onMouseDown:function(t){return e.tableUtils.insertColumn("after")},className:"seafile-contextmenu-item dropdown-item"},this.props.t("Insert_Column_After")),u.a.createElement("div",{className:"seafile-divider dropdown-divider"}),u.a.createElement("button",{onMouseDown:this.tableUtils.removeRow,className:"seafile-contextmenu-item dropdown-item"},this.props.t("Remove_Row")),u.a.createElement("button",{onMouseDown:this.tableUtils.removeColumn,className:"seafile-contextmenu-item dropdown-item"},this.props.t("Remove_Column")))}}]),t}(u.a.Component);t.a=Object(c.withTranslation)("seafile-editor")(d)},389:function(e,t,n){"use strict";var a=n(144),r=n(35),o=n(249),i=n(250),l=n(202),s=n(166),u=n(337),c=n(381),d=n(380),f=n(390),p=n(391),m=n(580),h=n.n(m),g=n(157),v=function(e){var t=e.exec,n=new o.a(e),m=new i.a(e),v=new s.a(e),b=new c.a(e);return e.exec=function(o){var i=o.data,s=e.selection;switch(o.type){case"set_header":r.Editor.setNodes(e,{type:o.headerType});break;case"insert_data":var c=Object(u.a)(i),y=c.fragment,E=c.type,w=c.html,_=c.text;if("file"===E)return void t(o);if(h()(_)&&!m.isInCodeBlock()){if(_.endsWith("png")||_.endsWith("PNG")||_.endsWith("jpg")||_.endsWith("JPG")||_.endsWith("gif")||_.endsWith("GIF")){var S=Object(p.a)({data:{src:_}});return void r.Editor.insertNodes(e,S)}if(window.editor.editorApi.isInternalFileLink(_)){var x=_.lastIndexOf("/");if(x>0){var P=_.substring(x+1),C=decodeURIComponent(P);return void g.a.insertNodes(e,[Object(f.a)({data:{href:_},children:[{text:C}]}),{text:" "}])}}if(window.editor.editorApi.isInternalDirLink(_)){var O=_.lastIndexOf("/");if(O>0){var P=_.substring(O+1),D=decodeURIComponent(P);return void g.a.insertNodes(e,[Object(f.a)({data:{href:_},children:[{text:D}]}),{text:" "}])}}return void g.a.insertNodes(e,[Object(f.a)({data:{href:_},children:[{text:_}]}),{text:" "}])}if(v.isInTable())return void v.pasteContentInTable(o);if(n.isInlist())return void n.pasteContentInList(o);if(m.isInCodeBlock())return void m.pasteContentInCodeBlock(o);if(b.isInBlockquote())return void b.pasteContentInBlockquote(o);if("fragment"===E)return 1===y.length&&"paragraph"===y[0].type?void r.Editor.insertFragment(e,y):void r.Editor.insertNodes(e,y);if("html"===E){var M=Object(d.a)(w);return void r.Editor.insertNodes(e,M)}if("text"===E){return void _.split(/\r\n|\n/g).forEach(function(t,n){0===n?r.Editor.insertText(e,t):r.Editor.insertNodes(e,{type:"paragraph",children:[{text:t}]})})}t(o);break;case"set_blockquote":if(!s)return;b.wrapBlockquote();break;case"unwrap_blockquote":b.unwrapBlockquote();break;case"set_ordered_list":if(!s)return;n.wrapList("ordered_list");break;case"set_unordered_list":if(!s)return;n.wrapList("unordered_list");break;case"unwrap_unordered_list":case"unwrap_ordered_list":n.unwrapList();break;case"wrap_check_list_item":if(0===n.getCurrentListItem().length)n.wrapList("unordered_list"),r.Editor.setNodes(e,{data:{checked:!1}},{match:{type:"list_item"}});else{var k,T=r.Editor.nodes(e,{at:e.selection,match:{type:"list_item"}}),L=!0,N=!1,I=void 0;try{for(var Y,R=T[Symbol.iterator]();!(L=(Y=R.next()).done);L=!0){k=Y.value}}catch(e){N=!0,I=e}finally{try{L||null==R.return||R.return()}finally{if(N)throw I}}r.Editor.setNodes(e,{data:{checked:!1}},{at:k[1]})}break;case"unwrap_check_list_item":var A=n.getCurrentListItem();r.Editor.setNodes(e,{data:{}},{at:A[0][1]});break;case"set_code_block":m.wrapCodeBlock();break;case"unwrap_code_block":m.unwrapCodeBlock();break;case"exit_code_block":r.Editor.splitNodes(e,{match:"block",always:!0}),m.unwrapCodeBlock(!0);break;case"increase_code_block_indent":if(Object(l.a)(e.selection)){var j=r.Editor.match(e,e.selection,"block");r.Editor.insertText(e,"\t",{at:{anchor:{path:[].concat(Object(a.a)(j[1]),[0]),offset:0},focus:{path:[].concat(Object(a.a)(j[1]),[0]),offset:0}}})}break;case"insert_table":v.insertTable();break;case"remove_table":v.removeTable();break;case"insert_row":v.insertRow();break;case"insert_column":v.insertColumn();break;case"remove_row":v.removeRow();break;case"remove_column":v.removeColumn();break;case"set_table_cell_align":v.setAlign(o.align);break;case"exit_table":v.exitTable();break;default:t(o)}},e};t.a=v},390:function(e,t,n){"use strict";var a=n(12),r=function e(t){Object(a.a)(this,e),this.type=t.type||"link",this.children=t.children||[{text:""}],this.data=t.data||{href:""}},o=function(e){return Object.assign({},new r(e))};t.a=o},391:function(e,t,n){"use strict";var a=n(12),r=function e(t){Object(a.a)(this,e),this.type=t.type||"image",this.data=t.data||{src:""},this.children=t.children||[{text:""}]},o=function(e){return Object.assign({},new r(e))};t.a=o},392:function(e,t,n){"use strict";var a=n(35),r=n(390),o=n(391),i=function(e){var t=e.exec,n=e.isInline;return e.isInline=function(e){return"link"===e.type||"image"===e.type||n(e)},e.exec=function(n){var i=n.data,l=e.selection;switch(n.type){case"insert_link_at_selection":l=n.elementData.selection;var s=l&&a.Range.isCollapsed(l),u=Object(r.a)({type:"link",children:[{text:n.elementData.text}],data:{href:n.elementData.url}});s?a.Editor.insertNodes(e,u,{at:l}):(a.Editor.wrapNodes(e,u,{split:!0,at:l}),a.Editor.select(e,l),a.Editor.collapse(e,{edge:"end"}));break;case"unwrap_link":a.Editor.unwrapNodes(e,{match:{type:"link"}});break;case"set_link":a.Editor.removeNodes(e,{match:{type:"link"}});var c=Object(r.a)({type:"link",data:{href:n.elementData.url},children:[{text:n.elementData.text}]});a.Editor.insertNodes(e,c);break;case"insert_image_at_selection":var d=Object(o.a)({data:n.data});a.Editor.insertNodes(e,d,{at:n.at});break;case"set_image":a.Editor.setNodes(e,{data:i},{match:{type:"image"},at:e.selection,voids:!0});break;case"insert_data":if(i.types.includes("Files")&&i.files[0].type.includes("image")&&window.editor.editorApi.uploadLocalImage)return void window.editor.editorApi.uploadLocalImage(n.data.files[0]).then(function(t){var n=Object(o.a)({data:{src:t}});a.Editor.insertNodes(e,n)});t(n);break;default:t(n)}},e};t.a=i},393:function(e,t,n){"use strict";var a=function(e){var t=e.isVoid;return e.isVoid=function(e){return"image"===e.type||t(e)},e};t.a=a},394:function(e,t,n){"use strict";var a=n(144),r=n(91),o=n(35),i=n(249),l=n(202),s=n(157),u=n(250),c=n(581),d=n(166),f=n(381),p={"1.":"ordered_list","*":"unordered_list","-":"unordered_list",">":"blockquote","#":"header_one","##":"header_two","###":"header_three","####":"header_four","#####":"header_five","######":"header_six","   ":"code_block"},m=function(e){var t=e.exec,n=new i.a(e),m=new u.a(e),h=new d.a(e),g=new c.a(e),v=new f.a(e);return e.exec=function(i){var u=e.selection;switch(i.type){case"split_list_item":o.Editor.splitNodes(e,{match:"block",always:!0});break;case"insert_break":if(!o.Range.isCollapsed(e.selection)){var c=o.Editor.node(e,[e.selection.anchor.path[0]]);return c&&c[0].type.includes("header")?(t(i),void o.Editor.setNodes(e,{type:"paragraph"})):void t(i)}var d=o.Editor.nodes(e,{match:{type:"link"}}),f=Object(r.a)(d,1),b=f[0];if(b){var y=b[1];if(o.Editor.isEnd(e,e.selection.anchor,y)){var E=o.Path.next(y),w={path:E,offset:0};o.Editor.select(e,w)}}var _=o.Editor.nodes(e,{match:{type:"image"}}),S=Object(r.a)(_,1),x=S[0];if(x){var P=x[1].slice(),C=P.pop();return o.Editor.insertNodes(e,{text:""},{at:[].concat(Object(a.a)(P),[C+1])}),void t(i)}if(v.isInBlockquote()){var O=o.Editor.nodes(e,{match:"block"}),D=Object(r.a)(O,1),M=D[0];if(0===o.Node.text(M[0]).length)return void o.Editor.unwrapNodes(e,{match:{type:"blockquote"},split:!0})}if(n.isInlist()){var k=s.a.getNodesByTypeAtRange(e,"list_item");if(0===o.Node.text(k[0]).length)return void n.unwrapList();if(Object(l.a)(e.selection))return void s.a.splitNodesAtPoint(e,{at:e.selection.anchor,match:{type:"list_item"},always:!0})}if(m.isInCodeBlock())return void m.splitCodeLine();if(h.isInTable())return void h.insertRow();var T=o.Editor.node(e,[e.selection.anchor.path[0]]);if(T&&T[0].type.includes("header"))return t(i),void o.Editor.setNodes(e,{type:"paragraph"});t(i);break;case"insert_text":if(" "===i.text&&Object(l.a)(u)){var L=g.getTextInfoBeforeSelection(),N=L.beforeText,I=L.range,Y=L.block,R=Y[1],A=p[N];if(A){if(m.isInCodeBlock())return void t(i);if(o.Editor.select(e,I),o.Editor.delete(e),"blockquote"===A&&(v.isInBlockquote()||e.exec({type:"set_blockquote"})),A.includes("header")&&"paragraph"===Y[0].type&&1===R.length&&e.exec({type:"set_header",headerType:A}),"ordered_list"===A&&e.exec({type:"set_ordered_list"}),"unordered_list"===A&&e.exec({type:"set_unordered_list"}),"code_block"===A&&!m.isInCodeBlock())return void e.exec({type:"set_code_block"});return}return m.isInCodeBlock()?void t(i):void g.setTextMarkByShortCut(t,i)}if("`"===i.text&&Object(l.a)(e.selection)){var j=g.getTextInfoBeforeSelection(),Z=j.beforeText,F=j.range;if("``"===Z&&!m.isInCodeBlock())return o.Editor.select(e,F),o.Editor.delete(e),void e.exec({type:"set_code_block"})}t(i);break;case"increase_list_item_depth":n.increaseListDepth();break;case"delete_backward":if(0===u.anchor.offset&&Object(l.a)(u)){var B=o.Editor.nodes(e,{match:"block"});if(Object(r.a)(B,1)[0][0].type.includes("header"))return void e.exec({type:"set_header",headerType:"paragraph"});if(v.isInBlockquote())return void e.exec({type:"unwrap_blockquote"});if(n.isInlist()){var X=o.Editor.nodes(e,{match:[{type:"ordered_list"},{type:"unordered_list"}]}),H=Object(r.a)(X,1),J=H[0],U=J[0];if(1===U.children.length&&0===o.Node.text(U).length)return void n.unwrapList()}if(m.isInCodeBlock()){var Q=o.Editor.match(e,e.selection,{type:"code_block"}),G=Q[0],W=G.children;if(0===o.Node.text(G).length&&1===W.length)return void e.exec({type:"unwrap_code_block"})}if(h.isInTable()){var z=o.Editor.match(e,e.selection,"block"),K=z[1];if(0===o.Editor.start(e,K).offset)return}}t(i);break;default:t(i)}},e};t.a=m},395:function(e,t,n){"use strict";var a=n(144),r=n(91),o=n(157),i=n(35),l=function(e){var t=e.normalizeNode;return e.normalizeNode=function(n){var l=Object(r.a)(n,2),s=l[0],u=l[1],c=s.type;if(1===u.length&&"list_item"===c&&o.a.wrapNodes(e,{type:"unordered_list",children:[s]},{at:u}),1===u.length&&("ordered_list"===c||"unordered_list"===c)){var d=u[0],f=e.children[d-1],p=e.children[d+1];f&&f.type===c&&o.a.mergeNodes(e,{at:u}),p&&p.type===c&&o.a.mergeNodes(e,{at:[d+1]})}return 1===u.length&&u[0]===e.children.length-1&&("paragraph"===s.type&&o.a.isEmptyParagraph(s)||o.a.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:[u[0]+1]})),"blockquote"===c&&s.children.forEach(function(t,n){var r=[].concat(Object(a.a)(u),[n]);"blockquote"===t.type&&o.a.unwrapNodes(e,{at:r})}),"link"===c&&""===i.Node.text(s)&&o.a.removeNodes(e,{at:u}),t([s,u])},e};t.a=l},396:function(e,t,n){"use strict";var a=n(91),r=n(12),o=n(382),i=n.n(o),l=n(35),s=n(249),u=n(250),c=n(166),d=n(582),f=n(157),p=function e(t){var n=this;Object(r.a)(this,e),this.onKeyDown=function(e){if(13===e.nativeEvent.keyCode&&(e.preventDefault(),i()("shift+enter",e)?n.listUtils.isInlist()&&n.editor.exec({type:"split_list_item"}):i()("mod+enter",e)?(n.codeUtils.isInCodeBlock()&&n.editor.exec({type:"exit_code_block"}),n.tableUtils.isInTable()&&n.editor.exec({type:"exit_table"})):n.editor.exec({type:"insert_break"})),i()("shift+tab",e)&&(e.preventDefault(),n.listUtils.isInlist())){var t=l.Editor.nodes(n.editor,{match:[{type:"unordered_list"},{type:"ordered_list"}],at:n.editor.selection,mode:"highest"}),r=Object(a.a)(t,1),o=r[0];if(!o)return;var s=o[0].type;n.editor.exec({type:"unwrap_".concat(s)})}if(i()("mod+s",e)&&(e.preventDefault(),n.editor.onSave()),i()("tab",e)&&l.Range.isCollapsed(n.editor.selection)&&(e.preventDefault(),n.codeUtils.isInCodeBlock()&&n.editor.exec({type:"increase_code_block_indent"}),n.listUtils.isInlist()&&n.editor.exec({type:"increase_list_item_depth"})),i()("mod+b",e)&&(e.preventDefault(),n.codeUtils.isInCodeBlock()||n.editor.exec({type:"format_text",properties:{BOLD:!0}})),i()("mod+i",e)&&(e.preventDefault(),n.codeUtils.isInCodeBlock()||n.editor.exec({type:"format_text",properties:{ITALIC:!0}})),i()("mod+/",e)&&(e.preventDefault(),n.codeUtils.isInCodeBlock()||n.editor.exec({type:"format_text",properties:{CODE:!0}})),i()("backspace",e)){var u=f.a.match(n.editor,n.editor.selection,"inline");if(u&&"image"===u[0].type)return e.preventDefault(),void n.editor.exec({type:"delete_backward",unit:"character"})}},this.onCut=function(e,t){var a=f.a.match(n.editor,n.editor.selection,{type:"image"});if(a)return Object(d.a)(e,"fragment",[a[0]]),void n.editor.exec({type:"delete_backward",unit:"character"})},this.onCopy=function(e,t){if(n.tableUtils.isInTable()){e.preventDefault();var a=n.tableUtils.getSelectedTableCells();return a?void Object(d.a)(e,"fragment",a):void Object(d.a)(e,"text",f.a.text(t,t.selection))}},this.editor=t,this.listUtils=new s.a(t),this.codeUtils=new u.a(t),this.tableUtils=new c.a(t),this.onSave=t.onSave};t.a=p},398:function(e,t){},399:function(e,t){},4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.seafileAPI=void 0;var a=n(42),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(54),i=n(1),l=new o.SeafileAPI,s=r.default.load("sfcsrftoken");l.initForSeahubUsage({siteRoot:i.siteRoot,xcsrfHeaders:s}),t.seafileAPI=l},40:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),d=n(2),f=a(d),p=n(209),m=a(p),h=n(4),g=n(1),v=n(3),b=n(5),y=a(b);n(109);var E={placeholder:f.default.string.isRequired,onSelectChange:f.default.func.isRequired,isMulti:f.default.bool.isRequired,className:f.default.string,value:f.default.string},w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInputChange=function(e){n.setState({searchValue:e})},n.handleSelectChange=function(e){n.options=[],n.props.onSelectChange(e)},n.loadOptions=function(e,t){var a=e.trim();a.length>0&&h.seafileAPI.searchUsers(a).then(function(e){n.options=[];for(var a=0;a<e.data.users.length;a++){var r=e.data.users[a],o={};o.value=r.name,o.email=r.email,o.label=g.enableShowContactEmailWhenSearchUser?c.default.createElement("div",{className:"d-flex"},c.default.createElement("img",{src:r.avatar_url,className:"avatar",width:"24",alt:""}),c.default.createElement("div",{className:"ml-2"},c.default.createElement("span",{className:"user-option-name"},r.name),c.default.createElement("br",null),c.default.createElement("span",{className:"user-option-email"},r.contact_email))):c.default.createElement(c.default.Fragment,null,c.default.createElement("img",{src:r.avatar_url,className:"select-module select-module-icon avatar",alt:""}),c.default.createElement("span",{className:"select-module select-module-name"},r.name)),n.options.push(o)}t(n.options)}).catch(function(e){var t=v.Utils.getErrorMsg(e);y.default.danger(t)})},n.clearSelect=function(){n.refs.userSelect.select.onChange([],{action:"clear"})},n.options=[],n.state={searchValue:""},n}return i(t,e),s(t,[{key:"render",value:function(){var e=this.state.searchValue,t={margin:"6px 10px",textAlign:"center",color:"hsl(0,0%,50%)"};return c.default.createElement(m.default,{isClearable:!0,classNamePrefix:!0,components:{NoOptionsMessage:function(n){return c.default.createElement("div",l({},n.innerProps,{style:t}),e?(0,g.gettext)("User not found"):(0,g.gettext)("Enter characters to start searching"))}},isMulti:this.props.isMulti,loadOptions:this.loadOptions,onChange:this.handleSelectChange,onInputChange:this.onInputChange,placeholder:this.props.placeholder,className:"user-select "+this.props.className,value:this.props.value,ref:"userSelect"})}}]),t}(c.default.Component);w.propTypes=E,t.default=w},400:function(e,t){},401:function(e,t){},402:function(e,t){},403:function(e,t){},405:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(90),d=n(604),f=(n.n(d),function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.handleClick=function(){n.props.openDialogs&&n.props.openDialogs("add-participant")},n.tooltipToggle=function(){n.setState({tooltipOpen:!n.state.tooltipOpen})},n.state={tooltipOpen:!1},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.participants;return u.a.createElement("div",{className:"participants mb-2 position-relative"},e.map(function(e,t){return u.a.createElement(p,{item:e,index:t,key:t})}),u.a.createElement("span",{className:"add-participants",onClick:this.handleClick,id:"add-participant-icon"},u.a.createElement("i",{className:"fas fa-plus-circle"})),u.a.createElement(c.n,{toggle:this.tooltipToggle,delay:{show:0,hide:0},target:"add-participant-icon",placement:"bottom",isOpen:this.state.tooltipOpen},this.props.t("Add_participants")))}}]),t}(u.a.Component)),p=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.toggleAvatarTooltip=function(){n.setState({showAvatarTooltip:!n.state.showAvatarTooltip})},n.state={showAvatarTooltip:!1},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.index,a="participant-avatar-"+n;return u.a.createElement("span",{className:"participant-avatar"},u.a.createElement("img",{src:t.avatar_url,className:"avatar",id:a,alt:"avatar",key:n}),u.a.createElement(c.n,{toggle:this.toggleAvatarTooltip,delay:{show:0,hide:0},target:a,placement:"bottom",isOpen:this.state.showAvatarTooltip},t.name))}}]),t}(u.a.Component);t.a=f},408:function(e,t){},427:function(e,t){},432:function(e,t,n){"use strict";function a(e,t){if(null==e)return{};var n,a,o=r(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function r(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=function(e){return function(t){var n=(t.in,t.onExited,t.appear,t.enter,t.exit,a(t,["in","onExited","appear","enter","exit"]));return o.default.createElement(e,n)}},l=i;t.default=l},433:function(e,t,n){"use strict";function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},a.apply(this,arguments)}function r(e,t){if(null==e)return{};var n,a,r=o(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function o(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),l=n(178),s=function(e){return function(t){var n=t.in,o=t.onExited,s=r(t,["in","onExited"]);return i.default.createElement(l.Collapse,{in:n,onExited:o},i.default.createElement(e,a({cropWithEllipsis:n},s)))}},u=s;t.default=u},434:function(e,t,n){"use strict";function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},a.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=n(178),i=function(e){return function(t){return r.default.createElement(o.Fade,a({component:e,duration:t.isMulti?o.collapseDuration:1},t))}},l=i;t.default=l},435:function(e,t,n){"use strict";function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},a.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=n(178),i=function(e){return function(t){return r.default.createElement(o.Fade,a({component:e},t))}},l=i;t.default=l},436:function(e,t,n){"use strict";function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},a.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=n(260),i=function(e){return function(t){return r.default.createElement(o.TransitionGroup,a({component:e},t))}},l=i;t.default=l},445:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(1),p=n(60),m=a(p),h={isTextMode:d.default.bool.isRequired,isEditIconShow:d.default.bool.isRequired,roles:d.default.array.isRequired,currentRole:d.default.string.isRequired,onRoleChanged:d.default.func.isRequired,toggleItemFreezed:d.default.func},g=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.translateRole=function(e){return"Admin"===e?(0,f.gettext)("Admin"):"Member"===e?(0,f.gettext)("Member"):void 0},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(m.default,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.roles,currentOption:this.props.currentRole,onOptionChanged:this.props.onRoleChanged,translateOption:this.translateRole,toggleItemFreezed:this.props.toggleItemFreezed})}}]),t}(u.default.Component);g.propTypes=h,t.default=g},473:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(1),m={currentItem:d.default.string.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navItems=[{name:"fileStatistic",urlPart:"statistics/file",text:(0,p.gettext)("File")},{name:"storageStatistic",urlPart:"statistics/storage",text:(0,p.gettext)("Storage")},{name:"usersStatistic",urlPart:"statistics/user",text:(0,p.gettext)("Users")},{name:"trafficStatistic",urlPart:"statistics/traffic",text:(0,p.gettext)("Traffic")},{name:"reportsStatistic",urlPart:"statistics/reports",text:(0,p.gettext)("Reports")}],n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.currentItem;return u.default.createElement("div",{className:"cur-view-path tab-nav-container"},u.default.createElement("ul",{className:"nav"},this.navItems.map(function(t,n){return u.default.createElement("li",{className:"nav-item",key:n},u.default.createElement(f.Link,{to:p.siteRoot+"sys/"+t.urlPart+"/",className:"nav-link"+(e==t.name?" active":"")},t.text))})))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},474:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f={placeholder:d.default.string.isRequired,submit:d.default.func.isRequired},p=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleInputChange=function(e){n.setState({value:e.target.value})},n.handleKeyPress=function(e){"Enter"==e.key&&(e.preventDefault(),n.handleSubmit())},n.handleSubmit=function(){var e=n.state.value.trim();if(!e)return!1;n.props.submit(e)},n.state={value:""},n}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"input-icon"},u.default.createElement("i",{className:"d-flex input-icon-addon fas fa-search"}),u.default.createElement("input",{type:"text",className:"form-control search-input h-6 mr-1",style:{width:"15rem"},placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,autoComplete:"off"}))}}]),t}(u.default.Component);p.propTypes=f,t.default=p},475:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(1),m={currentItem:d.default.string.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navItems=[{name:"info",urlPart:"",text:(0,p.gettext)("Info")},{name:"owned-repos",urlPart:"owned-libraries",text:(0,p.gettext)("Owned Libraries")},{name:"shared-repos",urlPart:"shared-libraries",text:(0,p.gettext)("Shared Libraries")},{name:"links",urlPart:"shared-links",text:(0,p.gettext)("Shared Links")},{name:"groups",urlPart:"groups",text:(0,p.gettext)("Groups")}],n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.currentItem,n=e.email,a=e.userName;return u.default.createElement("div",null,u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},u.default.createElement(f.Link,{to:p.siteRoot+"sys/users/"},(0,p.gettext)("Users"))," / ",a)),u.default.createElement("ul",{className:"nav border-bottom mx-4"},this.navItems.map(function(e,a){return u.default.createElement("li",{className:"nav-item mr-2",key:a},u.default.createElement(f.Link,{to:p.siteRoot+"sys/users/"+encodeURIComponent(n)+"/"+e.urlPart,className:"nav-link "+(t==e.name?" active":"")},e.text))})))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=new r.default;t.default=o},522:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(83),m=a(p),h=n(1),g=n(5),v=a(g),b={link:d.default.string.isRequired,toggleDialog:d.default.func.isRequired},y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.copyToClipboard=function(){(0,m.default)(n.props.link),n.props.toggleDialog(),v.default.success((0,h.gettext)("The link is copied to the clipboard."))},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.link,n=e.toggleDialog;return u.default.createElement(f.Modal,{isOpen:!0,toggle:n},u.default.createElement(f.ModalHeader,{toggle:n},(0,h.gettext)("Link")),u.default.createElement(f.ModalBody,null,u.default.createElement("a",{href:t},t)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"primary",onClick:this.copyToClipboard},(0,h.gettext)("Copy")),u.default.createElement(f.Button,{color:"secondary",onClick:n},(0,h.gettext)("Close"))))}}]),t}(u.default.Component);y.propTypes=b,t.default=y},525:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),d=n(2),f=a(d),p=n(6),m=n(7),h=a(m),g=n(1),v=n(2119),b=a(v),y={getActiviesFiles:f.default.func.isRequired,children:f.default.object},E=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.changeActive=function(e){if(n.state.statisticType!==e){var t=(0,h.default)().format("YYYY-MM-DD 00:00:00"),a=t,r=void 0;switch(e){case"oneWeek":r=(0,h.default)().subtract(6,"d").format("YYYY-MM-DD 00:00:00");break;case"oneMonth":r=(0,h.default)().subtract(29,"d").format("YYYY-MM-DD 00:00:00");break;case"oneYear":r=(0,h.default)().subtract(364,"d").format("YYYY-MM-DD 00:00:00")}n.setState({statisticType:e}),n.props.getActiviesFiles(r,a,"day")}},n.disabledStartDate=function(e){if(!e)return!1;var t=(0,h.default)().format(),a=n.state.endValue;if(!a){return t<(0,h.default)(e).format()}return a.isBefore(e)||(0,h.default)(e).format()>t},n.disabledEndDate=function(e){if(!e)return!1;var t=(0,h.default)().format(),a=n.state.startValue;if(!a){return t<(0,h.default)(e).format()}return e.isBefore(a)||(0,h.default)(e).format()>t},n.onChange=function(e,t){n.setState(r({},e,t))},n.onSubmit=function(){var e=n.state,t=e.startValue,a=e.endValue;if(t&&a){n.setState({statisticType:"itemButton"});var r=(0,h.default)(t).format("YYYY-MM-DD 00:00:00"),o=(0,h.default)(a).format("YYYY-MM-DD 00:00:00");n.props.getActiviesFiles(r,o,"day")}},n.state={statisticType:"oneWeek",startValue:null,endValue:null},n}return l(t,e),s(t,[{key:"componentDidMount",value:function(){var e=(0,h.default)().format("YYYY-MM-DD 00:00:00"),t=e,n=(0,h.default)().subtract(6,"d").format("YYYY-MM-DD 00:00:00");this.props.getActiviesFiles(n,t,"day")}},{key:"render",value:function(){var e=this.state,t=e.statisticType,n=e.endValue,a=e.startValue;return c.default.createElement(u.Fragment,null,this.props.children,c.default.createElement("div",{className:"system-statistic-time-range"},c.default.createElement("div",{className:"sys-stat-tool"},c.default.createElement("div",{className:"system-statistic-item border-right-0 rounded-left "+("oneWeek"===t?"item-active":""),onClick:this.changeActive.bind(this,"oneWeek")},(0,g.gettext)("7 Days")),c.default.createElement("div",{className:"system-statistic-item border-right-0 "+("oneMonth"===t?"item-active":""),onClick:this.changeActive.bind(this,"oneMonth")},(0,g.gettext)("30 Days")),c.default.createElement("div",{className:"system-statistic-item rounded-right "+("oneYear"===t?"item-active":""),onClick:this.changeActive.bind(this,"oneYear")},(0,g.gettext)("1 Year"))),c.default.createElement("div",{className:"system-statistic-input-container"},c.default.createElement(b.default,{disabledDate:this.disabledStartDate,value:a,onChange:this.onChange.bind(this,"startValue")}),c.default.createElement("span",{className:"system-statistic-connect"},"-"),c.default.createElement(b.default,{disabledDate:this.disabledEndDate,value:n,onChange:this.onChange.bind(this,"endValue")}),c.default.createElement(p.Button,{className:"operation-item system-statistic-button",onClick:this.onSubmit},(0,g.gettext)("Submit")))))}}]),t}(c.default.Component);E.propTypes=y,t.default=E},526:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2120),d=n(2),f=a(d),p=n(3),m={labels:f.default.array.isRequired,filesData:f.default.array.isRequired,suggestedMaxNumbers:f.default.number.isRequired,isLegendStatus:f.default.bool.isRequired,chartTitle:f.default.string.isRequired,isTitleCallback:f.default.bool,isTicksCallback:f.default.bool},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.titleCallback=function(e,t){return t.datasets[e.datasetIndex].label+": "+p.Utils.bytesToSize(e.yLabel)},n.ticksCallback=function(e,t,n){return p.Utils.bytesToSize(e)},n.state={data:{},opations:{}},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.labels,n=e.filesData,a=e.isTitleCallback,r=e.isTicksCallback,o=e.suggestedMaxNumbers,i=e.isLegendStatus,l=e.chartTitle,s=this,u={labels:t,datasets:n},c={title:{display:!0,fontSize:14,text:l},elements:{line:{fill:!1,tension:0,borderWidth:2}},legend:{display:i,labels:{usePointStyle:!0}},tooltips:{callbacks:{label:function(e,t){return a?s.titleCallback(e,t):t.datasets[e.datasetIndex].label+": "+e.yLabel}}},layout:{padding:{right:100}},scales:{yAxes:[{ticks:{beginAtZero:!0,suggestedMax:o,callback:function(e,t,n){return r?s.ticksCallback(e,t,n):e}}}],xAxes:[{ticks:{maxTicksLimit:20}}]}};this.setState({data:u,options:c})}},{key:"componentWillReceiveProps",value:function(e){var t={labels:e.labels,datasets:e.filesData};this.setState({data:t})}},{key:"render",value:function(){var e=this.state,t=e.data,n=e.options;return u.default.createElement(c.Line,{data:t,options:n})}}]),t}(u.default.Component);h.propTypes=m,t.default=h},527:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(1),m={currentItem:d.default.string.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navItems=[{name:"info",urlPart:"info",text:(0,p.gettext)("Info")},{name:"users",urlPart:"users",text:(0,p.gettext)("Members")},{name:"groups",urlPart:"groups",text:(0,p.gettext)("Groups")},{name:"repos",urlPart:"libraries",text:(0,p.gettext)("Libraries")}],n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.currentItem,n=e.orgID,a=e.orgName;return u.default.createElement("div",null,u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},u.default.createElement(f.Link,{to:p.siteRoot+"sys/organizations/"},(0,p.gettext)("Organizations"))," / ",a)),u.default.createElement("ul",{className:"nav border-bottom mx-4"},this.navItems.map(function(e,a){return u.default.createElement("li",{className:"nav-item mr-2",key:a},u.default.createElement(f.Link,{to:p.siteRoot+"sys/organizations/"+n+"/"+e.urlPart+"/",className:"nav-link "+(t==e.name?" active":"")},e.text))})))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},528:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(1),m={currentItem:d.default.string.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navItems=[{name:"loginLogs",urlPart:"logs/login",text:(0,p.gettext)("Login")},{name:"fileAccessLogs",urlPart:"logs/file-access",text:(0,p.gettext)("File Access")},{name:"fileUpdateLogs",urlPart:"logs/file-update",text:(0,p.gettext)("File Update")},{name:"sharePermissionLogs",urlPart:"logs/share-permission",text:(0,p.gettext)("Permission")}],n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.currentItem;return u.default.createElement("div",{className:"cur-view-path tab-nav-container"},u.default.createElement("ul",{className:"nav"},this.navItems.map(function(t,n){return u.default.createElement("li",{className:"nav-item",key:n},u.default.createElement(f.Link,{to:p.siteRoot+"sys/"+t.urlPart+"/",className:"nav-link"+(e==t.name?" active":"")},t.text))})))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},529:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(7),h=a(m),g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.downloadExcel=function(){if(n.isValidDateStr()){var e=n.state,t=e.startDateStr,a=e.endDateStr,r=p.siteRoot;switch(n.props.logType){case"login":r+="sys/loginadmin/export-excel/";break;case"fileAccess":r+="sys/log/fileaudit/export-excel/";break;case"fileUpdate":r+="sys/log/fileupdate/export-excel/";break;case"sharePermission":r+="sys/log/permaudit/export-excel/"}location.href=r+"?start="+t+"&end="+a,n.props.toggle()}},n.isValidDateStr=function(){var e=n.state,t=e.startDateStr,a=e.endDateStr;return!!((0,h.default)(t,"YYYY-MM-DD",!0).isValid()&&(0,h.default)(a,"YYYY-MM-DD",!0).isValid()&&(0,h.default)(t).isBefore(a))||(n.setState({errMsg:(0,p.gettext)("Date Invalid.")}),!1)},n.handleStartChange=function(e){var t=e.target.value.trim();n.setState({startDateStr:t,errMsg:""})},n.handleEndChange=function(e){var t=e.target.value.trim();n.setState({endDateStr:t,errMsg:""})},n.state={loading:!0,startDateStr:"",endDateStr:"",errMsg:""},n.newInput=u.default.createRef(),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.newInput.focus()}},{key:"render",value:function(){var e=this;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.props.toggle},u.default.createElement(f.ModalHeader,{toggle:this.props.toggle},(0,p.gettext)("Choose date")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,null,(0,p.gettext)("Start date")),u.default.createElement(f.Input,{value:this.state.startDateStr,onChange:this.handleStartChange,placeholder:"yyyy-mm-dd",innerRef:function(t){e.newInput=t}})),u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,null,(0,p.gettext)("End date")),u.default.createElement(f.Input,{value:this.state.endDateStr,onChange:this.handleEndChange,placeholder:"yyyy-mm-dd"})),this.state.errMsg&&u.default.createElement(f.Alert,{className:"mt-2",color:"danger"},(0,p.gettext)(this.state.errMsg))),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.props.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.downloadExcel},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component),v={toggle:d.default.func.isRequired,logType:d.default.string.isRequired};g.propTypes=v,t.default=g},55:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(3),p=n(60),m=a(p),h={isTextMode:d.default.bool.isRequired,isEditIconShow:d.default.bool.isRequired,permissions:d.default.array.isRequired,currentPermission:d.default.string.isRequired,onPermissionChanged:d.default.func.isRequired},g=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.translatePermission=function(e){return f.Utils.sharePerms(e)},a.translateExplanation=function(e){return f.Utils.sharePermsExplanation(e)},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(m.default,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.permissions,currentOption:this.props.currentPermission,onOptionChanged:this.props.onPermissionChanged,translateOption:this.translatePermission,translateExplanation:this.translateExplanation})}}]),t}(u.default.Component);g.propTypes=h,t.default=g},550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(551),r=n(584);n.d(t,"SimpleEditor",function(){return a.a}),n.d(t,"SeafileEditor",function(){return r.a})},551:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(374),d=n(47),f=n(199),p=n(35),m=n(384),h=n(135),g=n(201),v=n(202),b=n(383),y=n(387),E=n(388),w=n(389),_=n(392),S=n(393),x=n(394),P=n(395),C=n(396),O=n(166),D=n(397),M=(n.n(D),n(398)),k=(n.n(M),n(583)),T=(n.n(k),n(399)),L=(n.n(T),n(400)),N=(n.n(L),n(401)),I=(n.n(N),n(402)),Y=(n.n(I),n(403)),R=(n.n(Y),function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.onChange=function(e){n.setState({value:e}),!0===n.state.isShowContextMenu&&(n.setState({isShowContextMenu:!1}),n.contextMenuPosition={}),n.editor.operations.some(function(e){return"set_selection"!==e.type&&"set_value"!==e.type})&&(n.contentChanged=!0)},n.foucsEditor=function(){n.editorRef.firstChild.focus()},n.hasContentChange=function(){return n.contentChanged},n.onToggleLinkDialog=function(){n.setState({isShowLinkDialog:!n.state.isShowLinkDialog})},n.onToggleImageDialog=function(){n.setState({isShowImageDialog:!n.state.isShowImageDialog})},n.onContextMenu=function(e){n.tableUtils.isInTable()&&(e.preventDefault(),n.contextMenuPosition={left:e.clientX,top:e.clientY},n.setState({isShowContextMenu:!n.state.isShowContextMenu}))},n.editor=Object(P.a)(Object(x.a)(Object(S.a)(Object(w.a)(Object(_.a)(Object(m.a)(Object(g.withReact)(Object(p.createEditor)()))))))),n.editor.editorApi=e.editorApi,window.editor=n.editor,n.editorUtils=new f.a(n.editor),n.tableUtils=new O.a(n.editor),n.plugin=new C.a(n.editor),n.editorRef=null,n.contextMenuPosition={},n.state={value:Object(h.deserialize)(e.value),isShowLinkDialog:!1,isShowImageDialog:!1,isShowBigImage:!1,isShowContextMenu:!1},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"getMarkdown",value:function(){return this.contentChanged=!1,Object(h.serialize)(this.state.value)}},{key:"getValue",value:function(){return this.state.value}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,a=t.isShowLinkDialog,r=t.isShowImageDialog,o=this.editor,i=this.foucsEditor,l=this.editorUtils.getToolbarStatus(),s=this.props.readOnly,d=Object(v.a)(o.selection);return u.a.createElement("div",{className:"seafile-editor-module seafile-simple-editor"},u.a.createElement(g.Slate,{editor:this.editor,value:n,onChange:this.onChange},u.a.createElement("div",{className:"seafile-rich-editor-topbar"},u.a.createElement(c.a,{onToggleLinkDialog:this.onToggleLinkDialog,onToggleImageDialog:this.onToggleImageDialog,toolbarStatus:l,isSimpleEditor:!0,isShowLinkDialog:a,isShowImageDialog:r})),u.a.createElement("div",{className:"editor-container"},u.a.createElement("div",{ref:function(t){return e.editorRef=t},onClick:1===n.length&&"paragraph"===n[0].type&&0===p.Node.text(n[0].children[0]).length?i:null,className:"editor article"},u.a.createElement(g.Editable,{renderElement:function(e){return Object(f.d)(e,o,s)},className:"editor-component",renderLeaf:f.c,onContextMenu:this.onContextMenu,onCopy:function(t){e.plugin.onCopy(t,o)},onCut:function(t){return e.plugin.onCut(t)},autoFocus:!0,onKeyDown:this.plugin.onKeyDown,decorate:f.b})),l.isLinkActive&&d?u.a.createElement(b.a,null,u.a.createElement(y.a,{onToggleLinkDialog:this.onToggleLinkDialog,editorUtils:this.editorUtils})):null,this.state.isShowContextMenu&&u.a.createElement(b.a,null,u.a.createElement(E.a,{tableUtils:this.tableUtils,contextMenuPosition:this.contextMenuPosition})))))}}]),t}(u.a.Component));t.a=Object(d.withTranslation)("seafile-editor")(R)},552:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(10),d=n.n(c),f=n(47),p=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.handleClick=function(e){if(!n.props.disabled){n.getContainer().contains(e.target)?n.toggle():n.state.dropdownOpen&&n.setState({dropdownOpen:!n.state.dropdownOpen})}},n.toggle=function(){n.setState({dropdownOpen:!n.state.dropdownOpen})},n.state={dropdownOpen:!1},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"getContainer",value:function(){return d.a.findDOMNode(this)}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick)}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"header-list"},u.a.createElement("div",{className:"list-body "+(this.props.disabled?"":"header-list-body-hover")+(this.state.dropdownOpen?" header-list-body-highlight":"")},u.a.createElement("div",{className:"list-title"},this.props.t(this.props.headerType)),u.a.createElement("div",{className:"list-caret"},u.a.createElement("i",{className:this.state.dropdownOpen?"iconfont icon-caret-up":"iconfont icon-drop-down"}))),this.state.dropdownOpen&&u.a.createElement("div",{className:"list-dropdown"},u.a.createElement("div",{className:"list-dropdown-item",onClick:function(t){e.props.onClickHeader(t,"paragraph")}},this.props.t("paragraph")),u.a.createElement("div",{className:"list-dropdown-item",onClick:function(t){e.props.onClickHeader(t,"header_one")}},this.props.t("header_one")),u.a.createElement("div",{className:"list-dropdown-item",onClick:function(t){e.props.onClickHeader(t,"header_two")}},this.props.t("header_two")),u.a.createElement("div",{className:"list-dropdown-item",onClick:function(t){e.props.onClickHeader(t,"header_three")}},this.props.t("header_three")),u.a.createElement("div",{className:"list-dropdown-item",onClick:function(t){e.props.onClickHeader(t,"header_four")}},this.props.t("header_four")),u.a.createElement("div",{className:"list-dropdown-item",onClick:function(t){e.props.onClickHeader(t,"header_five")}},this.props.t("header_five")),u.a.createElement("div",{className:"list-dropdown-item",onClick:function(t){e.props.onClickHeader(t,"header_six")}},this.props.t("header_six"))))}}]),t}(u.a.PureComponent);t.a=Object(f.withTranslation)("seafile-editor")(p)},558:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Arrow=t.Popper=t.Target=t.Manager=void 0;var r=n(559),o=a(r),i=n(560),l=a(i),s=n(561),u=a(s),c=n(563),d=a(c);t.Manager=o.default,t.Target=l.default,t.Popper=u.default,t.Arrow=d.default},559:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=n(2),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a._setTargetNode=function(e){a._targetNode=e},a._getTargetNode=function(){return a._targetNode},i=n,o(a,i)}return i(t,e),l(t,[{key:"getChildContext",value:function(){return{popperManager:{setTargetNode:this._setTargetNode,getTargetNode:this._getTargetNode}}}},{key:"render",value:function(){var e=this.props,t=e.tag,n=e.children,r=a(e,["tag","children"]);return!1!==t?(0,s.createElement)(t,r,n):n}}]),t}(s.Component);d.childContextTypes={popperManager:c.default.object.isRequired},d.propTypes={tag:c.default.oneOfType([c.default.string,c.default.bool]),children:c.default.oneOfType([c.default.node,c.default.func])},d.defaultProps={tag:"div"},t.default=d},560:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(0),i=n(2),l=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e,t){var n=e.component,i=void 0===n?"div":n,l=e.innerRef,s=e.children,u=a(e,["component","innerRef","children"]),c=t.popperManager,d=function(e){c.setTargetNode(e),"function"===typeof l&&l(e)};if("function"===typeof s){return s({targetProps:{ref:d},restProps:u})}var f=r({},u);return"string"===typeof i?f.ref=d:f.innerRef=d,(0,o.createElement)(i,f,s)};s.contextTypes={popperManager:l.default.object.isRequired},s.propTypes={component:l.default.oneOfType([l.default.node,l.default.func]),innerRef:l.default.func,children:l.default.oneOfType([l.default.node,l.default.func])},t.default=s},561:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(0),d=n(2),f=a(d),p=n(562),m=a(p),h=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.state={},a._setArrowNode=function(e){a._arrowNode=e},a._getTargetNode=function(){return a.context.popperManager.getTargetNode()},a._getOffsets=function(e){return Object.keys(e.offsets).map(function(t){return e.offsets[t]})},a._isDataDirty=function(e){return!a.state.data||JSON.stringify(a._getOffsets(a.state.data))!==JSON.stringify(a._getOffsets(e))},a._updateStateModifier={enabled:!0,order:900,fn:function(e){return a._isDataDirty(e)&&a.setState({data:e}),e}},a._getPopperStyle=function(){var e=a.state.data;return a._popper&&e?s({position:e.offsets.popper.position},e.styles):{position:"absolute",pointerEvents:"none",opacity:0}},a._getPopperPlacement=function(){return a.state.data?a.state.data.placement:void 0},a._getPopperHide=function(){return a.state.data&&a.state.data.hide?"":void 0},a._getArrowStyle=function(){if(a.state.data&&a.state.data.offsets.arrow){var e=a.state.data.offsets.arrow;return{top:e.top,left:e.left}}return{}},a._handlePopperRef=function(e){a._popperNode=e,e?a._createPopper():a._destroyPopper(),a.props.innerRef&&a.props.innerRef(e)},a._scheduleUpdate=function(){a._popper&&a._popper.scheduleUpdate()},r=n,i(a,r)}return l(t,e),u(t,[{key:"getChildContext",value:function(){return{popper:{setArrowNode:this._setArrowNode,getArrowStyle:this._getArrowStyle}}}},{key:"componentDidUpdate",value:function(e){e.placement===this.props.placement&&e.eventsEnabled===this.props.eventsEnabled||(this._destroyPopper(),this._createPopper()),e.children!==this.props.children&&this._scheduleUpdate()}},{key:"componentWillUnmount",value:function(){this._destroyPopper()}},{key:"_createPopper",value:function(){var e=this,t=this.props,n=t.placement,a=t.eventsEnabled,r=s({},this.props.modifiers,{applyStyle:{enabled:!1},updateState:this._updateStateModifier});this._arrowNode&&(r.arrow={element:this._arrowNode}),this._popper=new m.default(this._getTargetNode(),this._popperNode,{placement:n,eventsEnabled:a,modifiers:r}),setTimeout(function(){return e._scheduleUpdate()})}},{key:"_destroyPopper",value:function(){this._popper&&this._popper.destroy()}},{key:"render",value:function(){var e=this.props,t=e.component,n=(e.innerRef,e.placement,e.eventsEnabled,e.modifiers,e.children),a=r(e,["component","innerRef","placement","eventsEnabled","modifiers","children"]),o=this._getPopperStyle(),i=this._getPopperPlacement(),l=this._getPopperHide();if("function"===typeof n){return n({popperProps:{ref:this._handlePopperRef,style:o,"data-placement":i,"data-x-out-of-boundaries":l},restProps:a,scheduleUpdate:this._scheduleUpdate})}var u=s({},a,{style:s({},a.style,o),"data-placement":i,"data-x-out-of-boundaries":l});return"string"===typeof t?u.ref=this._handlePopperRef:u.innerRef=this._handlePopperRef,(0,c.createElement)(t,u,n)}}]),t}(c.Component);h.contextTypes={popperManager:f.default.object.isRequired},h.childContextTypes={popper:f.default.object.isRequired},h.propTypes={component:f.default.oneOfType([f.default.node,f.default.func]),innerRef:f.default.func,placement:f.default.oneOf(m.default.placements),eventsEnabled:f.default.bool,modifiers:f.default.object,children:f.default.oneOfType([f.default.node,f.default.func])},h.defaultProps={component:"div",placement:"bottom",eventsEnabled:!0,modifiers:{}},t.default=h},563:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(0),i=n(2),l=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e,t){var n=e.component,i=void 0===n?"span":n,l=e.innerRef,s=e.children,u=a(e,["component","innerRef","children"]),c=t.popper,d=function(e){c.setArrowNode(e),"function"===typeof l&&l(e)},f=c.getArrowStyle();if("function"===typeof s){return s({arrowProps:{ref:d,style:f},restProps:u})}var p=r({},u,{style:r({},f,u.style)});return"string"===typeof i?p.ref=d:p.innerRef=d,(0,o.createElement)(i,p,s)};s.contextTypes={popper:l.default.object.isRequired},s.propTypes={component:l.default.oneOfType([l.default.node,l.default.func]),innerRef:l.default.func,children:l.default.oneOfType([l.default.node,l.default.func])},t.default=s},565:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(90),d=n(47),f=n(199),p=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.setInitialValue=function(){var e=n.editorUtils.getSelectedText();if(n.isLinkActive){var t=n.editorUtils.getCurrentLinkNode();n.setState({title:n.editorUtils.getLinkText(t),url:t.data.href})}else n.setState({title:e,url:""})},n.handleUrlChange=function(e){n.setState({url:e.target.value})},n.handleTitleChange=function(e){n.setState({title:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),0!==n.state.title.length&&0!==n.state.url.length&&(n.isLinkActive?n.editorUtils.setLink({text:n.state.title,url:n.state.url,selection:n.editorSelection}):n.editorUtils.insertLink({text:n.state.title,url:n.state.url,selection:n.editorSelection}),n.props.toggleLinkDialog())},n.editorUtils=new f.a(window.editor),n.isLinkActive=n.editorUtils.isLinkActive(),n.editorSelection=null,n.state={url:"",title:""},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.editorSelection=window.editor.selection}},{key:"componentWillMount",value:function(){this.setInitialValue()}},{key:"render",value:function(){return u.a.createElement(c.j,{isOpen:!0,toggle:this.props.toggleLinkDialog,className:this.props.className},u.a.createElement(c.m,{toggle:this.props.toggleLinkDialog},this.props.t("insert_link")),u.a.createElement(c.k,null,u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{className:"form-check-label",htmlFor:"addLink"},this.props.t("link_address")),u.a.createElement("input",{type:"url",className:"form-control",id:"addLink",value:this.state.url,onChange:this.handleUrlChange})),u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{className:"form-check-label",htmlFor:"addTitle"},this.props.t("link_title")),u.a.createElement("input",{type:"text",className:"form-control",id:"addTitle",value:this.state.title,onChange:this.handleTitleChange})))),u.a.createElement(c.l,null,u.a.createElement(c.a,{color:"primary",disabled:!1,onClick:this.handleSubmit},this.props.t("add_link")),u.a.createElement(c.a,{color:"secondary",onClick:this.props.toggleLinkDialog},this.props.t("cancel"))))}}]),t}(u.a.PureComponent);t.a=Object(d.withTranslation)("seafile-editor")(p)},567:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(90),d=n(47),f=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.handleUrlChange=function(e){n.setState({url:e.target.value})},n.handleSubmit=function(e){n.props.insertImage({url:n.state.url,selection:n.editorSelection}),n.props.onToggleImageDialog()},n.state={url:""},n.editorSelection=null,n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.editorSelection=window.editor.selection}},{key:"render",value:function(){return u.a.createElement(c.j,{isOpen:!0,toggle:this.props.onToggleImageDialog,className:this.props.className},u.a.createElement(c.m,{toggle:this.props.onToggleImageDialog},this.props.t("insert_image")),u.a.createElement(c.k,null,u.a.createElement(c.f,null,u.a.createElement(c.g,null,u.a.createElement(c.i,{for:"columnName"},this.props.t("image_address")),u.a.createElement(c.h,{id:"columnName",value:this.state.value,onChange:this.handleUrlChange,autoFocus:!0})))),u.a.createElement(c.l,null,u.a.createElement(c.a,{color:"primary",disabled:0===this.state.url.length,onClick:this.handleSubmit},this.props.t("submit"))," ",u.a.createElement(c.a,{color:"secondary",onClick:this.props.onToggleImageDialog},this.props.t("cancel"))))}}]),t}(u.a.PureComponent);t.a=Object(d.withTranslation)("seafile-editor")(f)},568:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(10),d=n.n(c),f=n(377),p=n(376),m=n(47),h=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return u.a.createElement(p.a,{className:"editor-btn-group"},u.a.createElement(g,{icon:"iconfont icon-left-alignment",items:[{handle:function(t){e.props.onSetAlign(t,"left")},icon:"iconfont icon-left-alignment",text:this.props.t("left")},{handle:function(t){e.props.onSetAlign(t,"center")},icon:"iconfont icon-center-horizontally",text:this.props.t("center")},{handle:function(t){e.props.onSetAlign(t,"right")},icon:"icon icon-align-right",text:this.props.t("right")}]}),u.a.createElement(g,{icon:"iconfont icon-column",items:[{handle:this.props.onInsertColumn,text:this.props.t("Insert_Column")},{handle:this.props.onRemoveColumn,text:this.props.t("Remove_Column")}]}),u.a.createElement(g,{icon:"iconfont icon-row",items:[{handle:this.props.onInsertRow,text:this.props.t("Insert_Row")},{handle:this.props.onRemoveRow,text:this.props.t("Remove_Row")}]}),u.a.createElement(f.a,{disabled:!1,isRichEditor:!0,text:this.props.t("remove_table"),id:"removeTable",icon:"iconfont icon-delete-table",onMouseDown:this.props.onRemoveTable}))}}]),t}(u.a.PureComponent),g=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.handleClick=function(e){if(!n.props.disabled){n.getContainer().contains(e.target)?n.toggle():n.state.dropdownOpen&&n.setState({dropdownOpen:!n.state.dropdownOpen})}},n.toggle=function(){n.setState({dropdownOpen:!n.state.dropdownOpen})},n.state={dropdownOpen:!1},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"getContainer",value:function(){return d.a.findDOMNode(this)}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick)}},{key:"render",value:function(){var e=[];return this.props.items.forEach(function(t,n){e.push(u.a.createElement("button",{key:"dropdown-item"+n,onMouseDown:t.handle,className:"dropdown-item"},t.icon?u.a.createElement("i",{className:t.icon,style:{marginRight:"6px"}}):null,t.text))}),u.a.createElement("div",{className:"custom-dropdown-list"},u.a.createElement("div",{id:"list_toggle",className:"dropdown-list-toggle"},u.a.createElement("i",{className:this.props.icon,style:{marginRight:"3px"}}),u.a.createElement("i",{className:this.state.dropdownOpen?"iconfont icon-caret-up":"iconfont icon-drop-down"})),this.state.dropdownOpen&&u.a.createElement("div",{role:"menu",className:"custom-dropdown-menu dropdown-menu"},e))}}]),t}(u.a.PureComponent);t.a=Object(m.withTranslation)("seafile-editor")(h)},569:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(90),d=n(47),f=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l))),n.state={dropdownOpen:!1,tooltipOpen:!1},n.imgtoggle=function(){n.setState({dropdownOpen:!n.state.dropdownOpen})},n.toggle=function(){if(n.props.disabled)return void n.setState({tooltipOpen:!1});n.setState({tooltipOpen:!n.state.tooltipOpen})},n.uploadLocalImage=function(e){window.editor.editorApi.uploadLocalImage&&window.editor.editorApi.uploadLocalImage(e.target.files[0]).then(function(e){n.props.onInsertImage({url:e})})},n.handleFileChange=function(e){n.uploadLocalImage(e),n.setState({dropdownOpen:!1})},n.onInputFile=function(e){e.target.value=null,e.nativeEvent.stopImmediatePropagation(),e.stopPropagation()},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.t;return u.a.createElement(u.a.Fragment,null,u.a.createElement(c.b,{isOpen:this.state.dropdownOpen,toggle:this.imgtoggle,className:this.props.disabled?"upload-localimg upload-localimg-disabled":"upload-localimg upload-localimg-hover"},u.a.createElement(c.e,{id:this.props.id,disabled:this.props.disabled},u.a.createElement("i",{className:"iconfont icon-image"}),u.a.createElement(c.n,{toggle:this.toggle,delay:{show:0,hide:0},target:this.props.id,placement:"bottom",isOpen:this.state.tooltipOpen},e("insert_image"))),u.a.createElement(c.d,null,u.a.createElement(c.c,{onClick:this.props.onToggleImageDialog},e("insert_network_image")),!this.props.isSimpleEditor&&u.a.createElement(c.c,{onMouseDown:this.props.insertRepoImage},e("Insert_library_image")),u.a.createElement(c.c,{className:"seafile-ed-dropbtn"},u.a.createElement("span",{className:"seafile-ed-localimgspan"},u.a.createElement("span",{className:"upload-local-image-word"},e("upload_local_image")),u.a.createElement("input",{type:"file",onClick:this.onInputFile,className:"seafile-ed-localimginput",accept:"image/*",onChange:this.handleFileChange}))))))}}]),t}(u.a.Component);t.a=Object(d.withTranslation)("seafile-editor")(f)},580:function(e,t){function n(e){if("string"!==typeof e)return!1;var t=e.match(a);if(!t)return!1;var n=t[1];return!!n&&!(!r.test(n)&&!o.test(n))}e.exports=n;var a=/^(?:\w+:)?\/\/(\S+)$/,r=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,o=/^[^\s\.]+\.\S{2,}$/},581:function(e,t,n){"use strict";var a=n(165),r=n(91),o=n(12),i=n(35),l=/\*\*\*(\S+)\*\*\*|\_\_\_(\S+)\_\_\_|\*\_\_(\S+)\_\_\*|\_\*\*(\S+)\*\*\_|\_\_\*(\S+)\*\_\_|\*\*\_(\S+)_\*\*/,s=/\*\*(\S+)\*\*|\_\_(\S+)\_\_/,u=/\*(\S+)\*|_(\S+)_/,c=/\`(\S+)\`/,d=function e(t){var n=this;Object(o.a)(this,e),this.getTextInfoBeforeSelection=function(){var e=n.editor,t=n.editor.selection,a=t.anchor,o=i.Editor.nodes(e,{match:"block"}),l=Object(r.a)(o,1),s=l[0],u=s?s[1]:[],c=i.Editor.start(e,u),d={anchor:a,focus:c};return{range:d,beforeText:i.Editor.text(e,d),block:s}},this.setTextMarkByShortCut=function(e,t){var o,d,f,p,m=n.editor,h=m.selection,g=i.Editor.node(m,h),v=Object(r.a)(g,2),b=v[0],y=v[1],E=b.text,w=h.anchor.offset,_=E[w-1];if(("_"===_||"`"===_||"*"===_)&&((p=E.match(l))?(f=p.index,o={BOLD:!0,ITALIC:!0}):(p=E.match(s))?(f=p.index,o={BOLD:!0}):(p=E.match(u))?(f=p.index,o={ITALIC:!0}):(p=E.match(c))&&(f=p.index,o={CODE:!0}),p)){for(var S=1;S<p.length;S++)if(p[S]){d=p[S];break}o=Object.assign({BOLD:!1,ITALIC:!1,CODE:!1},o),i.Editor.select(m,{anchor:{path:y,offset:f},focus:{path:y,offset:w}}),i.Editor.delete(m,m.selection),i.Editor.insertText(m," "),i.Editor.insertNodes(m,[Object(a.a)({text:d},o),{text:" "}]);var x=i.Path.next(i.Path.next(y));return i.Editor.select(m,x),void i.Editor.collapse(m,{edge:"end"})}e(t)},this.editor=t};t.a=d},582:function(e,t,n){"use strict";function a(e,t,n){var a=r[t],o=e.dataTransfer||e.clipboardData;if("fragment"===t){var i=window.btoa(encodeURIComponent(JSON.stringify(n)));o.setData(a,i),o.setData("text",o.getData("text"))}else"html"===t?(o.setData(a,n),o.setData("text",o.getData("text"))):o.setData("text",n)}var r={fragment:"application/x-slate-fragment",html:"text/html",text:"text/plain"};t.a=a},583:function(e,t){},584:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(191),s=n(19),u=n(0),c=n.n(u),d=n(193),f=n(47),p=n(35),m=n(398),h=(n.n(m),n(403)),g=(n.n(h),n(590)),v=n(633),b=n(135),y=function(e){function t(e){var n;Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.switchToPlainTextEditor=function(){if("rich"===n.props.editorMode){var e=n.state.richValue,t=Object(b.serialize)(e);n.props.setEditorMode("plain"),n.setState({initialPlainValue:t,currentContent:t})}n.props.collabServer&&n.props.emitSwitchEditor(!1)},n.switchToRichTextEditor=function(){n.setState({richValue:Object(b.deserialize)(n.state.currentContent)}),n.props.setEditorMode("rich"),n.props.collabServer&&n.props.emitSwitchEditor(!1)},n.onUnload=function(e){if(n.props.contentChanged){return n.props.clearTimer(),n.props.deleteDraft&&n.props.deleteDraft(),e.returnValue="Leave this page? The system may not save your changes.","Leave this page? The system may not save your changes."}},n.onChange=function(e,t){if("rich"===n.props.editorMode){n.setState({richValue:e}),n.props.setDraftValue("rich",n.state.richValue);0!==t.filter(function(e){return"set_selection"!==e.type&&"set_value"!==e.type}).length&&(n.props.onContentChanged(!0),n.autoSave&&n.props.autoSaveDraft())}else n.setState({currentContent:e}),n.props.onContentChanged(!0),n.props.setDraftValue("rich",n.state.richValue),n.props.autoSaveDraft()},n.saveContent=function(e){n.props.editorApi.saveContent(e).then(function(){if(n.props.onSaving(!1),n.props.onContentChanged(!1),n.props.markdownLint){var e=n.state.richValue;n.props.editorApi.markdownLint(JSON.stringify(e)).then(function(e){n.setState({issues:e.data})})}n.lastModifyTime=new Date,d.a.success(n.props.t("file_saved"),{duration:2}),n.props.editorApi.getFileInfo().then(function(e){n.props.setFileInfoMtime(e.data)}),n.addParticipants()},function(){n.props.onSaving(!1),d.a.danger(n.props.t("file_failed_to_save"),{duration:2})}),n.props.onSaving(!0)},n.addParticipants=function(){if(!n.isParticipant&&window.showParticipants){var e=n.props.editorApi,t=e.userName,a=e.addFileParticipants,r=n.props.participants;if(!r||0===r.length||(n.isParticipant=r.every(function(e){return e.email===t}),!n.isParticipant)){a([t]).then(function(e){n.isParticipant=!0,n.props.onParticipantsChange()})}}},n.onRichEditorSave=function(){if(!n.props.isSaving){var e=n.state.richValue,t=Object(b.serialize)(e);n.saveContent(t),n.props.clearTimer(),n.props.deleteDraft&&n.props.deleteDraft()}},n.resetRichValue=function(){var e=n.state.richValue;n.setState({richValue:e})},n.onPlainEditorSave=function(){if(!n.props.isSaving){var e=n.state.currentContent;n.saveContent(e),n.props.clearTimer(),n.props.deleteDraft&&n.props.deleteDraft()}},n.resetContentChanged=function(){n.props.contentChanged&&n.props.onContentChanged(!1),n.autoSave=!0};var r=n.props.markdownContent,s="editor"===n.props.mode,u=n.props.isDraft;return n.lastModifyTime=null,n.autoSave=!1,n.isParticipant=!1,window.seafileEditor=Object(l.a)(n),n.state={isTreeDataLoaded:!1,initialPlainValue:"",currentContent:r,richValue:s||u?Object(b.deserialize)(r):Object(b.deserialize)(""),issues:{issue_list:[]}},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.onUnload)}},{key:"componentWillMount",value:function(){if("rich"===this.props.editorMode){var e=this.state.richValue,t=e[0];if(1===e.length&&"paragraph"===t.type&&1===t.children.length&&p.Text.isText(t.children[0])&&0===t.children[0].text.length){var n=this.props.fileInfo.name.slice(0,this.props.fileInfo.name.lastIndexOf(".")),a={type:"header_one",children:[{text:n,marks:[]}]};e.push(a),e.shift(),this.setState({richValue:e})}}}},{key:"render",value:function(){var e="";return"rich"===this.props.editorMode?e=c.a.createElement(g.a,{editorApi:this.props.editorApi,onChange:this.onChange,onSave:this.onRichEditorSave,value:this.state.richValue,resetRichValue:this.resetRichValue,contentChanged:this.props.contentChanged,saving:this.props.saving,switchToMarkDownViewer:this.switchToMarkDownViewer,switchToPlainTextEditor:this.switchToPlainTextEditor,fileInfo:this.props.fileInfo,toggleStar:this.props.toggleStar,issues:this.state.issues,resetContentChanged:this.resetContentChanged,collabUsers:this.props.collabUsers,mode:this.props.editorMode,draftID:this.props.draftID,isDraft:this.props.isDraft,openDialogs:this.props.openDialogs,readOnly:this.props.readOnly,relatedFiles:this.props.relatedFiles,fileTagList:this.props.fileTagList,participants:this.props.participants,onParticipantsChange:this.props.onParticipantsChange}):"plain"===this.props.editorMode&&(e=c.a.createElement(v.a,{editorApi:this.props.editorApi,initialValue:this.state.initialPlainValue,currentContent:this.state.currentContent,contentChanged:this.props.contentChanged,switchToRichTextEditor:this.switchToRichTextEditor,switchToMarkDownViewer:this.switchToMarkDownViewer,onSave:this.onPlainEditorSave,onChange:this.onChange,fileInfo:this.props.fileInfo,toggleStar:this.props.toggleStar,collabUsers:this.props.collabUsers,mode:this.props.editorMode,draftID:this.props.draftID,isDraft:this.props.isDraft})),e}}]),t}(c.a.Component);y.defaultProps={userInfo:null},t.a=Object(f.withTranslation)("seafile-editor")(y)},585:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(165),r=n(12),o=n(0),i=n.n(o),l=n(10),s=n.n(l),u=n(586),c="undefined"!==typeof window&&"undefined"!==typeof window.document,d=function e(){var t=this;if(Object(r.a)(this,e),this._bindNotify=function(e){t.notifyHandler=e},this._bindGetToasts=function(e){t.getToastsHandler=e},this._bindCloseAll=function(e){t.closeAllHandler=e},this.getToasts=function(){return t.getToastsHandler()},this.closeAll=function(){return t.closeAllHandler()},this.notify=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,Object(a.a)(Object(a.a)({},n),{},{intent:"none"}))},this.success=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,Object(a.a)(Object(a.a)({},n),{},{intent:"success"}))},this.warning=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,Object(a.a)(Object(a.a)({},n),{},{intent:"warning"}))},this.danger=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,Object(a.a)(Object(a.a)({},n),{},{intent:"danger"}))},c){var n=document.createElement("div");n.setAttribute("data-evergreen-toaster-container",""),document.body.appendChild(n),s.a.render(i.a.createElement(u.a,{bindNotify:this._bindNotify,bindGetToasts:this._bindGetToasts,bindCloseAll:this._bindCloseAll}),n)}}},586:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n(566),r=n(165),o=n(144),i=n(12),l=n(14),s=n(17),u=n(18),c=n(19),d=n(0),f=n.n(d),p=n(11),m=(n.n(p),n(588)),h=Object(p.css)({maxWidth:560,margin:"0 auto",top:0,left:0,right:0,position:"fixed",zIndex:30}),g=function(e){return Object.hasOwnProperty.call(e,"id")},v=function(e){function t(e,n){var a;return Object(i.a)(this,t),a=Object(s.a)(this,Object(u.a)(t).call(this,e,n)),a.getToasts=function(){return a.state.toasts},a.closeAll=function(){a.getToasts().forEach(function(e){return e.close()})},a.notify=function(e,t){if(g(t)){var n=!0,r=!1,i=void 0;try{for(var l,s=a.state.toasts[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var u=l.value;String(u.id).startsWith(t.id)&&a.closeToast(u.id)}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}var c=a.createToastInstance(e,t);return a.setState(function(e){return{toasts:[c].concat(Object(o.a)(e.toasts))}}),c},a.createToastInstance=function(e,n){var r=++t.idCounter,o=g(n)?"".concat(n.id,"-").concat(r):r;return{id:o,title:e,description:n.description,hasCloseButton:n.hasCloseButton||!0,duration:n.duration||2,close:function(){return a.closeToast(o)},intent:n.intent}},a.closeToast=function(e){a.setState(function(t){return{toasts:t.toasts.map(function(t){return t.id===e?Object(r.a)(Object(r.a)({},t),{},{isShown:!1}):t})}})},a.removeToast=function(e){a.setState(function(t){return{toasts:t.toasts.filter(function(t){return t.id!==e})}})},e.bindNotify(a.notify),e.bindGetToasts(a.getToasts),e.bindCloseAll(a.closeAll),a.state={toasts:[]},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return f.a.createElement("span",{className:h},this.state.toasts.map(function(t){var n=t.id,r=t.description,o=Object(a.a)(t,["id","description"]);return f.a.createElement(m.a,Object.assign({key:n,onRemove:function(){return e.removeToast(n)}},o),r)}))}}]),t}(f.a.PureComponent);v.idCounter=0},588:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(11),d=(n.n(c),n(41)),f=n.n(d),p=n(589),m={deceleration:"cubic-bezier(0.0, 0.0, 0.2, 1)",acceleration:"cubic-bezier(0.4, 0.0, 1, 1)",spring:"cubic-bezier(0.175, 0.885, 0.320, 1.175)"},h=c.css.keyframes("openAnimation",{from:{opacity:0,transform:"translateY(-120%)"},to:{transform:"translateY(0)"}}),g=c.css.keyframes("closeAnimation",{from:{transform:"scale(1)",opacity:1},to:{transform:"scale(0.9)",opacity:0}}),v=Object(c.css)({display:"flex",flexDirection:"column",alignItems:"center",height:0,transition:"all ".concat(240,"ms ").concat(m.deceleration),'&[data-state="entering"], &[data-state="entered"]':{animation:"".concat(h," ").concat(240,"ms ").concat(m.spring," both")},'&[data-state="exiting"]':{animation:"".concat(g," 120ms ").concat(m.acceleration," both")}}),b=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l))),n.state={isShown:!0,height:0},n.close=function(){n.clearCloseTimer(),n.setState({isShown:!1})},n.startCloseTimer=function(){n.props.duration&&(n.closeTimer=setTimeout(function(){n.close()},1e3*n.props.duration))},n.clearCloseTimer=function(){n.closeTimer&&(clearTimeout(n.closeTimer),n.closeTimer=null)},n.handleMouseEnter=function(){n.clearCloseTimer()},n.handleMouseLeave=function(){n.startCloseTimer()},n.onRef=function(e){if(null!==e){var t=e.getBoundingClientRect(),a=t.height;n.setState({height:a})}},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){e.isShown!==this.props.isShown&&this.setState({isShown:this.props.isShown})}},{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"render",value:function(){var e=this;return u.a.createElement(f.a,{appear:!0,unmountOnExit:!0,timeout:240,in:this.state.isShown,onExited:this.props.onRemove},function(t){return u.a.createElement("div",{"data-state":t,className:v,onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,style:{height:e.state.height,zIndex:e.props.zIndex,marginBottom:e.state.isShown?0:-e.state.height}},u.a.createElement("div",{ref:e.onRef,style:{padding:8}},u.a.createElement(p.a,{intent:e.props.intent,title:e.props.title,children:e.props.children,isRemoveable:e.props.hasCloseButton,onRemove:function(){return e.close()}})))})}}]),t}(u.a.PureComponent);b.defaultProps={intent:"none"}},589:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(11),d=(n.n(c),function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.containerStyle=Object(c.css)({borderRadius:"3px",backgroundColor:"#fff",padding:"10px 16px",display:"flex",boxSizing:"border-box",boxShadow:"rgba(67, 90, 111, 0.3) 0px 0px 1px, rgba(67, 90, 111, 0.47) 0px 8px 10px -4px",justifyContent:"space-between",flexDirection:"row"}),n.containerBorderSuccess=Object(c.css)({borderLeft:"3px solid rgb(71, 184, 129)"}),n.containerBorderWarn=Object(c.css)({borderLeft:"3px solid rgb(217, 130, 43)"}),n.containerBorderDanger=Object(c.css)({borderLeft:"3px solid rgb(236, 76, 71)"}),n.containerBorderNotify=Object(c.css)({borderLeft:"3px solid rgb(16, 112, 202)"}),n.toastTextTitle=Object(c.css)({fontWeight:"600",fontSize:"14px",color:"#435a6f",margin:"0"}),n.toastTextChild=Object(c.css)({fontSize:"14px",color:"#999",margin:"0"}),n.toastClose=Object(c.css)({marginLeft:"15px",height:"24px",width:"24px",lineHeight:"22px",fontWeight:"700",textAlign:"center",fontSize:"20px",color:"#000",cursor:"pointer",opacity:"0.5",":hover":{opacity:1}}),n.toastIcon=Object(c.css)({marginRight:"10px",width:"14px",height:"20px",lineHeight:"20px"}),n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"getContainerStyle",value:function(e){switch(e){case"success":return{borderStyle:this.containerBorderSuccess,iconColor:Object(c.css)({color:"rgb(71, 184, 129)"}),iconClass:"fa fa-check-circle"};case"warning":return{borderStyle:this.containerBorderWarn,iconColor:Object(c.css)({color:"rgb(217, 130, 43)"}),iconClass:"fa fa-exclamation-triangle"};case"none":return{borderStyle:this.containerBorderNotify,iconColor:Object(c.css)({color:"rgb(16, 112, 202)"}),iconClass:"fa fa-exclamation-circle"};case"danger":return{borderStyle:this.containerBorderDanger,iconColor:Object(c.css)({color:"rgb(236, 76, 71)"}),iconClass:"fa fa-exclamation-circle"};default:return{borderStyle:this.containerBorderNotify,iconColor:Object(c.css)({color:"rgb(16, 112, 202)"}),iconClass:"fa fa-exclamation-circle"}}}},{key:"render",value:function(){var e=this.getContainerStyle(this.props.intent);return u.a.createElement("div",Object(c.css)(e.borderStyle,this.containerStyle),u.a.createElement("div",{className:this.toastIcon},u.a.createElement("i",Object.assign({className:e.iconClass},e.iconColor))),u.a.createElement("div",{className:this.toastTextContainer},u.a.createElement("p",{className:this.toastTextTitle},this.props.title),this.props.children?u.a.createElement("p",{className:this.toastTextChild},this.props.children):null),u.a.createElement("div",{onClick:this.props.onRemove,className:this.toastClose},u.a.createElement("span",null,"\xd7")))}}]),t}(u.a.PureComponent));t.a=d},590:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(374),d=n(47),f=n(199),p=n(35),m=n(384),h=n(135),g=n(201),v=n(202),b=n(383),y=n(387),E=n(388),w=n(389),_=n(392),S=n(393),x=n(394),P=n(395),C=n(396),O=n(166),D=n(591),M=n(592),k=n(601),T=n(193),L=n(630),N=(n.n(L),n(631)),I=(n.n(N),n(399)),Y=(n.n(I),n(400)),R=(n.n(Y),n(408)),A=(n.n(R),n(401)),j=(n.n(A),n(402)),Z=(n.n(j),n(632)),F=(n.n(Z),function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.getDomNodeByPath=function(e){for(var t,n=document.querySelector(".editor-component");"number"===typeof e[0]&&n;)t=n.children[e[0]],e.shift(),n=t;return t},n.setBtnPosition=function(){n.state.showCommentBtn&&(n.timmer||(n.timmer=setTimeout(function(){var e=n.editor.selection;if(!e||p.Range.isCollapsed(e)){return n.refs.commentbtn.style.top="-1000px",clearTimeout(n.timmer),void(n.timmer=null)}var t=e.anchor.path.slice();t.pop();var a=n.getDomNodeByPath(t),r=n.refs.commentbtn.style;r.right="40px",r.top=a?"".concat(a.offsetTop,"px"):"-1000px",clearTimeout(n.timmer),n.timmer=null},40)))},n.initialSidePanel=function(){var e=n.getCookie("md-editor-main-panel-width");e&&n.setState({mainPanelWidth:1*e});var t=n.getCookie("md-editor-show-side-panel");"true"===t?n.setState({isShowSidePanel:!0}):"false"===t&&n.setState({isShowSidePanel:!1})},n.scrollToNode=function(e){var t=document.querySelector(".editor-component"),a=t.childNodes[e.path[0]];n.refs.editorContainer.scrollTo(0,a.offsetTop),window.location.hash=encodeURI(e.children[0].text),p.Editor.select(n.editor,e.path)},n.showHelpDialog=function(){n.setState({isShowSidePanel:!1,isShowHelpDialog:!0})},n.hideHelpDialog=function(){n.setState({isShowHelpDialog:!1})},n.insertRepoImage=function(e){e.preventDefault(),n.props.readOnly||n.props.openDialogs&&n.props.openDialogs("insert_repo_image")},n.onResizeMouseUp=function(e){n.state.resizeFlag&&n.setState({resizeFlag:!1}),n.setCookie("md-editor-main-panel-width",n.state.mainPanelWidth)},n.onResizeMouseDown=function(e){n.setState({resizeFlag:!0})},n.onResizeMouseMove=function(e){var t=n.state.mainPanelWidth+e.nativeEvent.movementX/e.view.innerWidth*100;if(t>=82||t<=30)return void n.setState({resizeFlag:!1});n.setState({mainPanelWidth:t})},n.toggleSidePanel=function(){n.state.isShowSidePanel?(n.setState({isShowSidePanel:!1}),n.setCookie("md-editor-show-side-panel","false")):(n.setState({isShowSidePanel:!0}),n.setCookie("md-editor-show-side-panel","true")),n.setState({isShowHelpDialog:!1})},n.handleCommentOpen=function(){n.setState({mainPanelWidth:70,isShowHelpDialog:!1})},n.setCookie=function(e,t){document.cookie=e+"="+t+"; "},n.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){var r=n[a].trim();if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""},n.onSave=function(e){n.props.onSave()},n.insertRepoFile=function(){n.props.readOnly||n.props.openDialogs&&n.props.openDialogs("insert_file")},n.onCommentAdded=function(){n.toggleCommentDialog(),n.setState({relistComment:n.state.relistComment+1})},n.toggleCommentBtn=function(e){n.setState({showCommentBtn:e})},n.addComment=function(e){e.stopPropagation(),n.getQuote(),n.toggleCommentDialog()},n.toggleCommentDialog=function(){n.setState({showCommentDialog:!n.state.showCommentDialog})},n.getQuote=function(){n.quote=Object(h.serialize)(p.Editor.fragment(n.editor,n.editor.selection)),n.setState({commentPosition:n.editor.selection.anchor.path})},n.onChange=function(e){n.setState({value:e}),!0===n.state.isShowContextMenu&&(n.setState({isShowContextMenu:!1}),n.contextMenuPosition={}),n.props.onChange(e,n.editor.operations)},n.foucsEditor=function(){n.editorRef.firstChild.focus()},n.onToggleLinkDialog=function(){n.setState({isShowLinkDialog:!n.state.isShowLinkDialog})},n.onToggleImageDialog=function(){n.setState({isShowImageDialog:!n.state.isShowImageDialog})},n.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){var r=n[a].trim();if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""},n.addComment=function(e){e.stopPropagation(),n.getQuote(),n.toggleCommentDialog()},n.scrollToQuote=function(e){if(e){var t=n.editor,a=t.children[e[0]],r=g.ReactEditor.toDOMNode(t,a);n.refs.editorContainer.scrollTo(0,r.offsetTop),p.Editor.select(n.editor,e)}},n.onContextMenu=function(e){n.tableUtils.isInTable()&&(e.preventDefault(),n.contextMenuPosition={left:e.clientX,top:e.clientY},n.setState({isShowContextMenu:!n.state.isShowContextMenu}))},n.editor=Object(P.a)(Object(x.a)(Object(S.a)(Object(w.a)(Object(_.a)(Object(m.a)(Object(g.withReact)(Object(p.createEditor)()))))))),n.editor.editorApi=e.editorApi,n.editor.onSave=e.onSave,window.editor=n.editor,n.editorUtils=new f.a(n.editor),n.tableUtils=new O.a(n.editor),n.plugin=new C.a(n.editor),n.editorRef=null,n.timmer=null,n.contextMenuPosition={},n.state={value:e.value,isSelectedImage:!1,leftNavMode:"files",mainPanelWidth:80,resizeFlag:!1,isShowHelpDialog:!1,isShowSidePanel:!1,isShowLinkDialog:!1,isShowImageDialog:!1,isShowContextMenu:!1,showCommentBtn:!1,showCommentDialog:!1,commentPosition:null,relistComment:0},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e){this.props.resetRichValue(),console.log(e)}},{key:"componentDidMount",value:function(){window.richMarkdownEditor=this,this.props.collabUsers.filter(function(e){return!0===e.is_editing&&void 0===e.myself}).length>0&&T.a.danger("Another user is editing this file!",{duration:3}),-1===navigator.userAgent.toLowerCase().indexOf("chrome")&&T.a.warning(this.props.t("Editing_files_in_this_browser_can_lead_to_slight_display_problems"),{duration:4}),this.initialSidePanel()}},{key:"componentWillReceiveProps",value:function(e){this.props.issues!==e.issues&&e.issues.issue_list.length>0&&!this.state.isShowSidePanel&&this.setState({isShowSidePanel:!0},function(){window.openMarkdownHint&&window.openMarkdownHint()})}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,a=t.isShowLinkDialog,r=t.isShowImageDialog,o=this.props,i=o.t,l=o.mode,s=o.editorApi,d=this.state,m=d.mainPanelWidth,h=d.isShowHelpDialog,w=d.isShowSidePanel,_=this.state.resizeFlag?this.onResizeMouseMove:null,S="seafile-editor-main-panel d-flex align-self-end ".concat(w||h?"":"seafile-editor-all-panel"),x={width:w?m+"%":"100%"},P=this.editor,C=this.foucsEditor,O=this.editorUtils.getToolbarStatus(),T=this.props.readOnly,L=Object(v.a)(P.selection);return u.a.createElement("div",{className:"seafile-editor-module seafile-editor"},u.a.createElement(g.Slate,{editor:this.editor,value:n,onChange:this.onChange},u.a.createElement("div",{className:"seafile-rich-editor-topbar"},u.a.createElement(c.a,{onToggleLinkDialog:this.onToggleLinkDialog,onToggleImageDialog:this.onToggleImageDialog,toolbarStatus:O,toggleSidePanel:this.toggleSidePanel,insertRepoFile:this.insertRepoFile,isShowLinkDialog:a,isShowImageDialog:r,isShowSidePanel:w,hasSidePanel:!0,mode:l,readOnly:T})),u.a.createElement("div",{className:"seafile-editor-main d-flex",onMouseMove:_,onMouseUp:this.onResizeMouseUp},u.a.createElement("div",{className:S,style:x},u.a.createElement("div",{className:"editor-container align-self-start",ref:"editorContainer"},u.a.createElement("div",{ref:function(t){return e.editorRef=t},onClick:2===n.length&&"paragraph"===n[0].type&&0===p.Node.text(n[0].children[0]).length?C:null,className:"editor article"},u.a.createElement(g.Editable,{renderElement:function(e){return Object(f.d)(e,P,T)},className:"editor-component",renderLeaf:f.c,onContextMenu:this.onContextMenu,onCopy:function(t){e.plugin.onCopy(t,P)},onCut:function(t){return e.plugin.onCut(t)},autoFocus:!0,onKeyDown:this.plugin.onKeyDown,decorate:f.b,onSelect:this.setBtnPosition}),this.state.showCommentBtn&&u.a.createElement("i",{className:"fa fa-plus-square seafile-viewer-comment-btn",ref:"commentbtn",onMouseDown:this.addComment})),O.isLinkActive&&L?u.a.createElement(b.a,null,u.a.createElement(y.a,{onToggleLinkDialog:this.onToggleLinkDialog,editorUtils:this.editorUtils})):null,this.state.isShowContextMenu&&u.a.createElement(b.a,null,u.a.createElement(E.a,{tableUtils:this.tableUtils,contextMenuPosition:this.contextMenuPosition})))),!h&&w&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"seafile-editor-resize",style:{right:100-m+"%"},onMouseDown:this.onResizeMouseDown}),u.a.createElement("div",{className:"seafile-editor-side-panel align-self-start",style:{width:100-m+"%"}},u.a.createElement(k.a,{editor:this,document:n,issues:this.props.issues,scrollToNode:this.scrollToNode,scrollToQuote:this.scrollToQuote,t:this.props.t,editorApi:s,toggleCommentBtn:this.toggleCommentBtn,relistComment:this.state.relistComment,relatedFiles:this.props.relatedFiles,fileTagList:this.props.fileTagList,openDialogs:this.props.openDialogs,fileInfo:this.props.fileInfo,participants:this.props.participants,onParticipantsChange:this.props.onParticipantsChange}))),h&&u.a.createElement(D.a,{userHelp:i("userHelp",{returnObjects:!0}),hideHelpDialog:this.hideHelpDialog}),this.state.showCommentDialog&&u.a.createElement(M.a,{editorApi:s,t:i,quote:this.quote,scrollToQuote:this.scrollToQuote,commentPosition:this.state.commentPosition,onCommentAdded:this.onCommentAdded,toggleCommentDialog:this.toggleCommentDialog}))))}}]),t}(u.a.Component));t.a=Object(d.withTranslation)("seafile-editor")(F)},591:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.platfrom=navigator.platform.indexOf("Win")<0?"Mac":"Win",n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("li",{className:"help-shortcut"},u.a.createElement("div",{className:"help-shortcut-left"},this.props.shortcutName),u.a.createElement("div",{className:"help-shortcut-right"},u.a.createElement(d,{platfrom:this.platform,shortcuts:this.props.shortcuts})))}}]),t}(u.a.Component),d=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return u.a.createElement(u.a.Fragment,null,this.props.shortcuts.map(function(t){var n=t[0],a=t[1];return"object"===typeof t[0]&&(n="Win"===e.platfrom?t[0][0]:t[0][1]),u.a.createElement("div",{className:"help-shortcut-right-container",key:"help"+t[0]},n?u.a.createElement("div",{className:"key shortcut-first"},n):null,a?u.a.createElement("div",{className:"key shortcut-second"},a):null)}))}}]),t}(u.a.PureComponent),f=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.shortcutData=[{Make_list:[["* / + / -","space"]],Make_ordered_list:[["* / + / -","space"]],Insert_new_item:[["Enter"]],Insert_child_in_item:[["Shift","Enter"]],Increase_depth:[["Tab"]]},{Heading_1:[["#","space"]],Heading_2:[["##","space"]],Heading_3:[["###","space"]],Heading_4:[["####","space"]],Heading_5:[["#####","space"]],Heading_6:[["######","space"]]},{Make_code_block:[["space*3"],["```"]],Insert_new_line:[["Enter"]],Escape_code_block:[[["Ctrl","Cmd"],"Enter"]],Insert_indent:[["Tab"]]},{Make_Block_quote:[["* / + / -","space"]],Escape_Block_quote:[["Enter"]]},{Insert_Table_Row:[["Enter"]],Escape_table:[[["Ctrl","Cmd"],"Enter"]]},{Bold:[["**bold** / __bold__","space"]],Italic:[["*italic* / _italic_","space"]],Italic_Bold:[["***italic*** / ___italic___","space"]],Inline_code:[["`code`","space"]]},{Save_file:[[["Ctrl","Cmd"],"s"]]},{Paste_screen_shot:[[["Ctrl","Cmd"],"v"]],Drag_image_from_anywhere_to_upload_it:[]}],n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.data.shortcutType,t=this.props.data.shortcutData,n=[];for(var a in t){var r=this.shortcutData[this.props.index][a];n.push(u.a.createElement(c,{key:"help "+a,shortcutName:t[a],shortcuts:r}))}return u.a.createElement("div",{className:"help-content-container"},u.a.createElement("h5",{className:"help-shortcut-type"},e),u.a.createElement("ul",{className:"help-shortcut-list"},n))}}]),t}(u.a.PureComponent),p=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"seafile-editor-help align-self-end"},u.a.createElement("div",{className:"help-header d-flex"},u.a.createElement("div",{className:"help-title"},this.props.userHelp.title),u.a.createElement("div",{className:"help-close",onClick:this.props.hideHelpDialog},u.a.createElement("i",{className:"fa fa-times-circle"}))),u.a.createElement("div",{className:"help-content"},this.props.userHelp.userHelpData.map(function(e,t){return u.a.createElement(f,{key:"help-list"+t,index:t,data:e})})))}}]),t}(u.a.PureComponent);t.a=p},592:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(90),d=n(120),f=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.handleCommentChange=function(e){var t=e.target.value;n.setState({comment:t})},n.submitComment=function(){var e=n.state.comment.trim();if(e.length>0&&n.props.quote.length>0){var t={quote:n.props.quote,position:n.props.commentPosition},a=JSON.stringify(t);n.props.editorApi.postComment(e,a).then(function(e){n.props.onCommentAdded()})}},n.setQuoteText=function(e){d.processor.process(e).then(function(e){var t=String(e);n.setState({quote:t})})},n.state={comment:"",quote:""},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setQuoteText(this.props.quote)}},{key:"componentWillReceiveProps",value:function(e){this.props.quote!==e.quote&&this.setQuoteText(e.quote)}},{key:"render",value:function(){return u.a.createElement("div",{className:"comment-dialog"},u.a.createElement("div",null,this.props.editorApi.name),u.a.createElement("blockquote",{className:"comment-dialog-quote"},u.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.quote}})),u.a.createElement("textarea",{value:this.state.comment,onChange:this.handleCommentChange}),u.a.createElement("div",{className:"button-group"},u.a.createElement(c.a,{size:"sm",color:"primary",onClick:this.submitComment},this.props.t("submit")),u.a.createElement(c.a,{size:"sm",color:"secondary",onClick:this.props.toggleCommentDialog},this.props.t("cancel"))),u.a.createElement("span",{className:"comment-dialog-triangle"}))}}]),t}(u.a.Component);t.a=f},60:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(1),p=n(79),m=a(p);n(121);var h={isTextMode:d.default.bool.isRequired,isEditIconShow:d.default.bool.isRequired,options:d.default.array.isRequired,currentOption:d.default.string.isRequired,translateOption:d.default.func.isRequired,translateExplanation:d.default.func,onOptionChanged:d.default.func.isRequired,toggleItemFreezed:d.default.func},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOptions=function(){n.options=[];for(var e=n.props.options,t=0,a=e.length;t<a;t++){var r={};r.value=e[t],e[t].length?r.label=u.default.createElement("div",null,n.props.translateOption(e[t]),n.props.translateExplanation&&u.default.createElement("div",{className:"permission-editor-explanation"},n.props.translateExplanation(e[t]))):r.label=u.default.createElement("div",{style:{minHeight:"1em"}}),n.options.push(r)}n.setState({options:n.options})},n.onEditPermission=function(e){e.nativeEvent.stopImmediatePropagation(),n.setState({isEditing:!0}),n.props.toggleItemFreezed&&n.props.toggleItemFreezed(!0)},n.onOptionChanged=function(e){var t=e.value;t!==n.props.currentOption&&n.props.onOptionChanged(t),n.setState({isEditing:!1}),n.props.toggleItemFreezed&&n.props.toggleItemFreezed(!1)},n.onSelectHandler=function(e){e.nativeEvent.stopImmediatePropagation()},n.onHideSelect=function(){n.setState({isEditing:!1}),n.props.toggleItemFreezed&&n.props.toggleItemFreezed(!1)},n.state={isEditing:!1,options:[]},n.options=[],n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onHideSelect),this.setOptions()}},{key:"componentWillReceiveProps",value:function(){this.setOptions()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onHideSelect)}},{key:"render",value:function(){var e=this.props,t=e.currentOption,n=e.isTextMode;return u.default.createElement("div",{className:"permission-editor",onClick:this.onSelectHandler},(!n||this.state.isEditing)&&u.default.createElement(m.default,{options:this.state.options,className:"permission-editor-select",classNamePrefix:"permission-editor",placeholder:this.props.translateOption(t),onChange:this.onOptionChanged,captureMenuScroll:!1}),n&&!this.state.isEditing&&u.default.createElement("div",null,this.props.translateOption(t),this.props.isEditIconShow&&u.default.createElement("span",{title:(0,f.gettext)("Edit"),className:"fa fa-pencil-alt attr-action-icon",onClick:this.onEditPermission})))}}]),t}(u.default.Component);g.propTypes=h,t.default=g},601:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(341),d=n(602),f=n(603),p=n(628),m=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l))),n.state={navItem:"outline"},n.onOutlineClick=function(e){e.preventDefault(),n.props.toggleCommentBtn(!1),n.setState({navItem:"outline"})},n.onMarkdownHintClick=function(e){e.preventDefault(),n.props.toggleCommentBtn(!1),n.setState({navItem:"markdownHint"})},n.onDetailClick=function(e){e.preventDefault(),n.props.toggleCommentBtn(!1),n.setState({navItem:"detail"})},n.onCommentsPanelClick=function(e){e.preventDefault(),n.props.toggleCommentBtn(!0),n.setState({navItem:"commentsPanel"})},n.openMarkdownHint=function(){n.setState({navItem:"markdownHint"})},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.openMarkdownHint=this.openMarkdownHint}},{key:"componentWillReceiveProps",value:function(e){e.issues!==this.props.issues&&e.issues.issue_list.length>0&&this.setState({navItem:"markdownHint"})}},{key:"componentWillUnmount",value:function(){window.openMarkdownHint=null}},{key:"render",value:function(){var e="",t="",n="",a="";return"outline"===this.state.navItem?e="active":"commentsPanel"===this.state.navItem?n="active":"detail"===this.state.navItem?a="active":t="active",u.a.createElement("div",{className:"side-panel"},u.a.createElement("ul",{className:"nav justify-content-center"},u.a.createElement("li",{className:"nav-item"},u.a.createElement("a",{className:"nav-link "+e,href:"",onClick:this.onOutlineClick},u.a.createElement("i",{className:"fa fa-list"}))),u.a.createElement("li",{className:"nav-item"},u.a.createElement("a",{className:"nav-link "+a,href:"",onClick:this.onDetailClick},u.a.createElement("i",{className:"fas fa-info-circle"}))),u.a.createElement("li",{className:"nav-item"},u.a.createElement("a",{className:"nav-link "+t,href:"",onClick:this.onMarkdownHintClick},u.a.createElement("i",{className:"fa fa-bell"}))),u.a.createElement("li",{className:"nav-item"},u.a.createElement("a",{className:"nav-link "+n,href:"",onClick:this.onCommentsPanelClick},u.a.createElement("i",{className:"fa fa-comment"})))),u.a.createElement("div",{className:"side-panel-content"},"outline"===this.state.navItem&&u.a.createElement(c.a,{editor:this.props.editor,document:this.props.document,t:this.props.t}),"markdownHint"===this.state.navItem&&this.props.issues&&u.a.createElement(d.a,{issues:this.props.issues,scrollToNode:this.props.scrollToNode,document:this.props.document,t:this.props.t,markdownLint:this.props.t("markdownLint",{returnObjects:!0})}),"commentsPanel"===this.state.navItem&&u.a.createElement(f.a,{editorApi:this.props.editorApi,t:this.props.t,scrollToQuote:this.props.scrollToQuote,relistComment:this.props.relistComment,openDialogs:this.props.openDialogs,participants:this.props.participants,onParticipantsChange:this.props.onParticipantsChange}),"detail"===this.state.navItem&&u.a.createElement(p.a,{t:this.props.t,relatedFiles:this.props.relatedFiles,fileTagList:this.props.fileTagList,editorApi:this.props.editorApi,openDialogs:this.props.openDialogs,fileInfo:this.props.fileInfo,participants:this.props.participants})))}}]),t}(u.a.PureComponent);t.a=m},602:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l))),n.onClickCard=function(e,t){n.props.document.nodes.get(t)&&n.props.scrollToNode(n.props.document.nodes.get(t))},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=[];return this.props.issues.issue_list.length>0&&this.props.issues.issue_list.map(function(n,a){if(n.detail)n.detail.map(function(r,o){var i=u.a.createElement("div",{key:"issue-"+a+"-"+o,onClick:function(t){e.onClickCard(t,r.position)},className:"issue-card"},u.a.createElement("div",{className:"issue-card-title"},e.props.markdownLint[n.issue_code].issue),u.a.createElement("div",{className:"issue-card-description"},e.props.markdownLint[n.issue_code].description));return t.push(i),!0});else{var r=u.a.createElement("div",{key:"issue-"+a,className:"issue-card"},u.a.createElement("div",{className:"issue-card-title"},e.props.markdownLint[n.issue_code].issue),u.a.createElement("div",{className:"issue-card-description"},e.props.markdownLint[n.issue_code].description));t.push(r)}return!0}),u.a.createElement("div",{className:"issue-container"},t.length>0?t:u.a.createElement("div",{className:"size-panel-no-content"},this.props.t("no_document_improvement_suggestion")))}}]),t}(u.a.PureComponent);t.a=c},603:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(191),s=n(19),u=n(0),c=n.n(u),d=n(7),f=n.n(d),p=n(120),m=n(90),h=n(405),g=n(193),v=n(251),b=n(627),y=n(408),E=(n.n(y),function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.toggleResolvedComment=function(){n.setState({showResolvedComment:!n.state.showResolvedComment})},n.listComments=function(e){n.props.editorApi.listComments().then(function(t){if(n.setState({commentsList:t.data.comments}),e){var a=Object(l.a)(n);setTimeout(function(){a.refs.commentsList.scrollTo(0,1e4)},100)}})},n.handleCommentChange=function(e){n.setState({comment:e.target.value})},n.resolveComment=function(e){n.props.editorApi.updateComment(e.target.id,"true").then(function(){n.listComments()})},n.deleteComment=function(e){n.props.editorApi.deleteComment(e.target.id).then(function(){n.listComments()})},n.editComment=function(e,t){n.props.editorApi.updateComment(e,null,null,t).then(function(e){n.listComments()})},n.listRepoRelatedUsers=function(){window.showParticipants&&n.props.editorApi.listRepoRelatedUsers().then(function(e){var t=e.data.user_list.map(function(e){return{id:e.email,display:e.name}});n.setState({relatedUsers:t})})},n.addComment=function(){n.state.comment.trim()&&(n.props.editorApi.postComment(n.state.comment.trim()).then(function(){n.listComments(!0)}).catch(function(e){e.response.data&&g.a.danger(e.response.data.error_msg,{duration:3})}),n.setState({comment:""}))},n.onSubmit=function(){window.showParticipants&&n.addParticipant(n.props.editorApi.userName),0!==n.toBeAddedParticipant.length&&window.showParticipants?n.props.editorApi.addFileParticipants(n.toBeAddedParticipant).then(function(e){n.toBeAddedParticipant=[],n.addComment(),n.props.onParticipantsChange()}).catch(function(e){e.response.data&&g.a.danger(e.response.data.error_msg,{duration:3})}):n.addComment()},n.checkParticipant=function(e){return n.props.participants.map(function(e){return e.email}).includes(e)},n.addParticipant=function(e){n.checkParticipant(e)||n.toBeAddedParticipant.push(e)},n.renderUserSuggestion=function(e,t,n,a,r){return c.a.createElement("div",{className:"user ".concat(r?"focused":"")},n)},n.state={commentsList:[],showResolvedComment:!0,comment:"",relatedUsers:null},n.toBeAddedParticipant=[],n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.listComments(),this.listRepoRelatedUsers()}},{key:"componentWillReceiveProps",value:function(e){this.props.relistComment!==e.relistComment&&this.listComments(!0)}},{key:"render",value:function(){var e=this,t=this.props.t,n=this.props.participants;return c.a.createElement("div",{className:"seafile-comment"},c.a.createElement("div",{className:"seafile-comment-toggle-resolved"},c.a.createElement("div",{className:"seafile-comment-title-text"},t("Show_resolved_comments")),c.a.createElement("div",{className:"seafile-comment-title-toggle d-flex"},c.a.createElement("label",{className:"custom-switch",id:"toggle-resolved-comments"},c.a.createElement("input",{type:"checkbox",name:"option",className:"custom-switch-input",onChange:this.toggleResolvedComment,checked:this.state.showResolvedComment&&"checked"}),c.a.createElement("span",{className:"custom-switch-indicator"})))),c.a.createElement("ul",{className:window.showParticipants?"seafile-comment-list show-participants":"seafile-comment-list",ref:"commentsList"},this.state.commentsList.length>0&&this.state.commentsList.map(function(t){var n=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&arguments[2],new Date(t.created_at).getTime()),a=f()(n).format("YYYY-MM-DD HH:mm");return c.a.createElement(c.a.Fragment,{key:t.id},c.a.createElement(w,{item:t,time:a,t:e.props.t,deleteComment:e.deleteComment,resolveComment:e.resolveComment,editComment:e.editComment,showResolvedComment:e.state.showResolvedComment,editorApi:e.props.editorApi,scrollToQuote:e.props.scrollToQuote}))}),0===this.state.commentsList.length&&c.a.createElement("li",{className:"comment-vacant"},t("no_comment_yet"))),c.a.createElement("div",{className:"seafile-comment-footer"},n&&window.showParticipants&&c.a.createElement(h.a,{openDialogs:this.props.openDialogs,participants:n,t:this.props.t}),window.showParticipants?c.a.createElement(v.MentionsInput,{value:this.state.comment,onChange:this.handleCommentChange,placeholder:t("add_a_comment"),style:b.a},c.a.createElement(v.Mention,{trigger:"@",displayTransform:function(e,t){return"@".concat(t)},data:this.state.relatedUsers,renderSuggestion:this.renderUserSuggestion,onAdd:function(t,n){e.addParticipant(t)},appendSpaceOnAdd:!0})):c.a.createElement("textarea",{className:"add-comment-input",onChange:this.handleCommentChange,value:this.state.comment,placeholder:t("add_a_comment"),clos:"100",rows:"3",warp:"virtual"}),c.a.createElement(m.a,{className:"submit-comment",color:"primary",size:"sm",onClick:this.onSubmit},t("submit"))))}}]),t}(c.a.Component)),w=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.toggleDropDownMenu=function(){n.setState({dropdownOpen:!n.state.dropdownOpen})},n.convertComment=function(e){if(p.processor.process(e.comment).then(function(e){var t=String(e);n.setState({html:t})}),e.detail){var t=JSON.parse(e.detail);p.processor.process(t.quote).then(function(e){var a=String(e);n.setState({quote:a,position:t.position})})}},n.toggleEditComment=function(){n.setState({editable:!n.state.editable})},n.updateComment=function(e){var t=n.state.newComment;n.props.item.comment!==t&&n.props.editComment(e.target.id,t),n.toggleEditComment()},n.handleCommentChange=function(e){n.setState({newComment:e.target.value})},n.state={dropdownOpen:!1,html:"",newComment:n.props.item.comment,editable:!1,quote:"",position:null},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){this.convertComment(this.props.item)}},{key:"componentWillReceiveProps",value:function(e){this.convertComment(e.item)}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.t,a=e.editorApi;return t.resolved&&!this.props.showResolvedComment?null:this.state.editable?c.a.createElement("li",{className:"seafile-comment-item",id:t.id},c.a.createElement("div",{className:"seafile-comment-info"},c.a.createElement("img",{className:"avatar",src:t.avatar_url,alt:""}),c.a.createElement("div",{className:"reviewer-info"},c.a.createElement("div",{className:"reviewer-name ellipsis"},t.user_name),c.a.createElement("div",{className:"review-time"},this.props.time))),c.a.createElement("div",{className:"seafile-edit-comment"},c.a.createElement("textarea",{className:"edit-comment-input",value:this.state.newComment,onChange:this.handleCommentChange,clos:"100",rows:"3",warp:"virtual"}),c.a.createElement(m.a,{className:"comment-btn",color:"primary",size:"sm",onClick:this.updateComment,id:t.id},n("Update"))," ",c.a.createElement(m.a,{className:"comment-btn",color:"secondary",size:"sm",onClick:this.toggleEditComment},n("cancel")))):c.a.createElement("li",{className:t.resolved?"seafile-comment-item seafile-comment-item-resolved":"seafile-comment-item",id:t.id},c.a.createElement("div",{className:"seafile-comment-info"},c.a.createElement("img",{className:"avatar",src:t.avatar_url,alt:""}),c.a.createElement("div",{className:"reviewer-info"},c.a.createElement("div",{className:"reviewer-name ellipsis"},t.user_name),c.a.createElement("div",{className:"review-time"},this.props.time)),c.a.createElement(m.b,{isOpen:this.state.dropdownOpen,size:"sm",className:"seafile-comment-dropdown",toggle:this.toggleDropDownMenu},c.a.createElement(m.e,{className:"seafile-comment-dropdown-btn"},c.a.createElement("i",{className:"fas fa-ellipsis-v"})),c.a.createElement(m.d,null,t.user_email===a.userName&&c.a.createElement(m.c,{onClick:this.props.deleteComment,className:"delete-comment",id:t.id},n("delete")),t.user_email===a.userName&&c.a.createElement(m.c,{onClick:this.toggleEditComment,className:"edit-comment",id:t.id},n("edit")),!t.resolved&&c.a.createElement(m.c,{onClick:this.props.resolveComment,className:"seafile-comment-resolved",id:t.id},n("Mark_as_Resolved"))))),t.detail&&c.a.createElement("blockquote",{className:"seafile-comment-content"},c.a.createElement("div",{onClick:this.props.scrollToQuote.bind(this,this.state.position),dangerouslySetInnerHTML:{__html:this.state.quote}})),c.a.createElement("div",{className:"seafile-comment-content",dangerouslySetInnerHTML:{__html:this.state.html}}))}}]),t}(c.a.Component);t.a=E},604:function(e,t){},627:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a={control:{backgroundColor:"#fff",fontSize:14,fontWeight:"normal"},highlighter:{overflow:"hidden"},input:{margin:0},"&singleLine":{control:{display:"inline-block",width:130},highlighter:{padding:1,border:"2px inset transparent"},input:{padding:1,border:"2px inset"}},"&multiLine":{control:{},highlighter:{padding:9},input:{padding:"8px 6px",minHeight:90,height:90,border:"1px solid #e6e6dd",borderRadius:"5px",overfflowY:"auto","&focused":{backgroundColor:"#cee4e5",outlineOffset:"-2px",outlineColor:"-webkit-focus-ring-color",outlineStyle:"auto",outlineWidth:"5px"}}},suggestions:{list:{backgroundColor:"white",border:"1px solid rgba(0,0,0,0.15)",fontSize:14,maxHeight:200,overflow:"auto",position:"absolute",bottom:14,width:"150px"},item:{width:"auto",padding:"5px 15px",overflowX:"auto",borderBottom:"1px solid rgba(0,0,0,0.15)","&focused":{backgroundColor:"#f19654",color:"#fff",fontWeight:"400"}}}}},628:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(7),d=n.n(c),f=n(405),p=n(629),m=(n.n(p),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l))),n.onEditFileTagToggle=function(){n.props.openDialogs&&n.props.openDialogs("file_tags")},n.onListRelatedFileToggle=function(){n.props.openDialogs&&n.props.openDialogs("related_files")},n.bytesToSize=function(e){if(e<0)return"--";var t=["bytes","KB","MB","GB","TB","PB"];if(0===e)return e+" "+t[0];var n=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return 0===n?e+" "+t[n]:(e/Math.pow(1e3,n)).toFixed(1)+" "+t[n]},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.fileTagList,n=e.relatedFiles,a=e.fileInfo,r=this.props.editorApi,o=r.filePath,i=r.serviceUrl;return u.a.createElement("div",{className:"dirent-table-container"},u.a.createElement("table",{className:"table-thead-hidden"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{width:"40%"}),u.a.createElement("th",{width:"60%"}))),u.a.createElement("tbody",null,u.a.createElement("tr",null,u.a.createElement("th",null,this.props.t("Size")),u.a.createElement("td",null,this.bytesToSize(a.size))),u.a.createElement("tr",null,u.a.createElement("th",null,this.props.t("Location")),u.a.createElement("td",null,o)),u.a.createElement("tr",null,u.a.createElement("th",null,this.props.t("Last_Update")),u.a.createElement("td",null,d()(a.last_modified).fromNow())),u.a.createElement("tr",{className:"file-tag-container"},u.a.createElement("th",null,this.props.t("Tags")),u.a.createElement("td",null,t.length>0&&u.a.createElement("ul",{className:"file-tag-list"},t.map(function(e){return u.a.createElement("li",{key:e.id,className:"file-tag-item"},u.a.createElement("span",{className:"file-tag",style:{backgroundColor:e.tag_color}}),u.a.createElement("span",{className:"tag-name",title:e.tag_name},e.tag_name))})),u.a.createElement("i",{className:"fa fa-pencil-alt attr-action-icon",onClick:this.onEditFileTagToggle}))),u.a.createElement("tr",{className:"file-related-files"},u.a.createElement("th",null,this.props.t("Related_Files")),u.a.createElement("td",null,n.length>0&&u.a.createElement("ul",null,n.map(function(e,t){var n=i+"/lib/"+e.repo_id+"/file"+encodeURIComponent(e.path);return u.a.createElement("li",{key:t},u.a.createElement("a",{href:n,rel:"noopener noreferrer",target:"_blank"},e.name))})),u.a.createElement("i",{className:"fa fa-pencil-alt attr-action-icon",onClick:this.onListRelatedFileToggle}))),this.props.participants&&window.showParticipants&&u.a.createElement("tr",{className:"file-participants"},u.a.createElement("th",null,this.props.t("Participants")),u.a.createElement("td",null,u.a.createElement(f.a,{openDialogs:this.props.openDialogs,participants:this.props.participants,t:this.props.t}))))))}}]),t}(u.a.Component));t.a=m},629:function(e,t){},63:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(1);n(427);var m={currentPage:d.default.number.isRequired,gotoPreviousPage:d.default.func.isRequired,gotoNextPage:d.default.func.isRequired,hasNextPage:d.default.bool.isRequired,resetPerPage:d.default.func.isRequired,curPerPage:d.default.number.isRequired},h=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.resetPerPage=function(e){var t=parseInt(e.target.value);a.updateURL(1,t),a.props.resetPerPage(t)},a.goToPrevious=function(){var e=a.props,t=e.currentPage,n=e.curPerPage;a.updateURL(t-1,n),a.props.gotoPreviousPage()},a.goToNext=function(){var e=a.props,t=e.currentPage,n=e.curPerPage;a.updateURL(t+1,n),a.props.gotoNextPage()},a.updateURL=function(e,t){var n=new URL(location.href),a=new URLSearchParams(n.search);a.set("page",e),a.set("per_page",t),n.search=a.toString(),(0,f.navigate)(n.toString())},a.getPerPageText=function(e){return(0,p.gettext)("{number_placeholder} / Page").replace("{number_placeholder}",e)},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.curPerPage,n=e.currentPage;return u.default.createElement("div",{className:"my-6 paginator d-flex align-items-center justify-content-center"},u.default.createElement("button",{className:"btn btn-secondary",disabled:1==n,onClick:this.goToPrevious},u.default.createElement("span",{className:"fas fa-chevron-left"})),u.default.createElement("span",{className:"btn btn-primary mx-4"},n),u.default.createElement("button",{className:"btn btn-secondary",disabled:!this.props.hasNextPage,onClick:this.goToNext},u.default.createElement("span",{className:"fas fa-chevron-right"})),u.default.createElement("select",{className:"form-control d-inline-block w-auto ml-6",value:t,onChange:this.resetPerPage},u.default.createElement("option",{value:"25"},this.getPerPageText(25)),u.default.createElement("option",{value:"50"},this.getPerPageText(50)),u.default.createElement("option",{value:"100"},this.getPerPageText(100))))}}]),t}(s.Component);h.propTypes=m,t.default=h},630:function(e,t){},631:function(e,t){},632:function(e,t){},633:function(e,t,n){"use strict";var a=n(12),r=n(14),o=n(17),i=n(18),l=n(19),s=n(0),u=n.n(s),c=n(120),d=n(193),f=n(382),p=n.n(f),m=n(47),h=n(378),g=n.n(h),v=n(86),b=n(255);n(204),n(634),n(636),n(192);var y=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l))),n.state={isFocused:!1},n.focus=function(){n.codeMirror&&n.codeMirror.focus()},n.focusChanged=function(e){n.setState({isFocused:e}),n.props.onFocusChange&&n.props.onFocusChange(e)},n.cursorActivity=function(e){n.props.onCursorActivity&&n.props.onCursorActivity(e)},n.scrollChanged=function(e){n.props.onScroll&&n.props.onScroll(e.getScrollInfo())},n.codemirrorValueChanged=function(e,t){n.props.onChange&&"setValue"!==t.origin&&n.props.onChange(e.getValue(),t)},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"getCodeMirrorInstance",value:function(){return this.props.codeMirrorInstance||n(27)}},{key:"componentWillMount",value:function(){this.props.path&&console.error("Warning: react-codemirror: the `path` prop has been changed to `name`")}},{key:"componentDidMount",value:function(){var e=this.getCodeMirrorInstance();this.codeMirror=e.fromTextArea(this.textareaNode,this.props.options),this.codeMirror.on("change",this.codemirrorValueChanged),this.codeMirror.on("cursorActivity",this.cursorActivity),this.codeMirror.on("focus",this.focusChanged.bind(this,!0)),this.codeMirror.on("blur",this.focusChanged.bind(this,!1)),this.codeMirror.on("scroll",this.scrollChanged)}},{key:"componentWillUnmount",value:function(){this.codeMirror&&this.codeMirror.toTextArea()}},{key:"componentWillReceiveProps",value:function(e){if(this.codeMirror&&void 0!==e.initialValue&&e.initialValue!==this.props.initialValue)if(this.props.preserveScrollPosition){var t=this.codeMirror.getScrollInfo();this.codeMirror.setValue(e.initialValue),this.codeMirror.scrollTo(t.left,t.top)}else this.codeMirror.setValue(e.initialValue)}},{key:"render",value:function(){var e=this,t=v("ReactCodeMirror",this.state.isFocused?"ReactCodeMirror--focused":null,this.props.className);return u.a.createElement("div",{className:t},u.a.createElement("textarea",{ref:function(t){return e.textareaNode=t},name:this.props.name||this.props.path,defaultValue:this.props.initialValue,autoComplete:"off",autoFocus:this.props.autoFocus}))}}]),t}(u.a.Component),E=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),n.state={html:"",leftIsBindScroll:!1,rightIsBindScroll:!1},n.scrollData={scrollPercentage:0,leftPanel:null,rightPanel:null},n.updateCode=function(e){n.props.onChange(e)},n.onLeftScroll=function(e){var t=n.scrollData.leftPanel;n.scrollData.scrollPercentage=t.scrollTop/t.scrollHeight,n.scrollData.rightPanel.scrollTop=n.scrollData.scrollPercentage*n.scrollData.rightPanel.scrollHeight},n.onRightScroll=function(e){var t=n.scrollData.rightPanel;n.scrollData.scrollPercentage=t.scrollTop/t.scrollHeight,n.scrollData.leftPanel.scrollTop=n.scrollData.scrollPercentage*n.scrollData.leftPanel.scrollHeight},n.onEnterLeftPanel=function(){n.setState({leftIsBindScroll:!0})},n.onLeaveLeftPanel=function(){n.setState({leftIsBindScroll:!1})},n.onEnterRightPanel=function(){n.setState({rightIsBindScroll:!0})},n.onLeaveRightPanel=function(){n.setState({rightIsBindScroll:!1})},n.onHotKey=function(e){if(p()("mod+s",e))return e.preventDefault(),n.props.onSave(e),!0},n.options={lineNumbers:!0,mode:"markdown",lineWrapping:!0,scrollbarStyle:null},n.setContent=b.throttle(n.setContent,1e3),n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"setContent",value:function(e){var t=this;c.processor.process(e).then(function(e){var n=String(e);t.setState({html:n})})}},{key:"componentDidMount",value:function(){this.scrollData.leftPanel=document.querySelector(".plain-editor-left-panel"),this.scrollData.rightPanel=document.querySelector(".plain-editor-right-panel"),this.setContent(this.props.currentContent),this.props.collabUsers.filter(function(e){return!0===e.is_editing&&void 0===e.myself}).length>0&&d.a.danger("Another user is editing this file!",{duration:3})}},{key:"componentWillReceiveProps",value:function(e){this.setContent(e.currentContent)}},{key:"componentDidUpdate",value:function(){g.a.highlightAll()}},{key:"render",value:function(){return u.a.createElement("div",{className:"seafile-editor-module seafile-editor"},u.a.createElement("div",{className:"seafile-editor-main plain-editor-main d-flex"},u.a.createElement("div",{className:"plain-editor-left-panel",onKeyDown:this.onHotKey,onMouseLeave:this.onLeaveLeftPanel,onMouseEnter:this.onEnterLeftPanel,onScroll:this.state.leftIsBindScroll?this.onLeftScroll:null},u.a.createElement(y,{initialValue:this.props.initialValue,onChange:this.updateCode,options:this.options})),u.a.createElement("div",{className:"plain-editor-right-panel",onMouseEnter:this.onEnterRightPanel,onMouseLeave:this.onLeaveRightPanel,onScroll:this.state.rightIsBindScroll?this.onRightScroll:null},u.a.createElement("div",{className:"preview"},u.a.createElement("div",{className:"rendered-markdown article",dangerouslySetInnerHTML:{__html:this.state.html}})))))}}]),t}(u.a.Component);E.defaultProps={collabUsers:[]},t.a=Object(m.withTranslation)("seafile-editor")(E)},634:function(e,t,n){!function(e){e(n(27),n(169),n(635))}(function(e){"use strict";e.defineMode("markdown",function(t,n){function a(n){if(e.findModeByName){var a=e.findModeByName(n);a&&(n=a.mime||a.mimes[0])}var r=e.getMode(t,n);return"null"==r.name?null:r}function r(e,t,n){return t.f=t.inline=n,n(e,t)}function o(e,t,n){return t.f=t.block=n,n(e,t)}function i(e){return!e||!/\S/.test(e.string)}function l(t){if(t.linkTitle=!1,t.linkHref=!1,t.linkText=!1,t.em=!1,t.strong=!1,t.strikethrough=!1,t.quote=0,t.indentedCode=!1,t.f==u){var n=w;if(!n){var a=e.innerMode(E,t.htmlState);n="xml"==a.mode.name&&null===a.state.tagStart&&!a.state.context&&a.state.tokenize.isInText}n&&(t.f=p,t.block=s,t.htmlState=null)}return t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.prevLine=t.thisLine,t.thisLine={stream:null},null}function s(t,o){var l=t.column()===o.indentation,s=i(o.prevLine.stream),u=o.indentedCode,f=o.prevLine.hr,p=!1!==o.list,m=(o.listStack[o.listStack.length-1]||0)+3;o.indentedCode=!1;var h=o.indentation;if(null===o.indentationDiff&&(o.indentationDiff=o.indentation,p)){for(o.em=!1,o.strong=!1,o.code=!1,o.strikethrough=!1,o.list=null;h<o.listStack[o.listStack.length-1];)o.listStack.pop(),o.listStack.length?o.indentation=o.listStack[o.listStack.length-1]:o.list=!1;!1!==o.list&&(o.indentationDiff=h-o.listStack[o.listStack.length-1])}var g=!s&&!f&&!o.prevLine.header&&(!p||!u)&&!o.prevLine.fencedCodeEnd,b=(!1===o.list||f||s)&&o.indentation<=m&&t.match(x),y=null;if(o.indentationDiff>=4&&(u||o.prevLine.fencedCodeEnd||o.prevLine.header||s))return t.skipToEnd(),o.indentedCode=!0,_.code;if(t.eatSpace())return null;if(l&&o.indentation<=m&&(y=t.match(O))&&y[1].length<=6)return o.quote=0,o.header=y[1].length,o.thisLine.header=!0,n.highlightFormatting&&(o.formatting="header"),o.f=o.inline,d(o);if(o.indentation<=m&&t.eat(">"))return o.quote=l?1:o.quote+1,n.highlightFormatting&&(o.formatting="quote"),t.eatSpace(),d(o);if(!b&&!o.setext&&l&&o.indentation<=m&&(y=t.match(P))){var E=y[1]?"ol":"ul";return o.indentation=h+t.current().length,o.list=!0,o.quote=0,o.listStack.push(o.indentation),n.taskLists&&t.match(C,!1)&&(o.taskList=!0),o.f=o.inline,n.highlightFormatting&&(o.formatting=["list","list-"+E]),d(o)}return l&&o.indentation<=m&&(y=t.match(k,!0))?(o.quote=0,o.fencedEndRE=new RegExp(y[1]+"+ *$"),o.localMode=n.fencedCodeBlockHighlighting&&a(y[2]),o.localMode&&(o.localState=e.startState(o.localMode)),o.f=o.block=c,n.highlightFormatting&&(o.formatting="code-block"),o.code=-1,d(o)):o.setext||!(g&&p||o.quote||!1!==o.list||o.code||b||T.test(t.string))&&(y=t.lookAhead(1))&&(y=y.match(D))?(o.setext?(o.header=o.setext,o.setext=0,t.skipToEnd(),n.highlightFormatting&&(o.formatting="header")):(o.header="="==y[0].charAt(0)?1:2,o.setext=o.header),o.thisLine.header=!0,o.f=o.inline,d(o)):b?(t.skipToEnd(),o.hr=!0,o.thisLine.hr=!0,_.hr):"["===t.peek()?r(t,o,v):r(t,o,o.inline)}function u(t,n){var a=E.token(t,n.htmlState);if(!w){var r=e.innerMode(E,n.htmlState);("xml"==r.mode.name&&null===r.state.tagStart&&!r.state.context&&r.state.tokenize.isInText||n.md_inside&&t.current().indexOf(">")>-1)&&(n.f=p,n.block=s,n.htmlState=null)}return a}function c(e,t){var a=t.listStack[t.listStack.length-1]||0,r=t.indentation<a,i=a+3;if(t.fencedEndRE&&t.indentation<=i&&(r||e.match(t.fencedEndRE))){n.highlightFormatting&&(t.formatting="code-block");var l;return r||(l=d(t)),t.localMode=t.localState=null,t.block=s,t.f=p,t.fencedEndRE=null,t.code=0,t.thisLine.fencedCodeEnd=!0,r?o(e,t,t.block):l}return t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),_.code)}function d(e){var t=[];if(e.formatting){t.push(_.formatting),"string"===typeof e.formatting&&(e.formatting=[e.formatting]);for(var a=0;a<e.formatting.length;a++)t.push(_.formatting+"-"+e.formatting[a]),"header"===e.formatting[a]&&t.push(_.formatting+"-"+e.formatting[a]+"-"+e.header),"quote"===e.formatting[a]&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(_.formatting+"-"+e.formatting[a]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(_.linkHref,"url"):(e.strong&&t.push(_.strong),e.em&&t.push(_.em),e.strikethrough&&t.push(_.strikethrough),e.emoji&&t.push(_.emoji),e.linkText&&t.push(_.linkText),e.code&&t.push(_.code),e.image&&t.push(_.image),e.imageAltText&&t.push(_.imageAltText,"link"),e.imageMarker&&t.push(_.imageMarker)),e.header&&t.push(_.header,_.header+"-"+e.header),e.quote&&(t.push(_.quote),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(_.quote+"-"+e.quote):t.push(_.quote+"-"+n.maxBlockquoteDepth)),!1!==e.list){var r=(e.listStack.length-1)%3;r?1===r?t.push(_.list2):t.push(_.list3):t.push(_.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function f(e,t){if(e.match(M,!0))return d(t)}function p(t,a){var r=a.text(t,a);if("undefined"!==typeof r)return r;if(a.list)return a.list=null,d(a);if(a.taskList){return" "===t.match(C,!0)[1]?a.taskOpen=!0:a.taskClosed=!0,n.highlightFormatting&&(a.formatting="task"),a.taskList=!1,d(a)}if(a.taskOpen=!1,a.taskClosed=!1,a.header&&t.match(/^#+$/,!0))return n.highlightFormatting&&(a.formatting="header"),d(a);var i=t.next();if(a.linkTitle){a.linkTitle=!1;var l=i;"("===i&&(l=")"),l=(l+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1");var s="^\\s*(?:[^"+l+"\\\\]+|\\\\\\\\|\\\\.)"+l;if(t.match(new RegExp(s),!0))return _.linkHref}if("`"===i){var c=a.formatting;n.highlightFormatting&&(a.formatting="code"),t.eatWhile("`");var f=t.current().length;if(0!=a.code||a.quote&&1!=f){if(f==a.code){var g=d(a);return a.code=0,g}return a.formatting=c,d(a)}return a.code=f,d(a)}if(a.code)return d(a);if("\\"===i&&(t.next(),n.highlightFormatting)){var v=d(a),b=_.formatting+"-escape";return v?v+" "+b:b}if("!"===i&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return a.imageMarker=!0,a.image=!0,n.highlightFormatting&&(a.formatting="image"),d(a);if("["===i&&a.imageMarker&&t.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return a.imageMarker=!1,a.imageAltText=!0,n.highlightFormatting&&(a.formatting="image"),d(a);if("]"===i&&a.imageAltText){n.highlightFormatting&&(a.formatting="image");var v=d(a);return a.imageAltText=!1,a.image=!1,a.inline=a.f=h,v}if("["===i&&!a.image)return a.linkText&&t.match(/^.*?\]/)?d(a):(a.linkText=!0,n.highlightFormatting&&(a.formatting="link"),d(a));if("]"===i&&a.linkText){n.highlightFormatting&&(a.formatting="link");var v=d(a);return a.linkText=!1,a.inline=a.f=t.match(/\(.*?\)| ?\[.*?\]/,!1)?h:p,v}if("<"===i&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){a.f=a.inline=m,n.highlightFormatting&&(a.formatting="link");var v=d(a);return v?v+=" ":v="",v+_.linkInline}if("<"===i&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){a.f=a.inline=m,n.highlightFormatting&&(a.formatting="link");var v=d(a);return v?v+=" ":v="",v+_.linkEmail}if(n.xml&&"<"===i&&t.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var y=t.string.indexOf(">",t.pos);if(-1!=y){/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(t.string.substring(t.start,y))&&(a.md_inside=!0)}return t.backUp(1),a.htmlState=e.startState(E),o(t,a,u)}if(n.xml&&"<"===i&&t.match(/^\/\w*?>/))return a.md_inside=!1,"tag";if("*"===i||"_"===i){for(var w=1,S=1==t.pos?" ":t.string.charAt(t.pos-2);w<3&&t.eat(i);)w++;var x=t.peek()||" ",P=!/\s/.test(x)&&(!L.test(x)||/\s/.test(S)||L.test(S)),O=!/\s/.test(S)&&(!L.test(S)||/\s/.test(x)||L.test(x)),D=null,M=null;if(w%2&&(a.em||!P||"*"!==i&&O&&!L.test(S)?a.em!=i||!O||"*"!==i&&P&&!L.test(x)||(D=!1):D=!0),w>1&&(a.strong||!P||"*"!==i&&O&&!L.test(S)?a.strong!=i||!O||"*"!==i&&P&&!L.test(x)||(M=!1):M=!0),null!=M||null!=D){n.highlightFormatting&&(a.formatting=null==D?"strong":null==M?"em":"strong em"),!0===D&&(a.em=i),!0===M&&(a.strong=i);var g=d(a);return!1===D&&(a.em=!1),!1===M&&(a.strong=!1),g}}else if(" "===i&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return d(a);t.backUp(1)}if(n.strikethrough)if("~"===i&&t.eatWhile(i)){if(a.strikethrough){n.highlightFormatting&&(a.formatting="strikethrough");var g=d(a);return a.strikethrough=!1,g}if(t.match(/^[^\s]/,!1))return a.strikethrough=!0,n.highlightFormatting&&(a.formatting="strikethrough"),d(a)}else if(" "===i&&t.match(/^~~/,!0)){if(" "===t.peek())return d(a);t.backUp(2)}if(n.emoji&&":"===i&&t.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){a.emoji=!0,n.highlightFormatting&&(a.formatting="emoji");var k=d(a);return a.emoji=!1,k}return" "===i&&(t.match(/^ +$/,!1)?a.trailingSpace++:a.trailingSpace&&(a.trailingSpaceNewLine=!0)),d(a)}function m(e,t){if(">"===e.next()){t.f=t.inline=p,n.highlightFormatting&&(t.formatting="link");var a=d(t);return a?a+=" ":a="",a+_.linkInline}return e.match(/^[^>]+/,!0),_.linkInline}function h(e,t){if(e.eatSpace())return null;var a=e.next();return"("===a||"["===a?(t.f=t.inline=g("("===a?")":"]"),n.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,d(t)):"error"}function g(e){return function(t,a){if(t.next()===e){a.f=a.inline=p,n.highlightFormatting&&(a.formatting="link-string");var r=d(a);return a.linkHref=!1,r}return t.match(N[e]),a.linkHref=!0,d(a)}}function v(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=b,e.next(),n.highlightFormatting&&(t.formatting="link"),t.linkText=!0,d(t)):r(e,t,p)}function b(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=y,n.highlightFormatting&&(t.formatting="link");var a=d(t);return t.linkText=!1,a}return e.match(/^([^\]\\]|\\.)+/,!0),_.linkText}function y(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=p,_.linkHref+" url")}var E=e.getMode(t,"text/html"),w="null"==E.name;void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.taskLists&&(n.taskLists=!1),void 0===n.strikethrough&&(n.strikethrough=!1),void 0===n.emoji&&(n.emoji=!1),void 0===n.fencedCodeBlockHighlighting&&(n.fencedCodeBlockHighlighting=!0),void 0===n.xml&&(n.xml=!0),void 0===n.tokenTypeOverrides&&(n.tokenTypeOverrides={});var _={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var S in _)_.hasOwnProperty(S)&&n.tokenTypeOverrides[S]&&(_[S]=n.tokenTypeOverrides[S]);var x=/^([*\-_])(?:\s*\1){2,}\s*$/,P=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,C=/^\[(x| )\](?=\s)/i,O=n.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,D=/^ *(?:\={1,}|-{1,})\s*$/,M=/^[^#!\[\]*_\\<>` "'(~:]+/,k=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,T=/^\s*\[[^\]]+?\]:.*$/,L=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/,N={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/},I={startState:function(){return{f:s,prevLine:{stream:null},thisLine:{stream:null},block:s,htmlState:null,indentation:0,inline:p,text:f,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t.thisLine,block:t.block,htmlState:t.htmlState&&e.copyState(E,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkText:t.linkText,linkTitle:t.linkTitle,linkHref:t.linkHref,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,emoji:t.emoji,header:t.header,setext:t.setext,hr:t.hr,taskList:t.taskList,list:t.list,listStack:t.listStack.slice(0),quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedEndRE:t.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0))return l(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=u)){var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentation=n,t.indentationDiff=null,n>0)return null}}return t.f(e,t)},innerMode:function(e){return e.block==u?{state:e.htmlState,mode:E}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:I}},indent:function(t,n,a){return t.block==u&&E.indent?E.indent(t.htmlState,n,a):t.localState&&t.localMode.indent?t.localMode.indent(t.localState,n,a):e.Pass},blankLine:l,getType:d,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return I},"xml"),e.defineMIME("text/markdown","markdown"),e.defineMIME("text/x-markdown","markdown")})},635:function(e,t,n){!function(e){e(n(27))}(function(e){"use strict";e.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var t=0;t<e.modeInfo.length;t++){var n=e.modeInfo[t];n.mimes&&(n.mime=n.mimes[0])}e.findModeByMIME=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var a=e.modeInfo[n];if(a.mime==t)return a;if(a.mimes)for(var r=0;r<a.mimes.length;r++)if(a.mimes[r]==t)return a}return/\+xml$/.test(t)?e.findModeByMIME("application/xml"):/\+json$/.test(t)?e.findModeByMIME("application/json"):void 0},e.findModeByExtension=function(t){for(var n=0;n<e.modeInfo.length;n++){var a=e.modeInfo[n];if(a.ext)for(var r=0;r<a.ext.length;r++)if(a.ext[r]==t)return a}},e.findModeByFileName=function(t){for(var n=0;n<e.modeInfo.length;n++){var a=e.modeInfo[n];if(a.file&&a.file.test(t))return a}var r=t.lastIndexOf("."),o=r>-1&&t.substring(r+1,t.length);if(o)return e.findModeByExtension(o)},e.findModeByName=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var a=e.modeInfo[n];if(a.name.toLowerCase()==t)return a;if(a.alias)for(var r=0;r<a.alias.length;r++)if(a.alias[r].toLowerCase()==t)return a}}})},636:function(e,t){},66:function(e,t){},67:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(1),m={email:d.default.string.isRequired,name:d.default.string.isRequired},h=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(f.Link,{to:p.siteRoot+"sys/users/"+encodeURIComponent(this.props.email)+"/"},this.props.name)}}]),t}(s.Component);h.propTypes=m,t.default=h},722:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(7),m=a(p),h=n(1),g=n(4),v=n(3),b=n(8),y=a(b);n(723);var E={repoID:d.default.string.isRequired,commitID:d.default.string.isRequired,commitTime:d.default.string.isRequired,toggleDialog:d.default.func.isRequired},w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoading:!0,errorMsg:""},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.repoID,a=t.commitID;g.seafileAPI.getCommitDetails(n,a).then(function(t){e.setState({isLoading:!1,errorMsg:"",commitDetails:t.data})}).catch(function(t){var n=v.Utils.getErrorMsg(t);e.setState({isLoading:!1,errorMsg:n})})}},{key:"render",value:function(){var e=this.props,t=e.toggleDialog;e.commitTime;return u.default.createElement(f.Modal,{isOpen:!0,centered:!0,toggle:t},u.default.createElement(f.ModalHeader,{toggle:t},(0,h.gettext)("Modification Details")),u.default.createElement(f.ModalBody,null,u.default.createElement("p",{className:"small"},(0,m.default)(this.props.commitTime).format("YYYY-MM-DD HH:mm:ss")),u.default.createElement(_,{data:this.state})))}}]),t}(u.default.Component),_=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.renderDetails=function(e){for(var t=[{type:"new",title:(0,h.gettext)("New files")},{type:"removed",title:(0,h.gettext)("Deleted files")},{type:"renamed",title:(0,h.gettext)("Renamed or Moved files")},{type:"modified",title:(0,h.gettext)("Modified files")},{type:"newdir",title:(0,h.gettext)("New directories")},{type:"deldir",title:(0,h.gettext)("Deleted directories")}],n=!0,a=0,r=t.length;a<r;a++)if(e[t[a].type].length){n=!1;break}return n?u.default.createElement("p",null,e.cmt_desc):u.default.createElement(u.default.Fragment,null,t.map(function(t,n){if(e[t.type].length)return u.default.createElement(u.default.Fragment,{key:n},u.default.createElement("h6",null,t.title),u.default.createElement("ul",null,e[t.type].map(function(e,t){return u.default.createElement("li",{key:t,dangerouslySetInnerHTML:{__html:e},className:"commit-detail-item"})})))}))},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.data,t=e.isLoading,n=e.errorMsg,a=e.commitDetails;return t?u.default.createElement(y.default,null):n?u.default.createElement("p",{className:"error mt-4 text-center"},n):this.renderDetails(a)}}]),t}(u.default.Component);w.propTypes=E,t.default=w},723:function(e,t){},728:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(1),m={currentItem:d.default.string.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navItems=[{name:"desktop",urlPart:"desktop-devices",text:(0,p.gettext)("Desktop")},{name:"mobile",urlPart:"mobile-devices",text:(0,p.gettext)("Mobile")}],p.isPro&&n.navItems.push({name:"errors",urlPart:"device-errors",text:(0,p.gettext)("Errors")}),n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.currentItem;return u.default.createElement("div",{className:"cur-view-path tab-nav-container"},u.default.createElement("ul",{className:"nav"},this.navItems.map(function(t,n){return u.default.createElement("li",{className:"nav-item",key:n},u.default.createElement(f.Link,{to:p.siteRoot+"sys/"+t.urlPart+"/",className:"nav-link"+(e==t.name?" active":"")},t.text))})))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},729:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(16),d=n(6),f=n(2),p=a(f),m=n(3),h=n(4),g=n(1),v=n(5),b=a(v),y=n(360),E=a(y),w=n(2155),_=a(w),S=n(988),x=a(S),P=n(2156),C=a(P),O=n(107),D=a(O),M=n(2157),k=a(M),T=n(2158),L=a(T),N=n(31),I=a(N),Y=n(474),R=a(Y),A=n(989),j=a(A),Z=n(990),F=a(Z),B=window.sysadmin.pageOptions.availableRoles,X={isAdmin:p.default.bool,isLDAPImported:p.default.bool},H=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleImportUserDialog=function(){n.setState({isImportUserDialogOpen:!n.state.isImportUserDialogOpen})},n.toggleAddUserDialog=function(){n.setState({isAddUserDialogOpen:!n.state.isAddUserDialogOpen})},n.toggleBatchSetQuotaDialog=function(){n.setState({isBatchSetQuotaDialogOpen:!n.state.isBatchSetQuotaDialogOpen})},n.toggleBatchDeleteUserDialog=function(){n.setState({isBatchDeleteUserDialogOpen:!n.state.isBatchDeleteUserDialogOpen})},n.onUserSelected=function(e){var t=!1,a=[],r=n.state.userList.map(function(n){return n.email===e.email&&(n.isSelected=!n.isSelected),1==n.isSelected?(t=!0,a.push(n)):a=a.filter(function(e){return e.email!=n.email}),n});n.setState({userList:r,hasUserSelected:t,selectedUserList:a})},n.toggleSelectAllUsers=function(){if(n.state.isAllUsersSelected){var e=n.state.userList.map(function(e){return e.isSelected=!1,e});n.setState({userList:e,hasUserSelected:!1,isAllUsersSelected:!1,selectedUserList:[]})}else{var t=n.state.userList.map(function(e){return e.isSelected=!0,e});n.setState({userList:t,hasUserSelected:!0,isAllUsersSelected:!0,selectedUserList:t})}},n.getUserList=function(){h.seafileAPI.sysAdminListAdmins().then(function(e){var t=e.data.admin_user_list.map(function(e){return new L.default(e)});n.setState({userList:t,loading:!1})}).catch(function(e){n.setState({loading:!1,errorMsg:m.Utils.getErrorMsg(e,!0)})})},n.getUsersListByPage=function(e){var t=n.state,a=t.perPage,r=t.sortBy,o=t.sortOrder,i=n.props.isLDAPImported;h.seafileAPI.sysAdminListUsers(e,a,i,r,o).then(function(t){var r=t.data.data.map(function(e){return new k.default(e)});n.setState({userList:r,loading:!1,hasNextPage:m.Utils.hasNextPage(e,a,t.data.total_count),currentPage:e})}).catch(function(e){n.setState({loading:!1,errorMsg:m.Utils.getErrorMsg(e,!0)})})},n.sortByQuotaUsage=function(){n.setState({sortBy:"quota_usage",sortOrder:"asc"==n.state.sortOrder?"desc":"asc",currentPage:1},function(){var e=new URL(location.href),t=new URLSearchParams(e.search),a=n.state,r=a.currentPage,o=a.sortBy,i=a.sortOrder;t.set("page",r),t.set("order_by",o),t.set("direction",i),e.search=t.toString(),(0,c.navigate)(e.toString()),n.getUsersListByPage(r)})},n.deleteUser=function(e){h.seafileAPI.sysAdminDeleteUser(e).then(function(t){var a=n.state.userList.filter(function(t){return t.email!=e});n.setState({userList:a}),b.default.success((0,g.gettext)("Successfully deleted 1 item."))}).catch(function(e){var t=m.Utils.getErrorMsg(e);b.default.danger(t)})},n.setUserQuotaInBatch=function(e){var t=n.state.selectedUserList.map(function(e){return e.email});h.seafileAPI.sysAdminSetUserQuotaInBatch(t,e).then(function(e){var t=n.state.userList.map(function(t){return e.data.success.map(function(e){t.email==e.email&&(t.quota_total=e.quota_total)}),t});n.setState({userList:t})}).catch(function(e){var t=m.Utils.getErrorMsg(e);b.default.danger(t)})},n.deleteUserInBatch=function(){var e=n.state.selectedUserList.map(function(e){return e.email});h.seafileAPI.sysAdminDeleteUserInBatch(e).then(function(t){if(t.data.success.length){var a=n.state.userList,r=a.filter(function(e){return!t.data.success.some(function(t){return t.email==e.email})});n.setState({userList:r,hasUserSelected:e.length!=t.data.success.length});var o=t.data.success.length,i=1==o?(0,g.gettext)("Successfully deleted 1 user."):(0,g.gettext)("Successfully deleted {user_number_placeholder} users.").replace("{user_number_placeholder}",o);b.default.success(i)}t.data.failed.map(function(e){var t=e.email+": "+e.error_msg;b.default.danger(t)})}).catch(function(e){var t=m.Utils.getErrorMsg(e);b.default.danger(t)})},n.importUserInBatch=function(e){b.default.notify((0,g.gettext)("It may take some time, please wait.")),h.seafileAPI.sysAdminImportUserViaFile(e).then(function(e){if(e.data.success.length){var t=e.data.success.map(function(e){return void 0==e.institution&&(e.institution=""),new k.default(e)});n.setState({userList:t.concat(n.state.userList)})}e.data.failed.map(function(e){var t=e.email+": "+e.error_msg;b.default.danger(t)})}).catch(function(e){var t=m.Utils.getErrorMsg(e);b.default.danger(t)})},n.addUser=function(e){b.default.notify((0,g.gettext)("It may take some time, please wait."));var t=e.email,a=e.name,r=e.role,o=e.password;h.seafileAPI.sysAdminAddUser(t,a,r,o).then(function(e){var t=n.state.userList;t.unshift(e.data),n.setState({userList:t}),b.default.success(e.data.add_user_tip)}).catch(function(e){var t=m.Utils.getErrorMsg(e);b.default.danger(t)})},n.resetPerPage=function(e){n.setState({perPage:e},function(){n.getUsersListByPage(1)})},n.updateUser=function(e,t,a){h.seafileAPI.sysAdminUpdateUser(e,t,a).then(function(r){var o=n.state.userList.map(function(n){return n.email==e&&(n[t]=r.data[t]),n});n.setState({userList:o});var i="is_active"==t&&a?r.data.update_status_tip:(0,g.gettext)("Edit succeeded");b.default.success(i)}).catch(function(e){var t=m.Utils.getErrorMsg(e);b.default.danger(t)})},n.updateAdminRole=function(e,t){h.seafileAPI.sysAdminUpdateAdminRole(e,t).then(function(t){var a=n.state.userList.map(function(n){return n.email==e&&(n.admin_role=t.data.role),n});n.setState({userList:a}),b.default.success((0,g.gettext)("Edit succeeded"))}).catch(function(e){var t=m.Utils.getErrorMsg(e);b.default.danger(t)})},n.revokeAdmin=function(e,t){h.seafileAPI.sysAdminUpdateUser(e,"is_staff",!1).then(function(a){var r=n.state.userList.filter(function(t){return t.email!=e});n.setState({userList:r}),b.default.success((0,g.gettext)("Successfully revoked the admin permission of {placeholder}.").replace("{placeholder}",t))}).catch(function(e){var t=m.Utils.getErrorMsg(e);b.default.danger(t)})},n.getOperationsForAll=function(){var e=n.props,t=e.isAdmin,a=e.isLDAPImported;return t?u.default.createElement(d.Button,{className:"btn btn-secondary operation-item",onClick:n.toggleBatchAddAdminDialog},(0,g.gettext)("Add Admin")):a?u.default.createElement("a",{className:"btn btn-secondary operation-item",href:g.siteRoot+"sys/useradmin/export-excel/"},(0,g.gettext)("Export Excel")):u.default.createElement(s.Fragment,null,u.default.createElement(d.Button,{className:"btn btn-secondary operation-item",onClick:n.toggleImportUserDialog},(0,g.gettext)("Import Users")),u.default.createElement(d.Button,{className:"btn btn-secondary operation-item",onClick:n.toggleAddUserDialog},(0,g.gettext)("Add User")),u.default.createElement("a",{className:"btn btn-secondary operation-item",href:g.siteRoot+"sys/useradmin/export-excel/"},(0,g.gettext)("Export Excel")))},n.getCurrentNavItem=function(){var e=n.props,t=e.isAdmin,a=e.isLDAPImported,r="database";return t?r="admin":a&&(r="ldap-imported"),r},n.toggleBatchAddAdminDialog=function(){n.setState({isBatchAddAdminDialogOpen:!n.state.isBatchAddAdminDialogOpen})},n.addAdminInBatch=function(e){h.seafileAPI.sysAdminAddAdminInBatch(e).then(function(e){var t=e.data.success.map(function(e){return new L.default(e)});n.setState({userList:t.concat(n.state.userList)}),e.data.failed.map(function(e){var t=e.email+": "+e.error_msg;b.default.danger(t)})}).catch(function(e){var t=m.Utils.getErrorMsg(e);b.default.danger(t)})},n.getSearch=function(){return n.props.isAdmin?null:u.default.createElement(R.default,{placeholder:(0,g.gettext)("Search users"),submit:n.searchItems})},n.searchItems=function(e){(0,c.navigate)(g.siteRoot+"sys/search-users/?query="+encodeURIComponent(e))},n.state={loading:!0,errorMsg:"",userList:[],hasNextPage:!1,currentPage:1,perPage:25,hasUserSelected:!1,selectedUserList:[],isAllUsersSelected:!1,isImportUserDialogOpen:!1,isAddUserDialogOpen:!1,isBatchSetQuotaDialogOpen:!1,isBatchDeleteUserDialogOpen:!1,isBatchAddAdminDialogOpen:!1},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.isAdmin)this.getUserList();else{var t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=n.perPage,o=n.sortBy,i=void 0===o?"":o,l=n.sortOrder,s=void 0===l?"asc":l;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a),sortBy:t.get("order_by")||i,sortOrder:t.get("direction")||s},function(){e.getUsersListByPage(e.state.currentPage)})}}},{key:"render",value:function(){var e=this.props,t=e.isAdmin,n=e.isLDAPImported,a=this.state,r=a.hasUserSelected,o=a.isImportUserDialogOpen,i=a.isAddUserDialogOpen,l=a.isBatchDeleteUserDialogOpen,c=a.isBatchSetQuotaDialogOpen,f=a.isBatchAddAdminDialogOpen;return u.default.createElement(s.Fragment,null,u.default.createElement(I.default,{search:this.getSearch()},r?u.default.createElement(s.Fragment,null,u.default.createElement(d.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleBatchSetQuotaDialog},(0,g.gettext)("Set Quota")),u.default.createElement(d.Button,{className:"btn btn-secondary operation-item",onClick:this.toggleBatchDeleteUserDialog},(0,g.gettext)("Delete Users"))):this.getOperationsForAll()),u.default.createElement("div",{className:"main-panel-center flex-row"},u.default.createElement("div",{className:"cur-view-container"},u.default.createElement(j.default,{currentItem:this.getCurrentNavItem()}),u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(F.default,{isAdmin:t,isLDAPImported:n,loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortByQuotaUsage:this.sortByQuotaUsage,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getListByPage:this.getUsersListByPage,updateUser:this.updateUser,deleteUser:this.deleteUser,updateAdminRole:this.updateAdminRole,revokeAdmin:this.revokeAdmin,onUserSelected:this.onUserSelected,isAllUsersSelected:this.isAllUsersSelected,toggleSelectAllUsers:this.toggleSelectAllUsers})))),o&&u.default.createElement(_.default,{toggle:this.toggleImportUserDialog,importUserInBatch:this.importUserInBatch}),i&&u.default.createElement(x.default,{dialogTitle:(0,g.gettext)("Add User"),showRole:g.isPro,availableRoles:B,addUser:this.addUser,toggleDialog:this.toggleAddUserDialog}),c&&u.default.createElement(E.default,{toggle:this.toggleBatchSetQuotaDialog,updateQuota:this.setUserQuotaInBatch}),l&&u.default.createElement(D.default,{title:(0,g.gettext)("Delete Users"),message:(0,g.gettext)("Are you sure you want to delete the selected user(s) ?"),executeOperation:this.deleteUserInBatch,confirmBtnText:(0,g.gettext)("Delete"),toggleDialog:this.toggleBatchDeleteUserDialog}),f&&u.default.createElement(C.default,{addAdminInBatch:this.addAdminInBatch,toggle:this.toggleBatchAddAdminDialog}))}}]),t}(s.Component);H.propTypes=X,t.default=H},730:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(1),p=n(60),m=a(p),h={isTextMode:d.default.bool.isRequired,isEditIconShow:d.default.bool.isRequired,roleOptions:d.default.array.isRequired,currentRole:d.default.string.isRequired,onRoleChanged:d.default.func.isRequired},g=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.translateRoles=function(e){switch(e){case"default":return(0,f.gettext)("Default");case"guest":return(0,f.gettext)("Guest");default:return e}},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(m.default,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.roleOptions,currentOption:this.props.currentRole,onOptionChanged:this.props.onRoleChanged,translateOption:this.translateRoles})}}]),t}(u.default.Component);g.propTypes=h,t.default=g},731:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(1),m={currentItem:d.default.string.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navItems=[{name:"all",urlPart:"all-libraries",text:(0,p.gettext)("All")},{name:"system",urlPart:"system-library",text:(0,p.gettext)("System")},{name:"trash",urlPart:"trash-libraries",text:(0,p.gettext)("Trash")}],n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.currentItem;return u.default.createElement("div",{className:"cur-view-path tab-nav-container"},u.default.createElement("ul",{className:"nav"},this.navItems.map(function(t,n){return u.default.createElement("li",{className:"nav-item",key:n},u.default.createElement(f.Link,{to:p.siteRoot+"sys/"+t.urlPart+"/",className:"nav-link"+(e==t.name?" active":"")},t.text))})))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},732:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(1),m={currentItem:d.default.string.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navItems=[{name:"info",urlPart:"info",text:(0,p.gettext)("Info")},{name:"members",urlPart:"members",text:(0,p.gettext)("Members")},{name:"admins",urlPart:"admins",text:(0,p.gettext)("Admins")}],n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.currentItem,n=e.institutionID,a=e.institutionName;return u.default.createElement("div",null,u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},u.default.createElement(f.Link,{to:p.siteRoot+"sys/institutions/"},(0,p.gettext)("Institutions"))," / ",a)),u.default.createElement("ul",{className:"nav border-bottom mx-4"},this.navItems.map(function(e,a){return u.default.createElement("li",{className:"nav-item mr-2",key:a},u.default.createElement(f.Link,{to:p.siteRoot+"sys/institutions/"+n+"/"+e.urlPart+"/",className:"nav-link "+(t==e.name?" active":"")},e.text))})))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},733:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p={displayName:d.default.string.isRequired,helpTip:d.default.string,mainContent:d.default.object.isRequired,extraContent:d.default.object},m=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.helpTip,n=e.displayName,a=e.mainContent,r=e.extraContent;return u.default.createElement(s.Fragment,null,u.default.createElement(f.Row,{className:"my-4"},u.default.createElement(f.Col,{md:"3"},u.default.createElement(f.Label,{className:"web-setting-label"},n)),u.default.createElement(f.Col,{md:"5"},a,t&&u.default.createElement("p",{className:"small text-secondary mt-1"},t)),u.default.createElement(f.Col,{md:"4"},r)))}}]),t}(s.Component);m.propTypes=p,t.default=m},8:function(e,t,n){"use strict";function a(){return o.default.createElement("span",{className:"loading-icon loading-tip"})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=a},83:function(e,t,n){"use strict";function a(e){var t=void 0,n=void 0,a=void 0,r=void 0,i=!1;try{t=(0,o.default)(),n=document.createRange(),a=document.getSelection(),r=document.createElement("a"),r.textContent=e,document.body.appendChild(r),n.selectNode(r),a.addRange(n);document.execCommand("copy");i=!0}catch(e){}finally{a&&("function"==typeof a.removeRange?a.removeRange(n):a.removeAllRanges()),r&&document.body.removeChild(r),t()}return i}Object.defineProperty(t,"__esModule",{value:!0});var r=n(195),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=a},90:function(e,t,n){"use strict";function a(){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}function r(e){document.body.style.paddingRight=e>0?e+"px":null}function o(){return document.body.clientWidth<window.innerWidth}function i(){var e=window.getComputedStyle(document.body,null);return parseInt(e&&e.getPropertyValue("padding-right")||0,10)}function l(){var e=a(),t=document.querySelectorAll(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top")[0],n=t?parseInt(t.style.paddingRight||0,10):0;o()&&r(n+e)}function s(e){Z=e}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z;return t?e.split(" ").map(function(e){return t[e]||e}).join(" "):e}function c(e,t){var n={};return Object.keys(e).forEach(function(a){-1===t.indexOf(a)&&(n[a]=e[a])}),n}function d(e,t){for(var n=Array.isArray(t)?t:[t],a=n.length,r=void 0,o={};a>0;)a-=1,r=n[a],o[r]=e[r];return o}function f(e){F[e]||("undefined"!==typeof console&&console.error(e),F[e]=!0)}function p(e,t){return function(n,a,r){null!==n[a]&&"undefined"!==typeof n[a]&&f('"'+a+'" property of "'+r+'" has been deprecated.\n'+t);for(var o=arguments.length,i=Array(o>3?o-3:0),l=3;l<o;l++)i[l-3]=arguments[l];return e.apply(void 0,[n,a,r].concat(i))}}function m(e,t,n){if(!(e[t]instanceof Element))return new Error("Invalid prop `"+t+"` supplied to `"+n+"`. Expected prop to be an instance of Element. Validation failed.")}function h(e){if(T()(e))return e();if("string"===typeof e&&document){var t=document.querySelector(e);if(null===t&&(t=document.querySelector("#"+e)),null===t)throw new Error("The target '"+e+"' could not be identified in the dom, tip: check spelling");return t}return e}function g(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function v(e,t){return t={exports:{}},e(t,t.exports),t.exports}function b(e){var t=e.tag,n=e.baseClass,a=e.baseClassActive,r=e.className,o=e.cssModule,i=e.children,l=$(e,["tag","baseClass","baseClassActive","className","cssModule","children"]),s=d(l,X),f=c(l,X);return P.a.createElement(yt,s,function(e){var l="entered"===e,s=u(M()(r,n,l&&a),o);return P.a.createElement(t,q({className:s},f),i)})}function y(){}function E(e,t){var n=e.className,a=e.cssModule,r=e.tabId,o=e.tag,i=$(e,["className","cssModule","tabId","tag"]),l=u(M()("tab-pane",n,{active:r===t.activeTabId}),a);return P.a.createElement(o,q({},i,{className:l}))}function w(e){var t=e.className,n=e.closeClassName,a=e.closeAriaLabel,r=e.cssModule,o=e.tag,i=e.color,l=e.isOpen,s=e.toggle,c=e.children,d=e.transition,f=$(e,["className","closeClassName","closeAriaLabel","cssModule","tag","color","isOpen","toggle","children","transition"]),p=u(M()(t,"alert","alert-"+i,{"alert-dismissible":s}),r),m=u(M()("close",n),r);return P.a.createElement(b,q({},f,d,{tag:o,className:p,in:l,role:"alert"}),s?P.a.createElement("button",{type:"button",className:m,"aria-label":a,onClick:s},P.a.createElement("span",{"aria-hidden":"true"},"\xd7")):null,c)}function _(e){return fr[e]||"collapse"}function S(e){return e.scrollHeight}n.d(t,"a",function(){return We}),n.d(t,"b",function(){return Re}),n.d(t,"c",function(){return it}),n.d(t,"d",function(){return ft}),n.d(t,"e",function(){return gt}),n.d(t,"j",function(){return Xn}),n.d(t,"m",function(){return Un}),n.d(t,"k",function(){return Wn}),n.d(t,"l",function(){return qn}),n.d(t,"n",function(){return ta}),n.d(t,"f",function(){return ca}),n.d(t,"g",function(){return ga}),n.d(t,"h",function(){return _a}),n.d(t,"i",function(){return Fa});var x=n(0),P=n.n(x),C=n(2),O=n.n(C),D=n(86),M=n.n(D),k=n(556),T=n.n(k),L=n(557),N=n.n(L),I=n(10),Y=n.n(I),R=n(558),A=(n.n(R),n(564)),j=n.n(A),Z=void 0,F={},B={Fade:150,Collapse:350,Modal:300,Carousel:600},X=["in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],H={ENTERING:"entering",ENTERED:"entered",EXITING:"exiting",EXITED:"exited"},J={esc:27,space:32,tab:9,up:38,down:40},U=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Q=!("undefined"===typeof window||!window.document||!window.document.createElement),G=(Object.freeze({getScrollbarWidth:a,setScrollbarWidth:r,isBodyOverflowing:o,getOriginalBodyPadding:i,conditionallyUpdateScrollbar:l,setGlobalCssModule:s,mapToCssModules:u,omit:c,pick:d,warnOnce:f,deprecated:p,DOMElement:m,getTarget:h,TransitionTimeouts:B,TransitionPropTypeKeys:X,TransitionStatuses:H,keyCodes:J,PopperPlacements:U,canUseDOM:Q}),"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),W=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},z=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),K=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},V=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},$=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n},ee=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},te={tag:O.a.oneOfType([O.a.func,O.a.string]),fluid:O.a.bool,className:O.a.string,cssModule:O.a.object},ne={tag:"div"},ae=function(e){var t=e.className,n=e.cssModule,a=e.fluid,r=e.tag,o=$(e,["className","cssModule","fluid","tag"]),i=u(M()(t,a?"container-fluid":"container"),n);return P.a.createElement(r,q({},o,{className:i}))};ae.propTypes=te,ae.defaultProps=ne;var re={tag:O.a.oneOfType([O.a.func,O.a.string]),noGutters:O.a.bool,className:O.a.string,cssModule:O.a.object},oe={tag:"div"},ie=function(e){var t=e.className,n=e.cssModule,a=e.noGutters,r=e.tag,o=$(e,["className","cssModule","noGutters","tag"]),i=u(M()(t,a?"no-gutters":null,"row"),n);return P.a.createElement(r,q({},o,{className:i}))};ie.propTypes=re,ie.defaultProps=oe;var le=["xs","sm","md","lg","xl"],se=O.a.oneOfType([O.a.number,O.a.string]),ue=O.a.oneOfType([O.a.bool,O.a.number,O.a.string,O.a.shape({size:O.a.oneOfType([O.a.bool,O.a.number,O.a.string]),push:p(se,'Please use the prop "order"'),pull:p(se,'Please use the prop "order"'),order:se,offset:se})]),ce={tag:O.a.oneOfType([O.a.func,O.a.string]),xs:ue,sm:ue,md:ue,lg:ue,xl:ue,className:O.a.string,cssModule:O.a.object,widths:O.a.array},de={tag:"div",widths:le},fe=function(e,t,n){return!0===n||""===n?e?"col":"col-"+t:"auto"===n?e?"col-auto":"col-"+t+"-auto":e?"col-"+n:"col-"+t+"-"+n},pe=function(e){var t=e.className,n=e.cssModule,a=e.widths,r=e.tag,o=$(e,["className","cssModule","widths","tag"]),i=[];a.forEach(function(t,a){var r=e[t];if(delete o[t],r||""===r){var l=!a;if(N()(r)){var s,c=l?"-":"-"+t+"-",d=fe(l,t,r.size);i.push(u(M()((s={},K(s,d,r.size||""===r.size),K(s,"order"+c+r.order,r.order||0===r.order),K(s,"offset"+c+r.offset,r.offset||0===r.offset),s)),n))}else{var f=fe(l,t,r);i.push(f)}}}),i.length||i.push("col");var l=u(M()(t,i),n);return P.a.createElement(r,q({},o,{className:l}))};pe.propTypes=ce,pe.defaultProps=de;var me={light:O.a.bool,dark:O.a.bool,inverse:p(O.a.bool,'Please use the prop "dark"'),full:O.a.bool,fixed:O.a.string,sticky:O.a.string,color:O.a.string,role:O.a.string,tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object,toggleable:p(O.a.oneOfType([O.a.bool,O.a.string]),'Please use the prop "expand"'),expand:O.a.oneOfType([O.a.bool,O.a.string])},he={tag:"nav",expand:!1},ge=function(e){return!1!==e&&(!0===e||"xs"===e?"navbar-expand":"navbar-expand-"+e)},ve={xs:"sm",sm:"md",md:"lg",lg:"xl"},be=function(e){return void 0!==e&&"xl"!==e&&(!1===e?"navbar-expand":"navbar-expand-"+(!0===e?"sm":ve[e]||e))},ye=function(e){var t,n=e.toggleable,a=e.expand,r=e.className,o=e.cssModule,i=e.light,l=e.dark,s=e.inverse,c=e.fixed,d=e.sticky,f=e.color,p=e.tag,m=$(e,["toggleable","expand","className","cssModule","light","dark","inverse","fixed","sticky","color","tag"]),h=u(M()(r,"navbar",ge(a)||be(n),(t={"navbar-light":i,"navbar-dark":s||l},K(t,"bg-"+f,f),K(t,"fixed-"+c,c),K(t,"sticky-"+d,d),t)),o);return P.a.createElement(p,q({},m,{className:h}))};ye.propTypes=me,ye.defaultProps=he;var Ee={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},we={tag:"a"},_e=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"navbar-brand"),n);return P.a.createElement(a,q({},r,{className:o}))};_e.propTypes=Ee,_e.defaultProps=we;var Se={tag:O.a.oneOfType([O.a.func,O.a.string]),type:O.a.string,className:O.a.string,cssModule:O.a.object,children:O.a.node},xe={tag:"button",type:"button"},Pe=function(e){var t=e.className,n=e.cssModule,a=e.children,r=e.tag,o=$(e,["className","cssModule","children","tag"]),i=u(M()(t,"navbar-toggler"),n);return P.a.createElement(r,q({},o,{className:i}),a||P.a.createElement("span",{className:u("navbar-toggler-icon",n)}))};Pe.propTypes=Se,Pe.defaultProps=xe;var Ce={tabs:O.a.bool,pills:O.a.bool,vertical:O.a.oneOfType([O.a.bool,O.a.string]),horizontal:O.a.string,justified:O.a.bool,fill:O.a.bool,navbar:O.a.bool,card:O.a.bool,tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},Oe={tag:"ul",vertical:!1},De=function(e){return!1!==e&&(!0===e||"xs"===e?"flex-column":"flex-"+e+"-column")},Me=function(e){var t=e.className,n=e.cssModule,a=e.tabs,r=e.pills,o=e.vertical,i=e.horizontal,l=e.justified,s=e.fill,c=e.navbar,d=e.card,f=e.tag,p=$(e,["className","cssModule","tabs","pills","vertical","horizontal","justified","fill","navbar","card","tag"]),m=u(M()(t,c?"navbar-nav":"nav",!!i&&"justify-content-"+i,De(o),{"nav-tabs":a,"card-header-tabs":d&&a,"nav-pills":r,"card-header-pills":d&&r,"nav-justified":l,"nav-fill":s}),n);return P.a.createElement(f,q({},p,{className:m}))};Me.propTypes=Ce,Me.defaultProps=Oe;var ke={tag:O.a.oneOfType([O.a.func,O.a.string]),active:O.a.bool,className:O.a.string,cssModule:O.a.object},Te={tag:"li"},Le=function(e){var t=e.className,n=e.cssModule,a=e.active,r=e.tag,o=$(e,["className","cssModule","active","tag"]),i=u(M()(t,"nav-item",!!a&&"active"),n);return P.a.createElement(r,q({},o,{className:i}))};Le.propTypes=ke,Le.defaultProps=Te;var Ne={disabled:O.a.bool,dropup:p(O.a.bool,'Please use the prop "direction" with the value "up".'),direction:O.a.oneOf(["up","down","left","right"]),group:O.a.bool,isOpen:O.a.bool,nav:O.a.bool,active:O.a.bool,addonType:O.a.oneOfType([O.a.bool,O.a.oneOf(["prepend","append"])]),size:O.a.string,tag:O.a.string,toggle:O.a.func,children:O.a.node,className:O.a.string,cssModule:O.a.object,inNavbar:O.a.bool},Ie={isOpen:!1,direction:"down",nav:!1,active:!1,addonType:!1,inNavbar:!1},Ye={toggle:O.a.func.isRequired,isOpen:O.a.bool.isRequired,direction:O.a.oneOf(["up","down","left","right"]).isRequired,inNavbar:O.a.bool.isRequired},Re=function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addEvents=n.addEvents.bind(n),n.handleDocumentClick=n.handleDocumentClick.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.removeEvents=n.removeEvents.bind(n),n.toggle=n.toggle.bind(n),n}return V(t,e),z(t,[{key:"getChildContext",value:function(){return{toggle:this.props.toggle,isOpen:this.props.isOpen,direction:"down"===this.props.direction&&this.props.dropup?"up":this.props.direction,inNavbar:this.props.inNavbar}}},{key:"componentDidMount",value:function(){this.handleProps()}},{key:"componentDidUpdate",value:function(e){this.props.isOpen!==e.isOpen&&this.handleProps()}},{key:"componentWillUnmount",value:function(){this.removeEvents()}},{key:"getContainer",value:function(){return Y.a.findDOMNode(this)}},{key:"addEvents",value:function(){var e=this;["click","touchstart","keyup"].forEach(function(t){return document.addEventListener(t,e.handleDocumentClick,!0)})}},{key:"removeEvents",value:function(){var e=this;["click","touchstart","keyup"].forEach(function(t){return document.removeEventListener(t,e.handleDocumentClick,!0)})}},{key:"handleDocumentClick",value:function(e){if(!e||3!==e.which&&("keyup"!==e.type||e.which===J.tab)){var t=this.getContainer();(!t.contains(e.target)||t===e.target||"keyup"===e.type&&e.which!==J.tab)&&this.toggle(e)}}},{key:"handleKeyDown",value:function(e){if(!(-1===[J.esc,J.up,J.down,J.space].indexOf(e.which)||/button/i.test(e.target.tagName)&&e.which===J.space||/input|textarea/i.test(e.target.tagName))&&(e.preventDefault(),!this.props.disabled)){var t=this.getContainer();if(e.which===J.space&&this.props.isOpen&&t!==e.target&&e.target.click(),e.which===J.esc||!this.props.isOpen)return this.toggle(e),void t.querySelector("[aria-expanded]").focus();var n=u("dropdown-menu",this.props.cssModule),a=u("dropdown-item",this.props.cssModule),r=u("disabled",this.props.cssModule),o=t.querySelectorAll("."+n+" ."+a+":not(."+r+")");if(o.length){for(var i=-1,l=0;l<o.length;l+=1)if(o[l]===e.target){i=l;break}e.which===J.up&&i>0&&(i-=1),e.which===J.down&&i<o.length-1&&(i+=1),i<0&&(i=0),o[i].focus()}}}},{key:"handleProps",value:function(){this.props.isOpen?this.addEvents():this.removeEvents()}},{key:"toggle",value:function(e){return this.props.disabled?e&&e.preventDefault():this.props.toggle(e)}},{key:"render",value:function(){var e,t=c(this.props,["toggle","disabled","inNavbar","direction"]),n=t.className,a=t.cssModule,r=t.dropup,o=t.isOpen,i=t.group,l=t.size,s=t.nav,d=t.active,f=t.addonType,p=$(t,["className","cssModule","dropup","isOpen","group","size","nav","active","addonType"]),m="down"===this.props.direction&&r?"up":this.props.direction;p.tag=p.tag||(s?"li":"div");var h=u(M()(n,"down"!==m&&"drop"+m,!(!s||!d)&&"active",(e={},K(e,"input-group-"+f,f),K(e,"btn-group",i),K(e,"btn-group-"+l,!!l),K(e,"dropdown",!i&&!f),K(e,"show",o),K(e,"nav-item",s),e)),a);return P.a.createElement(R.Manager,q({},p,{className:h,onKeyDown:this.handleKeyDown}))}}]),t}(P.a.Component);Re.propTypes=Ne,Re.defaultProps=Ie,Re.childContextTypes=Ye;var Ae={tag:O.a.oneOfType([O.a.func,O.a.string]),innerRef:O.a.oneOfType([O.a.func,O.a.string]),disabled:O.a.bool,active:O.a.bool,className:O.a.string,cssModule:O.a.object,onClick:O.a.func,href:O.a.any},je={tag:"a"},Ze=function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return V(t,e),z(t,[{key:"onClick",value:function(e){if(this.props.disabled)return void e.preventDefault();"#"===this.props.href&&e.preventDefault(),this.props.onClick&&this.props.onClick(e)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.cssModule,a=e.active,r=e.tag,o=e.innerRef,i=$(e,["className","cssModule","active","tag","innerRef"]),l=u(M()(t,"nav-link",{disabled:i.disabled,active:a}),n);return P.a.createElement(r,q({},i,{ref:o,onClick:this.onClick,className:l}))}}]),t}(P.a.Component);Ze.propTypes=Ae,Ze.defaultProps=je;var Fe={tag:O.a.string,className:O.a.string,cssModule:O.a.object},Be={tag:"ol"},Xe=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"breadcrumb"),n);return P.a.createElement(a,q({},r,{className:o}))};Xe.propTypes=Fe,Xe.defaultProps=Be;var He={tag:O.a.oneOfType([O.a.func,O.a.string]),active:O.a.bool,className:O.a.string,cssModule:O.a.object},Je={tag:"li"},Ue=function(e){var t=e.className,n=e.cssModule,a=e.active,r=e.tag,o=$(e,["className","cssModule","active","tag"]),i=u(M()(t,!!a&&"active","breadcrumb-item"),n);return P.a.createElement(r,q({},o,{className:i}))};Ue.propTypes=He,Ue.defaultProps=Je;var Qe={active:O.a.bool,block:O.a.bool,color:O.a.string,disabled:O.a.bool,outline:O.a.bool,tag:O.a.oneOfType([O.a.func,O.a.string]),innerRef:O.a.oneOfType([O.a.func,O.a.string]),onClick:O.a.func,size:O.a.string,children:O.a.node,className:O.a.string,cssModule:O.a.object},Ge={color:"secondary",tag:"button"},We=function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return V(t,e),z(t,[{key:"onClick",value:function(e){if(this.props.disabled)return void e.preventDefault();this.props.onClick&&this.props.onClick(e)}},{key:"render",value:function(){var e=this.props,t=e.active,n=e.block,a=e.className,r=e.cssModule,o=e.color,i=e.outline,l=e.size,s=e.tag,c=e.innerRef,d=$(e,["active","block","className","cssModule","color","outline","size","tag","innerRef"]),f=u(M()(a,"btn","btn"+(i?"-outline":"")+"-"+o,!!l&&"btn-"+l,!!n&&"btn-block",{active:t,disabled:this.props.disabled}),r);return d.href&&"button"===s&&(s="a"),P.a.createElement(s,q({type:"button"===s&&d.onClick?"button":void 0},d,{className:f,ref:c,onClick:this.onClick}))}}]),t}(P.a.Component);We.propTypes=Qe,We.defaultProps=Ge;var ze={children:O.a.node},Ke=function(e){return P.a.createElement(Re,q({group:!0},e))};Ke.propTypes=ze;var qe={tag:O.a.oneOfType([O.a.func,O.a.string]),"aria-label":O.a.string,className:O.a.string,cssModule:O.a.object,role:O.a.string,size:O.a.string,vertical:O.a.bool},Ve={tag:"div",role:"group"},$e=function(e){var t=e.className,n=e.cssModule,a=e.size,r=e.vertical,o=e.tag,i=$(e,["className","cssModule","size","vertical","tag"]),l=u(M()(t,!!a&&"btn-group-"+a,r?"btn-group-vertical":"btn-group"),n);return P.a.createElement(o,q({},i,{className:l}))};$e.propTypes=qe,$e.defaultProps=Ve;var et={tag:O.a.oneOfType([O.a.func,O.a.string]),"aria-label":O.a.string,className:O.a.string,cssModule:O.a.object,role:O.a.string},tt={tag:"div",role:"toolbar"},nt=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"btn-toolbar"),n);return P.a.createElement(a,q({},r,{className:o}))};nt.propTypes=et,nt.defaultProps=tt;var at={children:O.a.node,active:O.a.bool,disabled:O.a.bool,divider:O.a.bool,tag:O.a.oneOfType([O.a.func,O.a.string]),header:O.a.bool,onClick:O.a.func,className:O.a.string,cssModule:O.a.object,toggle:O.a.bool},rt={toggle:O.a.func},ot={tag:"button",toggle:!0},it=function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.getTabIndex=n.getTabIndex.bind(n),n}return V(t,e),z(t,[{key:"onClick",value:function(e){if(this.props.disabled||this.props.header||this.props.divider)return void e.preventDefault();this.props.onClick&&this.props.onClick(e),this.props.toggle&&this.context.toggle(e)}},{key:"getTabIndex",value:function(){return this.props.disabled||this.props.header||this.props.divider?"-1":"0"}},{key:"render",value:function(){var e=this.getTabIndex(),t=c(this.props,["toggle"]),n=t.className,a=t.cssModule,r=t.divider,o=t.tag,i=t.header,l=t.active,s=$(t,["className","cssModule","divider","tag","header","active"]),d=u(M()(n,{disabled:s.disabled,"dropdown-item":!r&&!i,active:l,"dropdown-header":i,"dropdown-divider":r}),a);return"button"===o&&(i?o="h6":r?o="div":s.href&&(o="a")),P.a.createElement(o,q({type:"button"===o&&(s.onClick||this.props.toggle)?"button":void 0},s,{tabIndex:e,className:d,onClick:this.onClick}))}}]),t}(P.a.Component);it.propTypes=at,it.defaultProps=ot,it.contextTypes=rt;var lt={tag:O.a.string,children:O.a.node.isRequired,right:O.a.bool,flip:O.a.bool,className:O.a.string,cssModule:O.a.object},st={tag:"div",flip:!0},ut={isOpen:O.a.bool.isRequired,direction:O.a.oneOf(["up","down","left","right"]).isRequired,inNavbar:O.a.bool.isRequired},ct={flip:{enabled:!1}},dt={up:"top",left:"left",right:"right",down:"bottom"},ft=function(e,t){var n=e.className,a=e.cssModule,r=e.right,o=e.tag,i=e.flip,l=$(e,["className","cssModule","right","tag","flip"]),s=u(M()(n,"dropdown-menu",{"dropdown-menu-right":r,show:t.isOpen}),a),c=o;if(t.isOpen&&!t.inNavbar){c=R.Popper;var d=dt[t.direction]||"bottom",f=r?"end":"start";l.placement=d+"-"+f,l.component=o,l.modifiers=i?void 0:ct}return P.a.createElement(c,q({tabIndex:"-1",role:"menu"},l,{"aria-hidden":!t.isOpen,className:s}))};ft.propTypes=lt,ft.defaultProps=st,ft.contextTypes=ut;var pt={caret:O.a.bool,color:O.a.string,children:O.a.node,className:O.a.string,cssModule:O.a.object,disabled:O.a.bool,onClick:O.a.func,"aria-haspopup":O.a.bool,split:O.a.bool,tag:O.a.oneOfType([O.a.func,O.a.string]),nav:O.a.bool},mt={"aria-haspopup":!0,color:"secondary"},ht={isOpen:O.a.bool.isRequired,toggle:O.a.func.isRequired,inNavbar:O.a.bool.isRequired},gt=function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return V(t,e),z(t,[{key:"onClick",value:function(e){if(this.props.disabled)return void e.preventDefault();this.props.nav&&!this.props.tag&&e.preventDefault(),this.props.onClick&&this.props.onClick(e),this.context.toggle(e)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.color,a=e.cssModule,r=e.caret,o=e.split,i=e.nav,l=e.tag,s=$(e,["className","color","cssModule","caret","split","nav","tag"]),c=s["aria-label"]||"Toggle Dropdown",d=u(M()(t,{"dropdown-toggle":r||o,"dropdown-toggle-split":o,"nav-link":i}),a),f=s.children||P.a.createElement("span",{className:"sr-only"},c),p=void 0;return i&&!l?(p="a",s.href="#"):l?p=l:(p=We,s.color=n,s.cssModule=a),this.context.inNavbar?P.a.createElement(p,q({},s,{className:d,onClick:this.onClick,"aria-expanded":this.context.isOpen,children:f})):P.a.createElement(R.Target,q({},s,{className:d,component:p,onClick:this.onClick,"aria-expanded":this.context.isOpen,children:f}))}}]),t}(P.a.Component);gt.propTypes=pt,gt.defaultProps=mt,gt.contextTypes=ht;var vt=v(function(e,t){function n(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!==typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0,t.transitionTimeout=n;var a=function(e){return e&&e.__esModule?e:{default:e}}(O.a);t.timeoutsShape=a.default.oneOfType([a.default.number,a.default.shape({enter:a.default.number,exit:a.default.number}).isRequired]),t.classNamesShape=a.default.oneOfType([a.default.string,a.default.shape({enter:a.default.string,exit:a.default.string,active:a.default.string}),a.default.shape({enter:a.default.string,enterActive:a.default.string,exit:a.default.string,exitActive:a.default.string})])});g(vt);var bt=v(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":G(t))&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":G(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){}t.__esModule=!0,t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(O.a),u=n(P.a),c=n(Y.a),d=t.UNMOUNTED="unmounted",f=t.EXITED="exited",p=t.ENTERING="entering",m=t.ENTERED="entered",h=t.EXITING="exiting",g=function(e){function t(n,a){r(this,t);var i=o(this,e.call(this,n,a)),l=a.transitionGroup,s=l&&!l.isMounting?n.enter:n.appear,u=void 0;return i.nextStatus=null,n.in?s?(u=f,i.nextStatus=p):u=m:u=n.unmountOnExit||n.mountOnEnter?d:f,i.state={status:u},i.nextCallback=null,i}return i(t,e),t.prototype.getChildContext=function(){return{transitionGroup:null}},t.prototype.componentDidMount=function(){this.updateStatus(!0)},t.prototype.componentWillReceiveProps=function(e){var t=this.pendingState||this.state,n=t.status;e.in?(n===d&&this.setState({status:f}),n!==p&&n!==m&&(this.nextStatus=p)):n!==p&&n!==m||(this.nextStatus=h)},t.prototype.componentDidUpdate=function(){this.updateStatus()},t.prototype.componentWillUnmount=function(){this.cancelNextCallback()},t.prototype.getTimeouts=function(){var e=this.props.timeout,t=void 0,n=void 0,a=void 0;return t=n=a=e,null!=e&&"number"!==typeof e&&(t=e.exit,n=e.enter,a=e.appear),{exit:t,enter:n,appear:a}},t.prototype.updateStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nextStatus;if(null!==t){this.nextStatus=null,this.cancelNextCallback();var n=c.default.findDOMNode(this);t===p?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===f&&this.setState({status:d})},t.prototype.performEnter=function(e,t){var n=this,a=this.props.enter,r=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,o=this.getTimeouts();if(!t&&!a)return void this.safeSetState({status:m},function(){n.props.onEntered(e)});this.props.onEnter(e,r),this.safeSetState({status:p},function(){n.props.onEntering(e,r),n.onTransitionEnd(e,o.enter,function(){n.safeSetState({status:m},function(){n.props.onEntered(e,r)})})})},t.prototype.performExit=function(e){var t=this,n=this.props.exit,a=this.getTimeouts();if(!n)return void this.safeSetState({status:f},function(){t.props.onExited(e)});this.props.onExit(e),this.safeSetState({status:h},function(){t.props.onExiting(e),t.onTransitionEnd(e,a.exit,function(){t.safeSetState({status:f},function(){t.props.onExited(e)})})})},t.prototype.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},t.prototype.safeSetState=function(e,t){var n=this;this.pendingState=e,t=this.setNextCallback(t),this.setState(e,function(){n.pendingState=null,t()})},t.prototype.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(a){n&&(n=!1,t.nextCallback=null,e(a))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},t.prototype.onTransitionEnd=function(e,t,n){this.setNextCallback(n),e?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},t.prototype.render=function(){var e=this.state.status;if(e===d)return null;var t=this.props,n=t.children,r=a(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"===typeof n)return n(e,r);var o=u.default.Children.only(n);return u.default.cloneElement(o,r)},t}(u.default.Component);g.contextTypes={transitionGroup:s.object},g.childContextTypes={transitionGroup:function(){}},g.propTypes={},g.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:l,onEntering:l,onEntered:l,onExit:l,onExiting:l,onExited:l},g.UNMOUNTED=0,g.EXITED=1,g.ENTERING=2,g.ENTERED=3,g.EXITING=4,t.default=g}),yt=g(bt),Et=q({},yt.propTypes,{children:O.a.oneOfType([O.a.arrayOf(O.a.node),O.a.node]),tag:O.a.oneOfType([O.a.string,O.a.func]),baseClass:O.a.string,baseClassActive:O.a.string,className:O.a.string,cssModule:O.a.object}),wt=q({},yt.defaultProps,{tag:"div",baseClass:"fade",baseClassActive:"show",timeout:B.Fade,appear:!0,enter:!0,exit:!0,in:!0});b.propTypes=Et,b.defaultProps=wt;var _t={color:O.a.string,pill:O.a.bool,tag:O.a.oneOfType([O.a.func,O.a.string]),children:O.a.node,className:O.a.string,cssModule:O.a.object},St={color:"secondary",pill:!1,tag:"span"},xt=function(e){var t=e.className,n=e.cssModule,a=e.color,r=e.pill,o=e.tag,i=$(e,["className","cssModule","color","pill","tag"]),l=u(M()(t,"badge","badge-"+a,!!r&&"badge-pill"),n);return i.href&&"span"===o&&(o="a"),P.a.createElement(o,q({},i,{className:l}))};xt.propTypes=_t,xt.defaultProps=St;var Pt={tag:O.a.oneOfType([O.a.func,O.a.string]),inverse:O.a.bool,color:O.a.string,block:p(O.a.bool,'Please use the props "body"'),body:O.a.bool,outline:O.a.bool,className:O.a.string,cssModule:O.a.object},Ct={tag:"div"},Ot=function(e){var t=e.className,n=e.cssModule,a=e.color,r=e.block,o=e.body,i=e.inverse,l=e.outline,s=e.tag,c=$(e,["className","cssModule","color","block","body","inverse","outline","tag"]),d=u(M()(t,"card",!!i&&"text-white",!(!r&&!o)&&"card-body",!!a&&(l?"border":"bg")+"-"+a),n);return P.a.createElement(s,q({},c,{className:d}))};Ot.propTypes=Pt,Ot.defaultProps=Ct;var Dt={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},Mt={tag:"div"},kt=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"card-group"),n);return P.a.createElement(a,q({},r,{className:o}))};kt.propTypes=Dt,kt.defaultProps=Mt;var Tt={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},Lt={tag:"div"},Nt=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"card-deck"),n);return P.a.createElement(a,q({},r,{className:o}))};Nt.propTypes=Tt,Nt.defaultProps=Lt;var It={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},Yt={tag:"div"},Rt=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"card-columns"),n);return P.a.createElement(a,q({},r,{className:o}))};Rt.propTypes=It,Rt.defaultProps=Yt;var At={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},jt={tag:"div"},Zt=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"card-body"),n);return P.a.createElement(a,q({},r,{className:o}))};Zt.propTypes=At,Zt.defaultProps=jt;var Ft={tag:O.a.oneOfType([O.a.func,O.a.string]),innerRef:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},Bt={tag:"a"},Xt=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=e.innerRef,o=$(e,["className","cssModule","tag","innerRef"]),i=u(M()(t,"card-link"),n);return P.a.createElement(a,q({},o,{ref:r,className:i}))};Xt.propTypes=Ft,Xt.defaultProps=Bt;var Ht={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},Jt={tag:"div"},Ut=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"card-footer"),n);return P.a.createElement(a,q({},r,{className:o}))};Ut.propTypes=Ht,Ut.defaultProps=Jt;var Qt={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},Gt={tag:"div"},Wt=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"card-header"),n);return P.a.createElement(a,q({},r,{className:o}))};Wt.propTypes=Qt,Wt.defaultProps=Gt;var zt={tag:O.a.oneOfType([O.a.func,O.a.string]),top:O.a.bool,bottom:O.a.bool,className:O.a.string,cssModule:O.a.object},Kt={tag:"img"},qt=function(e){var t=e.className,n=e.cssModule,a=e.top,r=e.bottom,o=e.tag,i=$(e,["className","cssModule","top","bottom","tag"]),l="card-img";a&&(l="card-img-top"),r&&(l="card-img-bottom");var s=u(M()(t,l),n);return P.a.createElement(o,q({},i,{className:s}))};qt.propTypes=zt,qt.defaultProps=Kt;var Vt={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},$t={tag:"div"},en=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"card-img-overlay"),n);return P.a.createElement(a,q({},r,{className:o}))};en.propTypes=Vt,en.defaultProps=$t;var tn=function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={startAnimation:!1},n.onEnter=n.onEnter.bind(n),n.onEntering=n.onEntering.bind(n),n.onExit=n.onExit.bind(n),n.onExiting=n.onExiting.bind(n),n.onExited=n.onExited.bind(n),n}return V(t,e),z(t,[{key:"onEnter",value:function(e,t){this.setState({startAnimation:!1}),this.props.onEnter(e,t)}},{key:"onEntering",value:function(e,t){var n=e.offsetHeight;return this.setState({startAnimation:!0}),this.props.onEntering(e,t),n}},{key:"onExit",value:function(e){this.setState({startAnimation:!1}),this.props.onExit(e)}},{key:"onExiting",value:function(e){this.setState({startAnimation:!0}),e.dispatchEvent(new CustomEvent("slide.bs.carousel")),this.props.onExiting(e)}},{key:"onExited",value:function(e){e.dispatchEvent(new CustomEvent("slid.bs.carousel")),this.props.onExited(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.in,a=t.children,r=t.cssModule,o=t.slide,i=t.tag,l=t.className,s=$(t,["in","children","cssModule","slide","tag","className"]);return P.a.createElement(yt,q({},s,{enter:o,exit:o,in:n,onEnter:this.onEnter,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),function(t){var n=e.context.direction,o=t===H.ENTERED||t===H.EXITING,s=(t===H.ENTERING||t===H.EXITING)&&e.state.startAnimation&&("right"===n?"carousel-item-left":"carousel-item-right"),c=t===H.ENTERING&&("right"===n?"carousel-item-next":"carousel-item-prev"),d=u(M()(l,"carousel-item",o&&"active",s,c),r);return P.a.createElement(i,{className:d},a)})}}]),t}(P.a.Component);tn.propTypes=q({},yt.propTypes,{tag:O.a.oneOfType([O.a.func,O.a.string]),in:O.a.bool,cssModule:O.a.object,children:O.a.node,slide:O.a.bool,className:O.a.string}),tn.defaultProps=q({},yt.defaultProps,{tag:"div",timeout:B.Carousel,slide:!0}),tn.contextTypes={direction:O.a.string};var nn=function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleKeyPress=n.handleKeyPress.bind(n),n.renderItems=n.renderItems.bind(n),n.hoverStart=n.hoverStart.bind(n),n.hoverEnd=n.hoverEnd.bind(n),n.state={direction:"right",indicatorClicked:!1},n}return V(t,e),z(t,[{key:"getChildContext",value:function(){return{direction:this.state.direction}}},{key:"componentDidMount",value:function(){"carousel"===this.props.ride&&this.setInterval(),document.addEventListener("keyup",this.handleKeyPress)}},{key:"componentWillReceiveProps",value:function(e){this.setInterval(e),this.props.activeIndex+1===e.activeIndex?this.setState({direction:"right"}):this.props.activeIndex-1===e.activeIndex?this.setState({direction:"left"}):this.props.activeIndex>e.activeIndex?this.setState({direction:this.state.indicatorClicked?"left":"right"}):this.props.activeIndex!==e.activeIndex&&this.setState({direction:this.state.indicatorClicked?"right":"left"}),this.setState({indicatorClicked:!1})}},{key:"componentWillUnmount",value:function(){this.clearInterval(),document.removeEventListener("keyup",this.handleKeyPress)}},{key:"setInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.clearInterval(),e.interval&&(this.cycleInterval=setInterval(function(){e.next()},parseInt(e.interval,10)))})},{key:"clearInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){clearInterval(this.cycleInterval)})},{key:"hoverStart",value:function(){if("hover"===this.props.pause&&this.clearInterval(),this.props.mouseEnter){var e;(e=this.props).mouseEnter.apply(e,arguments)}}},{key:"hoverEnd",value:function(){if("hover"===this.props.pause&&this.setInterval(),this.props.mouseLeave){var e;(e=this.props).mouseLeave.apply(e,arguments)}}},{key:"handleKeyPress",value:function(e){this.props.keyboard&&(37===e.keyCode?this.props.previous():39===e.keyCode&&this.props.next())}},{key:"renderItems",value:function(e,t){var n=this,a=this.props.slide;return P.a.createElement("div",{role:"listbox",className:t},e.map(function(e,t){var r=t===n.props.activeIndex;return P.a.cloneElement(e,{in:r,slide:a})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.cssModule,r=t.slide,o=t.className,i=u(M()(o,"carousel",r&&"slide"),a),l=u(M()("carousel-inner"),a);if(n.every(function(e){return e.type===tn}))return P.a.createElement("div",{className:i,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd},this.renderItems(n,l));if(n[0]instanceof Array){var s=n[0],c=n[1],d=n[2];return P.a.createElement("div",{className:i,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd},this.renderItems(s,l),c,d)}var f=n[0],p=function(t){"function"===typeof f.props.onClickHandler&&e.setState({indicatorClicked:!0},function(){return f.props.onClickHandler(t)})},m=P.a.cloneElement(f,{onClickHandler:p}),h=n[1],g=n[2],v=n[3];return P.a.createElement("div",{className:i,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd},m,this.renderItems(h,l),g,v)}}]),t}(P.a.Component);nn.propTypes={activeIndex:O.a.number,next:O.a.func.isRequired,previous:O.a.func.isRequired,keyboard:O.a.bool,pause:O.a.oneOf(["hover",!1]),ride:O.a.oneOf(["carousel"]),interval:O.a.oneOfType([O.a.number,O.a.string,O.a.bool]),children:O.a.array,mouseEnter:O.a.func,mouseLeave:O.a.func,slide:O.a.bool,cssModule:O.a.object,className:O.a.string},nn.defaultProps={interval:5e3,pause:"hover",keyboard:!0,slide:!0},nn.childContextTypes={direction:O.a.string};var an=function(e){var t=e.direction,n=e.onClickHandler,a=e.cssModule,r=e.directionText,o=e.className,i=u(M()(o,"carousel-control-"+t),a),l=u(M()("carousel-control-"+t+"-icon"),a),s=u(M()("sr-only"),a);return P.a.createElement("a",{className:i,role:"button",tabIndex:"0",onClick:function(e){e.preventDefault(),n()}},P.a.createElement("span",{className:l,"aria-hidden":"true"}),P.a.createElement("span",{className:s},r||t))};an.propTypes={direction:O.a.oneOf(["prev","next"]).isRequired,onClickHandler:O.a.func.isRequired,cssModule:O.a.object,directionText:O.a.string,className:O.a.string};var rn=function(e){var t=e.items,n=e.activeIndex,a=e.cssModule,r=e.onClickHandler,o=e.className,i=u(M()(o,"carousel-indicators"),a),l=t.map(function(e,t){var o=u(M()({active:n===t}),a);return P.a.createElement("li",{key:""+(e.key||e.src)+e.caption+e.altText,onClick:function(e){e.preventDefault(),r(t)},className:o})});return P.a.createElement("ol",{className:i},l)};rn.propTypes={items:O.a.array.isRequired,activeIndex:O.a.number.isRequired,cssModule:O.a.object,onClickHandler:O.a.func.isRequired,className:O.a.string};var on=function(e){var t=e.captionHeader,n=e.captionText,a=e.cssModule,r=e.className,o=u(M()(r,"carousel-caption","d-none","d-md-block"),a);return P.a.createElement("div",{className:o},P.a.createElement("h3",null,t),P.a.createElement("p",null,n))};on.propTypes={captionHeader:O.a.string,captionText:O.a.string.isRequired,cssModule:O.a.object,className:O.a.string};var ln={items:O.a.array.isRequired,indicators:O.a.bool,controls:O.a.bool,autoPlay:O.a.bool,activeIndex:O.a.number,next:O.a.func,previous:O.a.func,goToIndex:O.a.func},sn=function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.animating=!1,n.state={activeIndex:0},n.next=n.next.bind(n),n.previous=n.previous.bind(n),n.goToIndex=n.goToIndex.bind(n),n.onExiting=n.onExiting.bind(n),n.onExited=n.onExited.bind(n),n}return V(t,e),z(t,[{key:"onExiting",value:function(){this.animating=!0}},{key:"onExited",value:function(){this.animating=!1}},{key:"next",value:function(){if(!this.animating){var e=this.state.activeIndex===this.props.items.length-1?0:this.state.activeIndex+1;this.setState({activeIndex:e})}}},{key:"previous",value:function(){if(!this.animating){var e=0===this.state.activeIndex?this.props.items.length-1:this.state.activeIndex-1;this.setState({activeIndex:e})}}},{key:"goToIndex",value:function(e){this.animating||this.setState({activeIndex:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoPlay,a=t.indicators,r=t.controls,o=t.items,i=t.goToIndex,l=$(t,["autoPlay","indicators","controls","items","goToIndex"]),s=this.state.activeIndex,u=o.map(function(t){return P.a.createElement(tn,{onExiting:e.onExiting,onExited:e.onExited,key:t.src},P.a.createElement("img",{src:t.src,alt:t.altText}),P.a.createElement(on,{captionText:t.caption,captionHeader:t.caption}))});return P.a.createElement(nn,q({activeIndex:s,next:this.next,previous:this.previous,ride:n?"carousel":void 0},l),a&&P.a.createElement(rn,{items:o,activeIndex:l.activeIndex||s,onClickHandler:i||this.goToIndex}),u,r&&P.a.createElement(an,{direction:"prev",directionText:"Previous",onClickHandler:l.previous||this.previous}),r&&P.a.createElement(an,{direction:"next",directionText:"Next",onClickHandler:l.next||this.next}))}}]),t}(x.Component);sn.propTypes=ln,sn.defaultProps={controls:!0,indicators:!0,autoPlay:!0};var un={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},cn={tag:"h6"},dn=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"card-subtitle"),n);return P.a.createElement(a,q({},r,{className:o}))};dn.propTypes=un,dn.defaultProps=cn;var fn={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},pn={tag:"p"},mn=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"card-text"),n);return P.a.createElement(a,q({},r,{className:o}))};mn.propTypes=fn,mn.defaultProps=pn;var hn={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},gn={tag:"h5"},vn=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"card-title"),n);return P.a.createElement(a,q({},r,{className:o}))};vn.propTypes=hn,vn.defaultProps=gn;var bn={children:O.a.node.isRequired,className:O.a.string,placement:O.a.string,placementPrefix:O.a.string,hideArrow:O.a.bool,tag:O.a.string,isOpen:O.a.bool.isRequired,cssModule:O.a.object,offset:O.a.oneOfType([O.a.string,O.a.number]),fallbackPlacement:O.a.oneOfType([O.a.string,O.a.array]),flip:O.a.bool,container:O.a.oneOfType([O.a.string,O.a.func,m]),target:O.a.oneOfType([O.a.string,O.a.func,m]).isRequired,modifiers:O.a.object},yn={placement:"auto",hideArrow:!1,isOpen:!1,offset:0,fallbackPlacement:"flip",flip:!0,container:"body",modifiers:{}},En={popperManager:O.a.object.isRequired},wn=function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handlePlacementChange=n.handlePlacementChange.bind(n),n.setTargetNode=n.setTargetNode.bind(n),n.getTargetNode=n.getTargetNode.bind(n),n.state={},n}return V(t,e),z(t,[{key:"getChildContext",value:function(){return{popperManager:{setTargetNode:this.setTargetNode,getTargetNode:this.getTargetNode}}}},{key:"componentDidMount",value:function(){this.handleProps()}},{key:"componentDidUpdate",value:function(e){this.props.isOpen!==e.isOpen?this.handleProps():this._element&&this.renderIntoSubtree()}},{key:"componentWillUnmount",value:function(){this.hide()}},{key:"setTargetNode",value:function(e){this.targetNode=e}},{key:"getTargetNode",value:function(){return this.targetNode}},{key:"getContainerNode",value:function(){return h(this.props.container)}},{key:"handlePlacementChange",value:function(e){return this.state.placement!==e.placement&&this.setState({placement:e.placement}),e}},{key:"handleProps",value:function(){"inline"!==this.props.container&&(this.props.isOpen?this.show():this.hide())}},{key:"hide",value:function(){this._element&&(this.getContainerNode().removeChild(this._element),Y.a.unmountComponentAtNode(this._element),this._element=null)}},{key:"show",value:function(){this._element=document.createElement("div"),this.getContainerNode().appendChild(this._element),this.renderIntoSubtree(),this._element.childNodes&&this._element.childNodes[0]&&this._element.childNodes[0].focus&&this._element.childNodes[0].focus()}},{key:"renderIntoSubtree",value:function(){Y.a.unstable_renderSubtreeIntoContainer(this,this.renderChildren(),this._element)}},{key:"renderChildren",value:function(){var e=this.props,t=e.cssModule,n=e.children,a=(e.isOpen,e.flip),r=(e.target,e.offset),o=e.fallbackPlacement,i=e.placementPrefix,l=e.hideArrow,s=e.className,c=e.tag,d=(e.container,e.modifiers),f=$(e,["cssModule","children","isOpen","flip","target","offset","fallbackPlacement","placementPrefix","hideArrow","className","tag","container","modifiers"]),p=u("arrow",t),m=(this.state.placement||f.placement).split("-")[0],h=u(M()(s,i?i+"-"+m:m),this.props.cssModule),g=q({offset:{offset:r},flip:{enabled:a,behavior:o},update:{enabled:!0,order:950,fn:this.handlePlacementChange}},d);return P.a.createElement(R.Popper,q({modifiers:g},f,{component:c,className:h}),n,!l&&P.a.createElement(R.Arrow,{className:p}))}},{key:"render",value:function(){return this.setTargetNode(h(this.props.target)),"inline"===this.props.container&&this.props.isOpen?this.renderChildren():null}}]),t}(P.a.Component);wn.propTypes=bn,wn.defaultProps=yn,wn.childContextTypes=En;var _n=function(e,t){return t.popperManager.setTargetNode(h(e.target)),null};_n.contextTypes={popperManager:O.a.object.isRequired},_n.propTypes={target:O.a.oneOfType([O.a.string,O.a.func,m]).isRequired};var Sn={placement:O.a.oneOf(U),target:O.a.oneOfType([O.a.string,O.a.func,m]).isRequired,container:O.a.oneOfType([O.a.string,O.a.func,m]),isOpen:O.a.bool,disabled:O.a.bool,hideArrow:O.a.bool,className:O.a.string,innerClassName:O.a.string,placementPrefix:O.a.string,cssModule:O.a.object,toggle:O.a.func,delay:O.a.oneOfType([O.a.shape({show:O.a.number,hide:O.a.number}),O.a.number]),modifiers:O.a.object},xn={show:0,hide:0},Pn={isOpen:!1,hideArrow:!1,placement:"right",placementPrefix:"bs-popover",delay:xn,toggle:function(){}},Cn=function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addTargetEvents=n.addTargetEvents.bind(n),n.handleDocumentClick=n.handleDocumentClick.bind(n),n.removeTargetEvents=n.removeTargetEvents.bind(n),n.getRef=n.getRef.bind(n),n.toggle=n.toggle.bind(n),n.show=n.show.bind(n),n.hide=n.hide.bind(n),n}return V(t,e),z(t,[{key:"componentDidMount",value:function(){this._target=h(this.props.target),this.handleProps()}},{key:"componentDidUpdate",value:function(){this.handleProps()}},{key:"componentWillUnmount",value:function(){this.clearShowTimeout(),this.clearHideTimeout(),this.removeTargetEvents()}},{key:"getRef",value:function(e){this._popover=e}},{key:"getDelay",value:function(e){var t=this.props.delay;return"object"===("undefined"===typeof t?"undefined":G(t))?isNaN(t[e])?xn[e]:t[e]:t}},{key:"handleProps",value:function(){this.props.isOpen?this.show():this.hide()}},{key:"show",value:function(){this.clearHideTimeout(),this.addTargetEvents(),this.props.isOpen||(this.clearShowTimeout(),this._showTimeout=setTimeout(this.toggle,this.getDelay("show")))}},{key:"hide",value:function(){this.clearShowTimeout(),this.removeTargetEvents(),this.props.isOpen&&(this.clearHideTimeout(),this._hideTimeout=setTimeout(this.toggle,this.getDelay("hide")))}},{key:"clearShowTimeout",value:function(){clearTimeout(this._showTimeout),this._showTimeout=void 0}},{key:"clearHideTimeout",value:function(){clearTimeout(this._hideTimeout),this._hideTimeout=void 0}},{key:"handleDocumentClick",value:function(e){e.target===this._target||this._target.contains(e.target)||e.target===this._popover||this._popover&&this._popover.contains(e.target)||(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen&&this.toggle(e))}},{key:"addTargetEvents",value:function(){var e=this;["click","touchstart"].forEach(function(t){return document.addEventListener(t,e.handleDocumentClick,!0)})}},{key:"removeTargetEvents",value:function(){var e=this;["click","touchstart"].forEach(function(t){return document.removeEventListener(t,e.handleDocumentClick,!0)})}},{key:"toggle",value:function(e){return this.props.disabled?e&&e.preventDefault():this.props.toggle(e)}},{key:"render",value:function(){if(!this.props.isOpen)return null;var e=c(this.props,Object.keys(Sn)),t=u(M()("popover-inner",this.props.innerClassName),this.props.cssModule),n=u(M()("popover","show",this.props.className),this.props.cssModule);return P.a.createElement(wn,{className:n,target:this.props.target,isOpen:this.props.isOpen,hideArrow:this.props.hideArrow,placement:this.props.placement,placementPrefix:this.props.placementPrefix,container:this.props.container,modifiers:this.props.modifiers},P.a.createElement("div",q({},e,{className:t,ref:this.getRef})))}}]),t}(P.a.Component);Cn.propTypes=Sn,Cn.defaultProps=Pn;var On={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},Dn={tag:"h3"},Mn=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"popover-header"),n);return P.a.createElement(a,q({},r,{className:o}))};Mn.propTypes=On,Mn.defaultProps=Dn;var kn={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},Tn={tag:"div"},Ln=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"popover-body"),n);return P.a.createElement(a,q({},r,{className:o}))};Ln.propTypes=kn,Ln.defaultProps=Tn;var Nn={children:O.a.node,bar:O.a.bool,multi:O.a.bool,tag:O.a.string,value:O.a.oneOfType([O.a.string,O.a.number]),max:O.a.oneOfType([O.a.string,O.a.number]),animated:O.a.bool,striped:O.a.bool,color:O.a.string,className:O.a.string,barClassName:O.a.string,cssModule:O.a.object},In={tag:"div",value:0,max:100},Yn=function(e){var t=e.children,n=e.className,a=e.barClassName,r=e.cssModule,o=e.value,i=e.max,l=e.animated,s=e.striped,c=e.color,d=e.bar,f=e.multi,p=e.tag,m=$(e,["children","className","barClassName","cssModule","value","max","animated","striped","color","bar","multi","tag"]),h=j()(o)/j()(i)*100,g=u(M()(n,"progress"),r),v=u(M()("progress-bar",d?n||a:a,l?"progress-bar-animated":null,c?"bg-"+c:null,s||l?"progress-bar-striped":null),r),b=f?t:P.a.createElement("div",{className:v,style:{width:h+"%"},role:"progressbar","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":i,children:t});return d?b:P.a.createElement(p,q({},m,{className:g,children:b}))};Yn.propTypes=Nn,Yn.defaultProps=In;var Rn={children:O.a.node.isRequired,node:O.a.any},An=function(e){function t(){return W(this,t),ee(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return V(t,e),z(t,[{key:"componentWillUnmount",value:function(){this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null}},{key:"render",value:function(){return Q?(this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),Y.a.createPortal(this.props.children,this.props.node||this.defaultNode)):null}}]),t}(P.a.Component);An.propTypes=Rn;var jn=O.a.shape(b.propTypes),Zn={isOpen:O.a.bool,autoFocus:O.a.bool,centered:O.a.bool,size:O.a.string,toggle:O.a.func,keyboard:O.a.bool,role:O.a.string,labelledBy:O.a.string,backdrop:O.a.oneOfType([O.a.bool,O.a.oneOf(["static"])]),onEnter:O.a.func,onExit:O.a.func,onOpened:O.a.func,onClosed:O.a.func,children:O.a.node,className:O.a.string,wrapClassName:O.a.string,modalClassName:O.a.string,backdropClassName:O.a.string,contentClassName:O.a.string,external:O.a.node,fade:O.a.bool,cssModule:O.a.object,zIndex:O.a.oneOfType([O.a.number,O.a.string]),backdropTransition:jn,modalTransition:jn},Fn=Object.keys(Zn),Bn={isOpen:!1,autoFocus:!0,centered:!1,role:"dialog",backdrop:!0,keyboard:!0,zIndex:1050,fade:!0,onOpened:y,onClosed:y,modalTransition:{timeout:B.Modal},backdropTransition:{mountOnEnter:!0,timeout:B.Fade}},Xn=function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._element=null,n._originalBodyPadding=null,n.handleBackdropClick=n.handleBackdropClick.bind(n),n.handleEscape=n.handleEscape.bind(n),n.onOpened=n.onOpened.bind(n),n.onClosed=n.onClosed.bind(n),n.state={isOpen:e.isOpen},e.isOpen&&n.init(),n}return V(t,e),z(t,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter(),this.state.isOpen&&this.props.autoFocus&&this.setFocus(),this._isMounted=!0}},{key:"componentWillReceiveProps",value:function(e){e.isOpen&&!this.props.isOpen&&this.setState({isOpen:e.isOpen})}},{key:"componentWillUpdate",value:function(e,t){t.isOpen&&!this.state.isOpen&&this.init()}},{key:"componentDidUpdate",value:function(e,t){this.props.autoFocus&&this.state.isOpen&&!t.isOpen&&this.setFocus()}},{key:"componentWillUnmount",value:function(){this.props.onExit&&this.props.onExit(),this.state.isOpen&&this.destroy(),this._isMounted=!1}},{key:"onOpened",value:function(e,t){this.props.onOpened(),(this.props.modalTransition.onEntered||y)(e,t)}},{key:"onClosed",value:function(e){this.props.onClosed(),(this.props.modalTransition.onExited||y)(e),this.destroy(),this._isMounted&&this.setState({isOpen:!1})}},{key:"setFocus",value:function(){this._dialog&&this._dialog.parentNode&&"function"===typeof this._dialog.parentNode.focus&&this._dialog.parentNode.focus()}},{key:"handleBackdropClick",value:function(e){if(e.stopPropagation(),this.props.isOpen&&!0===this.props.backdrop){var t=this._dialog;e.target&&!t.contains(e.target)&&this.props.toggle&&this.props.toggle(e)}}},{key:"handleEscape",value:function(e){this.props.isOpen&&this.props.keyboard&&27===e.keyCode&&this.props.toggle&&this.props.toggle(e)}},{key:"init",value:function(){this._element=document.createElement("div"),this._element.setAttribute("tabindex","-1"),this._element.style.position="relative",this._element.style.zIndex=this.props.zIndex,this._originalBodyPadding=i(),l(),document.body.appendChild(this._element),this.bodyClassAdded||(document.body.className=M()(document.body.className,u("modal-open",this.props.cssModule)),this.bodyClassAdded=!0)}},{key:"destroy",value:function(){if(this._element&&(document.body.removeChild(this._element),this._element=null),this.bodyClassAdded){var e=u("modal-open",this.props.cssModule),t=new RegExp("(^| )"+e+"( |$)");document.body.className=document.body.className.replace(t," ").trim(),this.bodyClassAdded=!1}r(this._originalBodyPadding)}},{key:"renderModalDialog",value:function(){var e,t=this,n=c(this.props,Fn);return P.a.createElement("div",q({},n,{className:u(M()("modal-dialog",this.props.className,(e={},K(e,"modal-"+this.props.size,this.props.size),K(e,"modal-dialog-centered",this.props.centered),e)),this.props.cssModule),role:"document",ref:function(e){t._dialog=e}}),P.a.createElement("div",{className:u(M()("modal-content",this.props.contentClassName),this.props.cssModule)},this.props.children))}},{key:"render",value:function(){if(this.state.isOpen){var e=this.props,t=e.wrapClassName,n=e.modalClassName,a=e.backdropClassName,r=e.cssModule,o=e.isOpen,i=e.backdrop,l=e.role,s=e.labelledBy,c=e.external,d={onClick:this.handleBackdropClick,onKeyUp:this.handleEscape,style:{display:"block"},"aria-labelledby":s,role:l,tabIndex:"-1"},f=this.props.fade,p=q({},b.defaultProps,this.props.modalTransition,{baseClass:f?this.props.modalTransition.baseClass:"",timeout:f?this.props.modalTransition.timeout:0}),m=q({},b.defaultProps,this.props.backdropTransition,{baseClass:f?this.props.backdropTransition.baseClass:"",timeout:f?this.props.backdropTransition.timeout:0});return P.a.createElement(An,{node:this._element},P.a.createElement("div",{className:u(t)},P.a.createElement(b,q({},d,p,{in:o,onEntered:this.onOpened,onExited:this.onClosed,cssModule:r,className:u(M()("modal",n),r)}),c,this.renderModalDialog()),P.a.createElement(b,q({},m,{in:o&&!!i,cssModule:r,className:u(M()("modal-backdrop",a),r)}))))}return null}}]),t}(P.a.Component);Xn.propTypes=Zn,Xn.defaultProps=Bn;var Hn={tag:O.a.oneOfType([O.a.func,O.a.string]),wrapTag:O.a.oneOfType([O.a.func,O.a.string]),toggle:O.a.func,className:O.a.string,cssModule:O.a.object,children:O.a.node,closeAriaLabel:O.a.string},Jn={tag:"h5",wrapTag:"div",closeAriaLabel:"Close"},Un=function(e){var t=void 0,n=e.className,a=e.cssModule,r=e.children,o=e.toggle,i=e.tag,l=e.wrapTag,s=e.closeAriaLabel,c=$(e,["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel"]),d=u(M()(n,"modal-header"),a);return o&&(t=P.a.createElement("button",{type:"button",onClick:o,className:u("close",a),"aria-label":s},P.a.createElement("span",{"aria-hidden":"true"},String.fromCharCode(215)))),P.a.createElement(l,q({},c,{className:d}),P.a.createElement(i,{className:u("modal-title",a)},r),t)};Un.propTypes=Hn,Un.defaultProps=Jn;var Qn={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},Gn={tag:"div"},Wn=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"modal-body"),n);return P.a.createElement(a,q({},r,{className:o}))};Wn.propTypes=Qn,Wn.defaultProps=Gn;var zn={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},Kn={tag:"div"},qn=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"modal-footer"),n);return P.a.createElement(a,q({},r,{className:o}))};qn.propTypes=zn,qn.defaultProps=Kn;var Vn={placement:O.a.oneOf(U),target:O.a.oneOfType([O.a.string,O.a.func,m]).isRequired,container:O.a.oneOfType([O.a.string,O.a.func,m]),isOpen:O.a.bool,disabled:O.a.bool,hideArrow:O.a.bool,className:O.a.string,innerClassName:O.a.string,cssModule:O.a.object,toggle:O.a.func,autohide:O.a.bool,placementPrefix:O.a.string,delay:O.a.oneOfType([O.a.shape({show:O.a.number,hide:O.a.number}),O.a.number]),modifiers:O.a.object},$n={show:0,hide:250},ea={isOpen:!1,hideArrow:!1,placement:"top",placementPrefix:"bs-tooltip",delay:$n,autohide:!0,toggle:function(){}},ta=function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addTargetEvents=n.addTargetEvents.bind(n),n.handleDocumentClick=n.handleDocumentClick.bind(n),n.removeTargetEvents=n.removeTargetEvents.bind(n),n.toggle=n.toggle.bind(n),n.onMouseOverTooltip=n.onMouseOverTooltip.bind(n),n.onMouseLeaveTooltip=n.onMouseLeaveTooltip.bind(n),n.onMouseOverTooltipContent=n.onMouseOverTooltipContent.bind(n),n.onMouseLeaveTooltipContent=n.onMouseLeaveTooltipContent.bind(n),n.show=n.show.bind(n),n.hide=n.hide.bind(n),n}return V(t,e),z(t,[{key:"componentDidMount",value:function(){this._target=h(this.props.target),this.addTargetEvents()}},{key:"componentWillUnmount",value:function(){this.removeTargetEvents()}},{key:"onMouseOverTooltip",value:function(){this._hideTimeout&&this.clearHideTimeout(),this._showTimeout=setTimeout(this.show,this.getDelay("show"))}},{key:"onMouseLeaveTooltip",value:function(){this._showTimeout&&this.clearShowTimeout(),this._hideTimeout=setTimeout(this.hide,this.getDelay("hide"))}},{key:"onMouseOverTooltipContent",value:function(){this.props.autohide||this._hideTimeout&&this.clearHideTimeout()}},{key:"onMouseLeaveTooltipContent",value:function(){this.props.autohide||(this._showTimeout&&this.clearShowTimeout(),this._hideTimeout=setTimeout(this.hide,this.getDelay("hide")))}},{key:"getDelay",value:function(e){var t=this.props.delay;return"object"===("undefined"===typeof t?"undefined":G(t))?isNaN(t[e])?$n[e]:t[e]:t}},{key:"show",value:function(){this.props.isOpen||(this.clearShowTimeout(),this.toggle())}},{key:"hide",value:function(){this.props.isOpen&&(this.clearHideTimeout(),this.toggle())}},{key:"clearShowTimeout",value:function(){clearTimeout(this._showTimeout),this._showTimeout=void 0}},{key:"clearHideTimeout",value:function(){clearTimeout(this._hideTimeout),this._hideTimeout=void 0}},{key:"handleDocumentClick",value:function(e){(e.target===this._target||this._target.contains(e.target))&&(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen||this.toggle())}},{key:"addTargetEvents",value:function(){var e=this;this._target.addEventListener("mouseover",this.onMouseOverTooltip,!0),this._target.addEventListener("mouseout",this.onMouseLeaveTooltip,!0),["click","touchstart"].forEach(function(t){return document.addEventListener(t,e.handleDocumentClick,!0)})}},{key:"removeTargetEvents",value:function(){var e=this;this._target.removeEventListener("mouseover",this.onMouseOverTooltip,!0),this._target.removeEventListener("mouseout",this.onMouseLeaveTooltip,!0),["click","touchstart"].forEach(function(t){return document.removeEventListener(t,e.handleDocumentClick,!0)})}},{key:"toggle",value:function(e){return this.props.disabled?e&&e.preventDefault():this.props.toggle()}},{key:"render",value:function(){if(!this.props.isOpen)return null;var e=c(this.props,Object.keys(Vn)),t=u(M()("tooltip-inner",this.props.innerClassName),this.props.cssModule),n=u(M()("tooltip","show",this.props.className),this.props.cssModule);return P.a.createElement(wn,{className:n,target:this.props.target,isOpen:this.props.isOpen,hideArrow:this.props.hideArrow,placement:this.props.placement,placementPrefix:this.props.placementPrefix,container:this.props.container,modifiers:this.props.modifiers},P.a.createElement("div",q({},e,{className:t,onMouseOver:this.onMouseOverTooltipContent,onMouseLeave:this.onMouseLeaveTooltipContent})))}}]),t}(P.a.Component);ta.propTypes=Vn,ta.defaultProps=ea;var na={className:O.a.string,cssModule:O.a.object,size:O.a.string,bordered:O.a.bool,striped:O.a.bool,inverse:p(O.a.bool,'Please use the prop "dark"'),dark:O.a.bool,hover:O.a.bool,responsive:O.a.oneOfType([O.a.bool,O.a.string]),tag:O.a.oneOfType([O.a.func,O.a.string]),responsiveTag:O.a.oneOfType([O.a.func,O.a.string])},aa={tag:"table",responsiveTag:"div"},ra=function(e){var t=e.className,n=e.cssModule,a=e.size,r=e.bordered,o=e.striped,i=e.inverse,l=e.dark,s=e.hover,c=e.responsive,d=e.tag,f=e.responsiveTag,p=$(e,["className","cssModule","size","bordered","striped","inverse","dark","hover","responsive","tag","responsiveTag"]),m=u(M()(t,"table",!!a&&"table-"+a,!!r&&"table-bordered",!!o&&"table-striped",!(!l&&!i)&&"table-dark",!!s&&"table-hover"),n),h=P.a.createElement(d,q({},p,{className:m}));if(c){var g=!0===c?"table-responsive":"table-responsive-"+c;return P.a.createElement(f,{className:g},h)}return h};ra.propTypes=na,ra.defaultProps=aa;var oa={tag:O.a.oneOfType([O.a.func,O.a.string]),flush:O.a.bool,className:O.a.string,cssModule:O.a.object},ia={tag:"ul"},la=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=e.flush,o=$(e,["className","cssModule","tag","flush"]),i=u(M()(t,"list-group",!!r&&"list-group-flush"),n);return P.a.createElement(a,q({},o,{className:i}))};la.propTypes=oa,la.defaultProps=ia;var sa={children:O.a.node,inline:O.a.bool,tag:O.a.oneOfType([O.a.func,O.a.string]),innerRef:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},ua={tag:"form"},ca=function(e){var t=e.className,n=e.cssModule,a=e.inline,r=e.tag,o=e.innerRef,i=$(e,["className","cssModule","inline","tag","innerRef"]),l=u(M()(t,!!a&&"form-inline"),n);return P.a.createElement(r,q({},i,{ref:o,className:l}))};ca.propTypes=sa,ca.defaultProps=ua;var da={children:O.a.node,tag:O.a.string,className:O.a.string,cssModule:O.a.object,valid:O.a.bool},fa={tag:"div",valid:void 0},pa=function(e){var t=e.className,n=e.cssModule,a=e.valid,r=e.tag,o=$(e,["className","cssModule","valid","tag"]),i=u(M()(t,a?"valid-feedback":"invalid-feedback"),n);return P.a.createElement(r,q({},o,{className:i}))};pa.propTypes=da,pa.defaultProps=fa;var ma={children:O.a.node,row:O.a.bool,check:O.a.bool,inline:O.a.bool,disabled:O.a.bool,tag:O.a.string,className:O.a.string,cssModule:O.a.object},ha={tag:"div"},ga=function(e){var t=e.className,n=e.cssModule,a=e.row,r=e.disabled,o=e.check,i=e.inline,l=e.tag,s=$(e,["className","cssModule","row","disabled","check","inline","tag"]),c=u(M()(t,!!a&&"row",o?"form-check":"form-group",!(!o||!i)&&"form-check-inline",!(!o||!r)&&"disabled"),n);return P.a.createElement(l,q({},s,{className:c}))};ga.propTypes=ma,ga.defaultProps=ha;var va={children:O.a.node,inline:O.a.bool,tag:O.a.oneOfType([O.a.func,O.a.string]),color:O.a.string,className:O.a.string,cssModule:O.a.object},ba={tag:"small",color:"muted"},ya=function(e){var t=e.className,n=e.cssModule,a=e.inline,r=e.color,o=e.tag,i=$(e,["className","cssModule","inline","color","tag"]),l=u(M()(t,!a&&"form-text",!!r&&"text-"+r),n);return P.a.createElement(o,q({},i,{className:l}))};ya.propTypes=va,ya.defaultProps=ba;var Ea={children:O.a.node,type:O.a.string,size:O.a.string,bsSize:O.a.string,state:p(O.a.string,'Please use the props "valid" and "invalid" to indicate the state.'),valid:O.a.bool,invalid:O.a.bool,tag:O.a.oneOfType([O.a.func,O.a.string]),innerRef:O.a.oneOfType([O.a.func,O.a.string]),static:p(O.a.bool,'Please use the prop "plaintext"'),plaintext:O.a.bool,addon:O.a.bool,className:O.a.string,cssModule:O.a.object},wa={type:"text"},_a=function(e){function t(){return W(this,t),ee(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return V(t,e),z(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.cssModule,a=e.type,r=e.bsSize,o=e.state,i=e.valid,l=e.invalid,s=e.tag,c=e.addon,d=e.static,p=e.plaintext,m=e.innerRef,h=$(e,["className","cssModule","type","bsSize","state","valid","invalid","tag","addon","static","plaintext","innerRef"]),g=["radio","checkbox"].indexOf(a)>-1,v=new RegExp("\\D","g"),b="file"===a,y="textarea"===a,E="select"===a,w=s||(E||y?a:"input"),_="form-control";p||d?(_+="-plaintext",w=s||"p"):b?_+="-file":g&&(_=c?null:"form-check-input"),o&&"undefined"===typeof i&&"undefined"===typeof l&&("danger"===o?l=!0:"success"===o&&(i=!0)),h.size&&v.test(h.size)&&(f('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),r=h.size,delete h.size);var S=u(M()(t,l&&"is-invalid",i&&"is-valid",!!r&&"form-control-"+r,_),n);return"input"!==w&&"string"===typeof s||(h.type=a),P.a.createElement(w,q({},h,{ref:m,className:S}))}}]),t}(P.a.Component);_a.propTypes=Ea,_a.defaultProps=wa;var Sa={tag:O.a.oneOfType([O.a.func,O.a.string]),size:O.a.string,className:O.a.string,cssModule:O.a.object},xa={tag:"div"},Pa=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=e.size,o=$(e,["className","cssModule","tag","size"]),i=u(M()(t,"input-group",r?"input-group-"+r:null),n);return P.a.createElement(a,q({},o,{className:i}))};Pa.propTypes=Sa,Pa.defaultProps=xa;var Ca={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object},Oa={tag:"span"},Da=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"input-group-text"),n);return P.a.createElement(a,q({},r,{className:o}))};Da.propTypes=Ca,Da.defaultProps=Oa;var Ma={tag:O.a.oneOfType([O.a.func,O.a.string]),addonType:O.a.oneOf(["prepend","append"]).isRequired,children:O.a.node,className:O.a.string,cssModule:O.a.object},ka={tag:"div"},Ta=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=e.addonType,o=e.children,i=$(e,["className","cssModule","tag","addonType","children"]),l=u(M()(t,"input-group-"+r),n);return"string"===typeof o?P.a.createElement(a,q({},i,{className:l}),P.a.createElement(Da,{children:o})):P.a.createElement(a,q({},i,{className:l,children:o}))};Ta.propTypes=Ma,Ta.defaultProps=ka;var La={tag:O.a.oneOfType([O.a.func,O.a.string]),addonType:O.a.oneOf(["prepend","append"]).isRequired,children:O.a.node,groupClassName:O.a.string,groupAttributes:O.a.object,className:O.a.string,cssModule:O.a.object};(function(e){f('The "InputGroupButton" component has been deprecated.\nPlease use component "InputGroupAddon".');var t=e.children,n=e.groupClassName,a=e.groupAttributes,r=$(e,["children","groupClassName","groupAttributes"]);if("string"===typeof t){var o=r.cssModule,i=r.tag,l=r.addonType,s=$(r,["cssModule","tag","addonType"]),u=q({},a,{cssModule:o,tag:i,addonType:l});return P.a.createElement(Ta,q({},u,{className:n}),P.a.createElement(We,q({},s,{children:t})))}return P.a.createElement(Ta,q({},e,{children:t}))}).propTypes=La;var Na={addonType:O.a.oneOf(["prepend","append"]).isRequired,children:O.a.node};(function(e){return P.a.createElement(Re,e)}).propTypes=Na;var Ia=["xs","sm","md","lg","xl"],Ya=O.a.oneOfType([O.a.number,O.a.string]),Ra=O.a.oneOfType([O.a.string,O.a.number,O.a.shape({size:Ya,push:p(Ya,'Please use the prop "order"'),pull:p(Ya,'Please use the prop "order"'),order:Ya,offset:Ya})]),Aa={children:O.a.node,hidden:O.a.bool,check:O.a.bool,size:O.a.string,for:O.a.string,tag:O.a.string,className:O.a.string,cssModule:O.a.object,xs:Ra,sm:Ra,md:Ra,lg:Ra,xl:Ra,widths:O.a.array},ja={tag:"label",widths:Ia},Za=function(e,t,n){return!0===n||""===n?e?"col":"col-"+t:"auto"===n?e?"col-auto":"col-"+t+"-auto":e?"col-"+n:"col-"+t+"-"+n},Fa=function(e){var t=e.className,n=e.cssModule,a=e.hidden,r=e.widths,o=e.tag,i=e.check,l=e.size,s=e.for,c=$(e,["className","cssModule","hidden","widths","tag","check","size","for"]),d=[];r.forEach(function(t,a){var r=e[t];if(delete c[t],r||""===r){var o=!a,i=void 0;if(N()(r)){var l,s=o?"-":"-"+t+"-";i=Za(o,t,r.size),d.push(u(M()((l={},K(l,i,r.size||""===r.size),K(l,"order"+s+r.order,r.order||0===r.order),K(l,"offset"+s+r.offset,r.offset||0===r.offset),l))),n)}else i=Za(o,t,r),d.push(i)}});var f=u(M()(t,!!a&&"sr-only",!!i&&"form-check-label",!!l&&"col-form-label-"+l,d,!!d.length&&"col-form-label"),n);return P.a.createElement(o,q({htmlFor:s},c,{className:f}))};Fa.propTypes=Aa,Fa.defaultProps=ja;var Ba={body:O.a.bool,bottom:O.a.bool,children:O.a.node,className:O.a.string,cssModule:O.a.object,heading:O.a.bool,left:O.a.bool,list:O.a.bool,middle:O.a.bool,object:O.a.bool,right:O.a.bool,tag:O.a.oneOfType([O.a.func,O.a.string]),top:O.a.bool};(function(e){var t=e.body,n=e.bottom,a=e.className,r=e.cssModule,o=e.heading,i=e.left,l=e.list,s=e.middle,c=e.object,d=e.right,f=e.tag,p=e.top,m=$(e,["body","bottom","className","cssModule","heading","left","list","middle","object","right","tag","top"]),h=void 0;h=o?"h4":i||d?"a":c?"img":l?"ul":"div";var g=f||h,v=u(M()(a,{"media-body":t,"media-heading":o,"media-left":i,"media-right":d,"media-top":p,"media-bottom":n,"media-middle":s,"media-object":c,"media-list":l,media:!t&&!o&&!i&&!d&&!p&&!n&&!s&&!c&&!l}),r);return P.a.createElement(g,q({},m,{className:v}))}).propTypes=Ba;var Xa={children:O.a.node,className:O.a.string,cssModule:O.a.object,size:O.a.string,tag:O.a.oneOfType([O.a.func,O.a.string])},Ha={tag:"ul"},Ja=function(e){var t=e.className,n=e.cssModule,a=e.size,r=e.tag,o=$(e,["className","cssModule","size","tag"]),i=u(M()(t,"pagination",K({},"pagination-"+a,!!a)),n);return P.a.createElement(r,q({},o,{className:i}))};Ja.propTypes=Xa,Ja.defaultProps=Ha;var Ua={active:O.a.bool,children:O.a.node,className:O.a.string,cssModule:O.a.object,disabled:O.a.bool,tag:O.a.oneOfType([O.a.func,O.a.string])},Qa={tag:"li"},Ga=function(e){var t=e.active,n=e.className,a=e.cssModule,r=e.disabled,o=e.tag,i=$(e,["active","className","cssModule","disabled","tag"]),l=u(M()(n,"page-item",{active:t,disabled:r}),a);return P.a.createElement(o,q({},i,{className:l}))};Ga.propTypes=Ua,Ga.defaultProps=Qa;var Wa={"aria-label":O.a.string,children:O.a.node,className:O.a.string,cssModule:O.a.object,next:O.a.bool,previous:O.a.bool,tag:O.a.oneOfType([O.a.func,O.a.string])},za={tag:"a"},Ka=function(e){var t=e.className,n=e.cssModule,a=e.next,r=e.previous,o=e.tag,i=$(e,["className","cssModule","next","previous","tag"]),l=u(M()(t,"page-link"),n),s=void 0;r?s="Previous":a&&(s="Next");var c=e["aria-label"]||s,d=void 0;r?d="\xab":a&&(d="\xbb");var f=e.children;return f&&Array.isArray(f)&&0===f.length&&(f=null),(r||a)&&(f=[P.a.createElement("span",{"aria-hidden":"true",key:"caret"},f||d),P.a.createElement("span",{className:"sr-only",key:"sr"},c)]),P.a.createElement(o,q({},i,{className:l,"aria-label":c}),f)};Ka.propTypes=Wa,Ka.defaultProps=za;var qa={tag:O.a.oneOfType([O.a.func,O.a.string]),activeTab:O.a.any,className:O.a.string,cssModule:O.a.object},Va={tag:"div"},$a={activeTabId:O.a.any},er=function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={activeTab:n.props.activeTab},n}return V(t,e),z(t,[{key:"getChildContext",value:function(){return{activeTabId:this.state.activeTab}}},{key:"componentWillReceiveProps",value:function(e){this.state.activeTab!==e.activeTab&&this.setState({activeTab:e.activeTab})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.cssModule,a=e.tag,r=c(this.props,Object.keys(qa)),o=u(M()("tab-content",t),n);return P.a.createElement(a,q({},r,{className:o}))}}]),t}(x.Component);er.propTypes=qa,er.defaultProps=Va,er.childContextTypes=$a;var tr={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.string,cssModule:O.a.object,tabId:O.a.any},nr={tag:"div"},ar={activeTabId:O.a.any};E.propTypes=tr,E.defaultProps=nr,E.contextTypes=ar;var rr={tag:O.a.oneOfType([O.a.func,O.a.string]),fluid:O.a.bool,className:O.a.string,cssModule:O.a.object},or={tag:"div"},ir=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=e.fluid,o=$(e,["className","cssModule","tag","fluid"]),i=u(M()(t,"jumbotron",!!r&&"jumbotron-fluid"),n);return P.a.createElement(a,q({},o,{className:i}))};ir.propTypes=rr,ir.defaultProps=or;var lr={children:O.a.node,className:O.a.string,closeClassName:O.a.string,closeAriaLabel:O.a.string,cssModule:O.a.object,color:O.a.string,isOpen:O.a.bool,toggle:O.a.func,tag:O.a.oneOfType([O.a.func,O.a.string]),transition:O.a.shape(b.propTypes)},sr={color:"success",isOpen:!0,tag:"div",closeAriaLabel:"Close",transition:q({},b.defaultProps,{unmountOnExit:!0})};w.propTypes=lr,w.defaultProps=sr;var ur,cr=q({},yt.propTypes,{isOpen:O.a.bool,children:O.a.oneOfType([O.a.arrayOf(O.a.node),O.a.node]),tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.node,navbar:O.a.bool,cssModule:O.a.object}),dr=q({},yt.defaultProps,{isOpen:!1,appear:!1,enter:!0,exit:!0,tag:"div",timeout:B.Collapse}),fr=(ur={},K(ur,H.ENTERING,"collapsing"),K(ur,H.ENTERED,"collapse show"),K(ur,H.EXITING,"collapsing"),K(ur,H.EXITED,"collapse"),ur),pr=function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={height:null},["onEntering","onEntered","onExit","onExiting","onExited"].forEach(function(e){n[e]=n[e].bind(n)}),n}return V(t,e),z(t,[{key:"onEntering",value:function(e,t){this.setState({height:S(e)}),this.props.onEntering(e,t)}},{key:"onEntered",value:function(e,t){this.setState({height:null}),this.props.onEntered(e,t)}},{key:"onExit",value:function(e){this.setState({height:S(e)}),this.props.onExit(e)}},{key:"onExiting",value:function(e){e.offsetHeight;this.setState({height:0}),this.props.onExiting(e)}},{key:"onExited",value:function(e){this.setState({height:null}),this.props.onExited(e)}},{key:"render",value:function(){var e=this.props,t=e.tag,n=e.isOpen,a=e.className,r=e.navbar,o=e.cssModule,i=e.children,l=$(e,["tag","isOpen","className","navbar","cssModule","children"]),s=this.state.height,f=d(l,X),p=c(l,X);return P.a.createElement(yt,q({},f,{in:n,onEntering:this.onEntering,onEntered:this.onEntered,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),function(e){var n=_(e),l=u(M()(a,n,r&&"navbar-collapse"),o),c=null===s?null:{height:s};return P.a.createElement(t,q({},p,{style:q({},p.style,c),className:l}),i)})}}]),t}(x.Component);pr.propTypes=cr,pr.defaultProps=dr;var mr={tag:O.a.oneOfType([O.a.func,O.a.string]),active:O.a.bool,disabled:O.a.bool,color:O.a.string,action:O.a.bool,className:O.a.any,cssModule:O.a.object},hr={tag:"li"},gr=function(e){e.preventDefault()},vr=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=e.active,o=e.disabled,i=e.action,l=e.color,s=$(e,["className","cssModule","tag","active","disabled","action","color"]),c=u(M()(t,!!r&&"active",!!o&&"disabled",!!i&&"list-group-item-action",!!l&&"list-group-item-"+l,"list-group-item"),n);return o&&(s.onClick=gr),P.a.createElement(a,q({},s,{className:c}))};vr.propTypes=mr,vr.defaultProps=hr;var br={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.any,cssModule:O.a.object},yr={tag:"h5"},Er=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"list-group-item-heading"),n);return P.a.createElement(a,q({},r,{className:o}))};Er.propTypes=br,Er.defaultProps=yr;var wr={tag:O.a.oneOfType([O.a.func,O.a.string]),className:O.a.any,cssModule:O.a.object},_r={tag:"p"},Sr=function(e){var t=e.className,n=e.cssModule,a=e.tag,r=$(e,["className","cssModule","tag"]),o=u(M()(t,"list-group-item-text"),n);return P.a.createElement(a,q({},r,{className:o}))};Sr.propTypes=wr,Sr.defaultProps=_r;(function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOpen:!0},n.toggle=n.toggle.bind(n),n}V(t,e),z(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return P.a.createElement(w,q({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}])})(x.Component),function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOpen:!1},n.toggle=n.toggle.bind(n),n}V(t,e),z(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return P.a.createElement(Ke,q({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}])}(x.Component),function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOpen:!1},n.toggle=n.toggle.bind(n),n}V(t,e),z(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return P.a.createElement(Re,q({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}])}(x.Component),function(e){function t(e){W(this,t);var n=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOpen:!1},n.toggle=n.toggle.bind(n),n}V(t,e),z(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return P.a.createElement(ta,q({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}])}(x.Component)},983:function(e,t,n){function a(e){return e===e&&!r(e)}var r=n(343);e.exports=a},984:function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},985:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(1),p={type:d.default.string.isRequired,children:d.default.oneOfType([d.default.bool,d.default.array])},m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.sortBySize=function(e){var t=n.props.sortOrder,a="asc"===t?"desc":"asc";n.setState({showIconName:e}),n.props.sortBySize(e,a)},n.state={showIconName:"link_file_download"},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.state.showIconName,t=this.props.sortOrder;this.props.sortBySize(e,t)}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.sortOrder,a=this.state.showIconName,r="asc"==n?u.default.createElement("span",{className:"fas fa-caret-up"}):u.default.createElement("span",{className:"fas fa-caret-down"});return u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"16%"},"user"==t?(0,f.gettext)("User"):(0,f.gettext)("Organization")),u.default.createElement("th",{width:"11%"},u.default.createElement("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.sortBySize.bind(this,"sync_file_upload")},(0,f.gettext)("Sync Upload")," ","sync_file_upload"===a&&r)),u.default.createElement("th",{width:"14%"},u.default.createElement("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.sortBySize.bind(this,"sync_file_donwload")},(0,f.gettext)("Sync Download")," ","sync_file_donwload"===a&&r)),u.default.createElement("th",{width:"11%"},u.default.createElement("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.sortBySize.bind(this,"web_file_upload")},(0,f.gettext)("Web Upload")," ","web_file_upload"===a&&r)),u.default.createElement("th",{width:"14%"},u.default.createElement("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.sortBySize.bind(this,"web_file_download")},(0,f.gettext)("Web Download")," ","web_file_download"===a&&r)),u.default.createElement("th",{width:"17%"},u.default.createElement("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.sortBySize.bind(this,"link_file_upload")},(0,f.gettext)("Share link upload")," ","link_file_upload"===a&&r)),u.default.createElement("th",{width:"17%"},u.default.createElement("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.sortBySize.bind(this,"link_file_download")},(0,f.gettext)("Share link download")," ","link_file_download"===a&&r)))),u.default.createElement("tbody",null,this.props.children))}}]),t}(u.default.Component);m.propTypes=p,t.default=m},986:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(3),p=n(1),m={type:d.default.string.isRequired,userTrafficItem:d.default.object.isRequired},h=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.trafficName=function(){var e=a.props,t=e.userTrafficItem;switch(e.type){case"user":return t.name?u.default.createElement("a",{href:p.siteRoot+"useradmin/info/"+t.email+"/"},t.name):u.default.createElement("span",null,"--");case"org":return u.default.createElement("span",null,t.org_name)}},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.userTrafficItem,t=f.Utils.bytesToSize(e.sync_file_upload),n=f.Utils.bytesToSize(e.sync_file_download),a=f.Utils.bytesToSize(e.web_file_upload),r=f.Utils.bytesToSize(e.web_file_download),o=f.Utils.bytesToSize(e.link_file_upload),i=f.Utils.bytesToSize(e.link_file_download);return u.default.createElement("tr",null,u.default.createElement("td",null,this.trafficName()),u.default.createElement("td",null,t),u.default.createElement("td",null,n),u.default.createElement("td",null,a),u.default.createElement("td",null,r),u.default.createElement("td",null,o),u.default.createElement("td",null,i))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},987:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(4),d=n(1),f=n(5),p=a(f),m=n(3),h=n(33),g=a(h),v=n(7),b=a(v),y=n(8),E=a(y),w=n(63),_=a(w),S=n(2151),x=a(S),P=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPreviousPageDevicesList=function(){n.props.getDevicesListByPage(n.props.pageInfo.current_page-1)},n.getNextPageDevicesList=function(){n.props.getDevicesListByPage(n.props.pageInfo.current_page+1)},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,a=e.items,r=e.pageInfo,o=e.curPerPage;if(t)return u.default.createElement(E.default,null);if(n)return u.default.createElement("p",{className:"error text-center"},n);var i=u.default.createElement(g.default,null,u.default.createElement("h2",null,(0,d.gettext)("No connected devices"))),l=u.default.createElement(s.Fragment,null,u.default.createElement("table",{className:"table-hover"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"19%"},(0,d.gettext)("User")),u.default.createElement("th",{width:"19%"},(0,d.gettext)("Platform")," / ",(0,d.gettext)("Version")),u.default.createElement("th",{width:"19%"},(0,d.gettext)("Device Name")),u.default.createElement("th",{width:"19%"},(0,d.gettext)("IP")),u.default.createElement("th",{width:"19%"},(0,d.gettext)("Last Access")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,a.map(function(e,t){return u.default.createElement(C,{key:t,item:e})}))),u.default.createElement(_.default,{gotoPreviousPage:this.getPreviousPageDevicesList,gotoNextPage:this.getNextPageDevicesList,currentPage:r.current_page,hasNextPage:r.has_next_page,curPerPage:o,resetPerPage:this.props.resetPerPage}));return a.length?l:i}}]),t}(s.Component),C=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.handleUnlink=function(e){e.preventDefault(),n.props.item.is_desktop_client?n.toggleUnlinkDeviceDialog():n.unlinkDevice(!0)},n.toggleUnlinkDeviceDialog=function(){n.setState({isUnlinkDeviceDialogOpen:!n.state.isUnlinkDeviceDialogOpen})},n.unlinkDevice=function(e){var t=n.props.item,a=t.platform,r=t.device_id,o=t.user;c.seafileAPI.sysAdminUnlinkDevice(a,r,o,e).then(function(e){n.setState({unlinked:!0});var t=(0,d.gettext)("Successfully unlinked the device.");p.default.success(t)}).catch(function(e){var t=m.Utils.getErrorMsg(e);p.default.danger(t)})},n.state={unlinked:!1,isOpIconShown:!1,isUnlinkDeviceDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.state,n=t.unlinked,a=t.isUnlinkDeviceDialogOpen,r=t.isOpIconShown;return n?null:u.default.createElement(s.Fragment,null,u.default.createElement("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut},u.default.createElement("td",null,e.user_name),u.default.createElement("td",null,e.platform," / ",e.client_version),u.default.createElement("td",null,e.device_name),u.default.createElement("td",null,e.last_login_ip),u.default.createElement("td",null,u.default.createElement("span",{title:(0,b.default)(e.last_accessed).format("llll")},(0,b.default)(e.last_accessed).fromNow())),u.default.createElement("td",null,d.isPro&&u.default.createElement("a",{href:"#",className:"sf2-icon-delete action-icon "+(r?"":"invisible"),title:(0,d.gettext)("Unlink"),onClick:this.handleUnlink}))),a&&u.default.createElement(x.default,{unlinkDevice:this.unlinkDevice,toggleDialog:this.toggleUnlinkDeviceDialog}))}}]),t}(s.Component),O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getDevicesListByPage=function(e){var t=n.props.devicesPlatform,a=n.state.perPage;c.seafileAPI.sysAdminListDevices(t,e,a).then(function(e){n.setState({devicesData:e.data.devices,pageInfo:e.data.page_info,loading:!1})}).catch(function(e){n.setState({loading:!1,errorMsg:m.Utils.getErrorMsg(e,!0)})})},n.resetPerPage=function(e){n.setState({perPage:e},function(){n.getDevicesListByPage(1)})},n.state={loading:!0,errorMsg:"",devicesData:{},pageInfo:{},perPage:25},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,a=n.currentPage,r=void 0===a?1:a,o=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||o),currentPage:parseInt(t.get("page")||r)},function(){e.getDevicesListByPage(e.state.currentPage)})}},{key:"render",value:function(){return u.default.createElement("div",{className:"cur-view-content"},u.default.createElement(P,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.devicesData,getDevicesListByPage:this.getDevicesListByPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,pageInfo:this.state.pageInfo}))}}]),t}(s.Component);t.default=O},988:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(3),h=n(730),g=a(h),v={toggleDialog:d.default.func.isRequired,addUser:d.default.func.isRequired},b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.checkSubmitBtnActive=function(){var e=n.state,t=e.email,a=e.password,r=e.passwordAgain,o=!0;o=!!(t.trim()&&a.trim()&&r.trim()),n.setState({isSubmitBtnActive:o})},n.toggle=function(){n.props.toggleDialog()},n.togglePasswordVisible=function(){n.setState({isPasswordVisible:!n.state.isPasswordVisible})},n.inputPassword=function(e){var t=e.target.value;n.setState({password:t,errorMsg:""},n.checkSubmitBtnActive)},n.inputPasswordAgain=function(e){var t=e.target.value;n.setState({passwordAgain:t,errorMsg:""},n.checkSubmitBtnActive)},n.generatePassword=function(){var e=m.Utils.generatePassword(8);n.setState({password:e,passwordAgain:e},n.checkSubmitBtnActive)},n.inputEmail=function(e){var t=e.target.value;n.setState({email:t},n.checkSubmitBtnActive)},n.inputName=function(e){var t=e.target.value;n.setState({name:t})},n.updateRole=function(e){n.setState({role:e})},n.handleSubmit=function(){var e=n.state,t=e.email,a=e.password,r=e.passwordAgain,o=e.name,i=e.role;if(a!=r)return void n.setState({errorMsg:(0,p.gettext)("Passwords do not match.")});var l={email:t.trim(),name:o.trim(),password:a.trim()};n.props.showRole&&(l.role=i),n.props.addUser(l),n.toggle()},n.state={errorMsg:"",isPasswordVisible:!1,password:"",passwordAgain:"",email:"",name:"",role:"default",isSubmitBtnActive:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.dialogTitle,n=e.showRole,a=this.state,r=a.errorMsg,o=a.isPasswordVisible,i=a.email,l=a.name,s=a.role,c=a.password,d=a.passwordAgain,m=a.isSubmitBtnActive;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.toggle},u.default.createElement(f.ModalHeader,{toggle:this.toggle},t||(0,p.gettext)("Add Member")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,{autoComplete:"off"},u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,null,(0,p.gettext)("Email")),u.default.createElement(f.Input,{value:i,onChange:this.inputEmail})),u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,null,(0,p.gettext)("Name(optional)")),u.default.createElement(f.Input,{type:"text",value:l,onChange:this.inputName})),n&&u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,null,(0,p.gettext)("Role"),u.default.createElement("span",{className:"small text-secondary ml-1 fas fa-question-circle",title:(0,p.gettext)("You can also add a user as a guest, who will not be allowed to create libraries and groups.")})),u.default.createElement(g.default,{isTextMode:!1,isEditIconShow:!1,currentRole:s,roleOptions:this.props.availableRoles,onRoleChanged:this.updateRole})),u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,null,(0,p.gettext)("Password")),u.default.createElement(f.InputGroup,null,u.default.createElement(f.Input,{autoComplete:"new-password",type:o?"text":"password",value:c||"",onChange:this.inputPassword}),u.default.createElement(f.InputGroupAddon,{addonType:"append"},u.default.createElement(f.Button,{className:"mt-0",onClick:this.togglePasswordVisible},u.default.createElement("i",{className:"link-operation-icon fas "+(this.state.isPasswordVisible?"fa-eye":"fa-eye-slash")})),u.default.createElement(f.Button,{className:"mt-0",onClick:this.generatePassword},u.default.createElement("i",{className:"link-operation-icon fas fa-magic"}))))),u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,null,(0,p.gettext)("Password again")),u.default.createElement(f.Input,{type:o?"text":"password",value:d||"",onChange:this.inputPasswordAgain}))),r&&u.default.createElement(f.Alert,{color:"danger"},r)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit,disabled:!m},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);b.propTypes=v,t.default=b},989:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(1),m={currentItem:d.default.string.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navItems=[{name:"database",urlPart:"users",text:(0,p.gettext)("Database")}],p.haveLDAP&&n.navItems.push({name:"ldap",urlPart:"users/ldap",text:(0,p.gettext)("LDAP")},{name:"ldap-imported",urlPart:"users/ldap-imported",text:(0,p.gettext)("LDAP(imported)")}),p.isDefaultAdmin&&n.navItems.push({name:"admin",urlPart:"users/admins",text:(0,p.gettext)("Admin")}),n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.currentItem;return u.default.createElement("div",{className:"cur-view-path tab-nav-container"},u.default.createElement("ul",{className:"nav"},this.navItems.map(function(t,n){return u.default.createElement("li",{className:"nav-item",key:n},u.default.createElement(f.Link,{to:p.siteRoot+"sys/"+t.urlPart+"/",className:"nav-link"+(e==t.name?" active":"")},t.text))})))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},990:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(7),d=a(c),f=n(16),p=n(3),m=n(4),h=n(1),g=n(5),v=a(g),b=n(33),y=a(b),E=n(8),w=a(E),_=n(63),S=a(_),x=n(991),P=a(x),C=n(730),O=a(C),D=n(60),M=a(D),k=n(132),T=a(k),L=n(360),N=a(L),I=n(107),Y=a(I),R=n(67),A=a(R),j=window.sysadmin.pageOptions,Z=j.availableRoles,F=j.availableAdminRoles,B=j.institutions,X=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPage=function(){n.props.getListByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getListByPage(n.props.currentPage+1)},n.sortByQuotaUsage=function(e){e.preventDefault(),n.props.sortByQuotaUsage()},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.isAdmin,a=t.loading,r=t.errorMsg,o=t.items,i=t.isAllUsersSelected,l=t.curPerPage,c=t.hasNextPage,d=t.currentPage,f=t.sortBy,p=t.sortOrder;if(a)return u.default.createElement(w.default,null);if(r)return u.default.createElement("p",{className:"error text-center mt-4"},r);var m=u.default.createElement(y.default,null,u.default.createElement("h2",null,(0,h.gettext)("No users"))),g=[],v=void 0;v=""==f?u.default.createElement("span",{className:"fas fa-sort"}):u.default.createElement("span",{className:"fas "+("asc"==p?"fa-caret-up":"fa-caret-down")});var b=(0,h.gettext)("Space Used"),E=void 0!=f?u.default.createElement("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByQuotaUsage},b," ",v):b,_=u.default.createElement(s.Fragment,null,E," / "+(0,h.gettext)("Quota")),x=(0,h.gettext)("Name")+" / "+(0,h.gettext)("Contact Email"),P=(0,h.gettext)("Created At")+" / "+(0,h.gettext)("Last Login");h.isPro?g.push({width:"20%",text:x},{width:"15%",text:(0,h.gettext)("Status")},{width:"15%",text:(0,h.gettext)("Role")}):g.push({width:"30%",text:x},{width:"20%",text:(0,h.gettext)("Status")}),h.multiInstitution&&!n?g.push({width:"14%",text:_},{width:"14%",text:(0,h.gettext)("Institution")},{width:"14%",text:P},{width:"5%",text:""}):g.push({width:"20%",text:_},{width:"22%",text:P},{width:"5%",text:""});var C=u.default.createElement(s.Fragment,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"3%",className:"pl-2"},u.default.createElement("input",{type:"checkbox",className:"vam",onChange:this.props.toggleSelectAllUsers,checked:i})),g.map(function(e,t){return u.default.createElement("th",{width:e.width,key:t},e.text)}))),u.default.createElement("tbody",null,o.map(function(t,n){return u.default.createElement(H,{key:n,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,updateUser:e.props.updateUser,deleteUser:e.props.deleteUser,updateAdminRole:e.props.updateAdminRole,revokeAdmin:e.props.revokeAdmin,onUserSelected:e.props.onUserSelected,isAdmin:e.props.isAdmin,isLDAPImported:e.props.isLDAPImported})}))),!this.props.isAdmin&&!this.props.isSearchResult&&u.default.createElement(S.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:d,hasNextPage:c,curPerPage:l,resetPerPage:this.props.resetPerPage}));return o.length?C:m}}]),t}(s.Component),H=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.toggleSetQuotaDialog=function(){n.setState({isSetQuotaDialogOpen:!n.state.isSetQuotaDialogOpen})},n.toggleDeleteUserDialog=function(){n.setState({isDeleteUserDialogOpen:!n.state.isDeleteUserDialogOpen})},n.toggleResetUserPasswordDialog=function(){n.setState({isResetUserPasswordDialogOpen:!n.state.isResetUserPasswordDialogOpen})},n.toggleRevokeAdminDialog=function(){n.setState({isRevokeAdminDialogOpen:!n.state.isRevokeAdminDialogOpen})},n.onUserSelected=function(){n.props.onUserSelected(n.props.item)},n.updateStatus=function(e){var t="active"==e;t&&v.default.notify((0,h.gettext)("It may take some time, please wait.")),n.props.updateUser(n.props.item.email,"is_active",t)},n.updateRole=function(e){n.props.updateUser(n.props.item.email,"role",e)},n.updateAdminRole=function(e){n.props.updateAdminRole(n.props.item.email,e)},n.translateAdminRole=function(e){switch(e){case"default_admin":return(0,h.gettext)("Default Admin");case"system_admin":return(0,h.gettext)("System Admin");case"daily_admin":return(0,h.gettext)("Daily Admin");case"audit_admin":return(0,h.gettext)("Audit Admin");default:return e}},n.updateInstitution=function(e){n.props.updateUser(n.props.item.email,"institution",e)},n.translateInstitution=function(e){return e},n.updateQuota=function(e){n.props.updateUser(n.props.item.email,"quota_total",e)},n.deleteUser=function(){v.default.notify((0,h.gettext)("It may take some time, please wait.")),n.props.deleteUser(n.props.item.email)},n.resetPassword=function(){v.default.notify((0,h.gettext)("It may take some time, please wait.")),m.seafileAPI.sysAdminResetUserPassword(n.props.item.email).then(function(e){v.default.success(e.data.reset_tip)}).catch(function(e){var t=p.Utils.getErrorMsg(e);v.default.danger(t)})},n.revokeAdmin=function(){var e=n.props.item;n.props.revokeAdmin(e.email,e.name)},n.getMenuOperations=function(){var e=n.props,t=e.isAdmin,a=e.isLDAPImported,r=e.isSearchResult,o=e.item,i=["Delete"];return(!a||r&&"db"==o.source)&&i.push("Reset Password"),t&&(i=["Revoke Admin"]),i},n.translateOperations=function(e){var t="";switch(e){case"Delete":t=(0,h.gettext)("Delete");break;case"Reset Password":t=(0,h.gettext)("Reset Password");break;case"Revoke Admin":t=(0,h.gettext)("Revoke Admin")}return t},n.onMenuItemClick=function(e){switch(e){case"Delete":n.toggleDeleteUserDialog();break;case"Reset Password":n.toggleResetUserPasswordDialog();break;case"Revoke Admin":n.toggleRevokeAdminDialog()}},n.state={isOpIconShown:!1,highlight:!1,isSetQuotaDialogOpen:!1,isDeleteUserDialogOpen:!1,isResetUserPasswordDialogOpen:!1,isRevokeAdminDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.isAdmin,a=this.state,r=a.isOpIconShown,o=a.isSetQuotaDialogOpen,i=a.isDeleteUserDialogOpen,l=a.isResetUserPasswordDialogOpen,c=a.isRevokeAdminDialogOpen,m='<span class="op-target">'+p.Utils.HTMLescape(t.name)+"</span>",g=(0,h.gettext)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",m),v=(0,h.gettext)("Are you sure you want to reset the password of {placeholder} ?").replace("{placeholder}",m),b=(0,h.gettext)("Are you sure you want to revoke the admin permission of {placeholder} ?").replace("{placeholder}",m);return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",{className:"pl-2"},u.default.createElement("input",{type:"checkbox",className:"vam",onChange:this.onUserSelected,checked:t.isSelected})),u.default.createElement("td",null,u.default.createElement(A.default,{email:t.email,name:t.name}),t.contact_email&&u.default.createElement(s.Fragment,null,u.default.createElement("br",null),t.contact_email),t.org_id&&u.default.createElement(s.Fragment,null,u.default.createElement("br",null),u.default.createElement(f.Link,{to:h.siteRoot+"sys/organizations/"+t.org_id+"/info/"},"(",t.org_name,")"))),u.default.createElement("td",null,u.default.createElement(P.default,{isTextMode:!0,isEditIconShow:r,currentStatus:t.is_active?"active":"inactive",statusOptions:["active","inactive"],onStatusChanged:this.updateStatus})),h.isPro&&u.default.createElement("td",null,n?u.default.createElement(M.default,{isTextMode:!0,isEditIconShow:r,options:F,currentOption:t.admin_role,onOptionChanged:this.updateAdminRole,translateOption:this.translateAdminRole}):u.default.createElement(O.default,{isTextMode:!0,isEditIconShow:r,currentRole:t.role,roleOptions:Z,onRoleChanged:this.updateRole})),u.default.createElement("td",null,p.Utils.bytesToSize(t.quota_usage)+" / "+(t.quota_total>0?p.Utils.bytesToSize(t.quota_total):"--"),u.default.createElement("span",{title:(0,h.gettext)("Edit"),className:"fa fa-pencil-alt attr-action-icon "+(r?"":"invisible"),onClick:this.toggleSetQuotaDialog})),h.multiInstitution&&!n&&u.default.createElement("td",null,u.default.createElement(M.default,{isTextMode:!0,isEditIconShow:r&&B.length>0,options:B,currentOption:t.institution,onOptionChanged:this.updateInstitution,translateOption:this.translateInstitution})),u.default.createElement("td",null,(t.create_time?(0,d.default)(t.create_time).format("YYYY-MM-DD HH:mm"):"--")+" /",u.default.createElement("br",null),""+(t.last_login?(0,d.default)(t.last_login).fromNow():"--")),u.default.createElement("td",null,t.email!=h.username&&r&&u.default.createElement(T.default,{operations:this.getMenuOperations(),translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),o&&u.default.createElement(N.default,{toggle:this.toggleSetQuotaDialog,updateQuota:this.updateQuota}),i&&u.default.createElement(Y.default,{title:(0,h.gettext)("Delete User"),message:g,executeOperation:this.deleteUser,confirmBtnText:(0,h.gettext)("Delete"),toggleDialog:this.toggleDeleteUserDialog}),l&&u.default.createElement(Y.default,{title:(0,h.gettext)("Reset Password"),message:v,executeOperation:this.resetPassword,confirmBtnText:(0,h.gettext)("Reset"),toggleDialog:this.toggleResetUserPasswordDialog}),c&&u.default.createElement(Y.default,{title:(0,h.gettext)("Revoke Admin"),message:b,executeOperation:this.revokeAdmin,confirmBtnText:(0,h.gettext)("Revoke"),toggleDialog:this.toggleRevokeAdminDialog}))}}]),t}(s.Component);t.default=X},991:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(1),p=n(60),m=a(p),h={isTextMode:d.default.bool.isRequired,isEditIconShow:d.default.bool.isRequired,statusOptions:d.default.array.isRequired,currentStatus:d.default.string.isRequired,onStatusChanged:d.default.func.isRequired},g=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.translateStatus=function(e){switch(e){case"active":return(0,f.gettext)("Active");case"inactive":return(0,f.gettext)("Inactive")}},i=n,o(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(m.default,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.statusOptions,currentOption:this.props.currentStatus,onOptionChanged:this.props.onStatusChanged,translateOption:this.translateStatus})}}]),t}(u.default.Component);g.propTypes=h,t.default=g},992:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(16),d=n(3),f=n(4),p=n(1),m=n(5),h=a(m),g=n(33),v=a(g),b=n(8),y=a(b),E=n(63),w=a(E),_=n(13),S=a(_),x=n(132),P=a(x),C=n(356),O=a(C),D=n(273),M=a(D),k=n(2171),T=a(k),L=n(2174),N=a(L),I=n(67),Y=a(I),R=window.sysadmin.pageOptions.enableSysAdminViewRepo,A=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPageList=function(){n.props.getListByPage(n.props.pageInfo.current_page-1)},n.getNextPageList=function(){n.props.getListByPage(n.props.pageInfo.current_page+1)},n.sortByFileCount=function(e){e.preventDefault(),n.props.sortItems("file_count")},n.sortBySize=function(e){e.preventDefault(),n.props.sortItems("size")},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items,o=t.pageInfo,i=t.curPerPage,l=t.sortBy;if(n)return u.default.createElement(y.default,null);if(a)return u.default.createElement("p",{className:"error text-center"},a);var c=u.default.createElement(v.default,null,u.default.createElement("h2",null,(0,p.gettext)("No libraries"))),d=u.default.createElement("span",{className:"fas fa-sort"}),f=u.default.createElement("span",{className:"fas fa-caret-down"}),m=u.default.createElement(s.Fragment,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"5%"}),u.default.createElement("th",{width:"25%"},(0,p.gettext)("Name")),u.default.createElement("th",{width:"15%"},void 0!=l?u.default.createElement(s.Fragment,null,u.default.createElement("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByFileCount},(0,p.gettext)("Files")," ","file_count"==l?f:d)," / ",u.default.createElement("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortBySize},(0,p.gettext)("Size")," ","size"==l?f:d)):(0,p.gettext)("Files")/(0,p.gettext)("Size")),u.default.createElement("th",{width:"32%"},"ID"),u.default.createElement("th",{width:"18%"},(0,p.gettext)("Owner")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(j,{key:n,repo:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDeleteRepo:e.props.onDeleteRepo,onTransferRepo:e.props.onTransferRepo})}))),o&&u.default.createElement(w.default,{gotoPreviousPage:this.getPreviousPageList,gotoNextPage:this.getNextPageList,currentPage:o.current_page,hasNextPage:o.has_next_page,curPerPage:i,resetPerPage:this.props.resetPerPage}));return r.length?m:c}}]),t}(s.Component),j=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDeleteRepo=function(e){f.seafileAPI.sysAdminDeleteRepo(e.id).then(function(t){n.props.onDeleteRepo(e),n.setState({isDeleteDialogOpen:!1,isRepoDeleted:!0});var a=(0,p.gettext)("Successfully deleted {name}.").replace("{name}",e.name);h.default.success(a)}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t),n.setState({isRepoDeleted:!1})})},n.onTransferRepo=function(e){f.seafileAPI.sysAdminTransferRepo(n.props.repo.id,e.email).then(function(e){n.props.onTransferRepo(e.data);var t=(0,p.gettext)("Successfully transferred the library.");h.default.success(t)}).catch(function(e){var t=d.Utils.getErrorMsg(e);h.default.danger(t)}),n.toggleTransferDialog()},n.handleMouseOver=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseOut=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.onMenuItemClick=function(e){switch(e){case"Share":n.toggleShareDialog();break;case"Delete":n.toggleDeleteDialog();break;case"Transfer":n.toggleTransferDialog();break;case"History Setting":n.toggleHistorySettingDialog()}},n.toggleShareDialog=function(){n.setState({isShareDialogOpen:!n.state.isShareDialogOpen})},n.toggleDeleteDialog=function(){n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.toggleTransferDialog=function(){n.setState({isTransferDialogOpen:!n.state.isTransferDialogOpen})},n.toggleHistorySettingDialog=function(){n.setState({isHistorySettingDialogOpen:!n.state.isHistorySettingDialogOpen})},n.renderRepoName=function(){var e=n.props.repo;return e.name?p.isPro&&R&&!e.encrypted?u.default.createElement(c.Link,{to:p.siteRoot+"sys/libraries/"+e.id+"/"},e.name):e.name:"--"},n.translateOperations=function(e){var t="";switch(e){case"Share":t=(0,p.gettext)("Share");break;case"Delete":t=(0,p.gettext)("Delete");break;case"Transfer":t=(0,p.gettext)("Transfer");break;case"History Setting":t=(0,p.gettext)("History Setting")}return t},n.getOperations=function(){var e=n.props.repo,t=["Delete","Transfer"];return e.encrypted||t.push("Share"),t.push("History Setting"),t},n.state={isOpIconShown:!1,highlight:!1,isShareDialogOpen:!1,isDeleteDialogOpen:!1,isTransferDialogOpen:!1,isHistorySettingDialogOpen:!1,isRepoDeleted:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.repo,t=this.state,n=t.isOpIconShown,a=t.isShareDialogOpen,r=t.isDeleteDialogOpen,o=t.isTransferDialogOpen,i=t.isHistorySettingDialogOpen,l=d.Utils.getLibIconUrl(e),f=d.Utils.getLibIconTitle(e),m=e.owner_email.indexOf("@seafile_group"),h=-1!=m,g=void 0;return h&&(g=e.owner_email.substring(0,m)),u.default.createElement(s.Fragment,null,u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut},u.default.createElement("td",null,u.default.createElement("img",{src:l,title:f,alt:f,width:"24"})),u.default.createElement("td",null,this.renderRepoName()),u.default.createElement("td",null,e.file_count+" / "+d.Utils.bytesToSize(e.size)),u.default.createElement("td",null,e.id),u.default.createElement("td",null,h?u.default.createElement(c.Link,{to:p.siteRoot+"sys/departments/"+g+"/"},e.owner_name):u.default.createElement(Y.default,{email:e.owner_email,name:e.owner_name})),u.default.createElement("td",null,!h&&n&&u.default.createElement(P.default,{operations:this.getOperations(),translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),a&&u.default.createElement(S.default,null,u.default.createElement(T.default,{itemName:e.name,itemPath:"/",repoID:e.id,isGroupOwnedRepo:h,repoEncrypted:e.encrypted,enableDirPrivateShare:!0,userPerm:e.permission,toggleDialog:this.toggleShareDialog})),r&&u.default.createElement(S.default,null,u.default.createElement(M.default,{repo:e,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.onDeleteRepo,toggle:this.toggleDeleteDialog})),o&&u.default.createElement(S.default,null,u.default.createElement(O.default,{itemName:e.name,submit:this.onTransferRepo,canTransferToDept:!1,toggleDialog:this.toggleTransferDialog})),i&&u.default.createElement(S.default,null,u.default.createElement(N.default,{repoID:e.id,itemName:e.name,toggleDialog:this.toggleHistorySettingDialog})))}}]),t}(s.Component);t.default=A},993:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(16),d=n(7),f=a(d),p=n(3),m=n(1),h=n(8),g=a(h),v=n(33),b=a(v),y=n(63),E=a(y),w=n(132),_=a(w),S=n(107),x=a(S),P=n(2184),C=a(P),O=n(67),D=a(O),M=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPage=function(){n.props.getListByPage(n.props.pageInfo.current_page-1)},n.getNextPage=function(){n.props.getListByPage(n.props.pageInfo.current_page+1)},n.state={isItemFreezed:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.errorMsg,r=t.items,o=t.pageInfo,i=t.curPerPage;if(n)return u.default.createElement(g.default,null);if(a)return u.default.createElement("p",{className:"error text-center mt-4"},a);var l=u.default.createElement(b.default,null,u.default.createElement("h2",null,(0,m.gettext)("No groups"))),c=u.default.createElement(s.Fragment,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{width:"35%"},(0,m.gettext)("Name")),u.default.createElement("th",{width:"40%"},(0,m.gettext)("Owner")),u.default.createElement("th",{width:"20%"},(0,m.gettext)("Created At")),u.default.createElement("th",{width:"5%"}))),u.default.createElement("tbody",null,r.map(function(t,n){return u.default.createElement(k,{key:n,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteGroup:e.props.deleteGroup,transferGroup:e.props.transferGroup})}))),o&&u.default.createElement(E.default,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:o.current_page,hasNextPage:o.has_next_page,curPerPage:i,resetPerPage:this.props.resetPerPage}));return r.length?c:l}}]),t}(s.Component),k=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.onMenuItemClick=function(e){switch(e){case"Delete":n.toggleDeleteDialog();break;case"Transfer":n.toggleTransferDialog()}},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.toggleTransferDialog=function(e){e&&e.preventDefault(),n.setState({isTransferDialogOpen:!n.state.isTransferDialogOpen})},n.deleteGroup=function(){n.props.deleteGroup(n.props.item.id)},n.transferGroup=function(e){n.props.transferGroup(n.props.item.id,e)},n.translateOperations=function(e){var t="";switch(e){case"Delete":t=(0,m.gettext)("Delete");break;case"Transfer":t=(0,m.gettext)("Transfer")}return t},n.state={isOpIconShown:!1,highlight:!1,isDeleteDialogOpen:!1,isTransferDialogOpen:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=this.state,n=t.isOpIconShown,a=t.isDeleteDialogOpen,r=t.isTransferDialogOpen,o='<span class="op-target">'+p.Utils.HTMLescape(e.name)+"</span>",i=(0,m.gettext)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",o),l=0==e.parent_group_id?m.siteRoot+"sys/groups/"+e.id+"/libraries/":m.siteRoot+"sys/departments/"+e.id+"/";return u.default.createElement(s.Fragment,null,u.default.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.default.createElement("td",null,u.default.createElement(c.Link,{to:l},e.name)),u.default.createElement("td",null,"system admin"==e.owner?"--":u.default.createElement(D.default,{email:e.owner,name:e.owner_name})),u.default.createElement("td",null,u.default.createElement("span",{title:(0,f.default)(e.created_at).format("llll")},(0,f.default)(e.created_at).fromNow())),u.default.createElement("td",null,n&&"system admin"!=e.owner&&u.default.createElement(_.default,{operations:["Delete","Transfer"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),a&&u.default.createElement(x.default,{title:(0,m.gettext)("Delete Group"),message:i,executeOperation:this.deleteGroup,confirmBtnText:(0,m.gettext)("Delete"),toggleDialog:this.toggleDeleteDialog}),r&&u.default.createElement(C.default,{groupName:e.name,transferGroup:this.transferGroup,toggleDialog:this.toggleTransferDialog}))}}]),t}(s.Component);t.default=M},994:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(1),m={currentItem:d.default.string.isRequired,groupID:d.default.string.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navItems=[{name:"repos",urlPart:"groups/"+n.props.groupID+"/libraries",text:(0,p.gettext)("Libraries")},{name:"members",urlPart:"groups/"+n.props.groupID+"/members",text:(0,p.gettext)("Members")}],n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.groupName,n=e.currentItem;return u.default.createElement("div",null,u.default.createElement("div",{className:"cur-view-path"},u.default.createElement("h3",{className:"sf-heading"},u.default.createElement(f.Link,{to:p.siteRoot+"sys/groups/"},(0,p.gettext)("Groups"))," / ",t)),u.default.createElement("ul",{className:"nav border-bottom mx-4"},this.navItems.map(function(e,t){return u.default.createElement("li",{className:"nav-item mr-2",key:t},u.default.createElement(f.Link,{to:p.siteRoot+"sys/"+e.urlPart+"/",className:"nav-link "+(n==e.name?" active":"")},e.text))})))}}]),t}(u.default.Component);h.propTypes=m,t.default=h},995:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(4),h={groupID:d.default.string,parentGroupID:d.default.string,toggle:d.default.func.isRequired,onDepartChanged:d.default.func.isRequired},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSubmit=function(){if(n.validateName()){var e=-1;n.props.parentGroupID&&(e=n.props.parentGroupID),m.seafileAPI.sysAdminAddNewDepartment(e,n.state.departName.trim()).then(function(e){n.props.toggle(),n.props.onDepartChanged()}).catch(function(e){var t=(0,p.gettext)(e.response.data.error_msg);n.setState({errMessage:t})})}},n.validateName=function(){var e="";return!!n.state.departName.trim().length||(e=(0,p.gettext)("Name is required"),n.setState({errMessage:e}),!1)},n.handleChange=function(e){n.setState({departName:e.target.value})},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.state={departName:"",errMessage:""},n.newInput=u.default.createRef(),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this,t=this.props.parentGroupID?(0,p.gettext)("New Sub-department"):(0,p.gettext)("New Department");return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.props.toggle},u.default.createElement(f.ModalHeader,{toggle:this.props.toggle},t),u.default.createElement(f.ModalBody,null,u.default.createElement(f.Form,null,u.default.createElement(f.FormGroup,null,u.default.createElement(f.Label,{for:"departName"},(0,p.gettext)("Name")),u.default.createElement(f.Input,{id:"departName",onKeyPress:this.handleKeyPress,value:this.state.departName,onChange:this.handleChange,innerRef:function(t){e.newInput=t}}))),this.state.errMessage&&u.default.createElement("p",{className:"error"},this.state.errMessage)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"primary",onClick:this.handleSubmit},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);g.propTypes=h,t.default=g},996:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(4),h=n(3),g=n(5),v=a(g),b={groupName:d.default.string,groupID:d.default.number.isRequired,toggle:d.default.func.isRequired,onDepartChanged:d.default.func.isRequired},y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.deleteDepart=function(){n.props.toggle(),m.seafileAPI.sysAdminDeleteDepartment(n.props.groupID).then(function(e){n.props.onDepartChanged()}).catch(function(e){var t=h.Utils.getErrorMsg(e);v.default.danger(t)})},n}return i(t,e),l(t,[{key:"render",value:function(){var e=(0,p.gettext)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+h.Utils.HTMLescape(this.props.groupName)+"</span>"),u.default.createElement(f.Modal,{isOpen:!0,toggle:this.props.toggle},u.default.createElement(f.ModalHeader,{toggle:this.props.toggle},(0,p.gettext)("Delete Department")),u.default.createElement(f.ModalBody,null,u.default.createElement("p",{dangerouslySetInnerHTML:{__html:e}})),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"secondary",onClick:this.props.toggle},(0,p.gettext)("Cancel")),u.default.createElement(f.Button,{color:"primary",onClick:this.deleteDepart},(0,p.gettext)("Delete"))))}}]),t}(u.default.Component);y.propTypes=b,t.default=y},997:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(6),p=n(1),m=n(4),h=n(3),g=n(5),v=a(g),b={toggle:d.default.func.isRequired,groupID:d.default.number.isRequired,onDepartChanged:d.default.func.isRequired},y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setGroupQuota=function(){var e=/^[1-9]\d*$/im,t=n.state.quota;if(t.length&&e.test(t)||-2==t){n.setState({errMessage:""});var a=-2==n.state.quota?n.state.quota:1e6*n.state.quota;m.seafileAPI.sysAdminUpdateDepartmentQuota(n.props.groupID,a).then(function(e){n.props.toggle(),n.props.onDepartChanged()}).catch(function(e){var t=h.Utils.getErrorMsg(e);v.default.danger(t)})}else{var r=(0,p.gettext)("Quota is invalid.");n.setState({errMessage:r})}},n.handleChange=function(e){var t=e.target.value.trim();n.setState({quota:t})},n.handleKeyPress=function(e){"Enter"===e.key&&(n.setGroupQuota(),e.preventDefault())},n.state={quota:"",errMessage:""},n.newInput=u.default.createRef(),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return u.default.createElement(f.Modal,{isOpen:!0,toggle:this.props.toggle},u.default.createElement(f.ModalHeader,{toggle:this.props.toggle},(0,p.gettext)("Set Quota")),u.default.createElement(f.ModalBody,null,u.default.createElement(f.InputGroup,null,u.default.createElement(f.Input,{onKeyPress:this.handleKeyPress,value:this.state.quota,onChange:this.handleChange,innerRef:function(t){e.newInput=t}}),u.default.createElement(f.InputGroupAddon,{addonType:"append"},"MB")),u.default.createElement("p",{className:"tip"},u.default.createElement("br",null),u.default.createElement("span",null,(0,p.gettext)("An integer that is greater than 0 or equal to -2.")),u.default.createElement("br",null),u.default.createElement("span",null,(0,p.gettext)("Tip: -2 means no limit."))),this.state.errMessage&&u.default.createElement("p",{className:"error"},this.state.errMessage)),u.default.createElement(f.ModalFooter,null,u.default.createElement(f.Button,{color:"primary",onClick:this.setGroupQuota},(0,p.gettext)("Submit"))))}}]),t}(u.default.Component);y.propTypes=b,t.default=y},998:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(7),p=a(f),m=n(16),h=n(3),g=n(1),v={group:d.default.object.isRequired,showSetGroupQuotaDialog:d.default.func.isRequired,showDeleteDepartDialog:d.default.func.isRequired},b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.setState({highlight:!0})},n.onMouseLeave=function(){n.setState({highlight:!1})},n.state={highlight:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.group,t=this.state.highlight,n=g.siteRoot+"sys/departments/"+e.id+"/";return u.default.createElement("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.default.createElement("td",null,u.default.createElement(m.Link,{to:n},e.name)),u.default.createElement("td",null,(0,p.default)(e.created_at).fromNow()),u.default.createElement("td",{onClick:this.props.showSetGroupQuotaDialog.bind(this,e.id)},h.Utils.bytesToSize(e.quota)," ",u.default.createElement("span",{title:"Edit Quota",className:"fa fa-pencil-alt attr-action-icon "+(t?"":"vh")})),u.default.createElement("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteDepartDialog.bind(this,e)},u.default.createElement("span",{className:"sf2-icon-delete action-icon  "+(t?"":"vh"),title:"Delete"})))}}]),t}(u.default.Component);b.propTypes=v,t.default=b},999:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(16),p=n(1),m={currentItem:d.default.string.isRequired},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navItems=[{name:"shareLinks",urlPart:"share-links",text:(0,p.gettext)("Share Links")},{name:"uploadLinks",urlPart:"upload-links",text:(0,p.gettext)("Upload Links")}],n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.currentItem;return u.default.createElement("div",{className:"cur-view-path tab-nav-container"},u.default.createElement("ul",{className:"nav"},this.navItems.map(function(t,n){return u.default.createElement("li",{className:"nav-item",key:n},u.default.createElement(f.Link,{to:p.siteRoot+"sys/"+t.urlPart+"/",className:"nav-link"+(e==t.name?" active":"")},t.text))})))}}]),t}(u.default.Component);h.propTypes=m,t.default=h}},[2112]);